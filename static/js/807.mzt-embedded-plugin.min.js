(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[807],{1035:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n(23),a=n(0),c=n.n(a),i=n(39),o=n(2262),l=c.a.createContext({activeCurrency:null,currencies:[],onChangeCurrency:function(e){},extractPrice:function(e,t){}}),s=(l.Consumer,function(e){return function(t){var n=Object(a.useState)(),s=Object(r.a)(n,2),u=s[0],d=s[1],m=Object(i.useSelector)((function(e){return Object(o.f)(e)}));return Object(a.useEffect)((function(){d((function(e){return function(e,t){return e?t.find((function(t){return t.code===e.code})):(null===t||void 0===t?void 0:t.length)?t[0]:null}(e,m)}))}),[m]),c.a.createElement(l.Provider,{value:{activeCurrency:u,currencies:m,onChangeCurrency:function(e){return function(){d(e)}},extractPrice:function(e,t){var n;return u?null===e||void 0===e||null===(n=e[u.type])||void 0===n?void 0:n[t]:null===e||void 0===e?void 0:e[t]}}},c.a.createElement(e,t))}})},2101:function(e,t,n){"use strict";n.r(t),n.d(t,"ExcursionServices",(function(){return ge}));var r=n(3),a=n(23),c=n(139),i=n(258),o=n(2107),l=n(2232),s=n(2215),u=n(0),d=n.n(u),m=n(17),f=n(39),v=n(75),b=n(8),p=n(1035),E=n(33),h=function(e){return e.basketExtra.extra},x=Object(E.a)(h,(function(e){return e.map((function(e){return e.code}))})),g=Object(E.a)(h,(function(e){return e})),O=Object(E.a)((function(e){return e.basketExtra.selectedExtra}),(function(e){return e})),y=Object(E.a)([h,function(e){return e.basketExtra.filter}],(function(e,t){return t.length?e.filter((function(e){return t.includes(e.code)})):e})),j=function(e){return e.basketExtra.excursions},k={VIP:"https://cms.mouzenidis.com/userfiles/onlinenext/services/vip.jpg",RealEstate:"https://cms.mouzenidis.com/userfiles/onlinenext/services/realestate.jpg",Extra:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg",Dinner:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg"},N=Object(E.a)([g,j],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];if(t.length){var r,a=t.reduce((function(e,t){var n,r,a;return(null===e||void 0===e||null===(n=e.tour)||void 0===n?void 0:n.sum)>(null===(r=t.minPrice)||void 0===r||null===(a=r.tour)||void 0===a?void 0:a.sum)?t.minPrice:e}),t[0].minPrice);n.push({title:"Excursions",type:"Excursions",logo:"https://cms.mouzenidis.com/userfiles/onlinenext/services/excursions.jpg",minPrice:a,hasDiffrentPrice:0!==(null===a||void 0===a||null===(r=a.tour)||void 0===r?void 0:r.sum)||t.some((function(e){var t,n,r;return((null===(t=e.minPrice)||void 0===t||null===(n=t.tour)||void 0===n?void 0:n.sum)||0)>((null===a||void 0===a||null===(r=a.tour)||void 0===r?void 0:r.sum)||0)}))})}return(null===e||void 0===e?void 0:e.length)&&(n=n.concat(e.map((function(e){var t,n,r=e.services.reduce((function(e,t){var n=t.variants.reduce((function(e,t){var n,r;return e.concat([null===(n=t.price)||void 0===n||null===(r=n.tour)||void 0===r?void 0:r.sum])}),[]);return e.concat(n)}),[]);return{title:e.name,type:"Extra",logo:k[e.code],minPrice:e.minPrice,code:e.code,hasDiffrentPrice:0!==(null===(t=e.minPrice)||void 0===t||null===(n=t.tour)||void 0===n?void 0:n.sum)||r.some((function(t){var n,r;return t<(null===(n=e.minPrice)||void 0===n||null===(r=n.tour)||void 0===r?void 0:r.sum)}))}})))),n})),C=Object(E.a)(j,(function(e){return e})),I=Object(E.a)([function(e){return e.basketExtra.selectedExcursions},O],(function(e,t){var n=e.map((function(e){return Object(r.a)({},e,{type:"Excursion",tourists:e.touristIds||[]})}));return t.map((function(e){return Object(r.a)({},e,{title:e.name,type:"Extra",tourists:e.tourists||[]})})).concat(n)})),_=n(340),w=n(21),S=n(2233),T=n(2222),D=n(2223),P=n(2224),F=n(106),M=n(2225),R=n(2226),L=n(155),A=n(1033),q=(n(2313),[{label:"VIP service",key:"VIP"},{label:"Real Estate",key:"RealEstate"},{label:"Medical services",key:"Medicine"},{label:"Flowers in the room",key:"Flowers"},{label:"Extra",key:"Extra"},{label:"Dinner",key:"Dinner"}]),z=function(e){var t=e.service,n=e.tourists,r=e.onCheck,a=e.isSelected,o=Object(m.c)(i.b).t,l=Object(L.a)((function(e,t){var r=n.find((function(t){return t.id===e}));return r?"".concat(r.lastName?r.lastName:"".concat(o("Tourist")," ").concat(++t)," ").concat(r.firstName?r.firstName:""):"none"}));return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"services-result-item-service-heading"},t.name),d.a.createElement("div",{className:"services-result-item-body"},d.a.createElement("div",{className:"services-result-item-image"},d.a.createElement("img",{src:t.photoUrl?A.c+t.photoUrl+"?w=220&h=80&mode=crop&quality=60":"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"services-result-item-tourists"},t.variants.map((function(e,t){return d.a.createElement(U,{key:t,label:l(e.touristId,t),variant:e,onChange:r,checked:a(e.serviceId)})})))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"services-result-item-details"},d.a.createElement("span",{className:"link"},o("Description of the service")," ",d.a.createElement(c.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"service-details"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.descriptionHtml},className:"service-details-description"}))))},U=function(e){var t=e.variant,n=e.checked,r=e.onChange,a=e.label,c=Object(u.useContext)(p.a),i=c.extractPrice,o=c.activeCurrency,s=i(t.price,"sum");return d.a.createElement("div",{className:"selected-service-tourist"},d.a.createElement("div",{className:"selected-service-tourist-name"},d.a.createElement(M.a,{label:a,checked:n,defaultChecked:n,onChange:function(){r({serviceId:t.serviceId,price:t.price})}})),d.a.createElement("div",{className:"selected-service-name"},t.name),d.a.createElement("div",{className:"selected-service-price"},s>0?"+".concat(Object(_.b)(s)):Object(_.b)(s)," ",d.a.createElement(l.a,{currencyCode:o.code})))},H=Object(f.connect)((function(e){return{fetching:e.basketExtra.fetching,extra:y(e),extraServiceTypes:x(e),filter:e.basketExtra.filter}}),(function(e){return{actions:Object(v.bindActionCreators)(b.basketExtraActions,e)}}))((function(e){var t=e.filter,n=e.actions,c=e.onClose,o=e.fetching,f=e.extra,v=e.extraServiceTypes,b=e.tourists,E=Object(m.c)(i.b).t,h=Object(u.useContext)(p.a),x=h.extractPrice,g=h.activeCurrency,O=Object(u.useState)({selectedExtra:[],totalSum:0}),y=Object(a.a)(O,2),j=y[0],k=y[1],N=function(e){return t.includes(e)},C=function(e){return j.selectedExtra.some((function(t){return t.serviceId===e}))},I=function(e){k((function(t){if(C(e.serviceId)){var n=t.selectedExtra.filter((function(t){return t.serviceId!==e.serviceId}));return Object(r.a)({},t,{selectedExtra:n,totalSum:n.reduce((function(e,t){return e+x(t.price,"sum")}),0)})}var a=[].concat(Object(w.a)(t.selectedExtra),[e]);return Object(r.a)({},t,{selectedExtra:a,totalSum:a.reduce((function(e,t){return e+x(t.price,"sum")}),0)})}))};return d.a.createElement("div",{className:"add-service"},d.a.createElement(S.a,{scrollable:!0,onClose:c,modalTitle:E("Additional services"),modalFooter:d.a.createElement(T.a,null,d.a.createElement(D.a,null,d.a.createElement(P.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"extra-common-sum"},d.a.createElement("div",null,"".concat(E("Total amount")," ").concat(j.totalSum),d.a.createElement(l.a,{currencyCode:g.code}))),d.a.createElement(F.c,{color:"dark",plain:!0,onClick:c},E("Cancel"))," ",d.a.createElement(F.c,{color:"success",onClick:function(){j.selectedExtra&&j.selectedExtra.length&&n.updateSelectedExtra(j.selectedExtra.map((function(e){return e.serviceId}))),c()}},E("Save"))))))},d.a.createElement(T.a,null,d.a.createElement(D.a,null,d.a.createElement(P.a,{lg:3},d.a.createElement("div",{className:"services-filters"},d.a.createElement("div",{className:"services-filter"},d.a.createElement("div",{className:"services-filter-title"},E("Service Categories")),d.a.createElement("div",{className:"services-filter-body"},q.filter((function(e){return v.includes(e.key)})).map((function(e){return d.a.createElement("div",{key:e.key},d.a.createElement(M.a,{label:E(e.label),onChange:(r=e.key,function(){var e=[];e=t.includes(r)?Object(w.a)(t.filter((function(e){return e!==r}))):[].concat(Object(w.a)(t),[r]),n.changeExtraFilter(e)}),checked:N(e.key)}));var r})))))),d.a.createElement(P.a,{lg:9},d.a.createElement("div",{className:"services-results-heading"},E("Additional services")),d.a.createElement("div",{className:"services-results"},f.map((function(e,t){return d.a.createElement("div",{className:"services-result-item",key:t},d.a.createElement("div",{className:"services-result-item-heading"},e.name),e.services.map((function(e,t){return d.a.createElement(z,{key:t,service:e,tourists:b,onCheck:I,isSelected:C})})))})))))),o&&d.a.createElement(s.a,null)))})),V=n(12),Y=n.n(V),G=(n(1042),n(2098)),B=n(2216),K=n(268),X=n(788),W=n(2334),J=n(140),Q=function(e){var t=e.defaultChecked,n=e.defaultDate,c=e.onSelect,i=e.variant,o=e.onDelete,s=e.availableDates,m=e.label,f=Object(J.e)(),v=Object(u.useRef)(null),E=Object(u.useState)({checked:t,date:t?n:void 0}),h=Object(a.a)(E,2),x=h[0],g=h[1];Object(u.useEffect)((function(){g((function(e){return Object(r.a)({},e,{checked:t})}))}),[t]),Object(u.useEffect)((function(){t&&g((function(e){return Object(r.a)({},e,{date:n})}))}),[n]);var O=function(e){c({serviceId:i.serviceId,date:e,touristId:i.touristId,price:i.price,type:b.EXCURSION_TYPES.GROUP})},y=Object(u.useContext)(p.a),j=y.extractPrice,k=y.activeCurrency;return d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-name"},d.a.createElement(M.a,{label:m,checked:x.checked,onChange:function(){var e=x.date,t=!x.checked;(g((function(e){return Object(r.a)({},e,{checked:t})})),!t||n||e)||v.current.setOpen(!0);t&&e&&O(e),t&&!e&&n?(g((function(e){return Object(r.a)({},e,{date:n})})),O(n)):!t&&e&&o(i.serviceId)}})),d.a.createElement(W.a,{className:"selected-excursion-date",ref:v,format:f.dateFormat,clearable:!1,year:!0,placeholder:f.dateFormat,value:x.date,mask:f.dateFormatMask,onChange:function(e){g((function(t){return Object(r.a)({},t,{date:e})})),x.checked&&O(e)},includeDates:s?s.map((function(e){return Y()(e)})):void 0}),d.a.createElement("div",{className:"selected-excursion-price"},"+".concat(Object(_.b)(j(i.price,"sum")))," ",d.a.createElement(l.a,{currencyCode:k.code})))},Z=n(264),$=n(267),ee=n(2105),te=n(72),ne=n(79),re=n.n(ne),ae=n(191),ce=n.n(ae),ie=n(119),oe=function(e){var t=e.type,n=e.selectedLength,r=e.onClearAll,a=e.onSelectedOptionsOpened,i=e.onSelectedOptionsClosed,o=e.tree,l=Object(u.useContext)(ie.b);return d.a.createElement(u.Fragment,null,t===te.b&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner ".concat(n>0?"active":"grey").trim()},n>0&&d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(c.a,{className:"icon",icon:"times",onClick:r})),n>0?d.a.createElement(re.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:a,onClose:i,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ce.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},o)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},l.selected," ",n)))})):d.a.createElement("span",{className:"small m-l-5"},l.selectedAll))),t===te.a&&n>1&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner active"},d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(c.a,{className:"icon",icon:"times",onClick:r})),d.a.createElement(re.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:a,onClose:i,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ce.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},o)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},l.selected," ",n)))})))))},le=n(269),se=n(266),ue=n(2229),de=n(2235),me=n(98),fe=(n(1118),function(e){var t=e.type,n=void 0===t?te.a:t,c=e.valueKey,i=void 0===c?"id":c,o=e.labelKey,l=void 0===o?"name":o,s=e.searchable,m=void 0===s||s,f=e.selectable,v=void 0===f||f,b=e.loading,p=void 0!==b&&b,E=e.width,h=void 0===E?Object(X.e)()?"100%":220:E,x=e.height,g=void 0===x?Object(X.e)()?450:202:x,O=e.rowHeight,y=void 0===O?24:O,j=e.clearable,k=void 0===j||j,N=e.options,C=e.selected,I=e.inputLabelRenderer,_=e.label,S=e.className,T=e.subLabel,D=e.placeholderText,P=e.treeClassName,F=e.labelRenderer,M=e.tooltipRenderer,R=e.onSelect,L=Object(ue.b)().translateNode,A=Object(u.useContext)(ie.b),q=Object(se.a)(N),z=Object(u.useState)({filteredOptions:N,selectedOptions:Object(me.d)(C,q,i),searchFocused:!1,inputLabel:Object(me.b)(Object(me.d)(C,q,i),I,l,A),searchTerm:"",selectedNodesOpened:!1,dropdownOpened:!1}),U=Object(a.a)(z,2),H=U[0],V=U[1],Y=Object(se.b)(H.selectedOptions,N,i);Object(u.useEffect)((function(){V((function(e){return Object(r.a)({},e,{inputLabel:Object(me.b)(Object(me.d)(C,q,i),I,l,A),selectedOptions:Object(me.d)(C,q,i)})}))}),[C,q]),Object(u.useEffect)((function(){V((function(e){return Object(r.a)({},e,{filteredOptions:Object(me.a)(q,N,e.searchTerm,l,i,L)})}))}),[N]);var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.searchTerm;V((function(t){return Object(r.a)({},t,{filteredOptions:Object(me.a)(q,N,e,l,i,L)})}))},B=function(){V((function(e){return Object(r.a)({},e,{selectedOptions:[],inputLabel:"",searchTerm:""})})),R([])},K=function(e){var t=e.target.value.toLowerCase();V((function(e){return Object(r.a)({},e,{searchTerm:t})})),G(t)},W=function(e){var t;H.dropdownOpened&&e.stopPropagation(),(null===(t=H.selectedOptions)||void 0===t?void 0:t.length)>0&&B()},J=function(e){V((function(t){var n=[],a=null;if(e.children&&e.children.length>0&&(a=Object(X.c)(e.children)),t.selectedOptions.some((function(t){return t[i]===e[i]}))){var c=t.selectedOptions.filter((function(t){return t[i]!==e[i]}));a&&(c=c.filter((function(e){return a&&-1===a.findIndex((function(t){return e[i]===t[i]}))}))),n=Object(me.c)(c,q,i);var o=Object(me.c)([e],q,i);return o&&o.length>0&&(c=c.filter((function(e){return o.some((function(t){return t[i]!==e[i]}))}))),c=[].concat(Object(w.a)(c.filter((function(e){return!n.some((function(t){return t[i]===e[i]}))}))),Object(w.a)(n)),R(c.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(r.a)({},t,{selectedOptions:c,inputLabel:Object(me.b)(c,I,l,A)})}n=Object(me.c)([].concat(Object(w.a)(t.selectedOptions),[e]),q,i);var s=t.selectedOptions.concat([Object(r.a)({},e,{_selected:te.e})]);return a&&(s=s.concat(a.map((function(e){return Object(r.a)({},e,{_selected:te.e})})))),s=[].concat(Object(w.a)(s.filter((function(e){return!n.some((function(t){return t[i]===e[i]}))}))),Object(w.a)(n)),R(s.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(r.a)({},t,{selectedOptions:s,inputLabel:Object(me.b)(s,I,l,A)})}))};return d.a.createElement("div",{className:"multiselect ".concat(S||"").trim()},n===te.b?d.a.createElement(u.Fragment,null,m&&d.a.createElement($.a,{placeholder:D,searchTerm:H.searchTerm,clearable:!!k&&!!H.inputLabel,onClearInput:W,inputLabel:H.inputLabel,onChange:K,onSearch:G}),T&&T,v&&d.a.createElement(oe,{type:n,selectedLength:H.selectedOptions.length,onClearAll:B,onSelectedOptionsOpened:function(){V((function(e){return Object(r.a)({},e,{selectedNodesOpened:!0})}))},onSelectedOptionsClosed:function(){V((function(e){return Object(r.a)({},e,{selectedNodesOpened:!1})}))},tree:d.a.createElement(le.a,{options:Y,selected:H.selectedOptions,onSelect:J,rowHeight:y,loading:p,valueKey:i,labelKey:l,type:n,height:g,className:P,labelRenderer:F,tooltipRenderer:M})}),d.a.createElement(le.a,{options:H.filteredOptions,selected:H.selectedOptions,onSelect:J,rowHeight:y,loading:p,valueKey:i,labelKey:l,type:n,height:g,className:P,labelRenderer:F,tooltipRenderer:M})):d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"multiselect-label"},_&&d.a.createElement(Z.a,null,_),T&&T),d.a.createElement(de.a,{onClose:function(){V((function(e){return Object(r.a)({},e,{dropdownOpened:!1})}))},onOpen:function(){V((function(e){return Object(r.a)({},e,{dropdownOpened:!0})}))},allowClosing:!H.selectedNodesOpened,label:_&&_,style:{padding:"4px 0 4px 0",width:h},trigger:d.a.createElement($.a,{placeholder:D,searchTerm:H.searchTerm,clearable:!!k&&!!H.inputLabel,onClearInput:W,inputLabel:H.inputLabel,onChange:K,onSearch:G})},d.a.createElement(le.a,{options:H.filteredOptions,selected:H.selectedOptions,onSelect:J,rowHeight:y,loading:p,valueKey:i,labelKey:l,type:n,height:g,className:P,labelRenderer:F,tooltipRenderer:M}))))}),ve=function(e){var t=e.variant,n=e.availableDates,c=e.onDelete,o=e.tourists,s=e.onChange,f=Object(m.c)(i.b).t,v=Object(J.e)(),E=Object(u.useMemo)((function(){return o.map((function(e,t){return{id:e.id,name:e.firstName||e.lastName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(f("Tourist"))}}))}),[o]),h=Object(u.useState)({selectedTouristIds:[],date:void 0}),x=Object(a.a)(h,2),g=x[0],O=x[1],y=function(e,n){e.length?s&&n&&s({serviceId:t.serviceId,type:b.EXCURSION_TYPES.INDIVIDUAL,price:t.price,date:n,touristIds:e}):c(t.serviceId)},j=Object(u.useContext)(p.a),k=j.extractPrice,N=j.activeCurrency;return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"selected-excursion-tourist-individual"},d.a.createElement("div",{className:"selected-excursion-price individual"})),d.a.createElement("div",{className:"selected-excursion-tourist-individual-body"},d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-date"},d.a.createElement(W.a,{format:v.dateFormat,clearable:!1,Label:f("Excursion date"),year:!0,placeholder:v.dateFormat,value:g.date,mask:v.dateFormatMask,onChange:function(e){O((function(t){return Object(r.a)({},t,{date:e})})),y(g.selectedTouristIds,e)},includeDates:n?n.map((function(e){return Y()(e)})):void 0})),d.a.createElement("div",{className:"selected-excursion-tourist-count"},d.a.createElement(Z.a,null,f("Select tourist")),d.a.createElement(fe,{options:E,selected:E.filter((function(e){return g.selectedTouristIds.includes(e.id)})),selectable:!1,onSelect:function(e){var t=e.map((function(e){return e.id}));O((function(e){return Object(r.a)({},e,{selectedTouristIds:t})})),y(t,g.date)}})),d.a.createElement("div",{className:"selected-excursion-tourist-price"},d.a.createElement(Z.a,{className:"invisible"},"Currency"),d.a.createElement("div",{className:"selected-excursion-tourist-count"},"+".concat(Object(_.b)(k(t.price,"sum")))," ",d.a.createElement(l.a,{currencyCode:N.code}))))))},be=function(e){var t=e.excursion,n=e.tourists,r=void 0===n?[]:n,o=e.onSelect,l=e.onDelete,s=e.isSelected,f=e.date,v=Object(m.c)(i.b).t,p=Object(u.useState)((function(){var e=null===t||void 0===t?void 0:t.prices,n=Object(a.a)(e,1)[0];return{selectedType:null===n||void 0===n?void 0:n.name,selectedPrice:n}})),E=Object(a.a)(p,2),h=E[0],x=E[1],g=Object(u.useMemo)((function(){var e=(null===t||void 0===t?void 0:t.prices.map((function(e){return{label:e.name,value:e.name}})))||[];if(t.type===b.EXCURSION_TYPES.INDIVIDUAL){var n=r.length;e=e.filter((function(e){return e.variants.some((function(e){return e.minTourists<=n}))}))}return e}),[t,r]),O=Object(L.a)((function(e,t){var n=function(e){return r.find((function(t){return t.id===e}))}(e);return n&&(n.lastName||n.firstName)?"".concat(n.lastName," ").concat(n.firstName):"".concat(++t,". ").concat(v("Tourist"))})),y={history:!1,galleryUID:t.id},j=t.gallery.map((function(e){return{src:A.c+e.url,thumbnail:"".concat(A.c).concat(e.thumbnail,"?&mode=crop"),w:1200,h:900}}));return d.a.createElement("div",{className:"excursions-result-item"},d.a.createElement("div",{className:"excursions-result-item-heading"},"".concat(t.title," ").concat(t.durationCategory?"(".concat(v(Object(X.b)(t.durationCategory)),")"):"")),d.a.createElement("div",{className:"excursions-result-item-body"},d.a.createElement("div",{className:"excursions-result-item-image"},d.a.createElement("img",{src:t.image?A.c+t.image:"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"excursions-result-item-tourists"},d.a.createElement(G.b,{options:g,value:h.selectedType,onChange:function(e){var n;x({selectedType:e,selectedPrice:null===t||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.find((function(t){return t.name===e}))})},clearable:!1}),h.selectedPrice&&d.a.createElement("div",{className:"selected-excursion-tourists-tab"},h.selectedPrice.priceFor===b.EXCURSION_TYPES.GROUP&&h.selectedPrice.variants.map((function(e,n){return d.a.createElement(Q,{key:n,label:O(e.touristId,n),variant:e,onSelect:o,onDelete:l,availableDates:t.availableDates,defaultChecked:s(e.serviceId),defaultDate:f(t.id,e.serviceId)})})),h.selectedPrice.priceFor===b.EXCURSION_TYPES.INDIVIDUAL&&h.selectedPrice.variants.map((function(e,n){return d.a.createElement(ve,{key:n,variant:e,availableDates:t.availableDates,onChange:o,tourists:r,onDelete:l})}))))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"excursions-result-item-details"},d.a.createElement("span",{className:"link"},v("Description of the excursion")," ",d.a.createElement(c.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"excursion-details"},d.a.createElement(B.b,{destroyInactive:!0},d.a.createElement(B.a,{title:v("Description of the excursion"),id:"about-excursion"},d.a.createElement("div",{className:"excursion-details-description",dangerouslySetInnerHTML:{__html:t.description}})),d.a.createElement(B.a,{title:v("Photo Gallery"),id:"excursion-gallery"},d.a.createElement("div",{className:"excursion-details-photos"},d.a.createElement("div",{className:"photo-grid"},d.a.createElement(K.PhotoSwipeGallery,{items:j,options:y,thumbnailContent:function(e){return d.a.createElement("img",{src:e.thumbnail,width:120,height:90,alt:""})}}))))))))},pe=(n(2312),Object(f.connect)((function(e){return{excursions:C(e)}}))((function(e){var t=e.onClose,n=e.onSave,c=e.tourists,o=e.excursions,s=void 0===o?[]:o,f=Object(m.c)(i.b).t,v=Object(u.useContext)(p.a),E=v.extractPrice,h=v.activeCurrency,x=Object(u.useState)((function(){return{dailyFilter:[],durationFilter:[],excursions:s,selectedExcursions:[]}})),g=Object(a.a)(x,2),O=g[0],y=g[1];Object(u.useEffect)((function(){A()}),[O.dailyFilter,O.durationFilter]);var j=function(e){return O.selectedExcursions.some((function(t){return t.serviceId===e}))},k=Object(u.useMemo)((function(){return O.selectedExcursions.reduce((function(e,t){return e+E(t.price,"sum")}),0)}),[O.selectedExcursions,h]),N=function(e){y((function(t){var n=[];return j(e.serviceId)?(n=t.selectedExcursions.filter((function(t){return t.serviceId!==e.serviceId})),e.type===b.EXCURSION_TYPES.INDIVIDUAL&&e.touristIds.length&&n.push(e)):n=[].concat(Object(w.a)(t.selectedExcursions),[e]),Object(r.a)({},t,{selectedExcursions:n})}))},C=function(e){y((function(t){var n=t.selectedExcursions.filter((function(t){return t.serviceId!==e}));return Object(r.a)({},t,{selectedExcursions:n})}))},I=function(e){return O.dailyFilter.includes(e)},_=function(e){return O.durationFilter.includes(e)},R=function(e){return function(){y((function(t){var n=[];return n=t.durationFilter.includes(e)?t.durationFilter.filter((function(t){return t!==e})):[].concat(Object(w.a)(t.durationFilter),[e]),Object(r.a)({},t,{durationFilter:n})}))}},L=function(e){return function(){y((function(t){var n=[];return n=t.dailyFilter.includes(e)?t.dailyFilter.filter((function(t){return t!==e})):[].concat(Object(w.a)(t.dailyFilter),[e]),Object(r.a)({},t,{dailyFilter:n})}))}},A=function(){var e=O.dailyFilter,t=O.durationFilter,n=s;e.length>0&&(n=n.filter((function(t){return t.availableDates.some((function(t){return e.includes(Y()(t).locale("en").format("dddd"))}))}))),t.length>0&&(n=n.filter((function(e){return t.includes(e.durationCategory)}))),y((function(e){return Object(r.a)({},e,{excursions:n})}))},q=function(e,t){return function(e){var t=O.selectedExcursions.find((function(t){return t.serviceId===e}));return null===t||void 0===t?void 0:t.date}(t)||function(e){var t=O.selectedExcursions.find((function(t){return t.excursionId===e&&t.type===b.EXCURSION_TYPES.GROUP}));return null===t||void 0===t?void 0:t.date}(e)};return d.a.createElement(S.a,{scrollable:!0,onClose:t,modalTitle:f("Available excursions"),modalFooter:d.a.createElement(T.a,null,d.a.createElement(D.a,null,d.a.createElement(P.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"exursions-common-sum"},d.a.createElement("div",null,"".concat(f("Total amount")," ").concat(k," ")," ",d.a.createElement(l.a,{currencyCode:h.code}))),d.a.createElement(F.c,{color:"dark",plain:!0,onClick:t},f("Cancel"))," ",d.a.createElement(F.c,{color:"success",onClick:function(){n(O.selectedExcursions)}},f("Save"))))))},d.a.createElement(T.a,null,d.a.createElement(D.a,null,d.a.createElement(P.a,{lg:3},d.a.createElement("div",{className:"excursions-filters"},d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Days of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Monday"),checked:I("Monday"),onChange:L("Monday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Tuesday"),checked:I("Tuesday"),onChange:L("Tuesday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Wednesday"),checked:I("Wednesday"),onChange:L("Wednesday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Thursday"),checked:I("Thursday"),onChange:L("Thursday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Friday"),checked:I("Friday"),onChange:L("Friday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Saturday"),checked:I("Saturday"),onChange:L("Saturday")})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("Sunday"),checked:I("Sunday"),onChange:L("Sunday")})))),d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Duration of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(M.a,{label:f("less than 4 hours"),checked:_(1),onChange:R(1)})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("from 4 till 8 hours"),checked:_(2),onChange:R(2)})),d.a.createElement("div",null,d.a.createElement(M.a,{label:f("more than 8 hours"),checked:_(3),onChange:R(3)})))))),d.a.createElement(P.a,{lg:9},d.a.createElement("div",{className:"excursions-results-heading"},f("Excursions")),d.a.createElement("div",{className:"excursions-results"},O.excursions.map((function(e){return d.a.createElement(be,{key:e.id,excursion:e,onSelect:N,onDelete:C,isSelected:j,date:q,tourists:c})})))))))}))),Ee=n(1034),he=n(190),xe=function(e){var t=e.tourists,n=e.onAddTourist,r=e.onDeleteTourist,a=e.id,o=e.onDelete,s=e.readonly,f=e.price,v=e.title,b=e.basketTourists,E=e.touristCount,h=e.date,x=e.type,g=e.attributes,O=Object(m.c)(i.b).t,y=Object(u.useContext)(p.a),j=y.extractPrice,k=y.activeCurrency,N=function(){o(a)},C=function(e){return t.includes(e)};return d.a.createElement("div",{className:"selected-excursions-service"},d.a.createElement("div",{className:"selected-excursions-service-name"},d.a.createElement("div",null,d.a.createElement("div",{className:"grey small"},O("Excursion"===x?"Excursion tour":"Additional service")),d.a.createElement("div",{className:"title"},d.a.createElement("span",{className:"link"},v))),(null===g||void 0===g?void 0:g.isOptional)&&d.a.createElement(he.a,{query:"(max-width: 991px)"},(function(e){return e&&d.a.createElement(Ee.a,{title:d.a.createElement("span",null,O("Remove service"))},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(O("Are you sure you want to delete")," ").concat(v,"?"))&&N()}},d.a.createElement(c.a,{icon:"times"}))))}))),d.a.createElement("div",{className:"selected-excursions-service-date"},d.a.createElement("div",{className:"grey small"},O("Date")),d.a.createElement("div",{className:"title"}," ",Y()(h).format("DD MMM YYYY"))),d.a.createElement("div",{className:"selected-excursions-service-tourists"},d.a.createElement("div",{className:"grey small"},O("Tourists")),d.a.createElement(de.a,{fullScreenOnMobile:!0,label:O("Select tourist"),trigger:d.a.createElement("div",{className:"title link"},E," ",O("persons"))},d.a.createElement("div",{className:"selected-excursions-service-tourists-dropdown"},d.a.createElement("ul",{className:"nostyles"},b.map((function(e,t){return d.a.createElement("li",{key:e.id},d.a.createElement(M.a,{onChange:(c=e.id,function(e){e.target.checked?n(a,c):r(a,c)}),checked:C(e.id),disabled:s,label:d.a.createElement("div",null,e.lastName||e.firstName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(O("Tourist")))}));var c})))))),d.a.createElement("div",{className:"selected-excursions-service-price"},d.a.createElement("div",{className:"grey small"},O("Price")),f?d.a.createElement("div",{className:"title"},j(f,"sum")," ",d.a.createElement(l.a,{currencyCode:k.code})):d.a.createElement("div",{className:"title"},O("Included"))),(null===g||void 0===g?void 0:g.isOptional)&&d.a.createElement(he.a,{query:"(max-width: 991px)"},(function(e){return!e&&d.a.createElement(Ee.a,{title:O("Remove service")},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(O("Are you sure you want to delete")," ").concat(v,"?"))&&N()}},d.a.createElement(c.a,{icon:"times"}))))})))},ge=(n(2311),function(e){var t=e.readonly,n=e.selectedServices,f=e.slides,v=e.actions,b=e.tourists,E=e.fetching,h=e.title,x=e.subTitle,g=Object(m.c)(i.b).t,O=Object(u.useState)({showExcursionsModal:!1,showExtraModal:!1}),y=Object(a.a)(O,2),j=y[0],k=y[1],N=Object(u.useContext)(p.a),C=N.extractPrice,I=N.activeCurrency,w=Object(u.useMemo)((function(){return t?(null===n||void 0===n?void 0:n.length)||!1:(null===f||void 0===f?void 0:f.length)||(null===n||void 0===n?void 0:n.length)||!1}),[n,f]),S=function(){k((function(e){return Object(r.a)({},e,{showExcursionsModal:!e.showExcursionsModal})}))},T=function(e){v.deleteSelectedExcursions([e])},D=function(e,t){v.deleteSelectedExcursionTourist([{touristId:t,serviceId:e}])},P=function(e,t){v.addSelectedExcursionTourist([{serviceId:e,touristId:t}])},F=function(e,t){v.deleteExtraTourist([{touristId:t,serviceId:e}])},M=function(e,t){v.addExtraTourist([{touristId:t,serviceId:e}])},R=function(e){v.updateSelectedExcursions(e)},L=function(e){v.deleteSelectedExtra([e])};return w?d.a.createElement(o.a,{className:"dashboard",title:n.length?g(h||"Extra services"):g("Add service")},x&&d.a.createElement("div",{className:"grey m-b-10"},g(x)),d.a.createElement("div",{className:"excursions-services"},n&&n.length>0&&d.a.createElement("div",{className:"selected-excursions-services"},n.map((function(e){return d.a.createElement(xe,Object.assign({readonly:t,key:e.id},e,{basketTourists:b,onDelete:"Excursion"===e.type?T:L,onDeleteTourist:"Excursion"===e.type?D:F,onAddTourist:"Excursion"===e.type?P:M}))}))),!t&&d.a.createElement("div",{className:"excursions-services-items"},f.map((function(e,t){return d.a.createElement("div",{key:t,className:"excursions-services-item"},d.a.createElement("div",{className:"excursions-services-item-container"},d.a.createElement("div",{className:"excursions-services-item-container-image",style:{backgroundImage:'url("'.concat(e.logo?e.logo:"http://via.placeholder.com/220x165",'")')}}),d.a.createElement("div",{className:"title"},d.a.createElement("div",null,g(e.title))," ",d.a.createElement("div",{className:"price"},e.minPrice&&e.hasDiffrentPrice?d.a.createElement(u.Fragment,null,"".concat(g("from")," ").concat(Object(_.b)(C(e.minPrice,"sum"))," "),d.a.createElement(l.a,{currencyCode:null===I||void 0===I?void 0:I.code,size:14})):g("Free"))),d.a.createElement("div",{className:"item-action",onClick:"Excursions"===e.type?S:(n=e.code,function(){v.changeExtraFilter([n]),k((function(e){return Object(r.a)({},e,{showExtraModal:!e.showExtraModal})}))})},d.a.createElement(c.a,{icon:"plus"}))));var n})))),j.showExcursionsModal&&d.a.createElement(pe,{onSave:function(e){k((function(e){return Object(r.a)({},e,{showExcursionsModal:!1})})),R(e)},onClose:S,tourists:b}),j.showExtraModal&&d.a.createElement(H,{tourists:b,onClose:function(){k((function(e){return Object(r.a)({},e,{showExtraModal:!e.showExtraModal})}))}}),E&&d.a.createElement(s.a,null)):null});t.default=Object(f.connect)((function(e){return{slides:N(e),selectedServices:I(e),fetching:e.basketExtra.fetching}}),(function(e){return{actions:Object(v.bindActionCreators)(Object(r.a)({},b.basketExtraActions),e)}}))(ge)},2257:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(10),a=n(14);function c(){var e=Object(r.a)(["\n  position: relative;\n  .react-datepicker {\n    font-family: ",";\n    font-size: 0.875rem;\n    background-color: #fff;\n    color: #000;\n    border: ",";\n    border-radius: ",";\n    display: inline-block;\n    position: relative;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    padding: 0;\n    background: #fff;\n    z-index: 1000;\n    border-radius: ",";\n    box-shadow: 1px 1px 12px rgba(0, 0, 0, 0.15),\n      inset 0px 0px 0px 1px ",";\n    .react-datepicker__triangle {\n      display: none;\n    }\n    .react-datepicker__header {\n      background-color: #ffffff;\n      border: none;\n      .react-datepicker__current-month--hasMonthDropdown {\n        padding: 0.375rem 0;\n      }\n      .react-datepicker__current-month,\n      .react-datepicker-time__header,\n      .react-datepicker-year-header {\n        font-size: 0.75rem;\n        text-align: center;\n        font-weight: 500;\n        text-transform: uppercase;\n        color: ",";\n        margin-bottom: 0.5rem;\n      }\n    }\n    .react-datepicker__day-names {\n      .react-datepicker__day-name {\n        text-transform: capitalize;\n        font-size: 0.75rem;\n        color: #8b9898;\n        width: 36px;\n      }\n    }\n    .react-datepicker__day,\n    .react-datepicker__month-text,\n    .react-datepicker__quarter-text {\n      font-size: 0.875rem;\n      line-height: 36px;\n      width: 36px;\n      height: 36px;\n\n      &.react-datepicker__day--outside-month {\n        color: ",";\n      }\n\n      &:hover {\n        &:not(.react-datepicker__day--keyboard-selected),\n        &:not(.react-datepicker__day--today) {\n          border-radius: ",";\n          background: ",";\n        }\n      }\n\n      &.react-datepicker__day--keyboard-selected {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      &.react-datepicker__day--today {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n    }\n  }\n\n  .react-datepicker-popper {\n    margin-top: 0 !important;\n    z-index: 10;\n  }\n  .react-datepicker__input-container {\n    width: 100%;\n    & > input {\n      width: 100%;\n      padding: 0 0.75rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      outline: 0;\n      line-height: 38px;\n      height: 38px;\n      transition: border-color 150ms, box-shadow 150ms;\n      background: #ffffff;\n      &:disabled {\n        border-color: ",";\n        box-shadow: none;\n        background: ",";\n      }\n      &:hover {\n        border-color: ",";\n      }\n      &:focus {\n        border-color: ",";\n        box-shadow: 0 0 3px ",";\n      }\n    }\n  }\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker__navigation {\n    outline: none;\n    .react-datepicker__navigation--previous {\n      outline: none;\n    }\n    .react-datepicker__navigation--next {\n      outline: none;\n    }\n  }\n  .react-datepicker__header__dropdown--select {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 0.75rem;\n    .react-datepicker__month-dropdown-container--select {\n      flex: 1;\n    }\n    .react-datepicker__year-select {\n      flex: 0 0 30%;\n    }\n    .react-datepicker__month-select,\n    .react-datepicker__year-select {\n      width: 100%;\n      padding: 0.375rem 0.5rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      transition: border-color 150ms, box-shadow 150ms;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  }\n  .react-datepicker__close-icon {\n      &:after {\n        background: transparent;\n        bottom: 5px;\n        font-size: 20px;\n        color: ",";\n      }\n    }\n"]);return c=function(){return e},e}var i=n(9).e.div(c(),(function(e){return e.theme.font}),(function(e){return Object(a.c)(e.theme.colors.dark,.1)}),(function(e){return e.theme.border}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.grey}),(function(e){return Object(a.c)(e.theme.colors.grey,.5)}),(function(e){return e.theme.radius}),(function(e){return Object(a.c)(e.theme.colors.secondary,.1)}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.warning}),(function(e){return Object(a.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(a.b)(.75,e.theme.colors.dark)}),(function(e){return Object(a.a)(.05,e.theme.colors.white)}),(function(e){return Object(a.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(a.c)(e.theme.colors.primary,.5)}),(function(e){return Object(a.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(a.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.danger}))},2262:function(e,t,n){"use strict";n.d(t,"h",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"g",(function(){return p})),n.d(t,"m",(function(){return E})),n.d(t,"k",(function(){return h})),n.d(t,"e",(function(){return x})),n.d(t,"i",(function(){return g})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return w}));var r=n(21),a=n(3),c=n(2261),i=n(33),o=function(e){return e.basketData.shoppingCart},l=function(e){return e.basketVisas.visaCenters},s=function(e){return e.basketTransfers.transfers},u=function(e){return e.basketTransfers.transferServices},d=Object(i.a)(l,(function(e){return e})),m=Object(i.a)((function(e){return e.basketVisas.mobileBiometrics}),(function(e){return e})),f=function(e){return e.basketData.fields},v=Object(i.a)(o,(function(e){return(null===e||void 0===e?void 0:e.services)?e.services.filter((function(e){return"Hotel"===e.type})).sort((function(e,t){return new Date(e.dateBegin).valueOf()-new Date(t.dateBegin).valueOf()})):[]})),b=Object(i.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return e.map((function(e){return Object(a.a)({},e)}))})),p=Object(i.a)([function(e){var t,n;return(null===(t=e.basketData)||void 0===t||null===(n=t.shoppingCart)||void 0===n?void 0:n.tourists)||[]},l,o],(function(e,t,n){return e.map((function(e){var r,c,i,o=t.find((function(t){return t.touristId===e.id}));return Object(a.a)({id:e.id,gender:"m",firstName:"",lastName:"",birthdate:"",citizenshipId:null,passport:"",pasportExpiration:"",pasportExpirationMin:new Date,visaCenter:o?null===(r=o.variants)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.id:null,biometry:null,visa:!1,isBiometry:!1,attributeIds:[],documentType:null,birthDateMax:e.birthDateMax,birthDateMin:e.birthDateMin,isTaxNumber:!!(null===(i=e.extraFields)||void 0===i?void 0:i.taxNumber),taxNumber:e.taxNumber||""},null===n||void 0===n?void 0:n.allowedActions,{roomGroup:e.roomGroup,order:e.order,age:e.age,ageType:e.ageType,editable:!0})})).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),E=Object(i.a)(u,s,(function(e,t){var n=e.map((function(e){var n=null===t||void 0===t?void 0:t.find((function(t){return t.serviceId===e.id}));return Object(a.a)({},e,{transfers:(null===n||void 0===n?void 0:n.variants)||[]})}));return n.some((function(e){return e.isFake}))&&n.some((function(e){return!e.transfers.length}))?[]:n})),h=Object(i.a)((function(e){return e.basketTransfers.selectedTransfers}),u,s,(function(e,t,n){return(null===e||void 0===e?void 0:e.length)?e:(null===t||void 0===t?void 0:t.length)&&n&&n.length?t.reduce((function(e,t){var a,c=n.find((function(e){return e.serviceId===t.id})),i=null;if(null===c||void 0===c||null===(a=c.variants)||void 0===a?void 0:a.length){var o=t.isFake?c.variants[0]:c.variants.find((function(e){return e.selected}));i=o?{serviceId:t.id,variantId:o.id}:null}return i?[].concat(Object(r.a)(e),[i]):e}),[]):[]})),x=Object(i.a)(o,(function(e){return e})),g=Object(i.a)([function(e){return e.basketPageData.offices}],(function(e){return e&&1===e.length?e[0].id:""})),O="context",y="tour",j="local",k=Object(i.a)([function(e){return e.basketData.price}],(function(e){var t,n,r,a,c,i;if(!e)return[];var o=null===(t=e.priceTotal)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.currencyCode,l=null===(r=e.priceTotal)||void 0===r||null===(a=r.tour)||void 0===a?void 0:a.currencyCode,s=null===(c=e.priceTotal)||void 0===c||null===(i=c.local)||void 0===i?void 0:i.currencyCode;return o===l&&[{type:O,code:o},{type:j,code:s}],o!==s&&s!==l||[{type:O,code:o},{type:y,code:l}],[{type:O,code:o},{type:j,code:s},{type:y,code:l}].reduce((function(e,t){return e.some((function(e){return e.code===t.code}))?e:e.concat([t])}),[])})),N=Object(i.a)((function(e){var t;return(null===(t=e.basketData.formValues)||void 0===t?void 0:t.tourists)||[]}),(function(e){return Object(r.a)(e).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0}))})),C=function(e,t,n){var r={id:c.string().required(""),visaCenter:c.string().when("visa",{is:!0,then:c.string().nullable().required(e("required")),otherwise:c.string().nullable()}),visa:c.boolean(),isBiometry:c.boolean(),biomentry:c.string(),mobileBiometric:c.string().nullable(),attributeIds:c.array(),isTaxNumber:c.boolean(),taxNumber:c.string().when("isTaxNumber",{is:!0,then:c.string().nullable().required(e("required")),otherwise:c.string().nullable()})};return n.forEach((function(t){r[t.code]=t.required?c[t.type]().nullable().required(e("required")):c[t.type]().nullable()})),c.array().of(c.object().shape(r))},I=function(e,t){return t},_=Object(i.a)([I,f],(function(e,t){return function(e,t,n){return c.object().shape({tourists:C(e,0,n),officeId:c.string().nullable().required(e("required")),agree:c.boolean().oneOf([!0],e("required")),userAgreement:c.boolean().oneOf([!0],e("required")),emergencyPhone:c.string().nullable().required(e("required")),comment:c.string().nullable(),isPrebooking:c.bool(),officeDisabled:c.bool()})}(e.t,e.theme,t)})),w=Object(i.a)([I,f],(function(e,t){return C(e.t,e.theme,t)}))},2311:function(e,t,n){},2312:function(e,t,n){},2313:function(e,t,n){},2334:function(e,t,n){"use strict";var r=n(57),a=n(0),c=n.n(a),i=n(2265),o=n.n(i),l=(n(2264),n(349)),s=n.n(l),u=n(264),d=n(2257),m=c.a.forwardRef((function(e,t){var n=e.placeholder,a=void 0===n?"":n,i=(e.format,e.clearable),l=void 0!==i&&i,m=e.year,f=void 0!==m&&m,v=e.mask,b=void 0===v?null:v,p=e.value,E=e.label,h=e.disabled,x=void 0!==h&&h,g=e.minDate,O=e.maxDate,y=Object(r.a)(e,["placeholder","format","clearable","year","mask","value","label","disabled","minDate","maxDate"]);return c.a.createElement(d.a,null,E&&c.a.createElement(u.a,null,E),c.a.createElement(o.a,Object.assign({},y,{minDate:g,maxDate:O,disabled:x,placeholderText:a,isClearable:l,dateFormat:"dd.MM.yyyy",selected:p?new Date(p):void 0,onChange:function(e){y.onChange(e)},peekNextMonth:f,showMonthDropdown:f,showYearDropdown:f,dropdownMode:f?"select":void 0,customInput:b?c.a.createElement(s.a,{mask:b}):void 0,ref:t})))}));t.a=m}}]);