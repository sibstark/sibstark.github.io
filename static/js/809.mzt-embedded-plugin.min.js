(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[809],{2190:function(e,t,a){"use strict";a.r(t),a.d(t,"Orders",(function(){return J}));var n=a(3),r=a(21),c=a(23),l=a(8),o=a(139),i=a(258),s=a(2222),d=a(2223),m=a(2224),u=a(2107),f=a(2092),p=a(2334),v=a(264),b=a(106),h=a(2235),g=a(2225),E=a(0),y=a.n(E),k=a(17),O=a(39),N=a(147),C=a(75),j=a(140),w=a(33),x=Object(w.a)((function(e){return e.ordersList.statuses}),(function(e){return e.map((function(e){return{id:e.status.id,name:e.status.name}}))})),P=Object(w.a)((function(e){return e.ordersList.users}),(function(e){return e.map((function(e){return{id:e.id,name:e.name||e.login}}))})),F=a(1034),_=a(2219),D=a(2232),I=a(2231),S=a(12),T=a.n(S),z=a(2338),B=a(788),M=a(2233),U=a(2374),A=function(e){var t=e.onClose,a=e.orderId,n=Object(k.c)(i.a).t;return y.a.createElement(M.a,{scrollable:!0,onClose:t,modalTitle:n("Printing documents")},y.a.createElement(s.a,null,y.a.createElement(U.a,{orderId:a})))},L=function(e){var t,a=e.prePayment,n=Object(k.c)(i.a).t;return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"list-col"},n("Prepayment")),null===a||void 0===a||null===(t=a.schedule)||void 0===t?void 0:t.map((function(e){var t,a;return y.a.createElement("div",{key:e.order,className:"list-col text-right"},(null===(t=e.context)||void 0===t?void 0:t.sum)||0,y.a.createElement(D.a,{currencyCode:null===(a=e.context)||void 0===a?void 0:a.currencyCode}),"(",null===e||void 0===e?void 0:e.percent,"%)")})))},R=function(e){var t,a,n=e.payment,r=e.title;return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"list-col"},r),y.a.createElement("div",{className:"list-col text-right"},(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.sum)||0,y.a.createElement(D.a,{currencyCode:null===n||void 0===n||null===(a=n.context)||void 0===a?void 0:a.currencyCode})))},K=function(e){var t=e.onPageChange,a=e.onNextPage,r=e.changeOrderCode,l=e.pageSize,s=e.orderUrl,d=e.mode,m=e.orders,u=void 0===m?[]:m,f=e.fetching,p=void 0!==f&&f,v=e.activePage,b=void 0===v?1:v,h=e.totalPages,g=void 0===h?1:h,O=Object(j.e)(),C=Object(k.c)(i.a).t,w=Object(E.useState)({showPrintDocumentsModal:!1,printOrderId:void 0}),x=Object(c.a)(w,2),P=x[0],S=x[1],M=function(){N.scroller.scrollTo("orders-search-results",{duration:800,delay:0,smooth:"easeOutCubic"})};return y.a.createElement(E.Fragment,null,y.a.createElement("div",{className:"account-orders-table"},y.a.createElement("div",{className:"account-orders-table-heading small"},y.a.createElement("div",{className:"account-orders-table-item"},y.a.createElement("div",null,C("Reservation"))),y.a.createElement("div",{className:"account-orders-table-item"},y.a.createElement("div",null,C("Prepayment"))),y.a.createElement("div",{className:"account-orders-table-item"},y.a.createElement("div",null,C("Payment"))),y.a.createElement("div",{className:"account-orders-table-item"},y.a.createElement("div",null,C("Documents")))),y.a.createElement("div",{className:"account-orders-table-body"},(null===u||void 0===u?void 0:u.length)>0&&u.map((function(e){var t,a,n,c,l,i,m,u,f,p,v,b,h,g,k,N,j,w,x,P,I,M,U,A,K,G,V,J;return y.a.createElement("div",{key:e.id,className:"account-orders-table-item-holder ".concat(-1===(null===(t=e.status)||void 0===t?void 0:t.visualStatus)&&"canceled")},y.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(B.g)(null===(a=e.status)||void 0===a?void 0:a.visualStatus))},y.a.createElement(F.a,{title:y.a.createElement("div",null,e.country.name)},y.a.createElement("span",{className:"m-r-5"},y.a.createElement(_.a,{flag:e.country.code.toLowerCase()}))),"widget"!==d&&y.a.createElement(z.a,{className:"order-number link-secondary m-r-5",to:"".concat(s||"/account/orders","/").concat(e.id),onClick:(J=e.id,function(){r(J)})},e.id),"widget"===d&&y.a.createElement("a",{className:"order-number link-secondary m-r-5",href:"".concat(s||"/account/orders","/").concat(e.id),target:"_blank",rel:"noopener noreferrer"},e.id),y.a.createElement("span",{className:"small grey"},"".concat(T()(e.dateCreated).format(O.dateFormat)," ").concat(T()(e.dateCreated).format("hh:mm:ss"))),y.a.createElement("div",null,e.touristName,y.a.createElement("span",{className:"small grey m-l-5"},"".concat(e.adultCount," ").concat(C("adult")," "),e.childCount>0?"".concat(e.childCount," ").concat(C("child")):"")),y.a.createElement("div",{className:"small grey m-b-5"},"".concat(T()(e.dateBegin).format(O.dateFormat),"-").concat(T()(e.dateEnd).format(O.dateFormat))),y.a.createElement("div",{className:"small"},y.a.createElement("span",{className:"text-".concat(Object(B.g)(null===(n=e.status)||void 0===n?void 0:n.visualStatus))},null===(c=e.status)||void 0===c?void 0:c.name))),y.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(B.g)(null===(l=e.prePayment)||void 0===l?void 0:l.visualStatus))},y.a.createElement("div",{className:"list-cols cols-2 small"},y.a.createElement(L,{prePayment:e.prePayment}),y.a.createElement(R,{payment:null===(i=e.payment)||void 0===i?void 0:i.paid,title:C("Paid")}),y.a.createElement(R,{payment:null===(m=e.prePayment)||void 0===m?void 0:m.debt,title:C("Debt")})),e.prePayment&&e.prePayment.allowPayment&&y.a.createElement(E.Fragment,null,"widget"!==d&&y.a.createElement("a",{href:"/payments/".concat(e.id),target:"_blank",rel:"noopener noreferrer"},y.a.createElement("span",{className:"small link m-r-5"},C("Pay"))),"widget"===d&&y.a.createElement("a",{href:"/payments/".concat(e.id),target:"_blank",rel:"noopener noreferrer"},y.a.createElement("span",{className:"small link m-r-5"},C("Pay")))),e.prePayment&&e.prePayment.allowPayment&&e.prePayment.prePaymentDate&&y.a.createElement("span",{className:"xsmall grey"},"".concat(C("to")," ").concat(T()(e.prePayment.prePaymentDate).format(O.dateFormat)))),y.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(B.g)(e.payment&&e.payment.visualStatus))},y.a.createElement("div",{className:"list-cols cols-2 small"},y.a.createElement("div",{className:"list-col"},C("To pay")),y.a.createElement("div",{className:"list-col text-right"},e.price&&"".concat((null===(u=e.price.priceToPay)||void 0===u||null===(f=u.context)||void 0===f?void 0:f.sum)||0),y.a.createElement(D.a,{currencyCode:null===(p=e.price.priceToPay)||void 0===p||null===(v=p.context)||void 0===v?void 0:v.currencyCode})),y.a.createElement("div",{className:"list-col"},C("Paid")),y.a.createElement("div",{className:"list-col text-right"},(null===(b=e.payment)||void 0===b||null===(h=b.paid)||void 0===h||null===(g=h.context)||void 0===g?void 0:g.sum)||0,y.a.createElement(D.a,{currencyCode:null===(k=e.payment)||void 0===k||null===(N=k.paid)||void 0===N||null===(j=N.context)||void 0===j?void 0:j.currencyCode})),y.a.createElement("div",{className:"list-col"},C("Debt")),y.a.createElement("div",{className:"list-col text-right"},(null===(w=e.payment)||void 0===w||null===(x=w.debt)||void 0===x||null===(P=x.context)||void 0===P?void 0:P.sum)||0,y.a.createElement(D.a,{currencyCode:null===(I=e.payment)||void 0===I||null===(M=I.debt)||void 0===M||null===(U=M.context)||void 0===U?void 0:U.currencyCode}))),e.payment&&e.payment.allowPayment&&y.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://online215.mouzenidis-travel.ru/OrderPayment/Index/".concat(e.id)},y.a.createElement("span",{className:"small link m-r-5"},C("Pay"))),e.payment&&e.payment.allowPayment&&e.payment.fullPaymentDate&&y.a.createElement("span",{className:"xsmall grey"},"".concat(C("to")," ").concat(T()(e.payment.fullPaymentDate).format(O.dateFormat)))),y.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(B.g)(e.documents&&e.documents.visualStatus))},y.a.createElement("div",{className:"list-cols small"},y.a.createElement("div",{className:"list-col"},(null===(A=e.documents)||void 0===A?void 0:A.visa)&&y.a.createElement(E.Fragment,null,y.a.createElement("div",null,C("Visa")),y.a.createElement("span",{className:"small grey"},"".concat(e.documents.visa.status?C(e.documents.visa.status):""," ").concat(e.documents.visa.date?T()(e.documents.visa.date).format(O.dateFormat):"")," "))),y.a.createElement("div",{className:"list-col"},y.a.createElement("div",null,C("Documents"),y.a.createElement(F.a,{title:y.a.createElement("span",null,C("Print documents"))},y.a.createElement("span",{className:"link m-l-5"},y.a.createElement(o.a,{name:e.id,icon:"print",onClick:(V=e.id,function(){S({showPrintDocumentsModal:!0,printOrderId:V})})})))),y.a.createElement("span",{className:"small grey"},null===(K=e.documents)||void 0===K||null===(G=K.status)||void 0===G?void 0:G.name)))))})))),u&&y.a.createElement(I.a,{buttonText:C("Next"),pages:g,activePage:b,loading:p,hasMore:u.length===l,onPageChange:function(e){t(e),M()},onNextPage:function(){a({activePage:b+1,totalPages:g+1}),M()}}),P.showPrintDocumentsModal&&y.a.createElement(A,{orderId:P.printOrderId,onClose:function(){S((function(e){return Object(n.a)({},e,{showPrintDocumentsModal:!1})}))}}))},G=(a(2503),[{name:"NotPaid",ids:[0],id:1},{name:"PartiallyPaid",ids:[1],id:2},{name:"FullyPaid",ids:[2,3],id:3}]),V=[{name:"Without visa",id:0},{name:"Not defined",id:1},{name:"At the consulate",id:2},{name:"Ok",id:3},{name:"Denied",id:4}],J=function(e){var t=e.actions,a=e.filter,l=e.orders,O=e.countries,C=e.fetching,w=e.pageSize,x=e.statuses,P=e.users,F=e.orderUrl,_=e.mode,D=Object(j.e)(),I=Object(k.c)(i.a).t;Object(E.useEffect)((function(){t.fetchOrdersPageData(a)}),[]);var S=Object(E.useState)({activePage:1,totalPages:1}),T=Object(c.a)(S,2),z=T[0],B=T[1],M=function(e){a.countryId===e?t.countryIdChanged(0):t.countryIdChanged(e),U()},U=function(){B({activePage:1,totalPages:1})};return y.a.createElement(s.a,null,y.a.createElement(d.a,{justify:"center"},y.a.createElement(m.a,{md:12},y.a.createElement("div",{className:"account-orders"},y.a.createElement(u.a,{className:"dashboard",style:{marginBottom:0}},y.a.createElement("div",{className:"account-orders-filters"},y.a.createElement(d.a,null,y.a.createElement(m.a,{md:3},y.a.createElement("div",{className:""},y.a.createElement(f.a,{name:"orderId",label:I("Search"),placeholder:I("Reservation number or tourist data"),value:a.name,onChange:function(e){var a=e.target.name,n=e.target.value;"orderId"===a&&t.orderCodeChanged(n)}}))),y.a.createElement(m.a,{md:2},y.a.createElement("div",{className:""},y.a.createElement(p.a,{clearable:!0,year:!0,format:D.dateFormat,placeholder:D.dateFormat,value:a.dateCreatedFrom,label:I("Reservation date from"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onReservationDateFromChange(e.toDateString()):t.onReservationDateFromChange(void 0)}}))),y.a.createElement(m.a,{md:2},y.a.createElement("div",{className:""},y.a.createElement(p.a,{clearable:!0,year:!0,format:D.dateFormat,placeholder:D.dateFormat,value:a.dateCreatedTo,label:I("Reservation date to"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onReservationDateToChange(e.toDateString()):t.onReservationDateToChange(void 0)}}))),y.a.createElement(m.a,{md:2},y.a.createElement("div",{className:""},y.a.createElement(p.a,{clearable:!0,year:!0,format:D.dateFormat,placeholder:D.dateFormat,label:I("Tour date from"),value:a.tourDateFrom,mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onTourDateFromChange(e.toDateString()):t.onTourDateFromChange(void 0)}}))),y.a.createElement(m.a,{md:2},y.a.createElement("div",{className:""},y.a.createElement(p.a,{clearable:!0,year:!0,format:D.dateFormat,placeholder:D.dateFormat,value:a.tourDateTo,label:I("Tour date until"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onTourDateToChange(e.toDateString()):t.onTourDateToChange(void 0)}}))),y.a.createElement(m.a,{md:1},y.a.createElement(v.a,{visible:!1},I("Search")),y.a.createElement("div",{className:""},y.a.createElement(b.c,{onClick:function(){t.fetchOrderList({}),U()}},I("Search"))))))),y.a.createElement(N.Element,{name:"orders-search-results"},y.a.createElement("div",{className:"account-orders-filters-results"},y.a.createElement("div",{className:"account-orders-post-filters"},y.a.createElement("div",{className:"account-orders-post-filter"},y.a.createElement(h.a,{label:I("Country"),trigger:y.a.createElement(b.c,{size:"sm",color:a.countryId?"primary":"default",pluginAfter:a.countryId?y.a.createElement(o.a,{icon:"times",onClick:function(){return M(a.countryId)}}):void 0},I("Country"))},y.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},y.a.createElement("ul",{className:"list-group nostyles"},O.map((function(e){return y.a.createElement("li",{key:e.id},y.a.createElement(g.a,{label:e.name,checked:a.countryId===e.id,onChange:function(){return M(e.id)}}))})))))),y.a.createElement("div",{className:"account-orders-post-filter"},y.a.createElement(h.a,{label:I("Order status"),trigger:y.a.createElement(b.c,{size:"sm",color:a.statusIds.length?"primary":"default",pluginAfter:a.statusIds.length?y.a.createElement(o.a,{icon:"times",onClick:function(){t.onOrderStatusChange([]),U()}}):void 0},I("Order status"))},y.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},y.a.createElement("ul",{className:"list-group nostyles"},x.map((function(e){return y.a.createElement("li",{key:e.id},y.a.createElement(g.a,{key:e.id,label:e.name,checked:a.statusIds.indexOf(e.id)>-1,onChange:function(){return function(e){var n=[];n=a.statusIds.indexOf(e)>-1?Object(r.a)(a.statusIds.filter((function(t){return t!==e}))):[].concat(Object(r.a)(a.statusIds),[e]),t.onOrderStatusChange(n),U()}(e.id)}}))})))))),y.a.createElement("div",{className:"account-orders-post-filter"},y.a.createElement(h.a,{label:I("Payment status"),trigger:y.a.createElement(b.c,{size:"sm",color:a.paymentStatusIds.length?"primary":"default",pluginAfter:a.paymentStatusIds.length?y.a.createElement(o.a,{icon:"times",onClick:function(){t.onPaymentTypeChange([]),U()}}):void 0},I("Payment status"))},y.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},y.a.createElement("ul",{className:"nostyles"},null===G||void 0===G?void 0:G.map((function(e){return y.a.createElement("li",{key:e.id+e.name},y.a.createElement(g.a,{label:y.a.createElement("span",null,I(e.name)),checked:e.ids.every((function(e){return a.paymentStatusIds.includes(e)})),onChange:(n=e.ids,function(){var e=[];e=n.every((function(e){return a.paymentStatusIds.includes(e)}))?Object(r.a)(a.paymentStatusIds.filter((function(e){return!n.includes(e)}))):[].concat(Object(r.a)(a.paymentStatusIds),Object(r.a)(n)),t.onPaymentTypeChange(e),U()})}));var n})))))),y.a.createElement("div",{className:"account-orders-post-filter"},y.a.createElement(h.a,{label:I("Visa status"),trigger:y.a.createElement(b.c,{size:"sm",color:a.visaStatusIds.length?"primary":"default",pluginAfter:a.visaStatusIds.length?y.a.createElement(o.a,{icon:"times",onClick:function(){t.onVisaStatusChange([]),U()}}):void 0},I("Visa status"))},y.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},y.a.createElement("ul",{className:"nostyles"},V.map((function(e){return y.a.createElement("li",{key:e.id+e.name},y.a.createElement(g.a,{label:y.a.createElement("span",null,I(e.name)),checked:a.visaStatusIds.includes(e.id),onChange:(n=e.id,function(){var e=[];e=a.visaStatusIds.includes(n)?Object(r.a)(a.visaStatusIds.filter((function(e){return e!==n}))):[].concat(Object(r.a)(a.visaStatusIds),[n]),t.onVisaStatusChange(e),U()})}));var n})))))),y.a.createElement("div",{className:"account-orders-post-filter"},y.a.createElement(h.a,{label:I("Creator"),trigger:y.a.createElement(b.c,{size:"sm",color:a.onlineUserIds.length?"primary":"default",pluginAfter:a.onlineUserIds.length?y.a.createElement(o.a,{icon:"times",onClick:function(){t.onUsersChange([]),U()}}):void 0},I("Creator"))},y.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},y.a.createElement("ul",{className:"nostyles"},P.map((function(e){return y.a.createElement("li",{key:e.id},y.a.createElement(g.a,{label:y.a.createElement("span",null,e.name),checked:a.onlineUserIds.indexOf(e.id)>-1,onChange:function(){return function(e){var n=[];n=a.onlineUserIds.indexOf(e)>-1?Object(r.a)(a.onlineUserIds.filter((function(t){return t!==e}))):[].concat(Object(r.a)(a.onlineUserIds),[e]),t.onUsersChange(n),U()}(e.id)}}))})))))))),y.a.createElement(u.a,{className:"dashboard"},y.a.createElement(K,{orders:l,fetching:C,activePage:z.activePage,totalPages:z.totalPages,pageSize:w,orderUrl:F,mode:_,onNextPage:function(e){t.fetchOrderList({pageNumber:e.activePage}),B((function(t){return Object(n.a)({},t,{},e)}))},onPageChange:function(e){t.fetchOrderList({pageNumber:e}),B((function(t){return Object(n.a)({},t,{activePage:e})}))},changeOrderCode:function(e){t.changeOrderCode(e)}})))))))};t.default=Object(O.connect)((function(e){return{countries:e.ordersList.countries,statuses:x(e),orders:e.ordersList.orders,app:e.app,totalCount:e.ordersList.totalCount,fetching:e.ordersList.fetching,fetched:e.ordersList.fetched,filter:e.ordersFilter,users:P(e),pageSize:e.ordersFilter.pageSize}}),(function(e){return{actions:Object(C.bindActionCreators)(Object(n.a)({},l.ordersActions,{},l.ordersFilterActions),e)}}))(y.a.memo(J))},2257:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(10),r=a(14);function c(){var e=Object(n.a)(["\n  position: relative;\n  .react-datepicker {\n    font-family: ",";\n    font-size: 0.875rem;\n    background-color: #fff;\n    color: #000;\n    border: ",";\n    border-radius: ",";\n    display: inline-block;\n    position: relative;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    padding: 0;\n    background: #fff;\n    z-index: 1000;\n    border-radius: ",";\n    box-shadow: 1px 1px 12px rgba(0, 0, 0, 0.15),\n      inset 0px 0px 0px 1px ",";\n    .react-datepicker__triangle {\n      display: none;\n    }\n    .react-datepicker__header {\n      background-color: #ffffff;\n      border: none;\n      .react-datepicker__current-month--hasMonthDropdown {\n        padding: 0.375rem 0;\n      }\n      .react-datepicker__current-month,\n      .react-datepicker-time__header,\n      .react-datepicker-year-header {\n        font-size: 0.75rem;\n        text-align: center;\n        font-weight: 500;\n        text-transform: uppercase;\n        color: ",";\n        margin-bottom: 0.5rem;\n      }\n    }\n    .react-datepicker__day-names {\n      .react-datepicker__day-name {\n        text-transform: capitalize;\n        font-size: 0.75rem;\n        color: #8b9898;\n        width: 36px;\n      }\n    }\n    .react-datepicker__day,\n    .react-datepicker__month-text,\n    .react-datepicker__quarter-text {\n      font-size: 0.875rem;\n      line-height: 36px;\n      width: 36px;\n      height: 36px;\n\n      &.react-datepicker__day--outside-month {\n        color: ",";\n      }\n\n      &:hover {\n        &:not(.react-datepicker__day--keyboard-selected),\n        &:not(.react-datepicker__day--today) {\n          border-radius: ",";\n          background: ",";\n        }\n      }\n\n      &.react-datepicker__day--keyboard-selected {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      &.react-datepicker__day--today {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n    }\n  }\n\n  .react-datepicker-popper {\n    margin-top: 0 !important;\n    z-index: 10;\n  }\n  .react-datepicker__input-container {\n    width: 100%;\n    & > input {\n      width: 100%;\n      padding: 0 0.75rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      outline: 0;\n      line-height: 38px;\n      height: 38px;\n      transition: border-color 150ms, box-shadow 150ms;\n      background: #ffffff;\n      &:disabled {\n        border-color: ",";\n        box-shadow: none;\n        background: ",";\n      }\n      &:hover {\n        border-color: ",";\n      }\n      &:focus {\n        border-color: ",";\n        box-shadow: 0 0 3px ",";\n      }\n    }\n  }\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker__navigation {\n    outline: none;\n    .react-datepicker__navigation--previous {\n      outline: none;\n    }\n    .react-datepicker__navigation--next {\n      outline: none;\n    }\n  }\n  .react-datepicker__header__dropdown--select {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 0.75rem;\n    .react-datepicker__month-dropdown-container--select {\n      flex: 1;\n    }\n    .react-datepicker__year-select {\n      flex: 0 0 30%;\n    }\n    .react-datepicker__month-select,\n    .react-datepicker__year-select {\n      width: 100%;\n      padding: 0.375rem 0.5rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      transition: border-color 150ms, box-shadow 150ms;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  }\n  .react-datepicker__close-icon {\n      &:after {\n        background: transparent;\n        bottom: 5px;\n        font-size: 20px;\n        color: ",";\n      }\n    }\n"]);return c=function(){return e},e}var l=a(9).e.div(c(),(function(e){return e.theme.font}),(function(e){return Object(r.c)(e.theme.colors.dark,.1)}),(function(e){return e.theme.border}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.grey}),(function(e){return Object(r.c)(e.theme.colors.grey,.5)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.secondary,.1)}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.warning}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return Object(r.a)(.05,e.theme.colors.white)}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.danger}))},2279:function(e,t,a){"use strict";var n=a(57),r=a(10),c=a(14),l=a(0),o=a.n(l),i=a(9),s=a(32);function d(){var e=Object(r.a)(["\n  color: ",";\n  font-size: ",";\n  margin: 0;\n  margin-bottom: ",";\n  font-weight: ",";\n  padding: 0;\n  padding-bottom: ",";\n  border-bottom: ",";\n  text-transform: ",";\n"]);return d=function(){return e},e}var m=Object(i.e)((function(e){var t=e.tag,a=void 0===t?"h2":t,r=(e.bold,e.children),c=(e.uppercase,e.capitalize,e.color,e.bordered,e.className,Object(n.a)(e,["tag","bold","children","uppercase","capitalize","color","bordered","className"]));return o.a.createElement(a,c,r)}))(d(),s.b,s.d,(function(e){return e.bordered?"0.75rem":"0"}),(function(e){return e.bold?"500":"400"}),(function(e){return e.bordered?".75rem":"0"}),(function(e){return e.bordered?"1px solid "+Object(c.c)(Object(s.b)(e),.1):"none"}),(function(e){return e.capitalize?"capitalize":e.uppercase?"uppercase":"none"}));m.defaultProps={color:"dark",bordered:!0};t.a=function(e){var t=Object.create(null),a=function(a){var n=a.tag;return"string"===typeof n&&i.e.hasOwnProperty(n)?(void 0===t[n]&&(t[n]=e.withComponent(n)),Object(l.createElement)(t[n],a)):Object(l.createElement)(e,a)};return(e.displayName||e.constructor.name)&&(a.displayName="Heading"),a}(m)},2323:function(e,t,a){},2325:function(e,t,a){"use strict";var n=a(21),r=a(3),c=a(23),l=a(258),o=a(2107),i=a(2279),s=a(2225),d=a(106),m=a(0),u=a.n(m),f=a(17),p=a(39),v=a(75),b=a(8),h=a(2233),g=a(2223),E=a(2224),y=a(2092),k=function(e){var t=e.onClose,a=void 0===t?function(){}:t,n=e.onSendToEmail,r=void 0===n?function(){}:n,o=Object(m.useState)(""),i=Object(c.a)(o,2),p=i[0],v=i[1],b=Object(m.useState)(!1),k=Object(c.a)(b,2),O=k[0],N=k[1],C=Object(f.c)(l.a).t;return u.a.createElement(h.a,{size:"sm",onClose:function(){a("showEmailModal")},modalTitle:C("Sending documents")},u.a.createElement(g.a,null,u.a.createElement(E.a,{lg:12},u.a.createElement(y.a,{className:"inline",label:C("Email"),onChange:function(e){v(e.target.value)}}))),u.a.createElement(g.a,{className:"m-t-10"},u.a.createElement(E.a,{md:12},u.a.createElement(s.a,{label:C("ZIP archive"),checked:O,onChange:function(e){N(e.target.checked)}}))),u.a.createElement(g.a,{className:"m-t-10"},u.a.createElement(E.a,{lg:12,className:"text-right"},u.a.createElement(d.c,{onClick:function(){r(p,O)},disabled:!p},C("Send to email")))))},O=a(2098),N=a(57),C=u.a.forwardRef((function(e,t){e.label;var a=e.name,n=e.type,r=e.placeholder,c=(e.className,e.disabled),l=e.readonly,o=e.autoFocus,i=(e.pluginBefore,e.pluginAfter,e.accept),s=(e.mask,e.onFocus),d=e.onKeyUp,m=e.onClick,f=e.onBlur,p=e.onKeyDown,v=(e.onClear,e.clearable,e.loading,e.value),b=Object(N.a)(e,["label","name","type","placeholder","className","disabled","readonly","autoFocus","pluginBefore","pluginAfter","accept","mask","onFocus","onKeyUp","onClick","onBlur","onKeyDown","onClear","clearable","loading","value"]);return u.a.createElement("input",Object.assign({},b,{value:v,placeholder:r||"",disabled:c,readOnly:l||!1,type:n||"text",name:a||void 0,autoFocus:o,ref:t,accept:i||void 0,onChange:function(e){b.onChange&&b.onChange(e)},onFocus:s&&s,onKeyUp:d&&d,onClick:m&&m,onBlur:f&&f,onKeyDown:p&&p}))})),j=function(e){var t=e.fileTypes,a=e.onClose,n=e.onUploadFile,o=Object(m.useRef)(),i=Object(f.c)(l.a).t,s=Object(m.useState)((function(){return{fileType:(null===t||void 0===t?void 0:t[0])?t[0].code:"",showOther:!1,file:null,isImage:!1}})),p=Object(c.a)(s,2),v=p[0],b=p[1];return u.a.createElement(h.a,{size:"md",onClose:function(){a()},modalTitle:i("Attaching documents to the order")},u.a.createElement(g.a,null,u.a.createElement(E.a,{lg:6},u.a.createElement(O.b,{style:{width:"100%"},label:i("File type"),labelKey:"name",valueKey:"code",className:"inline",clearable:!1,value:v.fileType,options:t,onChange:function(e){b("Other"===e?function(e){return Object(r.a)({},e,{showOther:!0,fileType:""})}:function(t){return Object(r.a)({},t,{showOther:!1,fileType:e})})}})),v.showOther&&u.a.createElement(E.a,{lg:6},u.a.createElement(y.a,{className:"inline",label:i("Other type"),onChange:function(e){b((function(t){return Object(r.a)({},t,{fileType:e.target.value})}))}})," ")),u.a.createElement(g.a,null,u.a.createElement(E.a,{lg:12},u.a.createElement("div",{className:"m-t-20 documents-upload-input"},u.a.createElement(C,{type:"file",name:"file",ref:o,accept:".png, .jpg, .jpeg, .bmp, .tiff, .tif, .gif, .pdf",onChange:function(e){b((function(t){return Object(r.a)({},t,{file:e.target.files[0],isImage:!!~e.target.files[0].type.indexOf("image")})}))}})))),u.a.createElement(g.a,null,u.a.createElement(E.a,{md:12},u.a.createElement("div",{className:"m-t-20 text-right"},u.a.createElement(d.c,{onClick:function(){v.file&&(n(v.file,v.fileType),o.current&&(o.current.value=""))},disabled:!v.file},i("Upload file"))))))};a(2323),t.a=Object(p.connect)((function(e){var t=e.order;return{documentList:t.documentList,fileTypes:t.fileTypes,fetching:t.fetching}}),(function(e){return{actions:Object(v.bindActionCreators)(b.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.documentList,p=e.fetchDocuments,v=e.sendToEmail,b=e.downloadDocument,h=e.uploadDocument,g=Object(f.c)(l.a).t,E=Object(m.useState)({selectedFiles:[],selectedBlanks:[],showFilesModal:!1,showEmailModal:!1}),y=Object(c.a)(E,2),O=y[0],N=y[1];Object(m.useEffect)((function(){a||p(t)}),[]);var C=function(e){return O.selectedBlanks.includes(e)},w=Object(m.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.blanks)||void 0===e?void 0:e.every((function(e){return O.selectedBlanks.includes(e.id)}))}),[null===a||void 0===a?void 0:a.blanks,O.selectedBlanks]),x=Object(m.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.fileGroups)||void 0===e?void 0:e.every((function(e){return e.files.every((function(e){return O.selectedFiles.includes(e.id)}))}))}),[a,O.selectedFiles]),P=function(e){return O.selectedFiles.includes(e)},F=function(e){return function(){var n=e||(O.selectedBlanks.length>1||O.selectedFiles.length>1),r={orderId:t,selectedFiles:O.selectedFiles,selectedBlanks:O.selectedBlanks,zip:n};if(n||O.selectedFiles.length+O.selectedBlanks.length>1)r.fileName="Archive.zip";else{if(1===O.selectedBlanks.length){var c=a.blanks.find((function(e){return e.id===O.selectedBlanks[0]}));r.fileName="".concat(c.name,".").concat(c.format)}if(1===O.selectedFiles.length){var l=a.fileGroups.find((function(e){return e.files.some((function(e){return e.id===O.selectedFiles[0]}))}));if(l){var o=l.files.find((function(e){return e.id===O.selectedFiles[0]}));r.fileName="".concat(o.name,".").concat(o.format)}}}b(r)}},_=function(e,a){return function(){var n={orderId:t,zip:!1,fileName:"".concat(e.name,".").concat(e.format)};"file"===a&&(n=Object(r.a)({},n,{selectedFiles:[e.id],selectedBlanks:[]})),"blank"===a&&(n=Object(r.a)({},n,{selectedFiles:[],selectedBlanks:[e.id]})),b(n)}},D=function(){N((function(e){return Object(r.a)({},e,{showFilesModal:!1})}))},I=function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!1})}))},S=Object(m.useMemo)((function(){return!(O.selectedBlanks.length>0)&&!(O.selectedFiles.length>0)}),[O.selectedBlanks,O.selectedFiles]);return u.a.createElement(m.Fragment,null,(null===a||void 0===a?void 0:a.links)&&a.links.length>0&&u.a.createElement(o.a,{className:"dashboard"},u.a.createElement("div",{className:"documents-links"},u.a.createElement(i.a,{color:"dark",tag:"h4",bordered:!0},g("Useful links")),u.a.createElement("ul",{className:"documents-links-list"},a.links.map((function(e,t){return u.a.createElement("li",{key:t,className:"documents-list-link"},u.a.createElement("a",{href:e.url,className:"link-secondary",target:"_blank",rel:"noopener noreferrer"},e.name))}))))),u.a.createElement("div",{className:"order-documents"},u.a.createElement(o.a,{className:"dashboard"},a&&a.blanks.length>0&&u.a.createElement(m.Fragment,null,u.a.createElement(s.a,{onChange:function(e){N((function(t){var n;return Object(r.a)({},t,{selectedBlanks:(null===(n=e.target)||void 0===n?void 0:n.checked)?a.blanks.map((function(e){return e.id})):[]})}))},checked:w,className:"documents-list-title",label:u.a.createElement("div",null,u.a.createElement("span",null,g("Select all forms")))}),u.a.createElement("ul",{className:"documents-list"},a.blanks.map((function(e){return u.a.createElement("li",{key:e.id,className:"documents-list-item"},u.a.createElement(s.a,{onChange:(t=e.id,function(){N((function(e){return Object(r.a)({},e,{selectedBlanks:C(t)?e.selectedBlanks.filter((function(e){return e!==t})):[].concat(Object(n.a)(e.selectedBlanks),[t])})}))}),checked:C(e.id)}),u.a.createElement("span",{className:"link-secondary",onClick:_(e,"blank")},e.name));var t})))),a&&a.fileGroups.length>0&&u.a.createElement(m.Fragment,null,u.a.createElement(i.a,{color:"dark",tag:"h4",bordered:!0},u.a.createElement(s.a,{onChange:function(e){var t=[];e.target.checked&&a.fileGroups.forEach((function(e){e.files.forEach((function(e){return t.push(e.id)}))})),N((function(e){return Object(r.a)({},e,{selectedFiles:t})}))},checked:x,label:u.a.createElement("div",null,u.a.createElement("span",null,g("Files")))})),u.a.createElement("ul",{className:"documents-list"},a.fileGroups.map((function(e){return e.files.map((function(t){return u.a.createElement("li",{key:t.id,className:"documents-list-item"},u.a.createElement(s.a,{onChange:(a=t.id,function(){N((function(e){return Object(r.a)({},e,{selectedFiles:P(a)?e.selectedFiles.filter((function(e){return e!==a})):[].concat(Object(n.a)(e.selectedFiles),[a])})}))}),checked:P(t.id)}),u.a.createElement("span",{className:"link-secondary",onClick:_(t,"file")},"".concat(e.name," ").concat(t.name)));var a}))})))),O.showFilesModal&&u.a.createElement(j,{onClose:D,onUploadFile:function(e,a){var n=new FormData;n.append("file",e),h({orderId:t,data:n,type:a}),D()},fileTypes:a.fileTypes}),O.showEmailModal&&u.a.createElement(k,{onClose:I,onSendToEmail:function(e,a){v({orderId:t,data:{blankIds:O.selectedBlanks,fileIds:O.selectedFiles,zip:a,email:e}}),I()}}),u.a.createElement("div",{className:"order-documents-actions"},u.a.createElement(d.c,{color:"success",disabled:S,onClick:F(!1)},g("Download")),u.a.createElement(d.c,{color:"success",disabled:S,onClick:F(!0)},g("Download as archive")),u.a.createElement(d.c,{onClick:function(e){N((function(e){return Object(r.a)({},e,{showFilesModal:!0})}))}},g("Upload documents")),u.a.createElement(d.c,{disabled:S,onClick:function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!0})}))}},g("Send to email"))))))}))},2334:function(e,t,a){"use strict";var n=a(57),r=a(0),c=a.n(r),l=a(2265),o=a.n(l),i=(a(2264),a(349)),s=a.n(i),d=a(264),m=a(2257),u=c.a.forwardRef((function(e,t){var a=e.placeholder,r=void 0===a?"":a,l=(e.format,e.clearable),i=void 0!==l&&l,u=e.year,f=void 0!==u&&u,p=e.mask,v=void 0===p?null:p,b=e.value,h=e.label,g=e.disabled,E=void 0!==g&&g,y=e.minDate,k=e.maxDate,O=Object(n.a)(e,["placeholder","format","clearable","year","mask","value","label","disabled","minDate","maxDate"]);return c.a.createElement(m.a,null,h&&c.a.createElement(d.a,null,h),c.a.createElement(o.a,Object.assign({},O,{minDate:y,maxDate:k,disabled:E,placeholderText:r,isClearable:i,dateFormat:"dd.MM.yyyy",selected:b?new Date(b):void 0,onChange:function(e){O.onChange(e)},peekNextMonth:f,showMonthDropdown:f,showYearDropdown:f,dropdownMode:f?"select":void 0,customInput:v?c.a.createElement(s.a,{mask:v}):void 0,ref:t})))}));t.a=u},2374:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(39),l=a(75),o=a(8),i=a(2325);t.a=Object(c.connect)(null,(function(e){return{actions:Object(l.bindActionCreators)(o.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.actions;return r.a.createElement(i.a,{orderId:t,fetchDocuments:a.fetchOrderDocumentList,sendToEmail:a.sendOrderDocumentsToEmail,downloadDocument:a.downloadOrderDocument,uploadDocument:a.uploadOrderDocument})}))},2503:function(e,t,a){}}]);