(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[799,589,805,806,807,810,812,813],{1035:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a(23),r=a(0),i=a.n(r),c=a(39),l=a(2262),o=i.a.createContext({activeCurrency:null,currencies:[],onChangeCurrency:function(e){},extractPrice:function(e,t){}}),s=(o.Consumer,function(e){return function(t){var a=Object(r.useState)(),s=Object(n.a)(a,2),u=s[0],d=s[1],m=Object(c.useSelector)((function(e){return Object(l.f)(e)}));return Object(r.useEffect)((function(){d((function(e){return function(e,t){return e?t.find((function(t){return t.code===e.code})):(null===t||void 0===t?void 0:t.length)?t[0]:null}(e,m)}))}),[m]),i.a.createElement(o.Provider,{value:{activeCurrency:u,currencies:m,onChangeCurrency:function(e){return function(){d(e)}},extractPrice:function(e,t){var a;return u?null===e||void 0===e||null===(a=e[u.type])||void 0===a?void 0:a[t]:null===e||void 0===e?void 0:e[t]}}},i.a.createElement(e,t))}})},1036:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(0),r=a.n(n).a.createContext({}),i=r.Provider;r.Consumer},1037:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(192),r=a(42),i=a(47),c=a(62),l=a(63),o=a(2246),s=a(0),u=a.n(s),d=function(e){return function(t){Object(l.a)(s,t);var a=Object(c.a)(s);function s(){var e;Object(r.a)(this,s);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).fieldRefs=[],e.forwardFocusRef=function(t,a){a&&!e.fieldRefs.some((function(e){return e.name===t}))&&e.fieldRefs.push({name:t,focus:a})},e}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(e){if(e.isSubmitting&&!this.props.isSubmitting&&!this.props.isValid&&this.props.errors&&Object.keys(this.props.errors).length>0){var t,a=Object(n.a)(this.fieldRefs);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(Object(o.f)(this.props.errors,r.name)){r.focus&&"function"===typeof r.focus&&r.focus();break}}}catch(i){a.e(i)}finally{a.f()}}}},{key:"render",value:function(){return u.a.createElement(e,Object.assign({forwardFocusRef:this.forwardFocusRef},this.props))}}]),s}(s.PureComponent)}},1038:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var n=a(3),r=a(23),i=a(139),c=a(258),l=a(2221),o=a(2107),s=a(2232),u=a(0),d=a.n(u),m=function(e){var t=e.isOpened,a=void 0!==t&&t,n=e.children,c=e.className,l=void 0===c?"":c,o=e.iconClassName,s=void 0===o?"":o,m=Object(u.useState)(a),f=Object(r.a)(m,2),p=f[0],v=f[1];Object(u.useEffect)((function(){a!==p&&v(!p)}),[a]);var h=function(){v((function(e){return!e}))};return d.a.createElement("span",{className:l,onClick:h},n,d.a.createElement("span",null,d.a.createElement(i.a,{icon:p?"chevron-down":"chevron-up",className:s,onClick:h})))},f=a(2226),p=a(106),v=a(2215),h=a(2384),b=a(17),g=a(2368),E=a(2214),y=a(2213),k=a(8),O=a(340),N=a(1035),C=function(){var e,t=Object(u.useContext)(N.a),a=t.extractPrice,n=t.activeCurrency,r=Object(b.c)(c.b).t,i=Object(E.a)((function(e){return e.basketData.price}));return i?d.a.createElement(g.a,{allowedRoles:[h.a.AGENCY],unallowedRoles:[h.a.READONLY]},d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"summary-agency"},d.a.createElement(f.a,{triggerBefore:!0,isOpened:!1,trigger:d.a.createElement("div",{className:"summary-agency-title"},r("For agencies"),d.a.createElement(m,{iconClassName:"flipping-icon-vertical"}))},d.a.createElement("div",{className:"summary-agency-list"},d.a.createElement("div",{className:"summary-agency-item"},d.a.createElement("div",{className:"summary-agency-item-title"},"".concat(r("Comission")," (").concat(i.commission.percent,"%)")),d.a.createElement("div",{className:"summary-agency-item-sum"},"".concat(Object(O.b)(a(null===(e=i.commission)||void 0===e?void 0:e.value,"sum")))," ",n&&d.a.createElement(s.a,{currencyCode:n.code})," ")),d.a.createElement("div",{className:"summary-agency-item"},d.a.createElement("div",{className:"summary-agency-item-title"},r("To pay")),d.a.createElement("div",{className:"summary-agency-item-sum"},"".concat(Object(O.b)(a(null===i||void 0===i?void 0:i.priceToPay,"sum")))," ",n&&d.a.createElement(s.a,{currencyCode:n.code})))))))):null},j=a(2092),x=(a(2294),function(){var e=Object(E.a)((function(e){var t=e.basketPromo,a=e.basketData;return{data:t.data,fetching:t.fetching,shoppingCartId:a.shoppingCartId}})),t=e.data,a=e.fetching,n=e.shoppingCartId,i=Object(b.c)(c.b).t,l=Object(u.useState)(""),o=Object(r.a)(l,2),s=o[0],m=o[1],v=Object(y.a)(k.basketActions).actions;return d.a.createElement("div",null,d.a.createElement(f.a,{triggerBefore:!0,trigger:d.a.createElement("span",{className:"link"},i("Do you have a promocode"),"?")},d.a.createElement("div",null,d.a.createElement("div",{className:"basket-promocode"},d.a.createElement(j.a,{placeholder:i("Discount code"),value:s,onChange:function(e){m(e.target.value)},disabled:t&&!0===t.isValid}),d.a.createElement(p.c,{loading:a,disabled:!s||t&&!0===t.isValid,onClick:function(){v.checkPromoCode({shoppingCartId:n,code:s})}},i("Check code"))),t&&!1===t.isValid&&d.a.createElement("p",{className:"text-red"},i("Your discount code is not valid")),t&&!0===t.isValid&&d.a.createElement("p",{className:"text-green"},i("Success")))))}),T=a(42),w=a(47),S=a(62),F=a(63),I=function(e){Object(F.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).timer=void 0,e.state={time:e.props.initialTime||0},e.setTimer=function(){e.state.time>0&&clearInterval(e.timer),e.timer=setInterval((function(){e.setState((function(t){return e.props.onTimeChange&&e.props.onTimeChange(t.time-1),{time:t.time-1}}))}),1e3)},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"componentDidUpdate",value:function(e){this.props.resetCount!==e.resetCount&&(this.setState({time:e.initialTime}),this.setTimer())}},{key:"componentWillUpdate",value:function(e,t){0===t.time&&clearInterval(this.timer)}},{key:"render",value:function(){var e=this.state.time,t=Math.floor(e/60),a=e%60;return d.a.createElement("div",{className:"timer"},t+":"+(a>9?a:"0"+a))}}]),a}(u.PureComponent),A=function(e){var t=e.onExpired,a=e.onResetTimer,l=Object(b.c)(c.b).t,o=Object(u.useState)({time:1800,resetCount:0}),s=Object(r.a)(o,2),m=s[0],f=s[1];return d.a.createElement("div",{className:"summary-timer",style:{backgroundColor:function(e,t){var a=Math.floor(200*(1-e/t)),n=Math.floor(e/t*200);return"rgb(".concat(a,", ").concat(n,", 0)")}(m.time,1800)}},d.a.createElement(i.a,{className:"icon-fire",icon:"fire"}),d.a.createElement("div",{className:"time"},d.a.createElement(I,{initialTime:1800,resetCount:m.resetCount,onTimeChange:function(e){0===e&&(null===t||void 0===t||t()),f((function(t){return Object(n.a)({},t,{time:e})}))}}),d.a.createElement("div",{className:"label"},m.time>0?l("Price is valid"):l("Price is not valid"))),d.a.createElement("span",{className:"icon-reset-timer ".concat(0!==m.time?"invisible":""),onClick:function(){f((function(e){return Object(n.a)({},e,{resetCount:e.resetCount+1})})),null===a||void 0===a||a()}},d.a.createElement(i.a,{icon:"sync-alt"})))},D=a(1034),M=a(39),P=function(){var e,t,a,n,r,i,o,m,f,p,v=Object(u.useContext)(N.a),h=v.extractPrice,g=v.activeCurrency,E=Object(b.c)(c.b).t,y=Object(M.useSelector)((function(e){return e.basketData.price}),M.shallowEqual);return y?d.a.createElement("div",{className:"summary-container"},d.a.createElement("div",{className:"summary-list"},d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},E("Tour Package")),d.a.createElement("div",{className:"summary-list-item-sum"},"".concat((null===(e=y.details)||void 0===e?void 0:e.packet)&&Object(O.b)(h(null===(t=y.details)||void 0===t||null===(a=t.packet)||void 0===a?void 0:a.price,"sum")))," ",g&&d.a.createElement(s.a,{currencyCode:g.code,size:14})),d.a.createElement("ul",{className:"summary-list-item-full-width"},null===(n=y.details)||void 0===n||null===(r=n.packet)||void 0===r||null===(i=r.services)||void 0===i?void 0:i.map((function(e){return d.a.createElement(R,{key:e.id,priceItem:e})})))),null===(o=y.details)||void 0===o||null===(m=o.addServices)||void 0===m?void 0:m.map((function(e,t){return d.a.createElement("div",{key:t,className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},e.name),d.a.createElement("div",{className:"summary-list-item-sum"},d.a.createElement("span",null,h(e.price,"sum")>0?"+".concat(Object(O.b)(h(e.price,"sum"))):Object(O.b)(h(e.price,"sum"))," "),g&&d.a.createElement(s.a,{currencyCode:g.code})))})),d.a.createElement(l.a,{themes:l.b.mouzenidis},d.a.createElement(d.a.Fragment,null,null===(f=y.details)||void 0===f||null===(p=f.discounts)||void 0===p?void 0:p.map((function(e){return d.a.createElement("div",{key:e.code,className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},e.name),d.a.createElement("div",{className:"summary-list-item-sum"},d.a.createElement("span",null,h(e.price,"sum")>0?"+".concat(Object(O.b)(h(e.price,"sum"))):Object(O.b)(h(e.price,"sum"))," "),g&&d.a.createElement(s.a,{currencyCode:g.code})))}))))))):null},R=function(e){var t=e.priceItem;return!!t.description?d.a.createElement("li",null,d.a.createElement("span",null,t.name.toLowerCase(),d.a.createElement(D.a,{title:d.a.createElement("div",null,t.description)},d.a.createElement("span",null,d.a.createElement(i.a,{className:"link small m-l-5",icon:"info-circle"}))))):d.a.createElement("li",null,t.name.toLowerCase())},_=function(){var e=Object(u.useContext)(N.a),t=e.extractPrice,a=e.activeCurrency,n=Object(b.c)(c.b).t,r=Object(M.useSelector)((function(e){return{price:e.basketData.price,tour:e.basketData.tour}}),M.shallowEqual),i=r.price,l=r.tour;return d.a.createElement("div",{className:"summary-total"},d.a.createElement("div",{className:"summary-total-title"},d.a.createElement("div",null,n("Price")),d.a.createElement("span",{className:"small grey"},l&&"".concat(n("Your tour for")," ").concat(l.nights," ").concat(n("nights")))),d.a.createElement("div",{className:"summary-total-info"},d.a.createElement("div",{className:"summary-total-info-price text-orange"},Object(O.b)(t(null===i||void 0===i?void 0:i.priceTotal,"sum"))," ",a&&d.a.createElement(s.a,{currencyCode:a.code}))))},B=a(12),V=a.n(B),z=a(2090),H=a(140),L=a(21),q=a(2233),U=a(2222),Y=a(2223),K=a(2224),G=a(2337),W=a(2370),$=a(2089),X=a(1033),J=function(e){var t=e.confirm,a=e.cancel,i=Object(u.useState)({fetching:!1,reasons:[],selectedReason:void 0,reasonText:""}),l=Object(r.a)(i,2),o=l[0],s=l[1],m=function(e){var t,a;return null===(t=o.reasons)||void 0===t||null===(a=t.find((function(t){return t.id===e})))||void 0===a?void 0:a.isCustom};Object(u.useEffect)((function(){s((function(e){return Object(n.a)({},e,{fetching:!0})})),$.a.get("".concat(X.b,"/orders/cancellation-reasons"),null).then((function(e){s((function(t){return Object(n.a)({},t,{fetching:!1,reasons:Object(L.a)(e.data)})}))})).catch((function(){s((function(e){return Object(n.a)({},e,{fetching:!1})}))}))}),[]);var f=Object(u.useMemo)((function(){return!!o.fetching||(!(!o.selectedReason||!m(o.selectedReason)||o.reasonText)||!o.selectedReason)}),[o.selectedReason,o.reasonText,o.fetching]),h=Object(b.c)(c.a).t,g=function(){var e=null;if(o.selectedReason&&m(o.selectedReason))e=o.reasonText;else{var a=o.reasons.find((function(e){return e.id===o.selectedReason}));e=null===a||void 0===a?void 0:a.name}t({reason:e,reasonId:o.selectedReason})};return d.a.createElement(q.a,{modalTitle:h("Request cancellation"),modalFooter:function(e){var t=e.closeModal;return d.a.createElement(U.a,null,d.a.createElement(Y.a,null,d.a.createElement(K.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement(p.c,{color:"dark",plain:!0,onClick:t},h("Cancel"))," ",d.a.createElement(p.c,{type:"button",color:"success",onClick:g,disabled:f},h("Confirm"))))))},onClose:a},d.a.createElement(U.a,null,d.a.createElement(Y.a,{className:"m-b-15"},d.a.createElement(K.a,{lg:12},h("Do you want to send a cancellation request"),"?")),d.a.createElement(Y.a,null,d.a.createElement(K.a,{lg:12},h("Choose a reason"),":")),d.a.createElement(Y.a,null,d.a.createElement(K.a,{lg:12},o.reasons&&d.a.createElement(G.a,{valueKey:"id",labelKey:"name",options:o.reasons,onChange:function(e){s((function(t){return Object(n.a)({},t,{selectedReason:e})}))}}),o.selectedReason&&m(o.selectedReason)&&d.a.createElement(W.a,{className:"m-t-5",value:o.reasonText,onChange:function(e){var t;"string"===typeof(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)&&s((function(t){return Object(n.a)({},t,{reasonText:e.target.value})}))}}))),o.fetching&&d.a.createElement(v.a,null)))},Z=function(){var e,t,a,i,l,v,h,g=Object(H.e)(),y=Object(u.useContext)(N.a),C=y.extractPrice,j=y.activeCurrency,x=Object(u.useState)({canceled:!1,showConfirmDialog:!1}),T=Object(r.a)(x,2),w=T[0],S=T[1],F=Object(M.useDispatch)(),I=Object(b.c)(c.b).t,A=Object(E.a)((function(e){return{payment:e.basketData.payment,isPreeBooking:e.order.isPreeBooking,order:e.order.order}})),D=A.payment,P=A.isPreeBooking,R=A.order;return d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"summary-orders summary-agency"},d.a.createElement(f.a,{isOpened:!0,className:"m-b-15",triggerBefore:!0,trigger:d.a.createElement("div",{className:"summary-agency-title"},I("Payment"),d.a.createElement(m,{isOpened:!0,iconClassName:"flipping-icon-vertical"}))},d.a.createElement("div",{className:"p-t-10 p-b-10"},(null===D||void 0===D||null===(e=D.avia)||void 0===e?void 0:e.timeLimit)&&C(null===D||void 0===D?void 0:D.avia,"sum")?d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Airline Ticketing")),d.a.createElement("div",{className:"small grey"},"".concat(I("pay_up_to")," ").concat(V()(null===D||void 0===D||null===(t=D.avia)||void 0===t?void 0:t.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(null===D||void 0===D||null===(a=D.avia)||void 0===a?void 0:a.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(D&&Object(O.b)(C(null===D||void 0===D?void 0:D.avia,"sum")))," ",j&&d.a.createElement(s.a,{currencyCode:j.code}))):null,null===D||void 0===D||null===(i=D.schedule)||void 0===i?void 0:i.map((function(e){return d.a.createElement("div",{key:e.order,className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,"".concat(I(e.textKey)," ").concat(e.percent?"(".concat(e.percent,"%)"):"")),e.timeLimit&&d.a.createElement("div",{className:"small grey"},"".concat(I("until")," ").concat(V()(e.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(e.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(C(e,"sum"))||0)," ",j&&d.a.createElement(s.a,{currencyCode:j.code})))})),(null===D||void 0===D?void 0:D.paid)&&d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Paid"))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(C(D.paid,"sum"))," ")," ",j&&d.a.createElement(s.a,{currencyCode:j.code}))),(null===D||void 0===D?void 0:D.debt)&&d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Debt")),D.debt.timeLimit&&d.a.createElement("div",{className:"small grey"},"".concat(I("until")," ").concat(V()(D.debt.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(D.debt.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(C(D.debt,"sum"))||0)," ",j&&d.a.createElement(s.a,{currencyCode:j.code}))))),P&&d.a.createElement(p.c,{type:"button",fullWidth:!0,color:"primary",onClick:function(){F(k.ordersActions.confirmBooking(R.code))}},I("Confirm booking")),D&&C(D.debt,"sum")>0&&D.allowPayment&&d.a.createElement("a",{rel:"noopener noreferrer",href:Object(z.a)("/payments/".concat(R.code)),target:"_blank"},d.a.createElement(p.c,{type:"button",fullWidth:!0,color:"success"},I("Pay"))),2!==(null===R||void 0===R||null===(l=R.status)||void 0===l?void 0:l.id)&&d.a.createElement("div",{className:"order-page-cancelation m-t-5"},d.a.createElement(p.c,{type:"button",fullWidth:!0,color:"danger",disabled:w.canceled,onClick:function(){S((function(e){return Object(n.a)({},e,{showConfirmDialog:!0})}))}},w.canceled&&I("Cancellation request is sent"),!w.canceled&&0===(null===(v=R.cancellationStatus)||void 0===v?void 0:v.cancellationStatus)&&I("Cancellation Request"),!w.canceled&&1===(null===(h=R.cancellationStatus)||void 0===h?void 0:h.cancellationStatus)&&I("Cancel order")),w.showConfirmDialog&&d.a.createElement(J,{confirm:function(e){F(k.ordersActions.cancelOrder(Object(n.a)({orderCode:R.code},e))),S((function(e){return Object(n.a)({},e,{showConfirmDialog:!1,canceled:!0})}))},cancel:function(){S((function(e){return Object(n.a)({},e,{showConfirmDialog:!1})}))}}))))},Q=(a(2278),function(e){var t,a=e.submitAllowed,O=void 0!==a&&a,j=e.timer,T=void 0===j||j,w=e.book,S=void 0===w||w,F=e.submitForm,I=e.showPromo,D=e.style,M=e.isValid,R=Object(u.useContext)(N.a),B=R.activeCurrency,V=R.currencies,z=R.onChangeCurrency,H=Object(b.c)(c.b).t,L=Object(u.useState)({summaryOpened:S}),q=Object(r.a)(L,2),U=q[0],Y=q[1],K=Object(E.a)((function(e){return{shoppingCartId:e.basketData.shoppingCartId,basketPageData:e.basketPageData,auth:e.auth,fetching:e.basketActualization.fetching||e.basketDiscount.fetching||e.basketData.fetching,shoppingCart:e.basketData.shoppingCart,tour:e.basketData.tour,price:e.basketData.price}})),G=K.shoppingCartId,W=K.basketPageData,$=K.auth,X=K.fetching,J=K.shoppingCart,Q=Object(y.a)(Object(n.a)({},k.basketActions,{},k.authActions)).actions,ee=Object(u.useMemo)((function(){return 0===(null===J||void 0===J?void 0:J.contractType)?H("Agency contract"):1===(null===J||void 0===J?void 0:J.contractType)?H("Direct contract"):""}),[null===J||void 0===J?void 0:J.contractType]),te=Object(u.useMemo)((function(){var e;return(null===(e=W.bookingBlockedByCause)||void 0===e?void 0:e.length)>0}),[null===W||void 0===W?void 0:W.bookingBlockedByCause]);return d.a.createElement("div",{className:"summary",style:Object(n.a)({},D)},S&&J&&"undefined"!==typeof J.contractType&&d.a.createElement(g.a,{allowedRoles:[h.a.DIRECT_PARTNER]},d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"is-partner"},d.a.createElement("span",{className:"is-partner-icon"},d.a.createElement(i.a,{icon:"handshake"})),d.a.createElement("span",null,ee)))),T&&d.a.createElement(A,{onExpired:function(){Q.basketExpired(!0)},onResetTimer:function(){G&&Q.renewBasket(G)}}),d.a.createElement(o.a,{className:"dashboard"},d.a.createElement(l.a,{themes:l.b.mouzenidis},d.a.createElement("div",{className:"summary-switch"},d.a.createElement("div",null,d.a.createElement("span",{className:"m-r-5"},H("Currency")),d.a.createElement("span",{className:"summary-switch-items"},null===V||void 0===V?void 0:V.map((function(e){return d.a.createElement("div",{key:e.code,className:"summary-switch-item ".concat(B&&B.type===e.type?"active":"link"),onClick:z(e)},d.a.createElement(s.a,{currencyCode:e.code,size:12}))})))),d.a.createElement("div",{className:"summary-switch-btn ".concat(U.summaryOpened?"opened":""),onClick:function(){Y((function(e){return Object(n.a)({},e,{summaryOpened:!e.summaryOpened})}))}},d.a.createElement(m,{isOpened:U.summaryOpened,iconClassName:"flipping-icon-vertical"})))),d.a.createElement(f.a,{isOpened:U.summaryOpened},d.a.createElement(P,null)),d.a.createElement(_,null),I&&(null===J||void 0===J?void 0:J.allowPromoCode)&&d.a.createElement("div",{className:"m-t-5"},d.a.createElement(g.a,{allowedRoles:[h.a.TOURIST,h.a.EMPLOYEE],unallowedRoles:[h.a.AGENCY]},d.a.createElement(x,null)))),d.a.createElement(C,null),!S&&(null===J||void 0===J||null===(t=J.allowedActions)||void 0===t?void 0:t.viewPayments)&&d.a.createElement(Z,null),S&&d.a.createElement(g.a,{allowedRoles:[h.a.AGENCY],unallowedRoles:[h.a.READONLY,h.a.TOURIST,h.a.AGENCY]},d.a.createElement("div",{className:"summary-total-button-group"},d.a.createElement(p.c,{type:"button",onClick:function(){$.user&&$.user.isAuthenticated?null===F||void 0===F||F():Q.authorize({source:"booking"})},disabled:!(O&&M&&!te)},H("Book")))),X&&d.a.createElement(v.a,null))})},1040:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=100,r=function(){return n+=1},i=function(e){n=100;var t=function(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{lastName:r(),firstName:r(),birthdate:r(),citizenshipId:r(),passport:r(),pasportExpiration:r(),taxNumber:r(),order:e.order}})):[{lastName:r(),firstName:r(),birthdate:r(),citizenshipId:r(),passport:r(),pasportExpiration:r(),taxNumber:r(),order:0}]}(e.tourists);return{tourists:t,emergencyPhone:r(),officeId:r(),comment:r(),agree:r(),userAgreement:r(),prebooking:r(),booking:r(),tourist:function(e){return null===t||void 0===t?void 0:t.find((function(t){return t.order===e}))}}}},2095:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(57),i=a(258),c=a(2107),l=a(2279),o=a(2215),s=a(2326),u=a(1034),d=a(2246),m=a(0),f=a.n(m),p=a(17),v=a(79),h=a.n(v),b=a(39),g=a(75),E=a(2088),y=a(8),k=a(21),O=a(139),N=a(155),C=a(264),j=a(2304),x=a(2305),T=a(2306),w=a(2309),S=a(2105),F=a(2225),I=a(106),A=a(254),D=a(1036),M=a(23),P=a(2235),R=a(2098),_=a(12),B=a.n(_),V=a(33),z=a(2262),H=function(e,t){return t},L=Object(V.a)([function(e){return e.basketInsurance.insurance}],(function(e){return e.map((function(e){return Object(n.a)({},e,{variants:e.variants&&e.variants.map((function(e){return{label:e.name,value:e.id}}))})}))})),q=Object(V.a)([z.e,function(e){return e.basketInsurance.selectedInsurance},H],(function(e,t,a){return t.map((function(t){var a,n,r,i=null===e||void 0===e||null===(a=e.tourists)||void 0===a?void 0:a.filter((function(e){return e.services.some((function(e){return e===t.id||t.parentId}))}));return{name:null===t||void 0===t||null===(n=t.subService)||void 0===n?void 0:n.name,touristIds:null===i||void 0===i?void 0:i.map((function(e){return e.id})),dateBegin:t.dateBegin,dateEnd:t.dateEnd,subService:null===(r=t.subService1)||void 0===r?void 0:r.name,groupId:t.groupId}})).filter((function(e){var t;return null===e||void 0===e||null===(t=e.touristIds)||void 0===t?void 0:t.includes(a)}))})),U=Object(V.a)([function(e){return e.basketInsurance.selectedInsuranceServices},H],(function(e,t){return e.filter((function(e){return e.touristId===t}))})),Y=a(2214),K=a(2213),G=a(140),W=function(e){var t=e.touristId,a=e.editInsurances,n=Object(Y.a)((function(e){return{insurance:L(e),selectedInsurance:q(e,t),selectedInsuranceServices:U(e,t),shoppingCartId:e.basketData.shoppingCartId}})),r=n.insurance,c=n.selectedInsurance,l=n.selectedInsuranceServices,o=n.shoppingCartId,s=Object(K.a)(y.basketInsuranceActions).actions,d=Object(p.c)(i.b).t,v=Object(G.e)(),h=function(e){var t=l.find((function(t){return t.groupId===e}));if(!t){var a,n=r.find((function(t){return t.groupId===e}));return(null===n||void 0===n||null===(a=n.variants)||void 0===a?void 0:a.length)&&n.variants[0].value}return null===t||void 0===t?void 0:t.variantId},b=function(e){s.addTouristInsurance({shoppingCartId:o,service:e})},g=function(e){s.removeTouristInsurance({shoppingCartId:o,service:e})},E=Object(m.useMemo)((function(){var e=c.map((function(e){return e.name})).join(", ");return e?": ".concat(e):""}),[c]),k=function(e){return function(a){if(a.target.checked){var n,i=r.find((function(t){return t.groupId===e})),c=(null===i||void 0===i||null===(n=i.variants)||void 0===n?void 0:n.length)&&i.variants[0].value;c&&b({touristId:t,variantId:c,groupId:e})}else{var l=h(e);g({touristId:t,variantId:l,groupId:e})}}},N=function(e){return function(a){b({touristId:t,variantId:a,groupId:e})}},C=Object(m.useMemo)((function(){return 1===(null===l||void 0===l?void 0:l.length)&&(null===r||void 0===r?void 0:r.length)&&a}),[l,r,a]);return((null===r||void 0===r?void 0:r.length)||(null===c||void 0===c?void 0:c.length))&&(a||(null===c||void 0===c?void 0:c.length))?f.a.createElement("div",{className:"basket-tourist-form-visa"},f.a.createElement(P.a,{label:d("Add insurance"),triggerBefore:!0,trigger:f.a.createElement(u.a,{title:(null===c||void 0===c?void 0:c.length)?"".concat(d("Insurance")).concat(E):d("Add insurance")},f.a.createElement(I.c,{size:"sm",type:"button",color:(null===c||void 0===c?void 0:c.length)?"primary":"default",pluginAfter:C?f.a.createElement(O.a,{onClick:function(){var e=l||[],a=Object(M.a)(e,1)[0],n=h(null===a||void 0===a?void 0:a.groupId);g({touristId:t,variantId:n,groupId:null===a||void 0===a?void 0:a.groupId})},icon:"times"}):void 0},(null===c||void 0===c?void 0:c.length)?f.a.createElement("span",{className:"basket-tourist-form-visa-button-text"},"".concat(d("Insurance")).concat(E)):d("Add insurance"))," ")},null===r||void 0===r?void 0:r.map((function(e,t){var n,r;return f.a.createElement("div",{key:"ins_".concat(t),className:"basket-tourist-form-visa-dropdown"},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(F.a,{label:e.name,disabled:!a,checked:(r=e.groupId,c.some((function(e){return e.groupId===r}))),onChange:k(e.groupId)}),(null===e||void 0===e||null===(n=e.variants)||void 0===n?void 0:n.length)&&f.a.createElement(R.b,{label:d("Insurance cover"),clearable:!1,disabled:!a,value:h(e.groupId),options:e.variants,onChange:N(e.groupId)}),f.a.createElement("div",{className:"services-timeline-date m-t-10"},B()(e.dateBegin).format(v.dateFormat)," -"," ",B()(e.dateEnd).format(v.dateFormat))))})))):null},$=a(2217),X=Object(V.a)((function(e,t){return e.basketTouristDocuments.touristsDocumentTypes.filter((function(e){return e.countryId===t.values.citizenshipId}))}),(function(e){return e})),J=Object(b.connect)((function(e,t){return{documentTypes:X(e,t)}}),null)((function(e){var t=e.member,a=e.documentTypes,n=e.forwardFocusRef,r=e.editable,c=e.values,l=e.form,o=function(e){return function(e){if(null===e||void 0===e?void 0:e.mask)return{mask:e.mask.split(",").map((function(e){return" "===e?e:new RegExp(e)})),splitted:e.mask.split(","),id:e.documentTypeId}}(e)},s=Object(p.c)(i.b).t,u=Object(m.useContext)(D.a),v=Object(m.useState)(void 0),h=Object(M.a)(v,2),b=h[0],g=h[1];Object(m.useEffect)((function(){var e=function(){if(null===a||void 0===a?void 0:a.length){return(c.documentType?a.find((function(e){return e.documentTypeId===c.documentType&&e.countryId===c.citizenshipId})):a.find((function(e){return e.isDefault&&e.countryId===c.citizenshipId})))||null}return null}();g(o(e)),e&&e.documentTypeId!==c.documentType&&E(e.documentTypeId)}),[c.documentType,a]);var E=function(e){e||l.setFieldValue("".concat(t,".passport"),""),l.setFieldValue("".concat(t,".documentType"),e)};return f.a.createElement(d.b,{name:"".concat(t,".passport")},(function(e){var i,l;return(null===b||void 0===b||null===(i=b.splitted)||void 0===i?void 0:i.length)&&(e.field.onChange=function(e,t,a,n,r){return function(i){var c=i.target.value.split(a),l=c.length?1===c.length?"":c[0]:"",o=c.length?1===c.length?c[0]:c[1]:"";l&&l.length>n&&(l=l.substring(0,n)),o&&o.length>r&&(o=o.substring(0,r)),t.setFieldValue(e,l?"".concat(l).concat(a).concat(o):o)}}("".concat(t,".passport"),e.form,b.splitted[0],parseInt(b.splitted[1],10),parseInt(b.splitted[2],10))),f.a.createElement(x.a,{tabIndex:null===(l=u.tourist(c.order))||void 0===l?void 0:l.passport,form:e.form,field:e.field,disabled:!r,forwardFocusRef:n,label:r&&a&&a.length?f.a.createElement($.a,{className:"passport-dropdown",valueKey:"documentTypeId",labelKey:"documentTypeName",value:c.documentType,onChange:E,items:a}):f.a.createElement("div",null,s("Passport")),mask:null===b||void 0===b?void 0:b.mask,selectAllOnFocus:!0})}))})),Z=a(2207),Q={1:"AnketaVisa",2:"BiometricConfirmation",3:"AnketaProvisa",4:"ProvisaDocument"},ee=function(e){var t=e.touristId,a=e.visualStatus,n=Object(G.e)(),r=Object(p.c)(i.b).t,c=Object(b.useSelector)((function(e){var a,n=null===(a=e.basketVisas.visaCenters)||void 0===a?void 0:a.find((function(e){return e.touristId===t}));return{visaDocuments:null===n||void 0===n?void 0:n.visaDocuments,visaStatus:null===n||void 0===n?void 0:n.visaStatus}}),b.shallowEqual),l=c.visaDocuments,o=c.visaStatus,s=Object(m.useMemo)((function(){return(null===o||void 0===o?void 0:o.hasErrors)&&(null===o||void 0===o?void 0:o.messages)?o.messages.join():0===a&&(null===o||void 0===o?void 0:o.dateFromEmbassy)?"".concat(r("Visa received")," ").concat(B()(o.dateFromEmbassy).format(n.dateFormat)):2===a&&(null===o||void 0===o?void 0:o.visaReject)?r("Refusal of a visa"):1===a?(null===o||void 0===o?void 0:o.dateToEmbassy)?"".concat(r("Documents sent to the consulate")," ").concat(B()(o.dateToEmbassy).format(n.dateFormat)):!(null===o||void 0===o?void 0:o.dateToEmbassy)&&(null===o||void 0===o?void 0:o.dateReceived)?"".concat(r("Documents for registration received")," ").concat(B()(o.dateReceived).format(n.dateFormat)):r("Waiting for the visa documents"):void 0}),[o,a]);return o&&s?f.a.createElement("div",{className:"basket-tourist-form-status small"},f.a.createElement("span",{className:"orange"},s),null===l||void 0===l?void 0:l.map((function(e,t){return f.a.createElement("a",{key:t,className:"link small dotted m-r-5",href:"".concat(e.isOldSite?"https://online215.mouzenidis-travel.ru":Object(Z.a)()).concat(e.documentLink),target:"_blank",rel:"noopener noreferrer"},r(Q[e.type]))}))):null},te=a(2332),ae=function(e){var t=e.touristId,a=e.values,n=e.member,r=e.onSelectVisa,c=e.onDeleteVisa,l=e.setFieldValue,o=e.onDeleteBiometry,s=e.onSelectBiometry,u=Object(p.c)(i.b).t,v=Object(b.useSelector)((function(e){var a,n,r=null===(a=e.basketVisas.visaCenters)||void 0===a?void 0:a.find((function(e){return e.touristId===t})),i=null===(n=e.basketVisas.mobileBiometrics)||void 0===n?void 0:n.find((function(e){return e.touristId===t}));return{visaOptions:null===r||void 0===r?void 0:r.variants,mobileBiometricOptions:null===i||void 0===i?void 0:i.variants,visaCenters:e.basketVisas.visaCenters}}),b.shallowEqual),h=v.visaOptions,g=v.mobileBiometricOptions,E=v.visaCenters,y=Object(m.useMemo)((function(){var e=null===h||void 0===h?void 0:h.find((function(e){return e.id===a.visaCenter}));return(null===e||void 0===e?void 0:e.name)||""}),[h,a.visaCenter]);return(a.visa||a.editVisas)&&E.length?f.a.createElement("div",{className:"basket-tourist-form-visa"},f.a.createElement(P.a,{label:u("Add visa"),triggerBefore:!0,trigger:f.a.createElement(I.c,{type:"button",size:"sm",color:a.visaCenter&&a.visa?"primary":"default",pluginAfter:a.editVisas&&a.visaCenter&&a.visa&&f.a.createElement("span",{onClick:function(e){e.stopPropagation(),(null===a||void 0===a?void 0:a.visaCenter)&&(null===c||void 0===c||c({selectedVariants:[a.visaCenter],selectedMobileBiometryVariants:a.biometry?[a.biometry]:[]})),null===l||void 0===l||l("".concat(n,".isBiometry"),!1),null===l||void 0===l||l("".concat(n,".visa"),!1),null===l||void 0===l||l("".concat(n,".biometry"),null)}},f.a.createElement(O.a,{icon:"times"}))},a.visaCenter&&a.visa?"".concat(u("Visa application"),": ").concat(y):u("Add visa"))},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown"},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(d.b,{label:u("Apply for a visa"),name:"".concat(n,".visa"),onChange:function(e){e.target.checked?(null===a||void 0===a?void 0:a.visaCenter)&&(null===r||void 0===r||r({selectedVariants:[a.visaCenter]})):((null===a||void 0===a?void 0:a.visaCenter)&&(null===c||void 0===c||c({selectedVariants:[a.visaCenter],selectedMobileBiometryVariants:a.biometry?[a.biometry]:[]})),null===l||void 0===l||l("".concat(n,".isBiometry"),!1),null===l||void 0===l||l("".concat(n,".biometry"),null))},component:te.a,disabled:!a.editVisas}),f.a.createElement(d.b,{name:"".concat(n,".visaCenter"),label:u("Visa Center"),valueKey:"id",labelKey:"name",placeholder:u("Select"),onChange:function(e){null===r||void 0===r||r({selectedVariants:[e]})},options:h,clearable:!1,component:w.a,disabled:!a.editVisas||!a.visa})),(null===g||void 0===g?void 0:g.length)>0&&f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(d.b,{label:u("Mobile biometry"),name:"".concat(n,".isBiometry"),component:te.a,onChange:function(e){e.target.checked||(null===l||void 0===l||l("".concat(n,".biometry"),null),(null===a||void 0===a?void 0:a.biometry)&&(null===o||void 0===o||o({selectedVariants:[a.biometry]})))},disabled:!a.editMobileBiometrics}),f.a.createElement(d.b,{name:"".concat(n,".biometry"),valueKey:"id",labelKey:"name",clearable:!1,label:u("Choose a city"),placeholder:u("Select"),onChange:function(e){null===s||void 0===s||s({selectedVariants:[{serviceId:e}]})},options:g,component:w.a,disabled:!a.editMobileBiometrics||!a.isBiometry}))))):null},ne=function(e){var t=e.tourist,a=Object(p.c)([i.b,i.f]).t,n=Object(m.useMemo)((function(){switch(t.ageType){case 0:return"".concat(a("Adult"));case 1:return"".concat(a("Child")," ").concat(a("".concat(i.f,":childWithCountAges"),{count:t.age}));case 2:return"".concat(a("Infant")," ").concat(a("".concat(i.f,":childWithCountAges"),{count:t.age}));default:return"".concat(a("Adult"))}}),[t.age,t.ageType]);return Object(m.useMemo)((function(){return f.a.createElement("div",{className:"tourist-age"},n)}),[n])},re=(a(2260),function(e){var t,a,n,c,l,o=e.fields,s=e.form,u=e.member,v=e.values,h=e.getDocumentTypes,b=e.citizenships,g=e.citizenshipsLoading,E=e.booking,y=e.attributes,M=e.forwardFocusRef,P=e.visasFetching,R=Object(r.a)(e,["fields","form","member","values","getDocumentTypes","citizenships","citizenshipsLoading","booking","attributes","forwardFocusRef","visasFetching"]),_=Object(p.c)(i.b),B=_.t,V=_.i18n,z=Object(G.e)(),H=Object(m.useContext)(D.a),L=function(e){return function(t){var a,n=null===(a=t.target.value)||void 0===a?void 0:a.toUpperCase();s.setFieldValue(e,n)}},q=Object(N.a)((function(e){return!(o.length>0)||o.findIndex((function(t){return t.code===e}))>-1}));return f.a.createElement(f.a.Fragment,null,f.a.createElement(ne,{tourist:v}),f.a.createElement(f.a.Fragment,null,f.a.createElement(d.b,{name:"".concat(u,".id"),style:{display:"none"}}),q("gender")&&f.a.createElement("div",{className:"basket-tourist-form-item gender"},f.a.createElement(C.a,null,B("Gender")),f.a.createElement(d.b,{name:"".concat(u,".gender"),component:j.a,disabled:!v.editable,type:"default",active:v.gender||"m",options:[{value:"m",label:B("M")},{value:"f",label:B("F")}]})),q("lastName")&&f.a.createElement("div",{className:"basket-tourist-form-item surname"},f.a.createElement(d.b,{name:"".concat(u,".lastName")},(function(e){var t;return e.field.onChange=L("".concat(u,".lastName")),f.a.createElement(x.a,{tabIndex:null===(t=H.tourist(v.order))||void 0===t?void 0:t.lastName,form:e.form,field:e.field,disabled:!v.editable,forwardFocusRef:M,type:"text",label:B("Last name")})})),v.isTaxNumber&&f.a.createElement(d.b,{name:"".concat(u,".taxNumber"),tabIndex:null===(t=H.tourist(v.order))||void 0===t?void 0:t.taxNumber,disabled:!v.editable,forwardFocusRef:M,type:"text",label:B("Tax number"),component:x.a})),q("firstName")&&f.a.createElement("div",{className:"basket-tourist-form-item name"},f.a.createElement(d.b,{name:"".concat(u,".firstName")},(function(e){var t;return e.field.onChange=L("".concat(u,".firstName")),f.a.createElement(x.a,{tabIndex:null===(t=H.tourist(v.order))||void 0===t?void 0:t.firstName,form:e.form,field:e.field,disabled:!v.editable,forwardFocusRef:M,type:"text",label:B("Name")})}))),q("birthdate")&&f.a.createElement("div",{className:"basket-tourist-form-item date-of-birth"},f.a.createElement(d.b,{locale:V.language,name:"".concat(u,".birthdate"),component:T.a,tabIndex:null===(a=H.tourist(v.order))||void 0===a?void 0:a.birthdate,label:B("Date of birth"),mask:z.dateFormatMask,clearable:!1,format:z.dateFormat,placeholder:z.dateFormat,disabled:!v.editable,minDate:v.birthDateMin?new Date(v.birthDateMin):void 0,maxDate:v.birthDateMax?new Date(v.birthDateMax):void 0,year:!0,forwardFocusRef:M})),q("citizenshipId")&&f.a.createElement("div",{className:"basket-tourist-form-item citizenship"},f.a.createElement(d.b,{tabIndex:null===(n=H.tourist(v.order))||void 0===n?void 0:n.citizenshipId,label:B("Citizenship"),name:"".concat(u,".citizenshipId"),forwardFocusRef:M,valueKey:"id",labelKey:"name",placeholder:B("Select"),loading:g,options:b,clearable:!1,component:w.a,disabled:!v.editable,onChange:function(e){e&&h&&h(e,v.id),s.setFieldValue("".concat(u,".citizenshipId"),e)}})),q("passport")&&f.a.createElement("div",{className:"basket-tourist-form-item passport"},f.a.createElement(J,Object.assign({},R,{form:s,forwardFocusRef:M,values:v,member:u,editable:v.editable}))),q("pasportExpiration")&&f.a.createElement("div",{className:"basket-tourist-form-item passport-date"},f.a.createElement(d.b,{name:"".concat(u,".pasportExpiration"),component:T.a,tabIndex:null===(c=H.tourist(v.order))||void 0===c?void 0:c.pasportExpiration,label:B("Valid until"),mask:z.dateFormatMask,clearable:!1,format:z.dateFormat,placeholder:z.dateFormat,year:!0,disabled:!v.editable,minDate:v.pasportExpirationMin?new Date(v.pasportExpirationMin):void 0,forwardFocusRef:M})),(null===y||void 0===y?void 0:y.length)?f.a.createElement("div",{className:"basket-tourist-form-item more-options"},f.a.createElement(C.a,{visible:!1},B("More")),f.a.createElement(S.a,{position:"bottom-right",content:f.a.createElement("div",null,f.a.createElement("ul",{className:"nostyles"},y.map((function(e){return f.a.createElement("li",{key:e.id},f.a.createElement(F.a,{label:e.name,checked:v.attributeIds.includes(e.id),onChange:(t=e.id,function(e){e.target.checked?s.setFieldValue("".concat(u,".attributeIds"),[].concat(Object(k.a)(v.attributeIds),[t])):s.setFieldValue("".concat(u,".attributeIds"),Object(k.a)(v.attributeIds.filter((function(e){return e!==t}))))}),disabled:!v.editable}));var t}))))},f.a.createElement(I.c,{color:"default"},f.a.createElement(O.a,{icon:"ellipsis-h"})))):null,f.a.createElement("div",{className:"basket-tourist-form-other"},f.a.createElement("div",{className:"basket-tourist-form-actions"},f.a.createElement(ae,Object.assign({},R,{touristId:v.id,member:u,values:v})),P&&f.a.createElement(A.a,{className:"m-r-10",size:16,color:"dark"}),f.a.createElement(W,{touristId:v.id,editInsurances:v.editInsurances})),f.a.createElement("div",{className:"basket-tourist-form-tags"},null===y||void 0===y?void 0:y.filter((function(e){return v.attributeIds.includes(e.id)})).map((function(e){return f.a.createElement("div",{key:e.id,className:"basket-tourist-form-item-tag"},e.name,f.a.createElement("span",null,v.editable&&f.a.createElement(O.a,{icon:"times",onClick:(t=e.id,function(){s.setFieldValue("".concat(u,".attributeIds"),Object(k.a)(v.attributeIds.filter((function(e){return e!==t}))))})})));var t}))),!E&&f.a.createElement(ee,{visualStatus:null===(l=v.status)||void 0===l?void 0:l.visualStatus,touristId:v.id}))))}),ie=a(2221),ce=function(){var e=Object(p.c)(i.b).t;return f.a.createElement(ie.a,{themes:ie.b.mouzenidis},f.a.createElement(h.a,{query:"(max-width: 991px)"},(function(t){return t?f.a.createElement(s.a,{color:"warning",small:!0},"".concat(e("Attention"),"! ").concat(e("For tourists over 65 years there is an")," ")," ","".concat(e("age-specific rate"),".")," "," ".concat(e("The reservation cost will be recalculated"),".")):f.a.createElement(s.a,{color:"warning",small:!0},"".concat(e("Attention"),"! ").concat(e("For tourists over 65 years there is an")," "),f.a.createElement(u.a,{title:f.a.createElement("div",null,"".concat(e("Russia"),": 65 ").concat(e("years old"),"-x2, 70 ").concat(e("years old"),"-x3, 75 ").concat(e("years old"),"-x4. ").concat(e("Ukraine"),": ").concat(e("from")," 70 ").concat(e("years old")," ").concat(e("and")," ").concat(e("older"),"-x2"))},f.a.createElement("div",{className:"dotted link"},"".concat(e("age-specific rate"),".")))," ".concat(e("The reservation cost will be recalculated"),"."))})))};t.default=Object(b.connect)((function(e){var t,a,n;return{touristsFetching:e.basketTouristDocuments.touristsFetching,citizenships:e.basketPageData.citizenships,visasFetching:e.basketVisas.fetching,shoppingCartId:e.basketData.shoppingCartId,fetching:e.basketData.fetching||e.basketVisas.changing||e.basketInsurance.fetching,fields:e.basketData.fields,showBookingCondition:null===(t=e.basketData.shoppingCart)||void 0===t||null===(a=t.metaData)||void 0===a||null===(n=a.services)||void 0===n?void 0:n.showBasketTouristInsuranceInfo}}),(function(e){return{actions:Object(g.bindActionCreators)(Object(n.a)({},y.basketActions,{},y.basketVisasActions),e)}}))((function(e){var t=e.values,a=e.citizenshipsLoading,s=e.booking,u=e.fetching,v=e.touristsFetching,h=e.shoppingCartId,b=e.actions,g=e.showBookingCondition,y=Object(r.a)(e,["values","citizenshipsLoading","booking","fetching","touristsFetching","shoppingCartId","actions","showBookingCondition"]),k=Object(p.c)(i.b).t;Object(m.useEffect)((function(){b.saveFormValues(t)}),[t]);var O=Object(E.a)((function(){t.tourists&&b.setTourists({shoppingCartId:h,tourists:t.tourists})}),100),N=function(e){b.setSelectedVisas(Object(n.a)({shoppingCartId:h},e))},C=function(e){b.deleteSelectedVisas(Object(n.a)({shoppingCartId:h},e))},j=function(e){b.setSelectedMobileBiometrics(Object(n.a)({shoppingCartId:h},e))},x=function(e){b.deleteSelectedMobileBiometrics(Object(n.a)({shoppingCartId:h},e))},T=function(e,t){b.getTouristsDocumentTypes({countryIds:[e],touristId:t})},w=Object(m.useMemo)((function(){return t.tourists.reduce((function(e,t,a){t.index=a;var n=t.roomGroup?t.roomGroup.name+" (".concat(t.roomGroup.index,")"):"",r=e.find((function(e){return e.name===n}));return r?(r.tourists.push(t),e):(e.push({name:n,tourists:[t]}),e)}),[])}),[t.tourists]);return f.a.createElement(c.a,{title:k("Guests"),className:"dashboard basket-tourists"},s&&g&&f.a.createElement(ce,null),t.tourists&&f.a.createElement(d.c,{name:"tourists",render:function(e){return w.map((function(t,n){return f.a.createElement("div",{className:t.name?"":"m-t-10",key:t.name||n},t.name&&f.a.createElement(l.a,{className:"m-t-10",color:"dark",tag:"h2",bordered:!0},t.name),t.tourists.map((function(t){return f.a.createElement("div",{key:t.id,className:"basket-tourist-container"},f.a.createElement("div",{className:"basket-tourist-form"},f.a.createElement(re,Object.assign({},y,e,{onBirthdateChanged:O,onSelectVisa:N,onDeleteVisa:C,onSelectBiometry:j,onDeleteBiometry:x,getDocumentTypes:T,values:t,member:"tourists[".concat(t.index,"]"),booking:s,citizenshipsLoading:a}))),(u||(null===v||void 0===v?void 0:v.includes(t.id)))&&f.a.createElement(o.a,null))})))}))}}))}))},2100:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(258),i=a(106),c=a(2107),l=a(2233),o=a(2215),s=a(12),u=a.n(s),d=a(0),m=a.n(d),f=a(17),p=a(79),v=a.n(p),h=a(39),b=a(75),g=a(23),E=a(8),y=a(21),k=a(33),O=Object(k.a)([function(e,t){return e.selectedFlightService.filter((function(e){return e.flightId===t}))}],(function(e){return e.reduce((function(e,t){var a=e.find((function(e){return e.id===t.id}));return a?[].concat(Object(y.a)(e.filter((function(e){return e.id!==t.id}))),[Object(n.a)({},a,{count:a.count+t.count,totalAmount:a.totalAmount+t.totalAmount})]):e.concat([t])}),[])})),N=Object(k.a)([function(e){return e.flightServiceList}],(function(e){return e.reduce((function(e,t){var a=e.find((function(e){return e.group===t.category}));return a?a.items.push(t):e.push({group:t.category,items:[t],isNeedTranslation:!1,order:t.categoryOrder}),e}),e&&e.length>0?[{group:"All",items:e,isNeedTranslation:!0,order:0}]:[]).sort((function(e,t){return e.order-t.order}))})),C=Object(k.a)([function(e,t){return e.minimalPrices.find((function(e){return e.flightId===t}))}],(function(e){return e})),j=Object(k.a)([function(e){return e.selectedFlightService},function(e){return e.selectedFlightId}],(function(e,t){return e.filter((function(e){return e.flightId===t}))})),x=a(2262),T=a(10),w=a(9),S=a(2222),F=a(2223),I=a(2224),A=a(793),D=a(2226),M=a(2364),P=a(2232),R=a(2237),_=a(139),B=a(14);function V(){var e=Object(T.a)(["\n  padding: 0.5rem 0 0 0;\n  margin-top: 1rem;\n  border-top: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: ",";\n  font-weight: 500;\n  .shop-summary-total-text {\n    text-transform: uppercase;\n  }\n  .shop-summary-total-price {\n    font-weight: 500;\n  }\n"]);return V=function(){return e},e}function z(){var e=Object(T.a)(["\n  .shop-summary-list-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n    margin-bottom: 0.25rem;\n    padding-bottom: 0.25rem;\n    border-bottom: 1px dotted ",";\n    &:last-child {\n      border-bottom: 0;\n    }\n    .shop-summary-list-item-price {\n      color: ",";\n      font-weight: 500;\n    }\n  }\n"]);return z=function(){return e},e}function H(){var e=Object(T.a)(["\n  color: ",";\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.375rem;\n  font-weight: 500;\n  border-bottom: 1px solid ",";\n"]);return H=function(){return e},e}function L(){var e=Object(T.a)(["\n  position: sticky;\n  top: 0;\n  .shop-summary-title {\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.25rem;\n    margin-bottom: 1rem;\n    font-weight: 500;\n  }\n  .shop-summary-empty {\n    text-align: center;\n    padding: 1.5rem 0 0 0;\n    .icon {\n      font-size: 2.5rem;\n      margin-bottom: 1rem;\n      color: ",";\n    }\n  }\n  .shop-summary-empty-title {\n    font-weight: 500;\n    font-size: 1rem;\n    margin-bottom: 0.5rem;\n  }\n  .shop-summary-empty-description {\n    color: ",";\n  }\n"]);return L=function(){return e},e}function q(){var e=Object(T.a)(["\n  .in-flight-item-panel {\n    padding-top: 1rem;\n    .in-flight-item-panel-actions {\n      ul {\n        li {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          border-radius: ",";\n          margin-bottom: 0.5rem;\n          .in-flight-item-tourist-name {\n            flex: 1;\n            border: 1px solid #eee;\n            padding: 0.375rem;\n            margin-right: 0.5rem;\n            border-radius: ",";\n          }\n          .item-panel-number-input {\n            flex: 0 0 150px;\n          }\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}function U(){var e=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  @media (max-width: 768px) {\n    display: block;\n  }\n\n  .in-flight-item-image {\n    img {\n      max-width: 80px;\n      border-radius: ",";\n      @media (max-width: 768px) {\n        max-width: 100%;\n      }\n    }\n  }\n  .in-flight-item-container {\n    flex: 1;\n    display: flex;\n    justify-content: space-between;\n    @media (max-width: 768px) {\n      display: block;\n    }\n    .in-flight-item-info {\n      flex: 1 0 60%;\n      padding: 0 1rem;\n      @media (max-width: 768px) {\n        padding: 0.75rem 0;\n        margin-bottom: 0.75rem;\n      }\n    }\n    .in-flight-item-info-title {\n      flex: 1;\n      font-size: 1rem;\n      color: ",";\n      font-weight: 500;\n    }\n    .in-flight-item-info-category {\n      font-size: 0.875rem;\n      color: ",";\n      font-weight: normal;\n    }\n    .in-flight-item-info-actions {\n      display: inline-flex;\n      justify-content: flex-end;\n      align-items: center;\n      align-self: center;\n      @media (max-width: 768px) {\n        width: 100%;\n      }\n    }\n    .in-flight-item-info-actions-price {\n      margin-right: 1rem;\n      & > span {\n        font-weight: 500;\n        font-size: 1rem;\n      }\n    }\n    .in-flight-item-info-desrciption {\n      font-size: 0.75rem;\n      font-weight: normal;\n      line-height: 1.2;\n    }\n  }\n"]);return U=function(){return e},e}function Y(){var e=Object(T.a)([""]);return Y=function(){return e},e}var K=function(e){var t=e.onSave,a=e.onMountAction,l=e.flightService,s=e.fetching,u=e.tourists,p=e.selectedFlightId,v=e.selectedFlightService,h=Object(f.c)(r.b).t;Object(d.useEffect)((function(){a(),t(v)}),[]),Object(d.useEffect)((function(){O((function(e){return Object(n.a)({},e,{selectedGroup:l&&l.length>0?l[0].group:"",selectedGroupItems:l&&l.length>0?l[0].items:[]})}))}),[l]);var b=Object(d.useState)({selectedGroup:l&&l.length>0?l[0].group:"",selectedGroupItems:l&&l.length>0?l[0].items:[],currentIndex:void 0,basket:v}),E=Object(g.a)(b,2),k=E[0],O=E[1],N=function(e,t){var a=k.basket.find((function(a){return a.touristId===e&&a.id===t}));return a?a.count:0},C=Object(d.useMemo)((function(){var e=function(e){var t=u.find((function(t){return t.id===e})),a=u.indexOf(t);return t.firstName?"".concat(t.firstName," ").concat(t.lastName):"".concat(h("Tourist")," ").concat(++a)},t=function(t){return{name:e(t.touristId),count:t.count,currencyCode:t.currencyCode,amount:t.amount,id:t.touristId}};return{totalCost:k.basket.reduce((function(e,t){return e+(t.totalAmount||0)}),0),currencyCode:k.basket&&k.basket[0]&&k.basket[0].currencyCode,recipeItems:k.basket.reduce((function(e,a){var n,r=e.find((function(e){return e.id===a.id}));return r?(r.tourists=r.tourists.concat([t(a)]).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0})),e):e.concat([(n=a,{id:n.id,name:n.name,tourists:[t(n)]})])}),[])}}),[k.basket]);return m.a.createElement(G,null,m.a.createElement(S.a,null,m.a.createElement(F.a,null,m.a.createElement(I.a,{md:12},m.a.createElement(A.b,{segmented:!0},l.map((function(e,t){return m.a.createElement(i.c,{key:t,selected:k.selectedGroup===e.group,color:k.selectedGroup!==e.group?"default":void 0,onClick:(a=e.group,function(){var e=l.find((function(e){return e.group===a}));e&&O((function(t){return Object(n.a)({},t,{selectedGroup:e.group,selectedGroupItems:e.items})}))})},e.isNeedTranslation?h(e.group):e.group);var a}))))),m.a.createElement(F.a,{className:"m-t-15"},m.a.createElement(I.a,{md:8},k.selectedGroupItems.map((function(e){return m.a.createElement(c.a,{key:e.id,className:"dashboard"},m.a.createElement(D.a,{isOpened:k.currentIndex===e.id,triggerBefore:!0,onToggle:(a=e.id,function(){O((function(e){return Object(n.a)({},e,{currentIndex:e.currentIndex===a?void 0:a})}))}),trigger:m.a.createElement(W,null,m.a.createElement("div",{className:"in-flight-item-image"},e.photo?m.a.createElement("img",{src:"".concat(e.photo,"?w=150&h=120&mode=crop"),alt:e.name}):m.a.createElement(M.a,null)),m.a.createElement("div",{className:"in-flight-item-container"},m.a.createElement("div",{className:"in-flight-item-info"},m.a.createElement("div",{className:"in-flight-item-info-title"},e.name),m.a.createElement("div",{className:"in-flight-item-info-desrciption",dangerouslySetInnerHTML:{__html:e.description}})),m.a.createElement("div",{className:"in-flight-item-info-actions"},m.a.createElement("span",{className:"in-flight-item-info-actions-price"},m.a.createElement("span",null,e.amount)," ",m.a.createElement(P.a,{currencyCode:e.currencyCode})),m.a.createElement(i.c,{color:k.currentIndex===e.id?"":"warning"},k.currentIndex===e.id?h("Close"):h("Select")))))},m.a.createElement($,null,m.a.createElement("div",{className:"in-flight-item-panel"},m.a.createElement("div",{className:"in-flight-item-panel-actions"},m.a.createElement("ul",null,u.map((function(a,r){return m.a.createElement("li",{key:a.id},m.a.createElement("div",{className:"in-flight-item-tourist-name"},a.firstName?"".concat(a.firstName," ").concat(a.lastName):"".concat(h("Tourist")," ").concat(++r)),m.a.createElement("div",{className:"item-panel-number-input"},m.a.createElement(R.a,{min:0,max:e.maxCount||10,value:N(a.id,e.id),onChange:(i=a.id,c=e.id,l=e.name,o=e.currencyCode,s=e.amount,function(e){O((function(a){var r=a.basket.filter((function(e){return!(e.id===c&&e.touristId===i)}));return e>0&&(r=[].concat(Object(y.a)(r),[{flightId:p||"",id:c,touristId:i,name:l,currencyCode:o,amount:s,count:e,totalAmount:e*s}])),t(r),Object(n.a)({},a,{basket:r})}))})})));var i,c,l,o,s}))))))));var a}))),m.a.createElement(I.a,{md:4},m.a.createElement(X,null,m.a.createElement(c.a,{className:"dashboard"},m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"shop-summary-title"},h("Summary")),C.recipeItems&&C.recipeItems.length>0?C.recipeItems.map((function(e){return m.a.createElement("div",{className:"m-b-10",key:e.id},m.a.createElement(J,null,e.name),m.a.createElement(Z,null,e.tourists.map((function(e){return m.a.createElement("div",{className:"shop-summary-list-item",key:e.id},m.a.createElement("span",null,e.name),m.a.createElement("span",{className:"shop-summary-list-item-price"},"".concat(e.count," x ").concat(e.amount),m.a.createElement(P.a,{currencyCode:e.currencyCode})))}))))})):m.a.createElement("div",{className:"shop-summary-empty"},m.a.createElement("div",null,m.a.createElement(_.a,{icon:"basket"})),m.a.createElement("div",null,m.a.createElement("div",{className:"shop-summary-empty-title"},h("Empty menu")),m.a.createElement("p",{className:"shop-summary-empty-description"},h("Looks like you heven't made your choice yet...")))),C.recipeItems&&C.recipeItems.length>0&&m.a.createElement(Q,null,m.a.createElement("div",{className:"shop-summary-total-text"},h("Total")),m.a.createElement("div",{className:"shop-summary-total-price"},C.totalCost," ",m.a.createElement(P.a,{currencyCode:C.currencyCode}))))))))),s&&m.a.createElement(o.a,null))},G=w.e.div(Y()),W=w.e.div(U(),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.grey})),$=w.e.div(q(),(function(e){return e.theme.radius}),(function(e){return e.theme.radius})),X=w.e.div(L(),(function(e){return e.theme.colors.dark}),(function(e){return Object(B.c)(e.theme.colors.dark,.5)}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.grey})),J=w.e.div(H(),(function(e){return e.theme.colors.dark}),(function(e){return Object(B.c)(e.theme.colors.dark,.15)})),Z=w.e.div(z(),(function(e){return Object(B.c)(e.theme.colors.dark,.15)}),(function(e){return e.theme.colors.dark})),Q=w.e.div(V(),(function(e){return e.theme.colors.dark})),ee=function(e){var t=e.children,a=e.isOpened,n=e.onCloseCallback,c=e.onSaveCallback,o=Object(f.c)(r.b).t,s=function(){n()};return a?m.a.createElement(l.a,{scrollable:!0,onClose:s,modalTitle:o("Select item"),className:"bg-dashboard",modalFooter:m.a.createElement(S.a,null,m.a.createElement(F.a,null,m.a.createElement(I.a,{lg:12},m.a.createElement("div",{className:"text-right"},m.a.createElement(A.b,{segmented:!0,align:"flex-end",fullwidth:!0},m.a.createElement(i.c,{color:"dark",plain:!0,onClick:s},o("Cancel")),m.a.createElement(i.c,{color:"success",onClick:function(){c(),s()}},o("Save")))))))},t):null},te=function(){var e=Object(h.useDispatch)(),t=Object(h.useSelector)((function(e){return{isOpened:e.basketMeal.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:N(e.basketMeal),fetching:e.basketMeal.fetching,tourists:Object(x.c)(e),selectedFlightId:e.basketMeal.selectedFlightId,selectedFlightService:j(e.basketMeal)}}),h.shallowEqual),a=t.isOpened,n=t.shoppingCartId,r=t.flightService,i=t.fetching,c=t.tourists,l=t.selectedFlightId,o=t.selectedFlightService,s=Object(d.useState)({basket:[]}),u=Object(g.a)(s,2),f=u[0],p=u[1];return m.a.createElement(ee,{isOpened:a,onSaveCallback:function(){e(E.basketMealActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketMealActions.closeExtraShopModal())}},m.a.createElement(K,{onSave:function(e){p({basket:e})},onMountAction:function(){0===r.length&&e(E.basketMealActions.fetchFlightService(n))},flightService:r,fetching:i,tourists:c,selectedFlightId:l,selectedFlightService:o}))},ae=function(){var e=Object(h.useDispatch)(),t=Object(h.useSelector)((function(e){return{isOpened:e.basketFlightExtra.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:N(e.basketFlightExtra),fetching:e.basketFlightExtra.fetching,tourists:Object(x.c)(e),selectedFlightId:e.basketFlightExtra.selectedFlightId,selectedFlightService:j(e.basketFlightExtra)}}),h.shallowEqual),a=t.isOpened,n=t.shoppingCartId,r=t.flightService,i=t.fetching,c=t.tourists,l=t.selectedFlightId,o=t.selectedFlightService,s=Object(d.useState)({basket:[]}),u=Object(g.a)(s,2),f=u[0],p=u[1];return m.a.createElement(ee,{isOpened:a,onSaveCallback:function(){e(E.basketFlightExtraActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketFlightExtraActions.closeExtraShopModal())}},m.a.createElement(K,{onSave:function(e){p({basket:e})},onMountAction:function(){0===r.length&&e(E.basketFlightExtraActions.fetchFlightService(n))},flightService:r,fetching:i,tourists:c,selectedFlightId:l,selectedFlightService:o}))},ne=function(e){return e.basketFlights.directFlights},re=function(e){return e.basketFlights.backFlights},ie=Object(k.a)(ne,re,(function(e,t){return e.map((function(e){var a=e.linkedVariants&&e.linkedVariants.length&&t.find((function(t){return t.id===e.linkedVariants[0].priceId}));return Object(n.a)({},e,{linkedVariants:e.linkedVariants.map((function(e){return Object(n.a)({},e,{linkedFlight:t.find((function(t){return t.id===e.priceId}))})})),cheapestBackFlight:a})})).map((function(e){return Object(n.a)({},e,{_addPrice:ce(e,e.cheapestBackFlight)})}))}));function ce(e,t){var a,n,r=null;return(null===t||void 0===t||null===(a=t.rtVariants)||void 0===a?void 0:a.some((function(t){return t.directId===e.id})))&&(r=t.rtVariants.find((function(t){return t.directId===e.id}))),r?r.addPricePair:(null===e||void 0===e||null===(n=e.linkedVariants)||void 0===n?void 0:n.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))?e.linkedVariants.find((function(e){return e.priceId===t.id})).addPricePair:((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)}function le(e,t,a){var n=Number(u()(a).format("HH"));return Number(e)<=n&&n<=Number(t)}var oe=Object(k.a)(ie,(function(e){return e.basketFlights.filter}),(function(e,t){return e=Object(y.a)(e.filter((function(e){return le(t.directArrivalTime.from,t.directArrivalTime.to,e.arrivalTime)&&le(t.directDepartureTime.from,t.directDepartureTime.to,e.departureTime)})).map((function(e){var a=e.linkedVariants.filter((function(e){return le(t.backArrivalTime.from,t.backArrivalTime.to,e.linkedFlight.arrivalTime)&&le(t.backDepartureTime.from,t.backDepartureTime.to,e.linkedFlight.departureTime)}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})}))),t.selectedAirlines.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedAirlines.includes(e.airlineCode)})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedAirlines.includes(e.linkedFlight.airlineCode)}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.selectedFlightTypes.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e[t]}))})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e.linkedFlight[t]}))}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.selectedStopovers.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.isConnected:"isConnected"!==t||!0===e.isConnected}))})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.linkedFlight.isConnected:"isConnected"!==t||!0===e.linkedFlight.isConnected}))}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.withLuggage&&!0===t.withLuggage&&(e=Object(y.a)(e.filter((function(e){return e.selectedTariff&&e.selectedTariff.baggageInfo&&"0 PC"!==e.selectedTariff.baggageInfo||e.hasMoreTariffs})).map((function(e){var t=e.linkedVariants.filter((function(e){return e.linkedFlight&&e.linkedFlight.selectedTariff&&e.linkedFlight.selectedTariff.baggageInfo&&"0 PC"!==e.linkedFlight.selectedTariff.baggageInfo||e.linkedFlight&&e.linkedFlight.hasMoreTariffs}));return Object(n.a)({},e,{linkedVariants:t,cheapestBackFlight:t.length?t[0].linkedFlight:void 0})})))),(e=(e=e.filter((function(e){return!!e.cheapestBackFlight}))).map((function(e){return Object(n.a)({},e,{_addPrice:ce(e,e.cheapestBackFlight)})}))).sort((function(e,t){return e._addPrice-t._addPrice})),e})),se=Object(k.a)(re,(function(e){return e})),ue=Object(k.a)(ne,re,(function(e,t){var a=[];return t.map((function(e){return{name:e.airlineName,id:e.airlineCode}})).concat(e.map((function(e){return{name:e.airlineName,id:e.airlineCode}}))).forEach((function(e){a.some((function(t){return t.id===e.id}))||a.push(e)})),a.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}))})),de=(Object(k.a)((function(e){return e.basketFlights.filter}),(function(e){return e.filter.onlyDirectFlights}),se,ie,(function(e,t,a,r){var i=a.some((function(e){return!e.isConnected}));return i=r.some((function(e){return!e.isConnected})),Object(n.a)({},e,{direct:!(!t||!i)})})),Object(k.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return null===e||void 0===e?void 0:e.map((function(t,a){return a%2===0?e.slice(a,a+2):null})).filter((function(e){return e})).map((function(e){var t=Object(g.a)(e,2);return{direct:t[0],back:t[1]}}))}))),me=Object(k.a)((function(e){return e.basketFlights.rules}),(function(e){return e.basketFlights.selectedRuleHash}),(function(e,t){var a=e.find((function(e){return e.hash===t}));return null===a||void 0===a?void 0:a.rules})),fe=Object(k.a)(ie,(function(e){return e.some((function(e){return e.isMouzenidis&&e.linkedVariants&&e.linkedVariants.some((function(e){return e.linkedFlight.isMouzenidis}))}))})),pe=a(42),ve=a(47),he=a(62),be=a(63),ge=a(2230),Ee=a(2235),ye=a(119),ke=a(264);function Oe(){var e=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  .toggle-button-switcher {\n    background-color: ",";\n    border: 1px solid ",";\n    border-radius: 24px;\n    width: 40px;\n    height: 24px;\n    position: relative;\n    transition: all 0.15s ease-out;\n    margin: 0 0.25rem;\n    cursor: pointer;\n    .toggle-button-switch {\n      background: ",";\n      border-radius: 50%;\n      text-align: center;\n      text-decoration: none;\n      height: 24px;\n      width: 24px;\n      position: absolute;\n      top: -1px;\n      left: -1px;\n      transition: all 0.15s ease-out;\n      font-size: 0.75rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #fff;\n      .svg-inline--fa {\n        margin-left: 0.125rem;\n      }\n    }\n    &.active {\n      background-color: ",";\n      border: 1px solid ",";\n      .toggle-button-switch {\n        background: ",";\n        left: 16px;\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}var Ne=function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isToggleOn:e.props.value},e.handleClick=function(t){e.state.isToggleOn!==t&&e.setState({isToggleOn:t},(function(){return e.props.onChange&&e.props.onChange(t)}))},e}return Object(ve.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({isToggleOn:this.props.value})}},{key:"render",value:function(){var e=this,t=this.props,a=t.labelOn,n=t.labelOff;return m.a.createElement(ye.a,null,(function(t){return m.a.createElement(Ce,{className:"toggle-button"},n&&m.a.createElement(ke.a,{onClick:function(){return e.handleClick(!1)}},n||t.off),m.a.createElement("span",{className:"toggle-button-switcher ".concat(e.state.isToggleOn?"active":"").trim(),onClick:function(){return e.handleClick(!e.state.isToggleOn)}},m.a.createElement("span",{className:"toggle-button-switch"},e.state.isToggleOn?m.a.createElement(_.a,{icon:"check"}):m.a.createElement(_.a,{icon:"times"}))),a&&m.a.createElement(ke.a,{onClick:function(){return e.handleClick(!0)}},a||t.on))}))}}]),a}(d.PureComponent),Ce=w.e.div(Oe(),(function(e){return Object(B.c)(e.theme.colors.danger,.1)}),(function(e){return Object(B.c)(e.theme.colors.danger,0)}),(function(e){return e.theme.colors.danger}),(function(e){return Object(B.c)(e.theme.colors.danger,.1)}),(function(e){return Object(B.c)(e.theme.colors.danger,.2)}),(function(e){return e.theme.colors.success})),je=a(2225),xe=a(11),Te=(a(2365),a(2366)),we=a.n(Te),Se=(a(2318),function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={from:null!==e.props.from&&void 0!==e.props.from?e.props.from:0,to:null!==e.props.to&&void 0!==e.props.to?e.props.to:23},e.onChange=function(t){e.setState({from:t[0],to:t[1]})},e.onAfterChange=function(){e.props.onChange({from:e.state.from,to:e.state.to})},e}return Object(ve.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.label,n=t.min,r=t.max,i=t.step,c=t.inline,l=this.state,o=l.from,s=l.to;return m.a.createElement("div",{className:"timepicker"},a&&m.a.createElement(ke.a,null,a),c?m.a.createElement(we.a,{defaultValue:[o,s],min:n,max:r,step:i,marks:(e={},Object(xe.a)(e,o,o),Object(xe.a)(e,s,s),e),onChange:this.onChange,onAfterChange:this.onAfterChange}):m.a.createElement(Ee.a,{className:"timepicker-dropdown",label:a||"Time",trigger:m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"timepicker-trigger"},m.a.createElement("div",{className:"icon"},m.a.createElement(_.a,{icon:"clock"})),m.a.createElement("div",{className:"timepicker-value"},"".concat(o<10?"0"+o:o,":00 - ").concat(s,":00"))))},m.a.createElement(we.a,{defaultValue:[o,s],min:n,max:r,step:i,onChange:this.onChange,onAfterChange:this.onAfterChange})))}}]),a}(d.Component));Se.defaultProps={min:0,max:23,step:1};var Fe=Se,Ie=a(340);function Ae(){var e=Object(T.a)(["\n  padding: 0.375rem 0.5rem;\n  margin-bottom: 0.5rem;\n  border-radius: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  .flight-item-actions {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ae=function(){return e},e}function De(){var e=Object(T.a)(["\n  margin: 0;\n  padding: 0.5rem;\n  list-style: none;\n  border: 1px solid #eee;\n  border-radius: ",";\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.375rem;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 0.25rem;\n    &:last-child {\n      border: none;\n      margin-bottom: 0;\n      padding-bottom: 0;\n    }\n    .item-list-title {\n      flex: 0 0 50%;\n    }\n    .item-list-actions {\n      .item-list-actions-text {\n        cursor: pointer;\n        font-size: 0.75rem;\n        color: #333;\n        border-bottom: 1px dotted;\n        margin-right: 1rem;\n        &:hover {\n          color: ",";\n        }\n      }\n      .icon {\n        margin-left: 0.75rem;\n      }\n      .item-list-actions-edit {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n      .item-list-actions-delete {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n  }\n"]);return De=function(){return e},e}var Me=function(e){var t=e.isReadOnly,a=void 0!==t&&t,n=e.minimalPrice,c=e.items,l=e.onOpenShopCallback,o=e.onDeleteItemCallback,s=e.selectedTitle,u=e.notSelectedTitle,d=e.addButtonTitle,p=Object(f.c)(r.b).t,v=c&&c.length>0||!1;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Re,{isSelected:v},m.a.createElement("div",{className:"".concat(!v&&"text-danger")},v?s:u),m.a.createElement("div",{className:"flight-item-actions"},!v&&n&&!a&&m.a.createElement("span",{className:"m-r-10"},p("from")," ",n.amount,m.a.createElement(P.a,{currencyCode:n.currencyCode})),!a&&m.a.createElement(i.c,{size:"sm",color:"default",onClick:l},d))),c&&c.length>0&&m.a.createElement(Pe,null,c.map((function(e){return m.a.createElement("li",{key:e.id},m.a.createElement("span",{className:"item-list-title"},e.name),m.a.createElement("span",{className:"item-list-actions"},m.a.createElement("span",{className:"item-list-actions-text",onClick:a?void 0:l},"".concat(e.count," x ").concat(e.amount," = ").concat(e.totalAmount),m.a.createElement(P.a,{currencyCode:e.currencyCode})),!a&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"item-list-actions-edit",onClick:l},m.a.createElement(_.a,{icon:"pencil"})),m.a.createElement("span",{className:"item-list-actions-delete",onClick:(t=e.id,function(){o(t)})},m.a.createElement(_.a,{icon:"trash"})))));var t}))))},Pe=w.e.ul(De(),(function(e){return"0 0 ".concat(e.theme.radius," ").concat(e.theme.radius)}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.danger})),Re=w.e.div(Ae(),(function(e){return e.isSelected?"".concat(e.theme.radius," ").concat(e.theme.radius," 0 0}"):e.theme.radius}),(function(e){return e.isSelected?Object(B.c)(e.theme.colors.success,.1):Object(B.c)(e.theme.colors.danger,.1)})),_e=function(e){var t=e.flightId,a=e.isReadOnly,n=void 0!==a&&a,i=Object(f.c)(r.b).t,c=Object(h.useSelector)((function(e){return{selectedFlightService:O(e.basketMeal,t),minimalPrice:C(e.basketMeal,t)}}),h.shallowEqual),l=c.selectedFlightService,o=c.minimalPrice,s=Object(h.useDispatch)();return m.a.createElement(Me,{isReadOnly:n,minimalPrice:o,items:l,onOpenShopCallback:function(){s(E.basketMealActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=l.find((function(t){return t.id===e}));confirm(i("Do you want to delete meal?"))&&s(E.basketMealActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_meal_title"),notSelectedTitle:i("Meal is not included"),addButtonTitle:i("Add meals")})},Be=function(e){var t=e.flightId,a=e.isReadOnly,n=void 0!==a&&a,i=Object(f.c)(r.b).t,c=Object(h.useSelector)((function(e){return{selectedFlightService:O(e.basketFlightExtra,t),minimalPrice:C(e.basketFlightExtra,t)}}),h.shallowEqual),l=c.selectedFlightService,o=c.minimalPrice,s=Object(h.useDispatch)();return m.a.createElement(Me,{isReadOnly:n,minimalPrice:o,items:l,onOpenShopCallback:function(){s(E.basketFlightExtraActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=l.find((function(t){return t.id===e}));confirm(i("Do you want to delete extra?"))&&s(E.basketFlightExtraActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_extra_title"),notSelectedTitle:i("Extra is not included"),addButtonTitle:i("Add extra")})};function Ve(){var e=Object(T.a)(["\n  display: block;\n  height: 100px;\n  width: 100px;\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    content: url(",");\n  }\n"]);return Ve=function(){return e},e}var ze=function(e){var t=e.src,a=e.alt,n=e.className,r=e.placeholder,i=e.usePlaceholderUsBackground,c=Object(d.useState)(r),l=Object(g.a)(c,2),o=l[0],s=l[1],u=Object(d.useState)(),f=Object(g.a)(u,2),p=f[0],v=f[1];return Object(d.useEffect)((function(){var e,a=!1;return p&&o!==t&&(IntersectionObserver?(e=new IntersectionObserver((function(n){n.forEach((function(n){!a&&(n.intersectionRatio>0||n.isIntersecting)&&(s(t),e.unobserve(p))}))}),{threshold:.01,rootMargin:"75%"})).observe(p):s(t)),function(){var t;a=!0,(null===(t=e)||void 0===t?void 0:t.unobserve)&&e.unobserve(p)}}),[t,o,p]),m.a.createElement(He,{className:n,ref:v,src:o,alt:a,onLoad:function(e){},onError:function(e){i&&(e.target.src="".concat(r)),e.target.classList.add("src-loading-error")}})},He=w.e.img(Ve(),(function(e){return e.placeholder}));ze.defaultProps={placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=",usePlaceholderUsBackground:!1};var Le=ze,qe=a(1034),Ue=a(222),Ye=a(1033),Ke=(a(2276),function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(e){var r;return Object(pe.a)(this,a),(r=t.call(this,e)).tariffTypes=[],r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.actions.showFlightRules("")},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(a){return a.flightHash===e&&a.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.actions.fetchFlightTariffs("")},r.onSelectTariff=function(e,t){return function(){r.setState((function(a){return{selectedTariffs:[].concat(Object(y.a)(a.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(n.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(ve.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?this.props.durationMinutes:(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0),a=Math.floor(t/60),n=t%60,i=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){var r,c;return m.a.createElement("div",{className:"flight-item-mobile"},m.a.createElement("div",{className:"flight-item-mobile-top"},m.a.createElement("div",{className:"flight-item-mobile-left"},m.a.createElement("div",{className:"date"},u()(e.props.departureTime).format(null===(r=e.context)||void 0===r?void 0:r.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode)),m.a.createElement("div",{className:"flight-item-mobile-center"},m.a.createElement("div",{className:"flight-details-duration"},a>0&&"".concat(a," ").concat(t("hours_short"),".")," ",n>0&&n+" ".concat(t("minutes_short"),".")),m.a.createElement("div",{className:"flight-details-icon"},i&&"Bus"!==i?m.a.createElement(_.a,{icon:"plane-departure"}):m.a.createElement(_.a,{icon:"bus"})),m.a.createElement("div",{className:"flight-details-stops"},e.props.isConnected?m.a.createElement("div",null,e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",null,m.a.createElement("span",null,t("Direct flight"))))),m.a.createElement("div",{className:"flight-item-mobile-right"},m.a.createElement("div",{className:"date"},u()(e.props.arrivalTime).format(null===(c=e.context)||void 0===c?void 0:c.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.arrivalTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode))),m.a.createElement("div",{className:"flight-item-mobile-bottom"},m.a.createElement("div",{className:"flight-item-mobile-bottom-number"},m.a.createElement("span",{className:"m-r-5"}," ",e.props.airlineName),m.a.createElement("span",{className:"grey"},"(",e.props.flightNumber,")"))))}))}}]),a}(d.PureComponent));Ke.contextType=Ue.a;var Ge=Object(h.connect)((function(e){return{tariffs:e.basketFlights.tariffs}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(Ke),We=(a(2316),function(e){var t=Math.floor(e.durationMinutes/60),a=e.durationMinutes%60,n=Math.floor(e.stopDurationMinutes/60),i=e.stopDurationMinutes%60,c=Object(f.c)(r.b).t;return m.a.createElement("div",{className:"flight-result-details-item"},m.a.createElement("div",{className:"flight-result-details-item-logo"},m.a.createElement("img",{src:e.airline&&e.airline.code?"".concat(Ye.c,"/userfiles/iata-air-logos/").concat(e.airline.code,".png"):"".concat(Ye.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.airline&&e.airline.name||"nologo"})),m.a.createElement("div",{className:"flight-result-details-item-info"},m.a.createElement("div",{className:"details-item-info-airline"},m.a.createElement("div",{className:"details-item-info-airline-title"},e.airline&&e.airline.name),m.a.createElement("div",{className:"details-item-info-class"},e.tariff&&e.tariff.name),m.a.createElement("div",{className:"details-item-info-airline-type"},"(",e.flightNumber,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline"},m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.departureTime).format("HH:mm")),m.a.createElement("span",null,e.departureCity&&e.departureCity.name,", "),m.a.createElement("span",null,"(",e.departureAirport&&e.departureAirport.code,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline-duration"},m.a.createElement("span",null,"".concat(t," ").concat(c("hours_short"),".")," ",a>0&&a+" ".concat(c("minutes_short"),"."))),m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.arrivalTime).format("HH:mm")),m.a.createElement("span",null,e.arrivalCity&&e.arrivalCity.name,", "),m.a.createElement("span",null,"(",e.arrivalAirport&&e.arrivalAirport.code,")"))),e.stopDurationMinutes&&m.a.createElement("div",{className:"flight-result-details-item-connections"},m.a.createElement(_.a,{icon:"clock",className:"icon"}),m.a.createElement("span",null,"".concat(n," ").concat(c("hours_short"),".")," ",i>0&&i+" ".concat(c("minutes_short"),".")," "),m.a.createElement("span",null,c("Connect in")," ",e.arrivalCity&&e.arrivalCity.name," (",e.arrivalAirport&&e.arrivalAirport.code,")"))))}),$e=function(e){var t=e.segments;return m.a.createElement(m.a.Fragment,null," ",t.map((function(e,t){return m.a.createElement(We,Object.assign({key:t},e))})))},Xe=function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(e){var r;return Object(pe.a)(this,a),(r=t.call(this,e)).tariffTypes={ow:"\u0422\u0443\u0434\u0430",owBack:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e",rt:"\u0422\u0443\u0434\u0430 \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e"},r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.showFlightRules()},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(a){return a.flightHash===e&&a.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.fetchFlightTariffs()},r.onSelectTariff=function(e,t){return function(){r.setState((function(a){return{selectedTariffs:[].concat(Object(y.a)(a.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(n.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(ve.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0):this.props.durationMinutes,a=Math.floor(t/60),c=t%60,o=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(v.a,{query:"(max-width: 991px)"},(function(r){var s,f;return r?m.a.createElement(Ge,e.props):m.a.createElement("div",{className:"flight-item"},m.a.createElement("div",{className:"flight-header"},m.a.createElement("div",{className:"flight-header-left"},m.a.createElement("div",{className:"flight-header"},o&&"Bus"!==o?m.a.createElement(Le,{className:"airline-image",usePlaceholderUsBackground:!0,placeholder:"".concat(Ye.c,"/userfiles/iata-air-logos/000.png"),src:e.props.airlineCode?"".concat(Ye.c,"/userfiles/iata-air-logos/").concat(e.props.airlineCode,".png"):"".concat(Ye.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.props.airlineName}):m.a.createElement(Le,{className:"airline-image",src:"".concat(Ye.c,"/userfiles/iata-air-logos/00.png"),alt:e.props.airlineName}),o&&"Bus"!==o?m.a.createElement("span",null,m.a.createElement("span",{className:"airline-name"},e.props.airlineName),m.a.createElement("span",{className:"header-info-block"},e.props.flightNumber)):t("Bus"),(e.props.isMouzenidis||e.props.isCharter)&&m.a.createElement("span",{className:"header-info-block"},e.props.isMouzenidis&&!e.props.isCharter&&t("Mouzenidis flight"),e.props.isCharter&&t("Charter")," "))),m.a.createElement("div",{className:"flight-header-right"},m.a.createElement("div",{className:"fare-type"},e.props.selectedTariff&&e.props.selectedTariff.name,o&&"Bus"!==o&&e.props.rules&&m.a.createElement(qe.a,{title:t("Tariff rules")},m.a.createElement(_.a,{onClick:e.showFlightRules,icon:"info-circle",className:"m-l-5 primary icon"}))),!e.props.disableSelectionTariffs&&m.a.createElement(i.c,{type:"button",size:"sm",color:"default",onClick:e.fetchFlightTariffs,loading:e.props.tariffsFetching},t("Change tariff")),e.state.toggled&&m.a.createElement(l.a,{onClose:e.onCancelSelecting,modalTitle:t("Flight fare"),onToggle:e.fetchFlightTariffs,modalFooter:m.a.createElement("div",{className:"fare-type-footer"},m.a.createElement(i.c,{size:"sm",color:"dark",plain:!0,onClick:e.onCancelSelecting},t("Cancel")),m.a.createElement(i.c,{size:"sm",color:"success",onClick:e.onConfrimSelecting},t("Confirm"))," ")},m.a.createElement("div",{className:"fare-type-change"},m.a.createElement("div",{className:"fare-type-container"},e.props.tariffsFetching?m.a.createElement(ge.a,{style:{minWidth:360},description:t("Search all available rates")}):m.a.createElement(d.Fragment,null,e.props.tariffs.map((function(a){return m.a.createElement(d.Fragment,{key:a.type},e.state.tariffAlert&&"ow"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement(_.a,{icon:"lock",className:"m-r-5 primary icon"})),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))),m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing"},e.tariffTypes[a.type]),m.a.createElement("ul",{className:"nostyles"},a.tariffs.map((function(n,r){return m.a.createElement("li",{key:r,className:e.isSelectedTariff(a.flightHash,n.name)?"selected":"",onClick:e.onSelectTariff(a.flightHash,n)},m.a.createElement("div",{className:"fare-type-name"},n.name),m.a.createElement("div",{className:"fare-type-baggage"},m.a.createElement(_.a,{icon:"baggage",className:"icon"}),n.baggageInfo?n.baggageInfo:t("No")),m.a.createElement("div",{className:"fare-type-pricing"},0!==n.addPrice?m.a.createElement(d.Fragment,null,"+ ".concat(Object(Ie.b)(n.addPrice)," ")," ",m.a.createElement(P.a,{currencyCode:e.props.currencyCode})):t("No surcharge"),m.a.createElement(qe.a,{title:m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement(_.a,{icon:"baggage",className:"icon"})," ",m.a.createElement("span",null,t("baggage"))," ",n.baggageInfo?n.baggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"hand-baggage",className:"icon"})," ",m.a.createElement("span",null,t("hand luggage"))," ",n.handBaggageInfo?n.handBaggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"return-arrow",className:"icon"})," ",m.a.createElement("span",null,t("refund"))," ",n.canReturn?t("Yes"):t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"change-arrows",className:"icon"})," ",m.a.createElement("span",null,t("exchange"))," ",n.canExchange?t("Yes"):t("No")))},m.a.createElement("span",null,m.a.createElement(_.a,{icon:"info-circle",className:"icon link small"})))))})))),e.state.tariffAlert&&"owBack"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement("div",null,m.a.createElement(_.a,{icon:"lock",className:"m-r-5 primary icon"}))),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))))})))))))),m.a.createElement("div",{className:"flight-body"},m.a.createElement("div",{className:"flight-left"},m.a.createElement("div",{className:"flight-info-row"},o&&"Bus"!==o&&m.a.createElement("div",{className:"flight-airport-code link"},m.a.createElement(qe.a,{title:e.props.departureAirportName},m.a.createElement("div",null,e.props.departureCityName,","," ",e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode))),m.a.createElement("div",{className:"flight-duration"},t("Duration")," ",a>0&&"".concat(a," ").concat(t("hours_short"),".")," ",c>0&&c+" ".concat(t("minutes_short"),".")),o&&"Bus"!==o&&m.a.createElement("div",{className:"flight-airport-code link text-right"},m.a.createElement(qe.a,{title:e.props.arrivalAirportName},m.a.createElement("div",null,e.props.arrivalCityName,","," ",e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode)))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"flight-line"},e.props.isConnected&&m.a.createElement("span",null)),m.a.createElement("div",{className:"flight-time  text-right"},u()(e.props.arrivalTime).format("HH:mm"))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-info"},m.a.createElement("div",{className:"flight-date"},u()(e.props.departureTime).format(null===(s=e.context)||void 0===s?void 0:s.localeDateFormat))),e.props.isConnected?m.a.createElement("div",{className:"flight-layover"},e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",{className:"flight-layover"},m.a.createElement("span",{className:"green small"},t("Direct flight"))),m.a.createElement("div",{className:"flight-info text-right"},m.a.createElement("div",{className:"flight-date"},u()(e.props.arrivalTime).format(null===(f=e.context)||void 0===f?void 0:f.localeDateFormat))))),m.a.createElement("div",{className:"flight-right"},e.props.selectedTariff&&m.a.createElement(at,e.props.selectedTariff))),e.state.showDetails&&e.props.segments&&m.a.createElement(l.a,{className:"flights-details-info",onClose:e.closeDetails,modalTitle:t("Flight details")},m.a.createElement($e,{segments:e.props.segments.map((function(t,a){return Object(n.a)({},t,{stopDurationMinutes:e.props.stopDurationMinutes&&e.props.stopDurationMinutes[a]})}))})))}))}))}}]),a}(d.PureComponent);Xe.contextType=Ue.a;var Je=a(2326),Ze=a(2221),Qe=function(){var e=Object(f.c)(r.b).t;return m.a.createElement(Ze.a,{themes:Ze.b.mouzenidis},m.a.createElement(Je.a,{color:"warning",small:!0},"".concat(e("According to the terms of booking charter flights")," ").concat(e("the time and airport of departure can be changed"),". ").concat(e("We will inform you about this in advance"),".")))},et=function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(e){var r;Object(pe.a)(this,a),(r=t.call(this,e)).getDefaultSelectedTariffs=function(e){var t=[];return(null===e||void 0===e?void 0:e.tariff)?(t.push(Object(n.a)({},e.tariff,{name:e.tariff.name,flightHash:e.hash})),t):(r.props.direct&&r.props.direct.selectedTariff&&r.props.direct.selectedTariff.name&&t.push(Object(n.a)({},r.props.direct.selectedTariff,{flightHash:r.props.direct.hash})),r.props.back&&r.props.back.selectedTariff&&r.props.back.selectedTariff.name&&t.push(Object(n.a)({},r.props.back.selectedTariff,{flightHash:r.props.back.hash})),t)},r.getTariffs=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.tariffs;return n?a?n.filter((function(e){return e.flightHash===a.hash})):n.filter((function(a){return a.flightHash===e||a.flightHash===t})):[]},r.getRtVariant=function(e,t){var a;return(null===t||void 0===t||null===(a=t.rtVariants)||void 0===a?void 0:a.some((function(t){return t.directId===e.id})))?t.rtVariants.find((function(t){return t.directId===e.id})):null},r.calculateAddPrice=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.state.selectedTariffs,i=r.calculateCleanAddPrice(e,t,a);return a?i+r.getAdditionalTariffPrice(a.hash,n):i+r.getAdditionalTariffPrice(null===e||void 0===e?void 0:e.hash,n)+r.getAdditionalTariffPrice(e&&t&&t.hash,n)},r.calculateCleanAddPrice=function(e,t,a){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.correctionPrice||0;if(a)return a.addPricePair-i;if((null===e||void 0===e||null===(n=e.linkedVariants)||void 0===n?void 0:n.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))){var c=e.linkedVariants.find((function(e){return e.priceId===t.id}));return c.addPricePair-i}return((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)-i},r.getAdditionalTariffPrice=function(e,t){var a=t.find((function(t){return t.flightHash===e}));return(null===a||void 0===a?void 0:a.addPrice)||0},r.changeReturnFlightShow=function(){r.setState({changeReturnFlight:!0})},r.changeReturnFlightClose=function(){r.setState({changeReturnFlight:!1})},r.changeFlights=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(){var i=null,c=null;if(a){var l=r.state.selectedTariffs.find((function(e){return e.flightHash===a.hash}));c=(null===l||void 0===l?void 0:l.hash)||a.hash,i=(null===l||void 0===l?void 0:l.hash)||e.hash}else{var o=r.state.selectedTariffs.find((function(t){return t.flightHash===(null===e||void 0===e?void 0:e.hash)})),s=r.state.selectedTariffs.find((function(e){return e.flightHash===(null===t||void 0===t?void 0:t.hash)}));i=(null===o||void 0===o?void 0:o.hash)||(null===e||void 0===e?void 0:e.hash),c=(null===s||void 0===s?void 0:s.hash)||(null===t||void 0===t?void 0:t.hash)}r.props.selectFlights&&r.props.selectFlights({directHash:i,backHash:c,correctionPrice:n+r.props.correctionPrice}),r.changeReturnFlightClose()}},r.showFlightRules=function(e){return function(){return r.props.actions.showFlightRules(e)}},r.fetchFlightTariffs=function(e,t,a){return function(){var i=null;a&&!r.props.tariffs.some((function(e){return e.flightHash===a.hash}))?i={rtHash:a.hash}:a||r.props.tariffs.some((function(t){return t.flightHash===e}))&&r.props.tariffs.some((function(e){return e.flightHash===t}))||(i={owHash:e,owBackHash:t}),i&&Object.keys(i)&&r.props.actions.fetchFlightTariffs(Object(n.a)({shoppingCartId:r.props.shoppingCartId},i))}},r.onSelectTariffs=function(e){r.setState((function(t){var a=[].concat(Object(y.a)(t.selectedTariffs.filter((function(t){return!e.some((function(e){return e.flightHash===t.flightHash}))}))),Object(y.a)(e));return{selectedTariffs:a,addPrice:r.calculateAddPrice(r.props.direct,r.props.back,r.state.rtVariant,a)}}),(function(){r.props.promo&&r.changeFlights(r.props.direct,r.props.back,r.state.rtVariant,r.state.addPrice)()}))},r.getSelectedTariff=function(e,t){return t?r.state.selectedTariffs.find((function(e){return e.flightHash===t.hash}))||(null===e||void 0===e?void 0:e.selectedTariff):r.state.selectedTariffs.find((function(t){return t.flightHash&&t.flightHash===(null===e||void 0===e?void 0:e.hash)}))||(null===e||void 0===e?void 0:e.selectedTariff)};var i=r.getRtVariant(e.direct,e.back);return r.state={changeReturnFlight:!1,addPrice:r.calculateAddPrice(e.direct,e.back,i,[]),rtVariant:i,selectedTariffs:r.getDefaultSelectedTariffs(i)},r}return Object(ve.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;(e.direct!==this.props.direct||e.back!==this.props.back)&&this.props.back&&this.props.direct&&this.setState((function(e){var a=t.getRtVariant(t.props.direct,t.props.back);return{rtVariant:a,addPrice:t.calculateAddPrice(t.props.direct,t.props.back,a),selectedTariffs:e.selectedTariffs.length?e.selectedTariffs:t.getDefaultSelectedTariffs(a)}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.direct,n=t.back,c=t.promo,o=t.tariffsFetching,s=t.transport,u=t.currencyCode,p=t.booking,v=t.prePayment;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"flight"},a&&m.a.createElement(d.Fragment,null,((null===n||void 0===n?void 0:n.isCharter)||a.isCharter||!a.isGds||!(null===n||void 0===n?void 0:n.isGds))&&m.a.createElement(Qe,null),m.a.createElement(Xe,Object.assign({},a,{selectedTariff:e.getSelectedTariff(a,e.state.rtVariant),showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:a.hash),fetchFlightTariffs:e.fetchFlightTariffs(a.hasMoreTariffs&&a.hash||void 0,null===n||void 0===n?void 0:n.hash,e.state.rtVariant),tariffsFetching:o,tariffs:e.getTariffs(a.hash,null===n||void 0===n?void 0:n.hash,e.state.rtVariant),selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,transport:s,disableSelectionTariffs:!p||(e.state.rtVariant?!e.state.rtVariant.hasMoreTariffs:!(null===n||void 0===n?void 0:n.hasMoreTariffs)&&!a.hasMoreTariffs),hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:a.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&a.showMeals&&m.a.createElement(_e,{flightId:a.serviceId,isReadOnly:!a.enableMeals}),e.props.hasExtra&&a.showExtras&&m.a.createElement(Be,{flightId:a.serviceId,isReadOnly:!a.enableExtras})),n&&m.a.createElement(d.Fragment,null,m.a.createElement(Xe,Object.assign({},n,{disableSelectionTariffs:!0,selectedTariff:e.getSelectedTariff(n,e.state.rtVariant),hash:e.state.rtVariant?e.state.rtVariant.hash:n.hash,showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:n.hash),transport:s,hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:n.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&n.showMeals&&m.a.createElement("div",null,m.a.createElement(_e,{flightId:n.serviceId,isReadOnly:!n.enableMeals})),e.props.hasExtra&&a.showExtras&&m.a.createElement(Be,{flightId:n.serviceId,isReadOnly:!n.enableExtras})),a&&!c?m.a.createElement("div",{className:"flight-footer"},a.linkedVariants&&a.linkedVariants.length>1&&m.a.createElement("div",{className:"footer-flight-left"},m.a.createElement(i.c,{color:"primary",onClick:e.changeReturnFlightShow},"".concat(t("More")," ").concat(a.linkedVariants.length-1," ").concat(t("returned flights")))),m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(nt,{timeLimit:(null===a||void 0===a?void 0:a.timeLimit)?a.timeLimit:null===n||void 0===n?void 0:n.timeLimit,prePayment:null===v||void 0===v?void 0:v.prePaymentDate}),m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:e.changeFlights(a,n,e.state.rtVariant,e.state.addPrice)},m.a.createElement("span",null,t("Select")),e.state.addPrice>=0?"+":""," ",Object(Ie.b)(e.state.addPrice)," ",m.a.createElement(P.a,{currencyCode:u}))))):(null===a||void 0===a?void 0:a.timeLimit)||(null===n||void 0===n?void 0:n.timeLimit)?m.a.createElement("div",{className:"flight-footer"},m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(nt,{timeLimit:(null===a||void 0===a?void 0:a.timeLimit)?a.timeLimit:n.timeLimit,prePayment:null===v||void 0===v?void 0:v.prePaymentDate}))):null,e.state.changeReturnFlight&&m.a.createElement(l.a,{scrollable:!0,modalTitle:t("Flight back options"),onClose:e.changeReturnFlightClose},m.a.createElement("div",{className:"change-flight-modal-heading-departure"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(_.a,{icon:"plane-alt",className:"m-r-10"}),t("Outbound flight"))),m.a.createElement(Xe,Object.assign({},a,{showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:a.hash),transport:s,disableSelectionTariffs:!0,currencyCode:u})),m.a.createElement("div",{className:"change-flight-modal-heading-return"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(_.a,{icon:"plane-alt",className:"m-r-10"}),t("Flight back options")),m.a.createElement("div",{className:"change-flight-modal-heading-right"},t("Extra charge for outbound + back flight"))),m.a.createElement(tt,{direct:a,getRtVariant:e.getRtVariant,calculateAddPrice:e.calculateAddPrice,getSelectedTariff:e.getSelectedTariff,fetchFlightTariffs:e.fetchFlightTariffs,getTariffs:e.getTariffs,changeFlights:e.changeFlights,translater:t,transport:s,tariffsFetching:o,showFlightRules:e.showFlightRules,selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,calculateCleanAddPrice:e.calculateCleanAddPrice,currencyCode:u}))))}))}}]),a}(d.PureComponent);et.defaultProps={promo:!1,hasMeal:!1,hasExtra:!1};var tt=function(e){var t=e.direct,a=e.getRtVariant,r=e.calculateAddPrice,i=e.getSelectedTariff,c=e.fetchFlightTariffs,l=e.getTariffs,o=e.changeFlights,s=e.translater,u=e.tariffsFetching,d=e.showFlightRules,f=e.selectedTariffs,p=e.onSelectTariffs,v=e.calculateCleanAddPrice,h=e.currencyCode,b=e.transport,g=t.linkedVariants.map((function(e){var i=a(t,e.linkedFlight),c=r(t,e.linkedFlight,i),l=v(t,e.linkedFlight,i);return Object(n.a)({},e,{_rtVariant:i,_addPrice:c,_cleanPrice:l})}));return g.sort((function(e,t){return e._cleanPrice-t._cleanPrice})),g.map((function(e){return m.a.createElement("div",{key:e.priceId,className:"flight"},e.linkedFlight&&m.a.createElement(Xe,Object.assign({},e.linkedFlight,{selectedTariff:i(e.linkedFlight,e._rtVariant),transport:b,disableSelectionTariffs:e._rtVariant?!e._rtVariant.hasMoreTariffs:(!e.linkedFlight||!e.linkedFlight.hasMoreTariffs)&&!t.hasMoreTariffs,hash:e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash,showFlightRules:d(e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash),fetchFlightTariffs:c((null===t||void 0===t?void 0:t.hasMoreTariffs)&&t.hash||void 0,e.linkedFlight.hash,e._rtVariant),tariffsFetching:u,tariffs:l(null===t||void 0===t?void 0:t.hash,e.linkedFlight&&e.linkedFlight.hash,e._rtVariant),selectedTariffs:f,onSelectTariffs:p,currencyCode:h,hasMoreTariffs:e._rtVariant?e._rtVariant.hasMoreTariffs:e.linkedFlight.hasMoreTariffs})),m.a.createElement("div",{className:"flight-footer-modal"},m.a.createElement("div",{className:"footer-flight-modal-left"},m.a.createElement(nt,{timeLimit:e.linkedFlight&&e.linkedFlight.timeLimit})),m.a.createElement("div",{className:"footer-flight-modal-right"},m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:o(t,e.linkedFlight,e._rtVariant,e._addPrice)},m.a.createElement("span",null,s("Select"))," ",e._addPrice>=0?"+":""," ",Object(Ie.b)(e._addPrice)," ",m.a.createElement(P.a,{className:"m-l-5",size:14,currencyCode:h}))))))}))},at=function(e){return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement("div",{className:"fare-details"},m.a.createElement("ul",{className:"fare-details-list nostyles"},m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("baggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.baggageInfo?e.baggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("hand luggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.handBaggageInfo?e.handBaggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("refund"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canReturn?t("Yes"):t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("exchange"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canExchange?t("Yes"):t("No")))))}))},nt=function(e){var t=e.timeLimit,a=e.prePayment,n=void 0===a?null:a;return t&&n&&(t=u()(t)>u()(n)?n:t),t?m.a.createElement(f.b,{ns:r.b},(function(e){return m.a.createElement("div",{className:"flight-payment-info"},"".concat(e("Payment before"),": ").concat(u()(t).format("DD MMM YYYY, HH:mm:ss")))})):null},rt=Object(h.connect)((function(e){var t,a,n;return{tariffsFetching:e.basketFlights.tariffsFetching,tariffs:e.basketFlights.tariffs,shoppingCartId:e.basketData.shoppingCartId,currencyCode:null===(t=e.basketData.price)||void 0===t||null===(a=t.priceTotal)||void 0===a||null===(n=a.tour)||void 0===n?void 0:n.currencyCode,correctionPrice:e.basketFlights.flightsCorrectionPrice,prePayment:e.order&&e.order.order&&e.order.order.prePayment}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(et),it=(a(2317),function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(){var e;Object(pe.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onChangeFlight=function(t){e.props.actions.setSelectedFlight(Object(n.a)({shoppingCartId:e.props.shoppingCartId},t)),e.props.actions.showChangeFlightModal(!1)},e.isSelectedAirline=function(t){return e.props.filter.selectedAirlines.includes(t)},e.isSelectedFlightType=function(t){return e.props.filter.selectedFlightTypes.includes(t)},e.isSelectedStopover=function(t){return e.props.filter.selectedStopovers.includes(t)},e.onCheckAirline=function(t){return function(){e.isSelectedAirline(t)?e.props.actions.changeFilter({key:"selectedAirlines",value:e.props.filter.selectedAirlines.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedAirlines",value:[].concat(Object(y.a)(e.props.filter.selectedAirlines),[t])})}},e.onClearSelectedAirlines=function(){e.props.actions.changeFilter({key:"selectedAirlines",value:[]})},e.onCheckFlightType=function(t){return function(){e.isSelectedFlightType(t)?e.props.actions.changeFilter({key:"selectedFlightTypes",value:e.props.filter.selectedFlightTypes.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedFlightTypes",value:[].concat(Object(y.a)(e.props.filter.selectedFlightTypes),[t])})}},e.onClearSelectedFlightTypes=function(){e.props.actions.changeFilter({key:"selectedFlightTypes",value:[]})},e.onCheckStopover=function(t){return function(){e.isSelectedStopover(t)?e.props.actions.changeFilter({key:"selectedStopovers",value:e.props.filter.selectedStopovers.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedStopovers",value:[].concat(Object(y.a)(e.props.filter.selectedStopovers),[t])})}},e.onClearSelectedStopovers=function(){e.props.actions.changeFilter({key:"selectedStopovers",value:[]})},e.onChangeTiming=function(t){return function(a){e.props.actions.changeFilter({key:t,value:a})}},e.onClearTiming=function(){e.props.actions.clearTimings()},e.isTimingChanged=function(e){return 0!==e.from||23!==e.to},e.isTimingsChanged=function(){return e.isTimingChanged(e.props.filter.backDepartureTime)||e.isTimingChanged(e.props.filter.directDepartureTime)||e.isTimingChanged(e.props.filter.backArrivalTime)||e.isTimingChanged(e.props.filter.directArrivalTime)},e.onClearWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!1})},e.onChangeWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!e.props.filter.withLuggage})},e}return Object(ve.a)(a,[{key:"componentDidMount",value:function(){this.props.backFlights.length||this.props.directFlights.length||this.props.fetching||this.props.actions.fetchFlights(this.props.shoppingCartId)}},{key:"componentDidUpdate",value:function(){this.props.fetching||this.props.directFlights.length||!this.props.filter.firstStart||(this.props.actions.changeFilter({key:"firstStart",value:!1}),this.onClearSelectedStopovers())}},{key:"render",value:function(){var e=this;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(S.a,null,e.props.fetching?m.a.createElement(ge.a,{description:t("Searching for all available flights")}):m.a.createElement(m.a.Fragment,null,m.a.createElement(F.a,null,m.a.createElement(I.a,{md:12},m.a.createElement("div",{className:"change-flight-filters"},e.props.showOnlyMouzenidis&&m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedFlightTypes.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedFlightTypes.length?m.a.createElement(_.a,{icon:"times",onClick:e.onClearSelectedFlightTypes}):void 0,onClick:e.onCheckFlightType("isMouzenidis")},t("Only MOUZENIDIS"))),m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedStopovers.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedStopovers.length?m.a.createElement(_.a,{onClick:e.onClearSelectedStopovers,icon:"times"}):void 0,onClick:e.onCheckStopover("isNotConnected")},t("Direct flights"))),m.a.createElement("div",{className:"account-orders-post-filter"},m.a.createElement(Ee.a,{label:t("With luggage"),trigger:m.a.createElement(i.c,{size:"sm",color:e.props.filter.withLuggage?"primary":"default",pluginAfter:e.props.filter.withLuggage?m.a.createElement(_.a,{onClick:e.onClearWithLuggage,icon:"times"}):void 0},t("With luggage"))},m.a.createElement("div",{className:"p1 account-orders-post-filter-dropdown"},m.a.createElement("div",{className:"account-orders-post-filter-visa"},m.a.createElement("div",{className:"account-orders-post-filter-visa-info"},m.a.createElement("div",{className:"bold title"},t("With luggage")),m.a.createElement("p",{className:"desc"},t("Flights with luggage or the ability to select the tariff"))),m.a.createElement(Ne,{labelOn:t("Yes"),labelOff:t("No"),onChange:e.onChangeWithLuggage,value:e.props.filter.withLuggage}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Airlines"),trigger:m.a.createElement(i.c,{color:e.props.filter.selectedAirlines.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedAirlines.length?m.a.createElement(_.a,{onClick:e.onClearSelectedAirlines,icon:"times"}):void 0},t("Airlines"))},m.a.createElement("ul",{className:"nostyles"},e.props.airlines.map((function(t){return m.a.createElement("li",{key:t.id},m.a.createElement(je.a,{label:t.name,checked:e.isSelectedAirline(t.id),onChange:e.onCheckAirline(t.id)}))}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Timing"),trigger:m.a.createElement(i.c,{size:"sm",color:e.isTimingsChanged()?"primary":"default",pluginAfter:e.isTimingsChanged()?m.a.createElement(_.a,{onClick:e.onClearTiming,icon:"times"}):void 0},t("Timing"))},m.a.createElement("div",{className:"change-flight-filters-timing"},m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Fe,{inline:!0,label:t("Departure time"),from:e.props.filter.directDepartureTime.from,to:e.props.filter.directDepartureTime.to,onChange:e.onChangeTiming("directDepartureTime")}),m.a.createElement(Fe,{inline:!0,label:t("Arrival time"),from:e.props.filter.directArrivalTime.from,to:e.props.filter.directArrivalTime.to,onChange:e.onChangeTiming("directArrivalTime")})),m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Fe,{inline:!0,label:t("Departure time Return"),from:e.props.filter.backDepartureTime.from,to:e.props.filter.backDepartureTime.to,onChange:e.onChangeTiming("backDepartureTime")}),m.a.createElement(Fe,{inline:!0,label:t("Arrival time Return"),from:e.props.filter.backArrivalTime.from,to:e.props.filter.backArrivalTime.to,onChange:e.onChangeTiming("backArrivalTime")})))))))),m.a.createElement(F.a,null,m.a.createElement(I.a,{md:12},m.a.createElement("div",{className:"change-flight"},e.props.directFlights.map((function(t){return m.a.createElement(c.a,{key:t.id,className:"dashboard"},m.a.createElement(rt,{transport:e.props.transport,direct:t,back:t.cheapestBackFlight,selectFlights:e.onChangeFlight,booking:e.props.booking}))})))))))}))}}]),a}(d.PureComponent)),ct=Object(h.connect)((function(e){return{fetching:e.basketFlights.fetching,shoppingCartId:e.basketData.shoppingCartId,backFlights:se(e),directFlights:oe(e),airlines:ue(e),filter:e.basketFlights.filter,showOnlyMouzenidis:fe(e)}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(it),lt=function(e){Object(be.a)(a,e);var t=Object(he.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).closeModal=function(){e.props.actions.showFlightRules(e.props.selectedHash)},e}return Object(ve.a)(a,[{key:"componentDidMount",value:function(){this.props.rules||this.props.actions.fetchFlightRules(this.props.selectedHash)}},{key:"render",value:function(){return m.a.createElement(l.a,{scrollable:!0,modalTitle:"Fare rules",onClose:this.closeModal},m.a.createElement("div",null,m.a.createElement("pre",null,m.a.createElement("p",null,this.props.rules)),this.props.fetching&&m.a.createElement(o.a,null)))}}]),a}(d.PureComponent),ot=Object(h.connect)((function(e){return{rules:me(e),selectedHash:e.basketFlights.selectedRuleHash,fetching:e.basketFlights.rulesFetching,shoppingCartId:e.basketData.shoppingCartId}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(lt);a(2315),t.default=Object(h.connect)((function(e){return{showChangeFlight:e.basketFlights.showChangeFlight,showRules:e.basketFlights.showRules,showIssueTickets:e.basketFlights.showIssueTickets,showIssueError:e.basketFlights.showIssueError,showIssueSuccess:e.basketFlights.showIssueTicketsSuccess,fetching:e.basketFlights.fetching||e.basketActualization.fetching||e.basketMeal.fetching,shoppingCartId:e.basketData.shoppingCartId,allowFlightSelection:e.basketFlights.allowFlightSelection,selectedFlights:de(e),allowMoveToTickets:e.basketPageData.allowMoveToTickets,allowTicketsReservation:e.basketPageData.allowTicketsReservation,autoIssuedDate:e.basketPageData.autoIssuedDate,ordercode:e.order&&e.order.order?e.order.order.code:null,tour:e.basketData}}),(function(e){return{actions:Object(b.bindActionCreators)(Object(n.a)({},E.basketActions,{},E.basketFlightsActions),e)}}))((function(e){var t=e.readOnly,a=e.allowFlightSelection,s=e.allowMoveToTickets,p=e.allowTicketsReservation,h=e.showIssueTickets,b=e.showIssueSuccess,g=e.showIssueError,E=e.showChangeFlight,y=e.showRules,k=e.fetching,O=e.actions,N=e.shoppingCartId,C=e.tour,j=e.ordercode,x=e.selectedFlights,T=e.autoIssuedDate,w=e.booking,S=void 0===w||w,F=function(){O.showChangeFlightModal(!0)},I=function(){O.showIssueTicketsModal(!0)},A=function(){O.showIssueTicketsModal(!1)},D=function(){O.setSelectedTab("documents")},M=function(e){O.setSelectedFlight(Object(n.a)({shoppingCartId:N},e))},P=Object(f.c)(r.b).t;return(null===x||void 0===x?void 0:x.length)?m.a.createElement(d.Fragment,null,m.a.createElement(v.a,{query:"(max-width: 991px)"},(function(e){return e?m.a.createElement("div",{className:"flights-mobile basket-mobile-block"},m.a.createElement("div",{className:"basket-mobile-block-title"},m.a.createElement("div",null,C&&"Bus"===C.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights")),m.a.createElement("div",{className:"basket-mobile-block-title-action"})),m.a.createElement("div",{className:"flight-mobile-item"},m.a.createElement("div",{className:"flight-mobile-item-body"},m.a.createElement("div",{className:"flights"},x.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:C.tour.transportType,direct:e.direct,back:e.back,selectFlights:M,promo:!0,booking:S})}))),!t&&S&&a?C&&"Bus"!==C.tour.transportType&&m.a.createElement("div",{onClick:F},m.a.createElement(i.c,{fullWidth:!0,color:"primary"},P("Select another flight"))):m.a.createElement("div",null,s&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:D},P("Tickets has been issued")),p&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:I},P("Issue the tickets")),T&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(T).format("HH:mm DD MMM"))))))):m.a.createElement("div",{className:"flights-wrapper"},m.a.createElement(c.a,{title:C&&"Bus"===C.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights"),className:"dashboard",actions:!t&&S&&a?C&&"Bus"!==C.tour.transportType&&m.a.createElement("div",{onClick:F},m.a.createElement(i.c,{type:"button",size:"sm",color:"primary"},P("Select another flight"))):m.a.createElement("div",null,s&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:D},P("Tickets has been issued")),p&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:I},P("Issue the tickets")),T&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(T).format("HH:mm DD MMM"))))},m.a.createElement("div",{className:"flights"},x.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:C.tour.transportType,direct:e.direct,back:e.back,selectFlights:M,promo:!0,booking:S})})))))})),m.a.createElement(te,null),m.a.createElement(ae,null),h&&m.a.createElement(l.a,{modalTitle:P(b?"Tickets has been issued successfully":"Issue the tickets?"),onClose:A},b&&P("Tickets has been issued successfully"),k&&P("Tickets are issuing"),g&&m.a.createElement("span",null,P("An error occurred during checkout. Please try again or contact sales office.")),k&&m.a.createElement(o.a,null),m.a.createElement("div",{className:"text-right"},m.a.createElement(i.c,{type:"button",color:"danger",onClick:A},P("Close"))," ",!b&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){O.issueOrderTickets(j)}},P("Confirm"))," ",b&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){O.showIssueTicketsModal(!1),O.setSelectedTab("documents")}},P("Electronic ticket(s)")))),E&&m.a.createElement(l.a,{scrollable:!0,onClose:function(){O.showChangeFlightModal(!1)},modalTitle:P("Change flight")},m.a.createElement(ct,{transport:C.tour.transportType,booking:S})),y&&m.a.createElement(ot,null),k&&m.a.createElement(o.a,null)):null}))},2101:function(e,t,a){"use strict";a.r(t),a.d(t,"ExcursionServices",(function(){return ye}));var n=a(3),r=a(23),i=a(139),c=a(258),l=a(2107),o=a(2232),s=a(2215),u=a(0),d=a.n(u),m=a(17),f=a(39),p=a(75),v=a(8),h=a(1035),b=a(33),g=function(e){return e.basketExtra.extra},E=Object(b.a)(g,(function(e){return e.map((function(e){return e.code}))})),y=Object(b.a)(g,(function(e){return e})),k=Object(b.a)((function(e){return e.basketExtra.selectedExtra}),(function(e){return e})),O=Object(b.a)([g,function(e){return e.basketExtra.filter}],(function(e,t){return t.length?e.filter((function(e){return t.includes(e.code)})):e})),N=function(e){return e.basketExtra.excursions},C={VIP:"https://cms.mouzenidis.com/userfiles/onlinenext/services/vip.jpg",RealEstate:"https://cms.mouzenidis.com/userfiles/onlinenext/services/realestate.jpg",Extra:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg",Dinner:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg"},j=Object(b.a)([y,N],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];if(t.length){var n,r=t.reduce((function(e,t){var a,n,r;return(null===e||void 0===e||null===(a=e.tour)||void 0===a?void 0:a.sum)>(null===(n=t.minPrice)||void 0===n||null===(r=n.tour)||void 0===r?void 0:r.sum)?t.minPrice:e}),t[0].minPrice);a.push({title:"Excursions",type:"Excursions",logo:"https://cms.mouzenidis.com/userfiles/onlinenext/services/excursions.jpg",minPrice:r,hasDiffrentPrice:0!==(null===r||void 0===r||null===(n=r.tour)||void 0===n?void 0:n.sum)||t.some((function(e){var t,a,n;return((null===(t=e.minPrice)||void 0===t||null===(a=t.tour)||void 0===a?void 0:a.sum)||0)>((null===r||void 0===r||null===(n=r.tour)||void 0===n?void 0:n.sum)||0)}))})}return(null===e||void 0===e?void 0:e.length)&&(a=a.concat(e.map((function(e){var t,a,n=e.services.reduce((function(e,t){var a=t.variants.reduce((function(e,t){var a,n;return e.concat([null===(a=t.price)||void 0===a||null===(n=a.tour)||void 0===n?void 0:n.sum])}),[]);return e.concat(a)}),[]);return{title:e.name,type:"Extra",logo:C[e.code],minPrice:e.minPrice,code:e.code,hasDiffrentPrice:0!==(null===(t=e.minPrice)||void 0===t||null===(a=t.tour)||void 0===a?void 0:a.sum)||n.some((function(t){var a,n;return t<(null===(a=e.minPrice)||void 0===a||null===(n=a.tour)||void 0===n?void 0:n.sum)}))}})))),a})),x=Object(b.a)(N,(function(e){return e})),T=Object(b.a)([function(e){return e.basketExtra.selectedExcursions},k],(function(e,t){var a=e.map((function(e){return Object(n.a)({},e,{type:"Excursion",tourists:e.touristIds||[]})}));return t.map((function(e){return Object(n.a)({},e,{title:e.name,type:"Extra",tourists:e.tourists||[]})})).concat(a)})),w=a(340),S=a(21),F=a(2233),I=a(2222),A=a(2223),D=a(2224),M=a(106),P=a(2225),R=a(2226),_=a(155),B=a(1033),V=(a(2313),[{label:"VIP service",key:"VIP"},{label:"Real Estate",key:"RealEstate"},{label:"Medical services",key:"Medicine"},{label:"Flowers in the room",key:"Flowers"},{label:"Extra",key:"Extra"},{label:"Dinner",key:"Dinner"}]),z=function(e){var t=e.service,a=e.tourists,n=e.onCheck,r=e.isSelected,l=Object(m.c)(c.b).t,o=Object(_.a)((function(e,t){var n=a.find((function(t){return t.id===e}));return n?"".concat(n.lastName?n.lastName:"".concat(l("Tourist")," ").concat(++t)," ").concat(n.firstName?n.firstName:""):"none"}));return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"services-result-item-service-heading"},t.name),d.a.createElement("div",{className:"services-result-item-body"},d.a.createElement("div",{className:"services-result-item-image"},d.a.createElement("img",{src:t.photoUrl?B.c+t.photoUrl+"?w=220&h=80&mode=crop&quality=60":"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"services-result-item-tourists"},t.variants.map((function(e,t){return d.a.createElement(H,{key:t,label:o(e.touristId,t),variant:e,onChange:n,checked:r(e.serviceId)})})))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"services-result-item-details"},d.a.createElement("span",{className:"link"},l("Description of the service")," ",d.a.createElement(i.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"service-details"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.descriptionHtml},className:"service-details-description"}))))},H=function(e){var t=e.variant,a=e.checked,n=e.onChange,r=e.label,i=Object(u.useContext)(h.a),c=i.extractPrice,l=i.activeCurrency,s=c(t.price,"sum");return d.a.createElement("div",{className:"selected-service-tourist"},d.a.createElement("div",{className:"selected-service-tourist-name"},d.a.createElement(P.a,{label:r,checked:a,defaultChecked:a,onChange:function(){n({serviceId:t.serviceId,price:t.price})}})),d.a.createElement("div",{className:"selected-service-name"},t.name),d.a.createElement("div",{className:"selected-service-price"},s>0?"+".concat(Object(w.b)(s)):Object(w.b)(s)," ",d.a.createElement(o.a,{currencyCode:l.code})))},L=Object(f.connect)((function(e){return{fetching:e.basketExtra.fetching,extra:O(e),extraServiceTypes:E(e),filter:e.basketExtra.filter}}),(function(e){return{actions:Object(p.bindActionCreators)(v.basketExtraActions,e)}}))((function(e){var t=e.filter,a=e.actions,i=e.onClose,l=e.fetching,f=e.extra,p=e.extraServiceTypes,v=e.tourists,b=Object(m.c)(c.b).t,g=Object(u.useContext)(h.a),E=g.extractPrice,y=g.activeCurrency,k=Object(u.useState)({selectedExtra:[],totalSum:0}),O=Object(r.a)(k,2),N=O[0],C=O[1],j=function(e){return t.includes(e)},x=function(e){return N.selectedExtra.some((function(t){return t.serviceId===e}))},T=function(e){C((function(t){if(x(e.serviceId)){var a=t.selectedExtra.filter((function(t){return t.serviceId!==e.serviceId}));return Object(n.a)({},t,{selectedExtra:a,totalSum:a.reduce((function(e,t){return e+E(t.price,"sum")}),0)})}var r=[].concat(Object(S.a)(t.selectedExtra),[e]);return Object(n.a)({},t,{selectedExtra:r,totalSum:r.reduce((function(e,t){return e+E(t.price,"sum")}),0)})}))};return d.a.createElement("div",{className:"add-service"},d.a.createElement(F.a,{scrollable:!0,onClose:i,modalTitle:b("Additional services"),modalFooter:d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"extra-common-sum"},d.a.createElement("div",null,"".concat(b("Total amount")," ").concat(N.totalSum),d.a.createElement(o.a,{currencyCode:y.code}))),d.a.createElement(M.c,{color:"dark",plain:!0,onClick:i},b("Cancel"))," ",d.a.createElement(M.c,{color:"success",onClick:function(){N.selectedExtra&&N.selectedExtra.length&&a.updateSelectedExtra(N.selectedExtra.map((function(e){return e.serviceId}))),i()}},b("Save"))))))},d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:3},d.a.createElement("div",{className:"services-filters"},d.a.createElement("div",{className:"services-filter"},d.a.createElement("div",{className:"services-filter-title"},b("Service Categories")),d.a.createElement("div",{className:"services-filter-body"},V.filter((function(e){return p.includes(e.key)})).map((function(e){return d.a.createElement("div",{key:e.key},d.a.createElement(P.a,{label:b(e.label),onChange:(n=e.key,function(){var e=[];e=t.includes(n)?Object(S.a)(t.filter((function(e){return e!==n}))):[].concat(Object(S.a)(t),[n]),a.changeExtraFilter(e)}),checked:j(e.key)}));var n})))))),d.a.createElement(D.a,{lg:9},d.a.createElement("div",{className:"services-results-heading"},b("Additional services")),d.a.createElement("div",{className:"services-results"},f.map((function(e,t){return d.a.createElement("div",{className:"services-result-item",key:t},d.a.createElement("div",{className:"services-result-item-heading"},e.name),e.services.map((function(e,t){return d.a.createElement(z,{key:t,service:e,tourists:v,onCheck:T,isSelected:x})})))})))))),l&&d.a.createElement(s.a,null)))})),q=a(12),U=a.n(q),Y=(a(1042),a(2098)),K=a(2216),G=a(268),W=a(788),$=a(2334),X=a(140),J=function(e){var t=e.defaultChecked,a=e.defaultDate,i=e.onSelect,c=e.variant,l=e.onDelete,s=e.availableDates,m=e.label,f=Object(X.e)(),p=Object(u.useRef)(null),b=Object(u.useState)({checked:t,date:t?a:void 0}),g=Object(r.a)(b,2),E=g[0],y=g[1];Object(u.useEffect)((function(){y((function(e){return Object(n.a)({},e,{checked:t})}))}),[t]),Object(u.useEffect)((function(){t&&y((function(e){return Object(n.a)({},e,{date:a})}))}),[a]);var k=function(e){i({serviceId:c.serviceId,date:e,touristId:c.touristId,price:c.price,type:v.EXCURSION_TYPES.GROUP})},O=Object(u.useContext)(h.a),N=O.extractPrice,C=O.activeCurrency;return d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-name"},d.a.createElement(P.a,{label:m,checked:E.checked,onChange:function(){var e=E.date,t=!E.checked;(y((function(e){return Object(n.a)({},e,{checked:t})})),!t||a||e)||p.current.setOpen(!0);t&&e&&k(e),t&&!e&&a?(y((function(e){return Object(n.a)({},e,{date:a})})),k(a)):!t&&e&&l(c.serviceId)}})),d.a.createElement($.a,{className:"selected-excursion-date",ref:p,format:f.dateFormat,clearable:!1,year:!0,placeholder:f.dateFormat,value:E.date,mask:f.dateFormatMask,onChange:function(e){y((function(t){return Object(n.a)({},t,{date:e})})),E.checked&&k(e)},includeDates:s?s.map((function(e){return U()(e)})):void 0}),d.a.createElement("div",{className:"selected-excursion-price"},"+".concat(Object(w.b)(N(c.price,"sum")))," ",d.a.createElement(o.a,{currencyCode:C.code})))},Z=a(264),Q=a(267),ee=a(2105),te=a(72),ae=a(79),ne=a.n(ae),re=a(191),ie=a.n(re),ce=a(119),le=function(e){var t=e.type,a=e.selectedLength,n=e.onClearAll,r=e.onSelectedOptionsOpened,c=e.onSelectedOptionsClosed,l=e.tree,o=Object(u.useContext)(ce.b);return d.a.createElement(u.Fragment,null,t===te.b&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner ".concat(a>0?"active":"grey").trim()},a>0&&d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(i.a,{className:"icon",icon:"times",onClick:n})),a>0?d.a.createElement(ne.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:r,onClose:c,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ie.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},l)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},o.selected," ",a)))})):d.a.createElement("span",{className:"small m-l-5"},o.selectedAll))),t===te.a&&a>1&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner active"},d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(i.a,{className:"icon",icon:"times",onClick:n})),d.a.createElement(ne.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:r,onClose:c,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ie.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},l)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},o.selected," ",a)))})))))},oe=a(269),se=a(266),ue=a(2229),de=a(2235),me=a(98),fe=(a(1118),function(e){var t=e.type,a=void 0===t?te.a:t,i=e.valueKey,c=void 0===i?"id":i,l=e.labelKey,o=void 0===l?"name":l,s=e.searchable,m=void 0===s||s,f=e.selectable,p=void 0===f||f,v=e.loading,h=void 0!==v&&v,b=e.width,g=void 0===b?Object(W.e)()?"100%":220:b,E=e.height,y=void 0===E?Object(W.e)()?450:202:E,k=e.rowHeight,O=void 0===k?24:k,N=e.clearable,C=void 0===N||N,j=e.options,x=e.selected,T=e.inputLabelRenderer,w=e.label,F=e.className,I=e.subLabel,A=e.placeholderText,D=e.treeClassName,M=e.labelRenderer,P=e.tooltipRenderer,R=e.onSelect,_=Object(ue.b)().translateNode,B=Object(u.useContext)(ce.b),V=Object(se.a)(j),z=Object(u.useState)({filteredOptions:j,selectedOptions:Object(me.d)(x,V,c),searchFocused:!1,inputLabel:Object(me.b)(Object(me.d)(x,V,c),T,o,B),searchTerm:"",selectedNodesOpened:!1,dropdownOpened:!1}),H=Object(r.a)(z,2),L=H[0],q=H[1],U=Object(se.b)(L.selectedOptions,j,c);Object(u.useEffect)((function(){q((function(e){return Object(n.a)({},e,{inputLabel:Object(me.b)(Object(me.d)(x,V,c),T,o,B),selectedOptions:Object(me.d)(x,V,c)})}))}),[x,V]),Object(u.useEffect)((function(){q((function(e){return Object(n.a)({},e,{filteredOptions:Object(me.a)(V,j,e.searchTerm,o,c,_)})}))}),[j]);var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.searchTerm;q((function(t){return Object(n.a)({},t,{filteredOptions:Object(me.a)(V,j,e,o,c,_)})}))},K=function(){q((function(e){return Object(n.a)({},e,{selectedOptions:[],inputLabel:"",searchTerm:""})})),R([])},G=function(e){var t=e.target.value.toLowerCase();q((function(e){return Object(n.a)({},e,{searchTerm:t})})),Y(t)},$=function(e){var t;L.dropdownOpened&&e.stopPropagation(),(null===(t=L.selectedOptions)||void 0===t?void 0:t.length)>0&&K()},X=function(e){q((function(t){var a=[],r=null;if(e.children&&e.children.length>0&&(r=Object(W.c)(e.children)),t.selectedOptions.some((function(t){return t[c]===e[c]}))){var i=t.selectedOptions.filter((function(t){return t[c]!==e[c]}));r&&(i=i.filter((function(e){return r&&-1===r.findIndex((function(t){return e[c]===t[c]}))}))),a=Object(me.c)(i,V,c);var l=Object(me.c)([e],V,c);return l&&l.length>0&&(i=i.filter((function(e){return l.some((function(t){return t[c]!==e[c]}))}))),i=[].concat(Object(S.a)(i.filter((function(e){return!a.some((function(t){return t[c]===e[c]}))}))),Object(S.a)(a)),R(i.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(n.a)({},t,{selectedOptions:i,inputLabel:Object(me.b)(i,T,o,B)})}a=Object(me.c)([].concat(Object(S.a)(t.selectedOptions),[e]),V,c);var s=t.selectedOptions.concat([Object(n.a)({},e,{_selected:te.e})]);return r&&(s=s.concat(r.map((function(e){return Object(n.a)({},e,{_selected:te.e})})))),s=[].concat(Object(S.a)(s.filter((function(e){return!a.some((function(t){return t[c]===e[c]}))}))),Object(S.a)(a)),R(s.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(n.a)({},t,{selectedOptions:s,inputLabel:Object(me.b)(s,T,o,B)})}))};return d.a.createElement("div",{className:"multiselect ".concat(F||"").trim()},a===te.b?d.a.createElement(u.Fragment,null,m&&d.a.createElement(Q.a,{placeholder:A,searchTerm:L.searchTerm,clearable:!!C&&!!L.inputLabel,onClearInput:$,inputLabel:L.inputLabel,onChange:G,onSearch:Y}),I&&I,p&&d.a.createElement(le,{type:a,selectedLength:L.selectedOptions.length,onClearAll:K,onSelectedOptionsOpened:function(){q((function(e){return Object(n.a)({},e,{selectedNodesOpened:!0})}))},onSelectedOptionsClosed:function(){q((function(e){return Object(n.a)({},e,{selectedNodesOpened:!1})}))},tree:d.a.createElement(oe.a,{options:U,selected:L.selectedOptions,onSelect:X,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:a,height:y,className:D,labelRenderer:M,tooltipRenderer:P})}),d.a.createElement(oe.a,{options:L.filteredOptions,selected:L.selectedOptions,onSelect:X,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:a,height:y,className:D,labelRenderer:M,tooltipRenderer:P})):d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"multiselect-label"},w&&d.a.createElement(Z.a,null,w),I&&I),d.a.createElement(de.a,{onClose:function(){q((function(e){return Object(n.a)({},e,{dropdownOpened:!1})}))},onOpen:function(){q((function(e){return Object(n.a)({},e,{dropdownOpened:!0})}))},allowClosing:!L.selectedNodesOpened,label:w&&w,style:{padding:"4px 0 4px 0",width:g},trigger:d.a.createElement(Q.a,{placeholder:A,searchTerm:L.searchTerm,clearable:!!C&&!!L.inputLabel,onClearInput:$,inputLabel:L.inputLabel,onChange:G,onSearch:Y})},d.a.createElement(oe.a,{options:L.filteredOptions,selected:L.selectedOptions,onSelect:X,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:a,height:y,className:D,labelRenderer:M,tooltipRenderer:P}))))}),pe=function(e){var t=e.variant,a=e.availableDates,i=e.onDelete,l=e.tourists,s=e.onChange,f=Object(m.c)(c.b).t,p=Object(X.e)(),b=Object(u.useMemo)((function(){return l.map((function(e,t){return{id:e.id,name:e.firstName||e.lastName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(f("Tourist"))}}))}),[l]),g=Object(u.useState)({selectedTouristIds:[],date:void 0}),E=Object(r.a)(g,2),y=E[0],k=E[1],O=function(e,a){e.length?s&&a&&s({serviceId:t.serviceId,type:v.EXCURSION_TYPES.INDIVIDUAL,price:t.price,date:a,touristIds:e}):i(t.serviceId)},N=Object(u.useContext)(h.a),C=N.extractPrice,j=N.activeCurrency;return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"selected-excursion-tourist-individual"},d.a.createElement("div",{className:"selected-excursion-price individual"})),d.a.createElement("div",{className:"selected-excursion-tourist-individual-body"},d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-date"},d.a.createElement($.a,{format:p.dateFormat,clearable:!1,Label:f("Excursion date"),year:!0,placeholder:p.dateFormat,value:y.date,mask:p.dateFormatMask,onChange:function(e){k((function(t){return Object(n.a)({},t,{date:e})})),O(y.selectedTouristIds,e)},includeDates:a?a.map((function(e){return U()(e)})):void 0})),d.a.createElement("div",{className:"selected-excursion-tourist-count"},d.a.createElement(Z.a,null,f("Select tourist")),d.a.createElement(fe,{options:b,selected:b.filter((function(e){return y.selectedTouristIds.includes(e.id)})),selectable:!1,onSelect:function(e){var t=e.map((function(e){return e.id}));k((function(e){return Object(n.a)({},e,{selectedTouristIds:t})})),O(t,y.date)}})),d.a.createElement("div",{className:"selected-excursion-tourist-price"},d.a.createElement(Z.a,{className:"invisible"},"Currency"),d.a.createElement("div",{className:"selected-excursion-tourist-count"},"+".concat(Object(w.b)(C(t.price,"sum")))," ",d.a.createElement(o.a,{currencyCode:j.code}))))))},ve=function(e){var t=e.excursion,a=e.tourists,n=void 0===a?[]:a,l=e.onSelect,o=e.onDelete,s=e.isSelected,f=e.date,p=Object(m.c)(c.b).t,h=Object(u.useState)((function(){var e=null===t||void 0===t?void 0:t.prices,a=Object(r.a)(e,1)[0];return{selectedType:null===a||void 0===a?void 0:a.name,selectedPrice:a}})),b=Object(r.a)(h,2),g=b[0],E=b[1],y=Object(u.useMemo)((function(){var e=(null===t||void 0===t?void 0:t.prices.map((function(e){return{label:e.name,value:e.name}})))||[];if(t.type===v.EXCURSION_TYPES.INDIVIDUAL){var a=n.length;e=e.filter((function(e){return e.variants.some((function(e){return e.minTourists<=a}))}))}return e}),[t,n]),k=Object(_.a)((function(e,t){var a=function(e){return n.find((function(t){return t.id===e}))}(e);return a&&(a.lastName||a.firstName)?"".concat(a.lastName," ").concat(a.firstName):"".concat(++t,". ").concat(p("Tourist"))})),O={history:!1,galleryUID:t.id},N=t.gallery.map((function(e){return{src:B.c+e.url,thumbnail:"".concat(B.c).concat(e.thumbnail,"?&mode=crop"),w:1200,h:900}}));return d.a.createElement("div",{className:"excursions-result-item"},d.a.createElement("div",{className:"excursions-result-item-heading"},"".concat(t.title," ").concat(t.durationCategory?"(".concat(p(Object(W.b)(t.durationCategory)),")"):"")),d.a.createElement("div",{className:"excursions-result-item-body"},d.a.createElement("div",{className:"excursions-result-item-image"},d.a.createElement("img",{src:t.image?B.c+t.image:"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"excursions-result-item-tourists"},d.a.createElement(Y.b,{options:y,value:g.selectedType,onChange:function(e){var a;E({selectedType:e,selectedPrice:null===t||void 0===t||null===(a=t.prices)||void 0===a?void 0:a.find((function(t){return t.name===e}))})},clearable:!1}),g.selectedPrice&&d.a.createElement("div",{className:"selected-excursion-tourists-tab"},g.selectedPrice.priceFor===v.EXCURSION_TYPES.GROUP&&g.selectedPrice.variants.map((function(e,a){return d.a.createElement(J,{key:a,label:k(e.touristId,a),variant:e,onSelect:l,onDelete:o,availableDates:t.availableDates,defaultChecked:s(e.serviceId),defaultDate:f(t.id,e.serviceId)})})),g.selectedPrice.priceFor===v.EXCURSION_TYPES.INDIVIDUAL&&g.selectedPrice.variants.map((function(e,a){return d.a.createElement(pe,{key:a,variant:e,availableDates:t.availableDates,onChange:l,tourists:n,onDelete:o})}))))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"excursions-result-item-details"},d.a.createElement("span",{className:"link"},p("Description of the excursion")," ",d.a.createElement(i.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"excursion-details"},d.a.createElement(K.b,{destroyInactive:!0},d.a.createElement(K.a,{title:p("Description of the excursion"),id:"about-excursion"},d.a.createElement("div",{className:"excursion-details-description",dangerouslySetInnerHTML:{__html:t.description}})),d.a.createElement(K.a,{title:p("Photo Gallery"),id:"excursion-gallery"},d.a.createElement("div",{className:"excursion-details-photos"},d.a.createElement("div",{className:"photo-grid"},d.a.createElement(G.PhotoSwipeGallery,{items:N,options:O,thumbnailContent:function(e){return d.a.createElement("img",{src:e.thumbnail,width:120,height:90,alt:""})}}))))))))},he=(a(2312),Object(f.connect)((function(e){return{excursions:x(e)}}))((function(e){var t=e.onClose,a=e.onSave,i=e.tourists,l=e.excursions,s=void 0===l?[]:l,f=Object(m.c)(c.b).t,p=Object(u.useContext)(h.a),b=p.extractPrice,g=p.activeCurrency,E=Object(u.useState)((function(){return{dailyFilter:[],durationFilter:[],excursions:s,selectedExcursions:[]}})),y=Object(r.a)(E,2),k=y[0],O=y[1];Object(u.useEffect)((function(){B()}),[k.dailyFilter,k.durationFilter]);var N=function(e){return k.selectedExcursions.some((function(t){return t.serviceId===e}))},C=Object(u.useMemo)((function(){return k.selectedExcursions.reduce((function(e,t){return e+b(t.price,"sum")}),0)}),[k.selectedExcursions,g]),j=function(e){O((function(t){var a=[];return N(e.serviceId)?(a=t.selectedExcursions.filter((function(t){return t.serviceId!==e.serviceId})),e.type===v.EXCURSION_TYPES.INDIVIDUAL&&e.touristIds.length&&a.push(e)):a=[].concat(Object(S.a)(t.selectedExcursions),[e]),Object(n.a)({},t,{selectedExcursions:a})}))},x=function(e){O((function(t){var a=t.selectedExcursions.filter((function(t){return t.serviceId!==e}));return Object(n.a)({},t,{selectedExcursions:a})}))},T=function(e){return k.dailyFilter.includes(e)},w=function(e){return k.durationFilter.includes(e)},R=function(e){return function(){O((function(t){var a=[];return a=t.durationFilter.includes(e)?t.durationFilter.filter((function(t){return t!==e})):[].concat(Object(S.a)(t.durationFilter),[e]),Object(n.a)({},t,{durationFilter:a})}))}},_=function(e){return function(){O((function(t){var a=[];return a=t.dailyFilter.includes(e)?t.dailyFilter.filter((function(t){return t!==e})):[].concat(Object(S.a)(t.dailyFilter),[e]),Object(n.a)({},t,{dailyFilter:a})}))}},B=function(){var e=k.dailyFilter,t=k.durationFilter,a=s;e.length>0&&(a=a.filter((function(t){return t.availableDates.some((function(t){return e.includes(U()(t).locale("en").format("dddd"))}))}))),t.length>0&&(a=a.filter((function(e){return t.includes(e.durationCategory)}))),O((function(e){return Object(n.a)({},e,{excursions:a})}))},V=function(e,t){return function(e){var t=k.selectedExcursions.find((function(t){return t.serviceId===e}));return null===t||void 0===t?void 0:t.date}(t)||function(e){var t=k.selectedExcursions.find((function(t){return t.excursionId===e&&t.type===v.EXCURSION_TYPES.GROUP}));return null===t||void 0===t?void 0:t.date}(e)};return d.a.createElement(F.a,{scrollable:!0,onClose:t,modalTitle:f("Available excursions"),modalFooter:d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"exursions-common-sum"},d.a.createElement("div",null,"".concat(f("Total amount")," ").concat(C," ")," ",d.a.createElement(o.a,{currencyCode:g.code}))),d.a.createElement(M.c,{color:"dark",plain:!0,onClick:t},f("Cancel"))," ",d.a.createElement(M.c,{color:"success",onClick:function(){a(k.selectedExcursions)}},f("Save"))))))},d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:3},d.a.createElement("div",{className:"excursions-filters"},d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Days of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Monday"),checked:T("Monday"),onChange:_("Monday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Tuesday"),checked:T("Tuesday"),onChange:_("Tuesday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Wednesday"),checked:T("Wednesday"),onChange:_("Wednesday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Thursday"),checked:T("Thursday"),onChange:_("Thursday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Friday"),checked:T("Friday"),onChange:_("Friday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Saturday"),checked:T("Saturday"),onChange:_("Saturday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Sunday"),checked:T("Sunday"),onChange:_("Sunday")})))),d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Duration of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(P.a,{label:f("less than 4 hours"),checked:w(1),onChange:R(1)})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("from 4 till 8 hours"),checked:w(2),onChange:R(2)})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("more than 8 hours"),checked:w(3),onChange:R(3)})))))),d.a.createElement(D.a,{lg:9},d.a.createElement("div",{className:"excursions-results-heading"},f("Excursions")),d.a.createElement("div",{className:"excursions-results"},k.excursions.map((function(e){return d.a.createElement(ve,{key:e.id,excursion:e,onSelect:j,onDelete:x,isSelected:N,date:V,tourists:i})})))))))}))),be=a(1034),ge=a(190),Ee=function(e){var t=e.tourists,a=e.onAddTourist,n=e.onDeleteTourist,r=e.id,l=e.onDelete,s=e.readonly,f=e.price,p=e.title,v=e.basketTourists,b=e.touristCount,g=e.date,E=e.type,y=e.attributes,k=Object(m.c)(c.b).t,O=Object(u.useContext)(h.a),N=O.extractPrice,C=O.activeCurrency,j=function(){l(r)},x=function(e){return t.includes(e)};return d.a.createElement("div",{className:"selected-excursions-service"},d.a.createElement("div",{className:"selected-excursions-service-name"},d.a.createElement("div",null,d.a.createElement("div",{className:"grey small"},k("Excursion"===E?"Excursion tour":"Additional service")),d.a.createElement("div",{className:"title"},d.a.createElement("span",{className:"link"},p))),(null===y||void 0===y?void 0:y.isOptional)&&d.a.createElement(ge.a,{query:"(max-width: 991px)"},(function(e){return e&&d.a.createElement(be.a,{title:d.a.createElement("span",null,k("Remove service"))},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(k("Are you sure you want to delete")," ").concat(p,"?"))&&j()}},d.a.createElement(i.a,{icon:"times"}))))}))),d.a.createElement("div",{className:"selected-excursions-service-date"},d.a.createElement("div",{className:"grey small"},k("Date")),d.a.createElement("div",{className:"title"}," ",U()(g).format("DD MMM YYYY"))),d.a.createElement("div",{className:"selected-excursions-service-tourists"},d.a.createElement("div",{className:"grey small"},k("Tourists")),d.a.createElement(de.a,{fullScreenOnMobile:!0,label:k("Select tourist"),trigger:d.a.createElement("div",{className:"title link"},b," ",k("persons"))},d.a.createElement("div",{className:"selected-excursions-service-tourists-dropdown"},d.a.createElement("ul",{className:"nostyles"},v.map((function(e,t){return d.a.createElement("li",{key:e.id},d.a.createElement(P.a,{onChange:(i=e.id,function(e){e.target.checked?a(r,i):n(r,i)}),checked:x(e.id),disabled:s,label:d.a.createElement("div",null,e.lastName||e.firstName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(k("Tourist")))}));var i})))))),d.a.createElement("div",{className:"selected-excursions-service-price"},d.a.createElement("div",{className:"grey small"},k("Price")),f?d.a.createElement("div",{className:"title"},N(f,"sum")," ",d.a.createElement(o.a,{currencyCode:C.code})):d.a.createElement("div",{className:"title"},k("Included"))),(null===y||void 0===y?void 0:y.isOptional)&&d.a.createElement(ge.a,{query:"(max-width: 991px)"},(function(e){return!e&&d.a.createElement(be.a,{title:k("Remove service")},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(k("Are you sure you want to delete")," ").concat(p,"?"))&&j()}},d.a.createElement(i.a,{icon:"times"}))))})))},ye=(a(2311),function(e){var t=e.readonly,a=e.selectedServices,f=e.slides,p=e.actions,v=e.tourists,b=e.fetching,g=e.title,E=e.subTitle,y=Object(m.c)(c.b).t,k=Object(u.useState)({showExcursionsModal:!1,showExtraModal:!1}),O=Object(r.a)(k,2),N=O[0],C=O[1],j=Object(u.useContext)(h.a),x=j.extractPrice,T=j.activeCurrency,S=Object(u.useMemo)((function(){return t?(null===a||void 0===a?void 0:a.length)||!1:(null===f||void 0===f?void 0:f.length)||(null===a||void 0===a?void 0:a.length)||!1}),[a,f]),F=function(){C((function(e){return Object(n.a)({},e,{showExcursionsModal:!e.showExcursionsModal})}))},I=function(e){p.deleteSelectedExcursions([e])},A=function(e,t){p.deleteSelectedExcursionTourist([{touristId:t,serviceId:e}])},D=function(e,t){p.addSelectedExcursionTourist([{serviceId:e,touristId:t}])},M=function(e,t){p.deleteExtraTourist([{touristId:t,serviceId:e}])},P=function(e,t){p.addExtraTourist([{touristId:t,serviceId:e}])},R=function(e){p.updateSelectedExcursions(e)},_=function(e){p.deleteSelectedExtra([e])};return S?d.a.createElement(l.a,{className:"dashboard",title:a.length?y(g||"Extra services"):y("Add service")},E&&d.a.createElement("div",{className:"grey m-b-10"},y(E)),d.a.createElement("div",{className:"excursions-services"},a&&a.length>0&&d.a.createElement("div",{className:"selected-excursions-services"},a.map((function(e){return d.a.createElement(Ee,Object.assign({readonly:t,key:e.id},e,{basketTourists:v,onDelete:"Excursion"===e.type?I:_,onDeleteTourist:"Excursion"===e.type?A:M,onAddTourist:"Excursion"===e.type?D:P}))}))),!t&&d.a.createElement("div",{className:"excursions-services-items"},f.map((function(e,t){return d.a.createElement("div",{key:t,className:"excursions-services-item"},d.a.createElement("div",{className:"excursions-services-item-container"},d.a.createElement("div",{className:"excursions-services-item-container-image",style:{backgroundImage:'url("'.concat(e.logo?e.logo:"http://via.placeholder.com/220x165",'")')}}),d.a.createElement("div",{className:"title"},d.a.createElement("div",null,y(e.title))," ",d.a.createElement("div",{className:"price"},e.minPrice&&e.hasDiffrentPrice?d.a.createElement(u.Fragment,null,"".concat(y("from")," ").concat(Object(w.b)(x(e.minPrice,"sum"))," "),d.a.createElement(o.a,{currencyCode:null===T||void 0===T?void 0:T.code,size:14})):y("Free"))),d.a.createElement("div",{className:"item-action",onClick:"Excursions"===e.type?F:(a=e.code,function(){p.changeExtraFilter([a]),C((function(e){return Object(n.a)({},e,{showExtraModal:!e.showExtraModal})}))})},d.a.createElement(i.a,{icon:"plus"}))));var a})))),N.showExcursionsModal&&d.a.createElement(he,{onSave:function(e){C((function(e){return Object(n.a)({},e,{showExcursionsModal:!1})})),R(e)},onClose:F,tourists:v}),N.showExtraModal&&d.a.createElement(L,{tourists:v,onClose:function(){C((function(e){return Object(n.a)({},e,{showExtraModal:!e.showExtraModal})}))}}),b&&d.a.createElement(s.a,null)):null});t.default=Object(f.connect)((function(e){return{slides:j(e),selectedServices:T(e),fetching:e.basketExtra.fetching}}),(function(e){return{actions:Object(p.bindActionCreators)(Object(n.a)({},v.basketExtraActions),e)}}))(ye)},2102:function(e,t,a){"use strict";a.r(t),a.d(t,"Hotels",(function(){return te}));var n=a(3),r=a(8),i=a(2262),c=a(258),l=a(2107),o=a(106),s=a(0),u=a.n(s),d=a(17),m=a(79),f=a.n(m),p=a(2213),v=a(2214),h=a(23),b=a(1033),g=a(139),E=a(2364),y=a(2227),k=a(1034),O=a(2232),N=a(12),C=a.n(N),j=a(796),x=a(2233),T=function(e){var t=e.cancel,a=e.info,n=e.policies,r=Object(d.c)(c.b).t;return u.a.createElement(x.a,{size:"sm",modalTitle:r("Cancellation conditions"),onClose:t},n&&u.a.createElement("ul",{className:"bullets"},n.map((function(e,t){return u.a.createElement("li",{key:"policy_".concat(t)},"".concat(r("date_from")," ").concat(C()(e.dateFrom).format("HH:mm DD MMM")," = "),0===e.amount&&""!==e.comment&&u.a.createElement("span",null,e.comment),e.amount>0&&u.a.createElement("span",null,e.amount,u.a.createElement(O.a,{currencyCode:e.currencyCode}),e.comment&&u.a.createElement("div",null,e.comment)))}))),null===a||void 0===a?void 0:a.map((function(e,t){return u.a.createElement("div",{key:t,className:"m-b-20"},u.a.createElement("pre",{style:{width:"100%",whiteSpace:"pre-wrap"}},e.description))})))},w=a(2211),S=function(e,t){var a=Object(d.c)(c.b).t;return Object(s.useMemo)((function(){if(!e)return(null===t||void 0===t?void 0:t.name)||"";if(null===t||void 0===t?void 0:t.hasFewPlaces)return 0===(null===t||void 0===t?void 0:t.restPlaces)?a("There are few places"):a("Rooms left ".concat(t.restPlaces));switch(null===t||void 0===t?void 0:t.visualStatus){case 0:return a("AvailableStatus");case 1:return a("RequestStatus");case 2:return a("NotAvailableStatus");default:return a("Undefined")}}),[e,t])},F=function(e){return Object(s.useMemo)((function(){if(null===e||void 0===e?void 0:e.hasFewPlaces)return"red";switch(null===e||void 0===e?void 0:e.visualStatus){case 0:return"green";case 1:return"yellow";case 2:return"orange";default:return"green"}}),[e])},I=function(e,t){return Object(s.useMemo)((function(){return Object(w.d)({dateFrom:C()(e.dateBegin).toDate(),dateTo:C()(e.dateBegin).toDate(),searchType:"None"!==t?r.filterConstants.SEARCH_TYPE.TOURS:r.filterConstants.SEARCH_TYPE.HOTELS})}),[e,t])},A=a(140),D=(a(2275),function(e){var t,a,r,i,l,m,f,p,v,N,x,w,D,M,P,R,_,B,V,z,H,L,q,U,Y,K,G,W=e.hotel,$=e.isBooking,X=void 0===$||$,J=e.getHotelRoomInfo,Z=e.cancellationInfo,Q=e.cancellationPolicies,ee=e.hasLinks,te=e.transportType,ae=e.onRemove,ne=Object(d.c)(c.b).t,re=Object(A.e)(),ie=Object(s.useState)({showCancellation:!1,isRoomModalOpened:!1}),ce=Object(h.a)(ie,2),le=ce[0],oe=ce[1],se=S(X,W.status),ue=F(W.status),de=I(W,te);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"basket-hotel"},u.a.createElement("div",{className:"basket-hotel-image"},ee?u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/hotel/".concat(null===(t=W.subService)||void 0===t||null===(a=t.hotel)||void 0===a?void 0:a.url).concat(de)},W.subService.hotel.photo?u.a.createElement("img",{src:"".concat(b.c).concat(W.subService.hotel.photo,"?w=180&h=140&mode=crop"),alt:""}):u.a.createElement(E.a,null)):W.subService.hotel.photo?u.a.createElement("img",{src:"".concat(b.c).concat(W.subService.hotel.photo,"?w=180&h=140&mode=crop"),alt:""}):u.a.createElement(E.a,null)),u.a.createElement("div",{className:"basket-hotel-info"},u.a.createElement("div",{className:"basket-hotel-info-title"},ee?u.a.createElement("a",{href:"/hotel/".concat(null===(r=W.subService)||void 0===r||null===(i=r.hotel)||void 0===i?void 0:i.url).concat(de),target:"_blank",rel:"noopener noreferrer",className:"title"},u.a.createElement("span",{className:"m-r-5"},null===(l=W.subService)||void 0===l||null===(m=l.hotel)||void 0===m?void 0:m.name)):u.a.createElement("span",{className:"m-r-5"},null===(f=W.subService)||void 0===f||null===(p=f.hotel)||void 0===p?void 0:p.name),u.a.createElement(y.a,{rating:null===W||void 0===W||null===(v=W.subService)||void 0===v||null===(N=v.hotel)||void 0===N||null===(x=N.stars)||void 0===x?void 0:x.code,size:12}),W.subService.hotel&&u.a.createElement("div",{className:"basket-hotel-info-city"},u.a.createElement(k.a,{title:u.a.createElement("div",null,"".concat(null===(w=W.subService)||void 0===w||null===(D=w.hotel)||void 0===D||null===(M=D.city)||void 0===M?void 0:M.name," ").concat((null===(P=W.subService)||void 0===P||null===(R=P.hotel)||void 0===R?void 0:R.town)||""," ").concat((null===(_=W.subService)||void 0===_||null===(B=_.hotel)||void 0===B||null===(V=B.town)||void 0===V?void 0:V.name)||""))},u.a.createElement("span",null,W.subService.hotel.town?W.subService.hotel.town.name:null===(z=W.subService)||void 0===z||null===(H=z.hotel)||void 0===H||null===(L=H.city)||void 0===L?void 0:L.name)))),u.a.createElement("div",{className:"basket-hotel-info-additionally"},u.a.createElement("span",{className:"basket-hotel-info-room"},u.a.createElement("span",{className:"small ".concat((null===W||void 0===W||null===(q=W.subService)||void 0===q||null===(U=q.hotel)||void 0===U?void 0:U.hasFullDescription)&&"link").trim(),onClick:function(){var e,t,a,r,i;(null===W||void 0===W||null===(e=W.subService)||void 0===e||null===(t=e.hotel)||void 0===t?void 0:t.hasFullDescription)&&(null===J||void 0===J||J(null===W||void 0===W||null===(a=W.subService)||void 0===a||null===(r=a.hotel)||void 0===r?void 0:r.id,null===(i=W.subService1)||void 0===i?void 0:i.id),oe((function(e){return Object(n.a)({},e,{isRoomModalOpened:!0})})))}},null===W||void 0===W||null===(Y=W.subService1)||void 0===Y?void 0:Y.name)),u.a.createElement("div",{className:"basket-hotel-info-meals"},u.a.createElement("span",{className:"small"},null===W||void 0===W||null===(K=W.subService2)||void 0===K?void 0:K.name)))),u.a.createElement("div",{className:"basket-hotel-tour-info"},u.a.createElement("div",{className:"text-right m-b-5"},(null===(G=W.attributes)||void 0===G?void 0:G.isOptional)&&u.a.createElement(k.a,{title:ne("Remove hotel")},u.a.createElement(o.c,{color:"danger",size:"sm",plain:!0,onClick:function(){null===ae||void 0===ae||ae(W.id)}},u.a.createElement("span",null,ne("Remove")),u.a.createElement("span",{className:"m-l-5"},u.a.createElement(g.a,{icon:"times"}))))),u.a.createElement("div",{className:"basket-hotel-tour-info-item small"},u.a.createElement("div",null,"".concat(C()(W.dateBegin).format(re.localeDateFormat)," - ").concat(C()(W.dateEnd).format(re.localeDateFormat)," (").concat(ne("night_count",{count:W.duration}),")"))),u.a.createElement("div",{className:"basket-hotel-tour-info-item small"},u.a.createElement("div",null,u.a.createElement("span",null,ne("Number of guests"))," ",W.touristCount),u.a.createElement("span",{className:ue},se))),u.a.createElement("div",{className:"basket-hotel-cancellation"},le.showCancellation&&u.a.createElement(T,{info:Z,policies:Q,cancel:function(){oe((function(e){return Object(n.a)({},e,{showCancellation:!1})}))}})),(null===W||void 0===W?void 0:W.tariffInfo)&&u.a.createElement("div",{className:"tariff-info"},u.a.createElement("div",{className:"m-t-10"},W.tariffInfo.rateComment),W.tariffInfo.taxes&&W.tariffInfo.taxes.length>0&&u.a.createElement("div",{className:"m-t-10"},u.a.createElement("span",null,ne("Taxes")),u.a.createElement("ul",null,W.tariffInfo.taxes.map((function(e){return u.a.createElement("li",{key:e.currencyCode},e.amount," ",u.a.createElement(O.a,{currencyCode:e.currencyCode}),e.included?"(".concat(ne("included"),")"):"(".concat(ne("not included"),")"))})))))),le.isRoomModalOpened&&u.a.createElement(j.a,{onClose:function(){oe((function(e){return Object(n.a)({},e,{isRoomModalOpened:!1})}))}}))}),M=(a(2273),function(e){var t,a,n,r,i,l,s,m,f,p,v,h,E=e.hotel,O=e.transportType,N=e.onRemove,j=Object(d.c)(c.b).t,x=I(E,O);return u.a.createElement("div",{className:"basket-mobile-block-image"},u.a.createElement("div",{className:"basket-mobile-block-title"},j("Hotel")),u.a.createElement("div",{className:"basket-mobile-block-image",style:{backgroundImage:"url(".concat(E.subService&&"".concat(b.c).concat(E.subService.hotel.photo,"?w=180&h=140&mode=crop")||"/userfiles/images/site-adaptive/noimage.png","?w=200&h=273&mode=crop)")}}),u.a.createElement("div",{className:"basket-mobile-block-info"},(null===(t=E.attributes)||void 0===t?void 0:t.isOptional)&&u.a.createElement(k.a,{title:j("Remove hotel")},u.a.createElement(o.c,{color:"danger",plain:!0,onClick:function(){null===N||void 0===N||N(E.id)}},u.a.createElement(g.a,{icon:"times"}))),u.a.createElement("div",null,u.a.createElement(y.a,{rating:null===E||void 0===E||null===(a=E.subService)||void 0===a||null===(n=a.hotel)||void 0===n||null===(r=n.stars)||void 0===r?void 0:r.code,size:12})),u.a.createElement("div",{className:"basket-mobile-block-info-title"},u.a.createElement("a",{href:"/hotel/".concat(null===(i=E.subService)||void 0===i||null===(l=i.hotel)||void 0===l?void 0:l.url).concat(x),target:"_blank",rel:"noopener noreferrer",className:"title"},null===(s=E.subService)||void 0===s||null===(m=s.hotel)||void 0===m?void 0:m.name," ")),u.a.createElement("div",{className:"basket-mobile-block-info-city"},E.subService.hotel.town?E.subService.hotel.town.name:null===(f=E.subService)||void 0===f||null===(p=f.hotel)||void 0===p||null===(v=p.city)||void 0===v?void 0:v.name)),u.a.createElement("div",{className:"basket-data-list-container"},u.a.createElement("ul",{className:"basket-data-list"},u.a.createElement("li",null,u.a.createElement("span",{className:"name"},j("Dates")),u.a.createElement("span",{className:"value"},"".concat(C()(E.dateBegin).format("DD.MM.YYYY")," - ").concat(C()(E.dateEnd).format("DD.MM.YYYY")))),u.a.createElement("li",null,u.a.createElement("span",{className:"name"},j("Nights")),u.a.createElement("span",{className:"value"},j("night_count",{count:E.duration}))),(null===E||void 0===E?void 0:E.subService1)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},j("Room")),u.a.createElement("span",{className:"value"},E.subService1.name)),(null===E||void 0===E?void 0:E.subService2)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},j("Meal")),u.a.createElement("span",{className:"value"},E.subService2.name)),(null===E||void 0===E||null===(h=E.tariffInfo)||void 0===h?void 0:h.isNonRefundable)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},j("Tariff")),u.a.createElement("span",{className:"value"},j("Tariff is non refundable"))))))}),P=a(10),R=a(2334),_=a(264),B=a(21),V=a(36),z=a(2235),H=a(2237),L=a(2098),q=a(797),U=(a(2314),function(e){var t=e.showMessage,a=e.adults,r=e.children,i=e.maxAdultsCount,l=e.maxChildrenCount,m=e.pluginBefore,f=e.pluginAfter,p=e.label,v=e.minAdultsCount,b=e.onChange,g=e.childrenAges,E=e.message,y=Object(d.c)(c.f).t,k=u.a.useRef(),O=Object(s.useState)({open:!1,showMessage:null!==t&&void 0!==t&&t,adults:0,children:[]}),N=Object(h.a)(O,2),C=N[0],j=N[1];Object(s.useEffect)((function(){j((function(e){return Object(n.a)({},e,{adults:a,children:r})}))}),[r,a]);var x=Object(q.a)(r,i,l,a);Object(s.useEffect)((function(){j((function(e){return Object(n.a)({},e,{adults:x.adults,children:x.children})})),b({adults:x.adults,children:x.children})}),[x]),Object(s.useEffect)((function(){var e,a,r;t&&(j((function(e){return Object(n.a)({},e,{showMessage:t})})),null===k||void 0===k||null===(e=k.current)||void 0===e||null===(a=e.triggerRef)||void 0===a||null===(r=a.current)||void 0===r||r.click())}),[t]);var T="undefined"!==typeof i?i:16,w="undefined"!==typeof l?l:7,S="undefined"!==typeof v?v:0;return u.a.createElement(z.a,{label:p||y("Tourists"),ref:k,className:"rooms-dropdown",onClose:function(){j((function(e){return b({children:e.children,adults:e.adults}),Object(n.a)({},e,{open:!1,showMessage:!1})}))},onOpen:function(){j((function(e){return Object(n.a)({},e,{open:!0})}))},trigger:u.a.createElement("div",{className:"tourists-value"},m&&u.a.createElement("span",{className:"rooms-plugin plugin-before"},m),u.a.createElement("span",null,u.a.createElement("span",null,"".concat(y("adultWithCount",{count:C.adults}),"  ").concat(C.children.length>0?", "+y("childWithCount",{count:C.children.length}):"").trim())),f&&u.a.createElement("span",{className:"rooms-plugin plugin-after"},f)),footer:function(e){var t=e.close;return u.a.createElement(o.c,{color:"success",onClick:t},y("Select"))}},u.a.createElement("div",{className:"tours-search-filter-tourists"},C.showMessage&&u.a.createElement("span",{className:"red"},E),u.a.createElement(Y,{children:C.children,childrenAges:g,adults:C.adults,maxAdults:T,maxChildren:w,minAdults:S,onAdultsChange:function(e){j((function(t){return Object(n.a)({},t,{adults:e})}))},onChildrenChange:function(e){var t=Object(B.a)(C.children);if(t.length>e)t=Object(V.f)(t);else if(t.length<e){var a=g||[0],r=Object(h.a)(a,1)[0];t.push(r)}j((function(e){return Object(n.a)({},e,{children:t})}))},onChildAgeChanged:function(e){return function(t){j((function(a){return Object(n.a)({},a,{children:a.children.map((function(a,n){return n===e?t:a}))})}))}}})))}),Y=function(e){var t=e.onAdultsChange,a=e.onChildrenChange,n=e.onChildAgeChanged,r=e.adults,i=e.children,l=e.maxAdults,o=e.maxChildren,s=e.childrenAges,m=e.minAdults,f=Object(d.c)(c.f).t,p=(null===s||void 0===s?void 0:s.map((function(e){return{label:f("childWithCountAges",{count:e}),value:e}})))||[];return u.a.createElement("div",{className:"tours-search-filter-room"},u.a.createElement("div",{className:"filter-room-item"},u.a.createElement("span",null,f("Adults")),u.a.createElement(H.a,{min:m,max:l,value:r,onChange:t})),u.a.createElement("div",{className:"filter-room-item"},u.a.createElement("span",null,f("Children")),u.a.createElement(H.a,{min:0,max:o,value:i.length,onChange:a})),i&&i.length>0&&i.map((function(e,t){return u.a.createElement("div",{className:"filter-room-item",key:e+"-"+t},u.a.createElement("span",null,f("Child age",{age:t+1})),u.a.createElement(L.b,{clearable:!1,options:p,labelKey:"label",valueKey:"value",onChange:n(t),value:e}))})))},K=a(2230),G=a(340),W=a(1035),$=a(39),X=a(9);function J(){var e=Object(P.a)(["\n  .styled-accommodation-search {\n    display: flex;\n    align-items: center;\n    background-color: #f0f0f7;\n    padding: 1rem;\n    .styled-accommodation-search-item {\n      padding-right: 1rem;\n      &:last-child {\n        padding-right: 0;\n      }\n      .tourists-value {\n        width: 100%;\n        padding: 0 0.75rem;\n        border: 1px solid #e1e1e1;\n        border-radius: 4px;\n        outline: 0;\n        line-height: 38px;\n        height: 38px;\n        transition: border-color 150ms, box-shadow 150ms;\n        background: #ffffff;\n        &:hover {\n          border-color: rgba(0, 184, 199, 0.5);\n        }\n      }\n    }\n  }\n  .styled-accommodation-results {\n    position: relative;\n    .styled-accommodation-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0.5rem;\n      border-bottom: 1px solid #eee;\n      margin-bottom: 0.25rem;\n      &:last-child {\n        border-bottom: 0;\n      }\n    }\n    .styled-accommodation-item-header {\n      position: sticky;\n      top: 0;\n      background-color: #ffffff;\n      margin-bottom: 0;\n      margin: 1.5rem 0 0.5rem 0;\n      z-index: 1;\n    }\n    .styled-accommodation-item-room {\n      flex: 0 0 30%;\n      padding-right: 0.5rem;\n    }\n    .styled-accommodation-item-code {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-pansion {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-status {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-surcharge {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-add {\n      flex: 0 0 10%;\n      text-align: right;\n    }\n    "," {\n      padding-left: 0;\n      margin-bottom: 0.125rem;\n    }\n  }\n"]);return J=function(){return e},e}var Z=function(e){var t=e.isBooking,a=Object(d.c)(c.b).t,n=Object(s.useContext)(W.a),i=n.activeCurrency,l=n.extractPrice,m=Object($.useDispatch)(),f=Object($.useSelector)((function(e){return{showModal:e.basketAccommodation.showModal,accommodation:e.basketAccommodation.accommodation,filter:e.basketAccommodation.filter,tour:e.basketData.tour,fetching:e.basketAccommodation.fetching}}),$.shallowEqual),p=f.showModal,v=f.accommodation,h=f.filter,b=f.tour,g=f.fetching,E=function(){m(r.basketAccommodationActions.closeAccommodationModal())},y=function(e){return function(){m(r.basketAccommodationActions.addAccommodation(e.guid)),E()}};return p?u.a.createElement(x.a,{modalTitle:a("Add accommodation"),scrollable:!0,onClose:E},u.a.createElement(ee,null,u.a.createElement("div",{className:"styled-accommodation-search"},u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(R.a,{label:a("Date from"),onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({dateFrom:C()(e).format("YYYY-MM-DD")}))},minDate:new Date(null===b||void 0===b?void 0:b.dateBegin),maxDate:new Date(null===b||void 0===b?void 0:b.dateEnd),format:"dd.MM.yyyy",value:h.dateFrom})),u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(R.a,{label:a("Date to"),onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({dateTo:C()(e).format("YYYY-MM-DD")}))},minDate:new Date(null===b||void 0===b?void 0:b.dateBegin),maxDate:new Date(null===b||void 0===b?void 0:b.dateEnd),format:"dd.MM.yyyy",value:h.dateTo})),u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(_.a,null,a("tourists_count")),u.a.createElement(U,{showMessage:!1,childrenAges:[0,1,2,3,4,5],onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({adults:e.adults,children:e.children}))},maxAdultsCount:h.maxAdultCount,maxChildrenCount:5,adults:h.adults||0,children:h.children,minAdultsCount:1})),u.a.createElement("div",{className:"styled-accommodation-search-item m-t-25"},u.a.createElement(o.c,{onClick:function(){m(r.basketAccommodationActions.fetchAccommodation())}},a("Search")))),u.a.createElement("div",{className:"styled-accommodation-results"},v&&v.length>0&&u.a.createElement("div",{className:"styled-accommodation-item styled-accommodation-item-header"},u.a.createElement("div",{className:"styled-accommodation-item-room"},u.a.createElement(_.a,null,a("Room"))),u.a.createElement("div",{className:"styled-accommodation-item-code"},u.a.createElement(_.a,null,a("Number of guests"))),u.a.createElement("div",{className:"styled-accommodation-item-pansion"},u.a.createElement(_.a,null,a("Pansion"))),u.a.createElement("div",{className:"styled-accommodation-item-status"},u.a.createElement(_.a,null,a("Availability"))),u.a.createElement("div",{className:"styled-accommodation-item-surcharge"},u.a.createElement(_.a,null,a("Surcharge"))),u.a.createElement("div",{className:"styled-accommodation-item-add"},u.a.createElement(_.a,{visible:!1},a("Select")))),null===v||void 0===v?void 0:v.map((function(e){var n,r,c,s,d,m,f;return u.a.createElement("div",{className:"styled-accommodation-item",key:e.guid},u.a.createElement("div",{className:"styled-accommodation-item-room bold"},"".concat(null===(n=e.room)||void 0===n||null===(r=n.roomType)||void 0===r?void 0:r.name," ").concat(null===(c=e.room)||void 0===c||null===(s=c.roomCategory)||void 0===s?void 0:s.name)),u.a.createElement("div",{className:"styled-accommodation-item-code"},null===(d=e.room)||void 0===d||null===(m=d.roomAccomodation)||void 0===m?void 0:m.name),u.a.createElement("div",{className:"styled-accommodation-item-pansion"},null===(f=e.meal)||void 0===f?void 0:f.name),u.a.createElement("div",{className:"styled-accommodation-item-status"},u.a.createElement(Q,{isBooking:t,accommodation:e})),u.a.createElement("div",{className:"styled-accommodation-item-surcharge"},u.a.createElement("span",{className:"bold"},Object(G.b)(l(e.addPrice,"sum"))," ",u.a.createElement(O.a,{currencyCode:null===i||void 0===i?void 0:i.code}))),u.a.createElement("div",{className:"styled-accommodation-item-add"},u.a.createElement(o.c,{size:"sm",color:"success",onClick:y(e)},a("Select room"))))})),g&&u.a.createElement(K.a,{style:{minWidth:360},description:a("Searching all available rooms")})))):null},Q=function(e){var t=e.accommodation,a=e.isBooking,n=S(!!a,t.status),r=F(t.status);return u.a.createElement("span",{className:r},n)},ee=X.e.div(J(),_.a),te=function(e){var t=e.isBooking,a=void 0===t||t,s=Object(p.a)(Object(n.a)({},r.basketAccommodationActions,{},r.hotelsActions)).actions,m=Object(v.a)((function(e){return{hotels:Object(i.l)(e),cancellationInfo:e.basketCancellation.data,tour:e.basketData.tour,shoppingCart:e.basketData.shoppingCart,accommodation:e.basketAccommodation.accommodation}})),h=m.hotels,b=m.cancellationInfo,g=m.tour,E=m.shoppingCart,y=m.accommodation,k=Object(d.c)(c.b).t,O=function(){s.showAccommodationModal(),(null===y||void 0===y?void 0:y.length)||s.fetchAccommodation()},N=function(e){s.removeAccommodation(e)};return h.length?u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{query:"(max-width: 991px)"},(function(e){var t;return e?h.map((function(e,t){var n;return u.a.createElement(M,{hasLinks:!0,cancellationInfo:null===b||void 0===b||null===(n=b.items)||void 0===n?void 0:n.filter((function(t){return t.serviceId===e.id})),cancellationPolicies:null===b||void 0===b?void 0:b.cancellationPolicies,key:t,hotel:e,isBooking:a,transportType:null===g||void 0===g?void 0:g.transportType,getHotelRoomInfo:s.getHotelRoomInfo,onRemove:N})})):u.a.createElement(l.a,{className:"dashboard",title:k("Accommodation"),actions:(null===E||void 0===E||null===(t=E.allowedActions)||void 0===t?void 0:t.editHotels)&&u.a.createElement(o.c,{size:"sm",color:"primary",onClick:O},k("Add accommodation"))},h.map((function(e,t){var n;return u.a.createElement(D,{cancellationInfo:null===b||void 0===b||null===(n=b.items)||void 0===n?void 0:n.filter((function(t){return t.serviceId===e.id})),key:t,hotel:e,isBooking:a,transportType:null===g||void 0===g?void 0:g.transportType,getHotelRoomInfo:s.getHotelRoomInfo,onRemove:N})})))})),u.a.createElement(Z,{isBooking:a})):null}},2103:function(e,t,a){"use strict";a.r(t),a.d(t,"Tour",(function(){return F}));var n=a(139),r=a(258),i=a(2107),c=a(1034),l=a(10),o=a(57),s=a(14),u=a(0),d=a.n(u),m=a(9),f=a(32);function p(){var e=Object(l.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-transform: none;\n  letter-spacing: normal;\n"]);return p=function(){return e},e}function v(){var e=Object(l.a)(["\n  margin-right: 0.5rem;\n"]);return v=function(){return e},e}function h(){var e=Object(l.a)(["\n  margin-left: 0.5rem;\n"]);return h=function(){return e},e}function b(){var e=Object(l.a)(["\n      justify-content: center;\n      width: 100%;\n    "]);return b=function(){return e},e}function g(){var e=Object(l.a)(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  ",";\n  max-width: 100%;\n  color: ",";\n  font-size: 0.75rem;\n  border-radius: ",";\n  margin: 0;\n  padding: 0.25rem;\n  line-height: 1;\n  background: ",";\n  outline: none;\n  text-align: center;\n  text-decoration: none;\n  vertical-align: middle;\n  white-space: nowrap;\n  pointer-events: ",";\n  user-select: none;\n  transition: ",";\n  &:hover,\n  &:focus {\n    outline: none;\n    color: ",";\n    background: ",";\n  }\n  &:active {\n    outline: none;\n    color: ",";\n    background: ",";\n  }\n"]);return g=function(){return e},e}var E=m.e.div(g(),(function(e){return e.fullWidth&&Object(m.d)(b())}),(function(e){var t=Object(f.b)(e);return e.outline&&e.selected?Object(f.c)(t):e.outline||e.plain?t:Object(f.c)(t)}),(function(e){return e.pill?Object(f.d)({size:e.size,theme:e.theme}):e.theme.radius}),(function(e){return e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):e.plain||e.outline?"transparent":Object(f.b)(e)}),(function(e){return e.disabled?"none":""}),(function(e){return e.disabled?"none":"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)"}),(function(e){var t=Object(f.b)(e);return e.plain?Object(s.a)(.1,t):Object(f.c)(t)}),(function(e){return e.outline?Object(f.b)(e):e.plain?"transparent":e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):"default"===e.color||"light"===e.color?Object(s.a)(.02,Object(f.b)(e)):Object(s.a)(.05,Object(f.b)(e))}),(function(e){var t=Object(f.b)(e);return e.outline&&e.selected?Object(f.c)(t):e.outline||e.plain?t:Object(f.c)(t)}),(function(e){return e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):e.plain||e.outline?"transparent":Object(f.b)(e)})),y=Object(m.e)("span")(h()),k=Object(m.e)("span")(v()),O=Object(m.e)("span")(p()),N=function(e){var t=e.tag,a=e.pluginAfter,n=e.pluginBefore,r=e.href,i=e.target,c=e.onClick,l=e.className,s=e.onMouseLeave,u=e.onMouseEnter,m=e.onMouseDown,f=e.onMouseUp,p=e.id,v=Object(o.a)(e,["tag","pluginAfter","pluginBefore","href","target","onClick","className","onMouseLeave","onMouseEnter","onMouseDown","onMouseUp","id"]);return d.a.createElement(E,Object.assign({id:p,className:l,as:t,target:i,href:r,onClick:c,onMouseEnter:function(e){null===u||void 0===u||u(e)},onMouseLeave:function(e){null===s||void 0===s||s(e)},onMouseDown:function(e){e.preventDefault(),null===m||void 0===m||m(e)},onMouseUp:function(e){null===f||void 0===f||f(e)},"data-component":"badge"},v),n&&d.a.createElement(k,null,n),d.a.createElement(O,null,v.children),a&&d.a.createElement(y,null,a))},C=a(12),j=a.n(C),x=a(17),T=a(190),w=a(2214),S=a(140),F=(a(2310),function(){var e=Object(w.a)((function(e){return e.basketData.tour})),t=Object(x.c)(r.b).t,a=Object(S.e)();if(!e)return null;var l=e.adultCount&&t("adult_count",{count:e.adultCount}),o=e.childCount&&t("child_count",{count:e.childCount}),s=e.infantCount&&t("infant_count",{count:e.infantCount});return d.a.createElement(T.a,{query:"(max-width: 991px)"},(function(r){return r?d.a.createElement("div",{className:"basket-mobile-block"},d.a.createElement("div",{className:"basket-mobile-block-title"},t("Tour")),d.a.createElement("ul",{className:"basket-data-list"},d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Destination")),d.a.createElement("span",{className:"value"},e.departureCity&&e.departureCity.name," -"," ",e.country&&e.country.name)),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Date")),d.a.createElement("span",{className:"value"},j()(e.dateBegin).format(a.localeDateFormat),e.dateBegin!==e.dateEnd&&" - ".concat(j()(e.dateEnd).format(a.localeDateFormat)))),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Nights")),d.a.createElement("span",{className:"value"},t("night_count",{count:e.nights}))),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Tourists")),d.a.createElement("span",{className:"value"},l||o||s?d.a.createElement("span",null,"".concat(l||""," ").concat(o?", "+o:""," ").concat(s?", "+s:"").trim()):null)))):d.a.createElement(i.a,{className:"dashboard"},d.a.createElement("div",{className:"basket-tour-data"},d.a.createElement("div",null,e.departureCity&&d.a.createElement("span",{className:"m-r-10"},e.departureCity.name),d.a.createElement(n.a,{className:"m-r-10 small grey",icon:"chevron-right"}),e.country&&d.a.createElement("span",{className:"m-r-5"},e.country.name),d.a.createElement("span",{className:"m-r-5"},"/"),d.a.createElement("span",{className:"m-r-5"},j()(e.dateBegin).format(a.localeDateFormat),e.dateBegin!==e.dateEnd&&" - ".concat(j()(e.dateEnd).format(a.localeDateFormat)," (").concat(t("night_count",{count:e.nights}),")")),l||o||s?d.a.createElement(u.Fragment,null,d.a.createElement("span",{className:"m-r-5"},"/"),d.a.createElement("span",null,"".concat(l||""," ").concat(o?", "+o:""," ").concat(s?", "+s:"").trim())):null),d.a.createElement(c.a,{title:e.name},d.a.createElement("span",null,d.a.createElement(N,{color:"grey",size:"sm"},e.tourType&&e.tourType.name)))))}))})},2104:function(e,t,a){"use strict";a.r(t);var n=a(258),r=a(786),i=a(139),c=a(2107),l=a(0),o=a.n(l),s=(a(2320),function(e){var t=e.before,a=e.after,n=e.title;return o.a.createElement(c.a,null,o.a.createElement("div",{className:"success-panel-container"},t&&t,o.a.createElement("div",{className:"success-panel-icon"},o.a.createElement(i.a,{icon:"check",className:"green"})),o.a.createElement("div",{className:"success-panel-title"},n),a&&a))}),u=a(106),d=a(17),m=a(2211);a(2319),t.default=function(e){var t=e.buttons,a=void 0===t||t,i=e.orderCode,c=e.title,l=Object(d.c)(n.b).t;return o.a.createElement(s,{title:c||"".concat(l("Congratulations"),"! ").concat(l("Your order")," \u2116 ").concat(i," ").concat(l("has been successfully booked"),"."),after:a&&o.a.createElement("div",{className:"booked-controls"},o.a.createElement("a",{rel:"noopener noreferrer",href:Object(r.a)()||Object(r.b)()?"".concat(m.b,"/orders/").concat(i):"".concat(m.b,"/online/account/orders/").concat(i)},o.a.createElement(u.c,{color:"default"},l("Go to order"))),o.a.createElement("a",{rel:"noopener noreferrer",href:"".concat(m.b,"/payments/").concat(i)},o.a.createElement(u.c,{type:"button",color:"success"},l("Go to pay"))))})}},2106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(2104);t.default=function(e){var t=e.buttons,a=void 0===t||t,n=e.order;return r.a.createElement(i.default,{buttons:a,orderCode:(null===n||void 0===n?void 0:n.code)||""})}},2189:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(2262),i=a(8),c=a(0),l=a.n(c),o=a(39),s=a(75),u=a(2214),d=a(258),m=a(17),f=a(9),p=a(1035),v=a(2505),h=a(1040),b=a(1036),g=a(2378),E=a(57),y=a(2220),k=a(2222),O=a(2223),N=a(2224),C=a(2338),j=(a(2506),function(e){var t=e.to,a=e.target,n=e.type,r=void 0===n?"alternative":n,i=e.size,c=e.fullWidth,o=e.children,s=e.upperCase;return l.a.createElement(C.a,{className:"button ".concat(r," ").concat(c?"full-width":""," ").concat(i||""," ").concat(s?"uppercase":"").trim(),to:t,target:a},o)}),x=a(2216),T=a(2215),w=a(2090),S=a(788),F=a(139),I=a(12),A=a.n(I),D=a(79),M=a.n(D),P=a(2274),R=a(2246),_=a(1037),B=a(23),V=a(106),z=a(191),H=a.n(z),L=a(2218),q=(a(2507),Object(o.connect)((function(e){var t=e.order;return{messages:t.messages,pageNumber:t.pageNumber,messageSent:t.messageSent,fetching:t.fetching,hasMore:t.hasMoreMessages}}),{fetchOrderChat:i.ordersActions.fetchOrderChat,sendOrderChatMessage:i.ordersActions.sendOrderChatMessage,fetchMoreOrderChatMessages:i.ordersActions.fetchMoreOrderChatMessages})((function(e){var t=e.messages,a=void 0===t?[]:t,n=e.orderId,r=void 0===n?null:n,i=e.pageNumber,o=void 0===i?0:i,s=e.messageSent,u=void 0!==s&&s,f=Object(E.a)(e,["messages","orderId","pageNumber","messageSent"]),p=Object(m.c)(d.a).t,v=Object(c.useRef)(null),h=Object(L.a)(u),b=Object(c.useState)(""),g=Object(B.a)(b,2),y=g[0],k=g[1],O=Object(c.useState)(!1),N=Object(B.a)(O,2),C=N[0],j=N[1];Object(c.useEffect)((function(){f.fetchOrderChat(r)}),[]),Object(c.useEffect)((function(){u&&!h&&(k(""),v.scrollToBottom())}),[u]);var x=!(null===y||void 0===y?void 0:y.trim());return l.a.createElement("div",{className:"order-chat"},a&&a.length>0&&l.a.createElement(H.a,{autoHeight:!0,autoHeightMax:600,ref:function(e){!function(e){(v=e)&&!C&&setTimeout((function(){var e;null===(e=v)||void 0===e||e.scrollToBottom(),j(!0)}),20)}(e)},onUpdate:function(e){var t=e.scrollTop,a=e.scrollHeight,n=e.clientHeight,i=f.fetching,c=f.hasMore;(t+10)/(a-n)<.02&&!i&&C&&c&&f.fetchMoreOrderChatMessages({orderId:r,pageNumber:o+1})}},l.a.createElement("ul",{className:"order-chat-message-list nostyles"},a.map((function(e){return l.a.createElement("li",{key:e.id,className:"order-chat-message-list-item ".concat("ToAgent"===e.type?"to":"from").trim()},l.a.createElement("div",{className:"order-chat-message"},l.a.createElement("div",{className:"order-chat-message-header"},l.a.createElement("div",{className:"order-chat-message-avatar"},e.avatar?l.a.createElement("img",{src:e.avatar,alt:e.manager}):e.manager?e.manager.charAt(0):"FromAgent"===e.type?"A":"M",l.a.createElement("div",{className:"time xsmall grey"}," ",A()(e.date).format("HH:mm")))),l.a.createElement("div",{className:"order-chat-message-body"},l.a.createElement("div",{className:"message-body-name"},e.manager," ",l.a.createElement("span",{className:"time xsmall grey"},e.company),l.a.createElement("span",{className:"small"}," ","- ",A()(e.date).format("DD.MM.YYYY"))),l.a.createElement("div",{className:"message-body-text"},e.text))))})))),l.a.createElement("div",{className:"order-chat-message-answer"},l.a.createElement("textarea",{className:"order-chat-message-answer-input",placeholder:p("Message for Mouzenidis manager"),value:y,onChange:function(e){k(e.target.value)}}),l.a.createElement(V.c,{disabled:x,onClick:function(){f.sendOrderChatMessage({orderId:r,message:y})}},p("Send")," ",l.a.createElement(F.a,{icon:"send-msg",className:"m-l-5"}))))}))),U=a(11),Y=a(2107),K=a(2092),G=a(2334),W=a(2233),$=a(140),X=a(2089),J=a(1033),Z=function(e){var t=e.orderId;Object(c.useEffect)((function(){s(!0),X.a.get("".concat(J.b,"/orders/").concat(t,"/mainTourist/contractDetails"),null).then((function(e){e.data&&v(Object(n.a)({},p,{},e.data,{passport:e.data.passportSeries||e.data.passportNumber?"".concat(e.data.passportSeries," ").concat(e.data.passportNumber):"",passportIssuedAt:e.data.passportIssuedAt&&A()(e.data.passportIssuedAt).toDate()||null})),s(!1)})).catch((function(e){console.log(e),s(!1),y({show:!0,error:e.message,title:"Error"})}))}),[]);var a=Object(m.c)(d.b).t,r=Object(c.useState)(!1),i=Object(B.a)(r,2),o=i[0],s=i[1],u=Object(c.useState)({lastName:"",postCity:"",name:"",postStreet:"",middleName:"",postBuilding:"",passport:"",postFlat:"",passportIssuedBy:"",passportIssuedAt:"",email:"",phone:""}),f=Object(B.a)(u,2),p=f[0],v=f[1],h=function(e,t){return function(a){var r;(null===(r=a.target.value)||void 0===r?void 0:r.length)>t||v(Object(n.a)({},p,Object(U.a)({},e,a.target.value)))}},b=Object(c.useState)({show:!1,error:"",title:""}),g=Object(B.a)(b,2),E=g[0],y=g[1],k=Object($.e)();return l.a.createElement(Y.a,{className:"dashboard",title:l.a.createElement("div",null,a("Contract details"))},l.a.createElement("div",null,l.a.createElement(O.a,null,l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Last name"),value:p.lastName,onChange:h("lastName",35)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Name"),value:p.name,onChange:h("name",15)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Middle name"),value:p.middleName,onChange:h("middleName",15)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Passport"),value:p.passport,mask:[/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/,/\d/,/\d/],onChange:h("passport",21)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Issued by"),value:p.passportIssuedBy,onChange:h("passportIssuedBy",45)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(G.a,{name:"passport.passportIssuedAt",label:a("Issued at"),value:p.passportIssuedAt,onChange:function(e){v(Object(n.a)({},p,{passportIssuedAt:e}))},format:k.dateFormat,mask:k.dateFormatMask}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Phone"),value:p.phone,onChange:h("phone",60)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Email"),value:p.email,onChange:h("email",50)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("City"),value:p.postCity,onChange:h("postCity",60)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Street"),value:p.postStreet,onChange:h("postStreet",25)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Building"),value:p.postBuilding,onChange:h("postBuilding",10)}))),l.a.createElement(N.a,{md:3},l.a.createElement("fieldset",null,l.a.createElement(K.a,{label:a("Flat"),value:p.postFlat,onChange:h("postFlat",4)}))),l.a.createElement(N.a,{md:12,className:"text-right"},l.a.createElement(V.c,{type:"button",className:"m-t-10",onClick:function(e){s(!0);var a=p.passport.split(" "),r=Object(B.a)(a,2),i=r[0],c=r[1];X.a.put("".concat(J.b,"/orders/").concat(t,"/mainTourist/contractDetails"),Object(n.a)({},p,{passportIssuedAt:p.passportIssuedAt&&A()(p.passportIssuedAt).format("YYYY-MM-DD"),passportNumber:c,passportSeries:i})).then((function(){s(!1),y({title:"Success",show:!0,error:"Contract details updated"})})).catch((function(e){s(!1),y({show:!0,error:e.message,title:"Error"})}))}},a("Save"))))),E.show&&l.a.createElement(W.a,{modalTitle:a(E.title),onClose:function(){y({show:!1,error:"",title:""})}},l.a.createElement("div",null,E.error)),o&&l.a.createElement(T.a,null))},Q=a(2382),ee=a(2374),te=a(2376),ae=a(42),ne=a(47),re=a(62),ie=a(63),ce=a(2226),le=a(2232),oe=a(264),se=(a(2508),function(e){Object(ie.a)(a,e);var t=Object(re.a)(a);function a(){return Object(ae.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.fetchOrderPayments(this.props.orderId)}},{key:"render",value:function(){var e=this.props,t=e.payments,a=e.order;return l.a.createElement(m.b,{ns:d.a},(function(e){return l.a.createElement(Y.a,{className:"dashboard"},t.length>0||a.length>0?l.a.createElement("div",{className:"payment-orders"},!1,l.a.createElement("div",{className:"payment-orders-heading small grey"},l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",null,e("Date of creation"))),l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",null,e("Operation"))),l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",null,e("Amount")))),l.a.createElement("div",{className:"payment-orders-body"},null===t||void 0===t?void 0:t.map((function(t,a){return l.a.createElement("div",{key:a,className:"payment-order"},l.a.createElement(ce.a,{triggerBefore:!0,trigger:l.a.createElement("div",{className:"payment-order-trigger"},l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",{className:"small grey"},A()(t.dateCreated).format("DD.MM.YYYY hh:mm"))),l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",null,t.operation)),l.a.createElement("div",{className:"payment-order-item"},l.a.createElement("div",null,t.sum," ",l.a.createElement(le.a,{currencyCode:t.currencyCode}))),l.a.createElement("div",{className:"payment-order-item text-right"},l.a.createElement("div",{className:"small grey"},e("Payment details"),l.a.createElement(F.a,{icon:"chevron-down",className:"flipping-icon-vertical m-l-5"}))))},l.a.createElement("div",{className:"payment-order-item-details"},l.a.createElement("div",{className:"list-cols cols-4"},l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Document number")),l.a.createElement("div",{className:"grey"},t.documentNumber)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Branch")),l.a.createElement("div",{className:"grey"},t.creatorBranchName)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Amount in tour currency")),l.a.createElement("div",{className:"grey"},t.sumReservation," ",l.a.createElement(le.a,{currencyCode:t.currencyCodeReservation}),"- ",e("Rate of currency")," (",t.course,")")),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Bank")),l.a.createElement("div",{className:"grey"},t.bank)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Creator")),l.a.createElement("div",{className:"grey"},t.creatorName)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Payer")),l.a.createElement("div",{className:"grey"},t.customerName)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Data of the payer")),l.a.createElement("div",{className:"grey"},t.personDetails)),l.a.createElement("div",{className:"list-col small"},l.a.createElement("div",null,e("Purpose of payment")),l.a.createElement("div",{className:"grey"},t.personDetails))))))})))):e("Nothing Found"))}))}}]),a}(c.PureComponent));se.defaultProps={payments:[],orderId:"0",order:null};var ue=Object(o.connect)((function(e){var t=e.order;return{payments:t.payments,order:t.order,fetching:t.fetching}}),(function(e){return{actions:Object(s.bindActionCreators)(i.ordersActions,e)}}))(se),de=(a(1194),function(e){Object(ie.a)(a,e);var t=Object(re.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.value,dynamicValue:e.props.value},e.handleClick=function(t){e.setState({value:t,dynamicValue:t},(function(){return e.props.onRate&&e.props.onRate(e.state.value)}))},e.handleMouseEnter=function(t){e.setState({dynamicValue:t})},e.handleMouseLeave=function(){e.setState({dynamicValue:e.state.value})},e.renderStars=function(){for(var t=e.props.disabled,a=[],n=1;n<=e.props.maxValue;n++)a.push(l.a.createElement(me,{key:n,rating:n,value:e.state.dynamicValue,size:e.props.size,handleMouseEnter:!t&&e.handleMouseEnter||void 0,handleMouseLeave:!t&&e.handleMouseLeave||void 0,handleClick:!t&&e.handleClick||void 0}));return a},e}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value,dynamicValue:this.props.value})}},{key:"render",value:function(){return l.a.createElement("div",null,this.renderStars())}}]),a}(c.Component));de.defaultProps={size:14,maxValue:5};var me=function(e){var t=e.size,a=e.rating,n=e.value,r=e.handleMouseEnter,i=e.handleMouseLeave,c=e.handleClick;return l.a.createElement("span",{className:"star",onMouseEnter:function(){null===r||void 0===r||r(a)},onMouseLeave:function(){null===i||void 0===i||i(a)},onClick:function(){null===c||void 0===c||c(a)}},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 260 245",width:t,height:t,fill:a<=n?"#ffc107":"#cccccc",style:{cursor:"pointer"}},l.a.createElement("path",{d:"m55,237 74-228 74,228L9,96h240"})))},fe=de,pe=a(2098),ve=a(2370),he=(a(2509),function(e){Object(ie.a)(a,e);var t=Object(re.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={comment:"",rating:0,update:!1,selectedEvaluationId:null},e.onRate=function(t){e.setState({rating:t})},e.onSave=function(){e.state.update?e.props.actions.updateManagerEvaluation({orderCode:e.props.orderId,id:e.state.selectedEvaluationId,evaluation:e.state.rating,comment:e.state.comment}):e.props.actions.evaluateManager({orderCode:e.props.orderId,managerId:e.props.selectedManager,evaluation:e.state.rating,comment:e.state.comment}),e.onClearState()},e.onClearState=function(){e.setState({comment:"",rating:0,update:!1,selectedEvaluationId:null})},e.onSelectManager=function(t){e.onClearState(),e.props.actions.selectEvaluationDepartmentManager(t)},e.onSelectDepartment=function(t){e.onClearState(),e.props.actions.selectEvaluationDepartment(t)},e.onCommentChange=function(t){e.setState({comment:t.target.value})},e.onEditRating=function(t,a,n,r,i){return function(){e.setState({rating:t,comment:r,update:!0,selectedEvaluationId:i}),e.props.departments.length>1&&e.props.actions.selectEvaluationDepartment(n),e.props.actions.selectEvaluationDepartmentManager(a)}},e.onDeleteRation=function(t){return function(){window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443?")&&e.props.actions.deleteManagerEvaluation({orderCode:e.props.orderId,id:t})}},e}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.fetchOrderEvaluationDepartments(this.props.orderId)}},{key:"render",value:function(){var e=this;return l.a.createElement(m.b,{ns:d.a},(function(t){return l.a.createElement(Y.a,{className:"dashboard",title:t("Rate the quality")},e.props.ratings.length>0&&l.a.createElement(O.a,null,l.a.createElement(N.a,{md:12},l.a.createElement("div",{className:"rated-users-container"},l.a.createElement("ul",{className:"rated-users"},e.props.ratings.map((function(t){return l.a.createElement("li",{key:t.id},l.a.createElement("div",{className:"rated-user"},l.a.createElement("div",{className:"rated-user-info"},l.a.createElement("span",{className:"user-avatar"},"M".concat(t.id)),l.a.createElement("div",null,l.a.createElement("div",{className:"user-name"},t.userName),l.a.createElement(oe.a,null,t.department&&t.department.name),l.a.createElement(fe,{size:16,disabled:!0,value:t.rating,maxValue:5})),t.comment&&l.a.createElement("div",{className:"rated-user-comment"},l.a.createElement("span",null,t.comment)))),t.isEditable&&l.a.createElement("div",{className:"rated-user-controls"},l.a.createElement("div",{className:"rated-user-edit"},l.a.createElement(F.a,{icon:"pencil-alt",onClick:e.onEditRating(t.rating,t.userId,t.department&&t.department.id,t.comment,t.id)})),l.a.createElement("div",{className:"rated-user-delete"},l.a.createElement(F.a,{icon:"times",onClick:e.onDeleteRation(t.id)}))))})))))),l.a.createElement(O.a,null,e.props.departments.length>1&&l.a.createElement(N.a,{md:6},l.a.createElement(pe.b,{label:t("Select Department"),clearable:!1,options:e.props.departments,valueKey:"id",labelKey:"name",value:e.props.selectedDepartment,onChange:e.onSelectDepartment})),l.a.createElement(N.a,{md:6},l.a.createElement(pe.b,{label:t("Select Manager"),options:e.props.managers,valueKey:"id",labelKey:"name",value:e.props.selectedManager,onChange:e.onSelectManager})),l.a.createElement(N.a,{md:12},e.props.selectedManager&&l.a.createElement("div",{className:"rate-quality-rating"},l.a.createElement(oe.a,null,t("Rate Manager")," ",e.props.manager&&e.props.manager.name," "),l.a.createElement("div",null,l.a.createElement(fe,{size:22,value:e.state.rating,onRate:e.onRate,maxValue:5})),l.a.createElement("div",{className:"rate-text"},l.a.createElement(ve.a,{onChange:e.onCommentChange,value:e.state.comment,label:t("Comment")}))))),l.a.createElement(O.a,null,l.a.createElement(N.a,{md:12},l.a.createElement("div",{className:"rate-quality-control"},l.a.createElement(V.c,{color:"success",onClick:e.onSave},t("Save"))))),e.props.fetching&&l.a.createElement(T.a,null))}))}}]),a}(c.PureComponent)),be=Object(o.connect)((function(e){return{departments:e.orderManagerEvaluation.departments,selectedDepartment:e.orderManagerEvaluation.selectedDepartment,selectedManager:e.orderManagerEvaluation.selectedManager,fetching:e.orderManagerEvaluation.fetching,managers:Object(v.a)(e),manager:Object(v.e)(e),ratings:e.orderManagerEvaluation.ratings}}),(function(e){return{actions:Object(s.bindActionCreators)(i.ordersActions,e)}}))(he),ge=a(2106),Ee=Object(_.a)((function(e){var t,a=e.order,n=e.fetching,r=e.basketHasChanges,i=e.defaultTab,o=e.updateOrderHandle,s=e.orderUnreadMessagesCount,u=e.onTabChange,f=e.mode,p=e.isNewOrder,v=Object(E.a)(e,["order","fetching","basketHasChanges","defaultTab","updateOrderHandle","orderUnreadMessagesCount","onTabChange","mode","isNewOrder"]),h=Object(m.c)(d.a).t,b=Object(c.useMemo)((function(){return a&&(a.allowedActions.editTourists||a.allowedActions.editExcursions||a.allowedActions.editExtraServices||a.allowedActions.editInsurances||a.allowedActions.editTransfers)}),[a]),g=Object(y.a)(null===a||void 0===a?void 0:a.dateCreated);return l.a.createElement(R.d,null,l.a.createElement(k.a,null,l.a.createElement(P.StickyContainer,null,l.a.createElement(O.a,{justify:"center"},l.a.createElement(N.a,{md:9},l.a.createElement("div",{className:"order-page-content"},l.a.createElement("div",{className:"order-page-heading"},"widget"!==f&&l.a.createElement(j,{to:"/account/orders",type:"link"},l.a.createElement(F.a,{icon:"chevron-left",className:"m-r-5"}),h("Back to order list")),"widget"===f&&l.a.createElement("a",{href:Object(w.a)("/orders")},l.a.createElement(F.a,{icon:"chevron-left",className:"m-r-5"}),h("Back to order list")),l.a.createElement("div",{className:"order-page-title-holder"},l.a.createElement("span",{className:"order-page-title m-r-10"},l.a.createElement("span",{className:"grey text-normal"},(null===a||void 0===a?void 0:a.isPreeBooking)?h("Preorder No"):h("Order No"))," ",null===a||void 0===a?void 0:a.code,l.a.createElement("span",{className:"m-l-5 small grey"},"".concat(g," ").concat(A()(null===a||void 0===a?void 0:a.dateCreated).format("hh:mm:ss")))),l.a.createElement("span",{className:"order-page-order-status status-".concat(Object(S.g)(null===a||void 0===a||null===(t=a.status)||void 0===t?void 0:t.visualStatus))},null===a||void 0===a?void 0:a.status.name))),p&&l.a.createElement(ge.default,{buttons:!1,order:a}),l.a.createElement(x.b,{destroyInactive:!0,color:"primary",size:"lg",activeTab:i,changeTab:u,panelGutter:!0},l.a.createElement(x.a,{id:"details",title:h("Details")},a&&l.a.createElement(Q.a,v)),l.a.createElement(x.a,{id:"documents",title:h("Documents")},l.a.createElement(ee.a,{orderId:null===a||void 0===a?void 0:a.code})),l.a.createElement(x.a,{id:"contact",title:l.a.createElement("div",{className:"chat-tab"},h("Chat")," ",s?l.a.createElement("span",{className:"badge chat-badge bg-red"},s):null)},l.a.createElement(q,{orderId:null===a||void 0===a?void 0:a.code})),l.a.createElement(x.a,{id:"payments",title:h("Payments")},l.a.createElement(ue,{orderId:null===a||void 0===a?void 0:a.code})),l.a.createElement(x.a,{id:"rate-quality",title:h("Rate quality")},l.a.createElement(be,{orderId:null===a||void 0===a?void 0:a.code})),l.a.createElement(x.a,{id:"contract-details",title:h("Contract details")},l.a.createElement(Z,{orderId:null===a||void 0===a?void 0:a.code}))),n&&l.a.createElement(T.a,null))),l.a.createElement(N.a,{md:3},a&&l.a.createElement(M.a,{query:"(max-width: 991px)"},(function(e){return e?l.a.createElement(te.a,{hasChanges:r&&b,updateOrder:o,fetching:n}):l.a.createElement(P.Sticky,null,(function(e){var t=e.style;return l.a.createElement("div",{style:t},l.a.createElement(te.a,{hasChanges:r&&b,updateOrder:o,fetching:n}))}))})))))))})),ye=(a(2504),Object(o.connect)((function(e,t){return{order:e.order.order,basketHasChanges:e.basketData.hasChanges,shoppingCartId:e.basketData.shoppingCartId,fetching:e.order.fetching,initialValues:Object(v.c)(e),orderUnreadMessagesCount:Object(v.d)(e),defaultTab:e.basketData.defaultTab,orderCode:e.order.orderCode,isNewOrder:e.order.isNewOrder,currency:e.currency.currency,touristsValidationSchema:Object(r.a)(e,{t:t.t,theme:t.theme.name})}}),(function(e){return{actions:Object(s.bindActionCreators)(Object(n.a)({},i.ordersActions,{},i.basketActions),e)}}))((function(e){var t,a=Object(c.useMemo)((function(){return Object(h.a)(e.initialValues)}),[e.initialValues]);Object(c.useEffect)((function(){var t,a=null===e||void 0===e||null===(t=e.values)||void 0===t?void 0:t.tourists;a&&e.dirty&&e.touristsValidationSchema.validate(a).then((function(){e.actions.setTourists({shoppingCartId:e.shoppingCartId,tourists:a})})).catch((function(){}))}),[null===e||void 0===e||null===(t=e.values)||void 0===t?void 0:t.tourists]),Object(c.useEffect)((function(){setTimeout((function(){window.scrollTo({top:0,behavior:"smooth"})}),2500)}),[]),Object(c.useEffect)((function(){e.orderCode&&e.actions.fetchOrder(e.orderCode)}),[e.currency]);return l.a.createElement(b.b,{value:a},l.a.createElement(Ee,Object.assign({},e,{updateOrderHandle:function(){e.actions.updateOrder({code:e.order.code,shoppingCartId:e.shoppingCartId})},onTabChange:function(t){e.actions.setSelectedTab(t)}})))}))),ke=Object(g.a)(ye);t.default=Object(p.b)((function(e){var t=Object(o.useDispatch)(),a=Object(u.a)((function(e){return{initialValues:Object(v.c)(e),shoppingCartId:e.basketData.shoppingCartId}})),n=a.initialValues,r=a.shoppingCartId,c=Object(f.g)(),s=Object(m.c)(d.b).t;return l.a.createElement(ke,Object.assign({},e,{onSubmit:function(e){t(i.basketActions.bookOrder({shoppingCartId:r,values:e,comment:e.comment}))},initialValues:n,theme:c,t:s}))}))},2257:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(14);function i(){var e=Object(n.a)(["\n  position: relative;\n  .react-datepicker {\n    font-family: ",";\n    font-size: 0.875rem;\n    background-color: #fff;\n    color: #000;\n    border: ",";\n    border-radius: ",";\n    display: inline-block;\n    position: relative;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    padding: 0;\n    background: #fff;\n    z-index: 1000;\n    border-radius: ",";\n    box-shadow: 1px 1px 12px rgba(0, 0, 0, 0.15),\n      inset 0px 0px 0px 1px ",";\n    .react-datepicker__triangle {\n      display: none;\n    }\n    .react-datepicker__header {\n      background-color: #ffffff;\n      border: none;\n      .react-datepicker__current-month--hasMonthDropdown {\n        padding: 0.375rem 0;\n      }\n      .react-datepicker__current-month,\n      .react-datepicker-time__header,\n      .react-datepicker-year-header {\n        font-size: 0.75rem;\n        text-align: center;\n        font-weight: 500;\n        text-transform: uppercase;\n        color: ",";\n        margin-bottom: 0.5rem;\n      }\n    }\n    .react-datepicker__day-names {\n      .react-datepicker__day-name {\n        text-transform: capitalize;\n        font-size: 0.75rem;\n        color: #8b9898;\n        width: 36px;\n      }\n    }\n    .react-datepicker__day,\n    .react-datepicker__month-text,\n    .react-datepicker__quarter-text {\n      font-size: 0.875rem;\n      line-height: 36px;\n      width: 36px;\n      height: 36px;\n\n      &.react-datepicker__day--outside-month {\n        color: ",";\n      }\n\n      &:hover {\n        &:not(.react-datepicker__day--keyboard-selected),\n        &:not(.react-datepicker__day--today) {\n          border-radius: ",";\n          background: ",";\n        }\n      }\n\n      &.react-datepicker__day--keyboard-selected {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      &.react-datepicker__day--today {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n    }\n  }\n\n  .react-datepicker-popper {\n    margin-top: 0 !important;\n    z-index: 10;\n  }\n  .react-datepicker__input-container {\n    width: 100%;\n    & > input {\n      width: 100%;\n      padding: 0 0.75rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      outline: 0;\n      line-height: 38px;\n      height: 38px;\n      transition: border-color 150ms, box-shadow 150ms;\n      background: #ffffff;\n      &:disabled {\n        border-color: ",";\n        box-shadow: none;\n        background: ",";\n      }\n      &:hover {\n        border-color: ",";\n      }\n      &:focus {\n        border-color: ",";\n        box-shadow: 0 0 3px ",";\n      }\n    }\n  }\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker__navigation {\n    outline: none;\n    .react-datepicker__navigation--previous {\n      outline: none;\n    }\n    .react-datepicker__navigation--next {\n      outline: none;\n    }\n  }\n  .react-datepicker__header__dropdown--select {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 0.75rem;\n    .react-datepicker__month-dropdown-container--select {\n      flex: 1;\n    }\n    .react-datepicker__year-select {\n      flex: 0 0 30%;\n    }\n    .react-datepicker__month-select,\n    .react-datepicker__year-select {\n      width: 100%;\n      padding: 0.375rem 0.5rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      transition: border-color 150ms, box-shadow 150ms;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  }\n  .react-datepicker__close-icon {\n      &:after {\n        background: transparent;\n        bottom: 5px;\n        font-size: 20px;\n        color: ",";\n      }\n    }\n"]);return i=function(){return e},e}var c=a(9).e.div(i(),(function(e){return e.theme.font}),(function(e){return Object(r.c)(e.theme.colors.dark,.1)}),(function(e){return e.theme.border}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.grey}),(function(e){return Object(r.c)(e.theme.colors.grey,.5)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.secondary,.1)}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.warning}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return Object(r.a)(.05,e.theme.colors.white)}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.danger}))},2260:function(e,t,a){},2262:function(e,t,a){"use strict";a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"l",(function(){return p})),a.d(t,"j",(function(){return v})),a.d(t,"g",(function(){return h})),a.d(t,"m",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"e",(function(){return E})),a.d(t,"i",(function(){return y})),a.d(t,"f",(function(){return C})),a.d(t,"c",(function(){return j})),a.d(t,"b",(function(){return w})),a.d(t,"a",(function(){return S}));var n=a(21),r=a(3),i=a(2261),c=a(33),l=function(e){return e.basketData.shoppingCart},o=function(e){return e.basketVisas.visaCenters},s=function(e){return e.basketTransfers.transfers},u=function(e){return e.basketTransfers.transferServices},d=Object(c.a)(o,(function(e){return e})),m=Object(c.a)((function(e){return e.basketVisas.mobileBiometrics}),(function(e){return e})),f=function(e){return e.basketData.fields},p=Object(c.a)(l,(function(e){return(null===e||void 0===e?void 0:e.services)?e.services.filter((function(e){return"Hotel"===e.type})).sort((function(e,t){return new Date(e.dateBegin).valueOf()-new Date(t.dateBegin).valueOf()})):[]})),v=Object(c.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return e.map((function(e){return Object(r.a)({},e)}))})),h=Object(c.a)([function(e){var t,a;return(null===(t=e.basketData)||void 0===t||null===(a=t.shoppingCart)||void 0===a?void 0:a.tourists)||[]},o,l],(function(e,t,a){return e.map((function(e){var n,i,c,l=t.find((function(t){return t.touristId===e.id}));return Object(r.a)({id:e.id,gender:"m",firstName:"",lastName:"",birthdate:"",citizenshipId:null,passport:"",pasportExpiration:"",pasportExpirationMin:new Date,visaCenter:l?null===(n=l.variants)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.id:null,biometry:null,visa:!1,isBiometry:!1,attributeIds:[],documentType:null,birthDateMax:e.birthDateMax,birthDateMin:e.birthDateMin,isTaxNumber:!!(null===(c=e.extraFields)||void 0===c?void 0:c.taxNumber),taxNumber:e.taxNumber||""},null===a||void 0===a?void 0:a.allowedActions,{roomGroup:e.roomGroup,order:e.order,age:e.age,ageType:e.ageType,editable:!0})})).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),b=Object(c.a)(u,s,(function(e,t){var a=e.map((function(e){var a=null===t||void 0===t?void 0:t.find((function(t){return t.serviceId===e.id}));return Object(r.a)({},e,{transfers:(null===a||void 0===a?void 0:a.variants)||[]})}));return a.some((function(e){return e.isFake}))&&a.some((function(e){return!e.transfers.length}))?[]:a})),g=Object(c.a)((function(e){return e.basketTransfers.selectedTransfers}),u,s,(function(e,t,a){return(null===e||void 0===e?void 0:e.length)?e:(null===t||void 0===t?void 0:t.length)&&a&&a.length?t.reduce((function(e,t){var r,i=a.find((function(e){return e.serviceId===t.id})),c=null;if(null===i||void 0===i||null===(r=i.variants)||void 0===r?void 0:r.length){var l=t.isFake?i.variants[0]:i.variants.find((function(e){return e.selected}));c=l?{serviceId:t.id,variantId:l.id}:null}return c?[].concat(Object(n.a)(e),[c]):e}),[]):[]})),E=Object(c.a)(l,(function(e){return e})),y=Object(c.a)([function(e){return e.basketPageData.offices}],(function(e){return e&&1===e.length?e[0].id:""})),k="context",O="tour",N="local",C=Object(c.a)([function(e){return e.basketData.price}],(function(e){var t,a,n,r,i,c;if(!e)return[];var l=null===(t=e.priceTotal)||void 0===t||null===(a=t.context)||void 0===a?void 0:a.currencyCode,o=null===(n=e.priceTotal)||void 0===n||null===(r=n.tour)||void 0===r?void 0:r.currencyCode,s=null===(i=e.priceTotal)||void 0===i||null===(c=i.local)||void 0===c?void 0:c.currencyCode;return l===o&&[{type:k,code:l},{type:N,code:s}],l!==s&&s!==o||[{type:k,code:l},{type:O,code:o}],[{type:k,code:l},{type:N,code:s},{type:O,code:o}].reduce((function(e,t){return e.some((function(e){return e.code===t.code}))?e:e.concat([t])}),[])})),j=Object(c.a)((function(e){var t;return(null===(t=e.basketData.formValues)||void 0===t?void 0:t.tourists)||[]}),(function(e){return Object(n.a)(e).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0}))})),x=function(e,t,a){var n={id:i.string().required(""),visaCenter:i.string().when("visa",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()}),visa:i.boolean(),isBiometry:i.boolean(),biomentry:i.string(),mobileBiometric:i.string().nullable(),attributeIds:i.array(),isTaxNumber:i.boolean(),taxNumber:i.string().when("isTaxNumber",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()})};return a.forEach((function(t){n[t.code]=t.required?i[t.type]().nullable().required(e("required")):i[t.type]().nullable()})),i.array().of(i.object().shape(n))},T=function(e,t){return t},w=Object(c.a)([T,f],(function(e,t){return function(e,t,a){return i.object().shape({tourists:x(e,0,a),officeId:i.string().nullable().required(e("required")),agree:i.boolean().oneOf([!0],e("required")),userAgreement:i.boolean().oneOf([!0],e("required")),emergencyPhone:i.string().nullable().required(e("required")),comment:i.string().nullable(),isPrebooking:i.bool(),officeDisabled:i.bool()})}(e.t,e.theme,t)})),S=Object(c.a)([T,f],(function(e,t){return x(e.t,e.theme,t)}))},2266:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));a(4),a(115),a(3),a(23);var n=a(0),r=a.n(n),i=(a(2212),a(340),{user:{isAuthenticated:!1,isAgency:!1,roles:[],username:null},onSetUser:function(){},onResetUser:function(){},onLogin:function(){return Promise.resolve()},onLogout:function(){return Promise.resolve()}}),c=r.a.createContext(i),l=c.Consumer,o=function(){return Object(n.useContext)(c)}},2273:function(e,t,a){},2274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyContainer=t.Sticky=void 0;var n=i(a(2321)),r=i(a(2322));function i(e){return e&&e.__esModule?e:{default:e}}t.Sticky=n.default,t.StickyContainer=r.default,t.default=n.default},2275:function(e,t,a){},2276:function(e,t,a){},2277:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m}));var n=a(0),r=a.n(n),i=a(2214),c=a(79),l=a.n(c),o=a(2274),s=a(1038),u=function(){return!Object(i.a)((function(e){return e.basketActualization.error}))},d=function(e){var t=e.onSubmit,a=e.timer,i=e.book,c=u();return r.a.createElement(l.a,{query:"(max-width: 991px)"},(function(e){return e?r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{submitAllowed:c,isValid:!0,submitForm:t,timer:a,book:i})):r.a.createElement(o.Sticky,{bottomOffset:24,topOffset:50},(function(e){var n=e.style;return r.a.createElement("div",{style:n},r.a.createElement(s.a,{submitAllowed:c,isValid:!0,submitForm:t,timer:a,book:i}))}))}))},m=function(){var e=u();return r.a.createElement(l.a,{query:"(max-width: 991px)"},(function(t){return t?r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{submitAllowed:e,isValid:!0})):r.a.createElement(o.Sticky,{bottomOffset:24,topOffset:50},(function(t){var a=t.style;return r.a.createElement("div",{style:a},r.a.createElement(s.a,{submitAllowed:e,isValid:!0}))}))}))}},2278:function(e,t,a){},2279:function(e,t,a){"use strict";var n=a(57),r=a(10),i=a(14),c=a(0),l=a.n(c),o=a(9),s=a(32);function u(){var e=Object(r.a)(["\n  color: ",";\n  font-size: ",";\n  margin: 0;\n  margin-bottom: ",";\n  font-weight: ",";\n  padding: 0;\n  padding-bottom: ",";\n  border-bottom: ",";\n  text-transform: ",";\n"]);return u=function(){return e},e}var d=Object(o.e)((function(e){var t=e.tag,a=void 0===t?"h2":t,r=(e.bold,e.children),i=(e.uppercase,e.capitalize,e.color,e.bordered,e.className,Object(n.a)(e,["tag","bold","children","uppercase","capitalize","color","bordered","className"]));return l.a.createElement(a,i,r)}))(u(),s.b,s.d,(function(e){return e.bordered?"0.75rem":"0"}),(function(e){return e.bold?"500":"400"}),(function(e){return e.bordered?".75rem":"0"}),(function(e){return e.bordered?"1px solid "+Object(i.c)(Object(s.b)(e),.1):"none"}),(function(e){return e.capitalize?"capitalize":e.uppercase?"uppercase":"none"}));d.defaultProps={color:"dark",bordered:!0};t.a=function(e){var t=Object.create(null),a=function(a){var n=a.tag;return"string"===typeof n&&o.e.hasOwnProperty(n)?(void 0===t[n]&&(t[n]=e.withComponent(n)),Object(c.createElement)(t[n],a)):Object(c.createElement)(e,a)};return(e.displayName||e.constructor.name)&&(a.displayName="Heading"),a}(d)},2280:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(21),r=a(258),i=a(2230),c=a(2107),l=a(2215),o=a(0),s=a.n(o),u=a(17),d=a(79),m=a.n(d),f=a(2213),p=a(2214),v=a(8),h=a(2262),b=a(10),g=a(2232),E=a(2220),y=a(2098),k=a(9),O=a(340),N=a(1035);a(2293);function C(){var e=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  background-color: #f0f0f7;\n  padding: 0.5rem 0.75rem;\n  border-radius: 4px;\n  "," {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  @media (max-width: 768px) {\n    display: block;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n  .transfer-info {\n    flex: 1;\n    padding-right: 1rem;\n    @media (max-width: 768px) {\n      margin-bottom: 0.5rem;\n    }\n    .transfer-info-name {\n      font-weight: 500;\n    }\n    .transfer-info-date {\n      font-size: 0.75rem;\n    }\n  }\n  .transfer-selecting {\n    flex: 0 0 35%;\n  }\n"]);return C=function(){return e},e}function j(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  .selected-transfere-price {\n    margin: 0 1rem;\n  }\n"]);return j=function(){return e},e}var x=function(e){var t=e.transfer,a=void 0===t?null:t,n=e.selectedValues,i=void 0===n?[]:n,c=e.readOnly,l=void 0!==c&&c,d=e.onChange,m=Object(o.useContext)(N.a),f=m.activeCurrency,p=m.extractPrice,v=Object(u.c)(r.b).t,h=Object(o.useMemo)((function(){return i.find((function(e){return e.serviceId===a.id}))}),[a,i]),b=Object(o.useMemo)((function(){return function(e){var t;return(null===e||void 0===e||null===(t=e.transfers)||void 0===t?void 0:t.length)?e.transfers.map((function(t){var a=p(t.price,"sum");return{label:s.a.createElement(T,null,s.a.createElement("span",null,"#NO_TRANSFER"===t.name?v("Service not selected"):t.name),a>0?s.a.createElement("span",{className:"selected-transfere-price"},"".concat(a>0?"+":"").concat(Object(O.b)(a))," ",s.a.createElement(g.a,{size:12,currencyCode:null===f||void 0===f?void 0:f.code})):s.a.createElement("span",{className:"selected-transfere-price"})),value:{serviceId:e.id,variantId:t.id},serviceId:e.id,variantId:t.id,name:t.name,price:t.addPrice}})):[]}(a)}),[a,f]),k=Object(E.b)(a.dateBegin);return s.a.createElement(w,null,s.a.createElement("div",{className:"transfer-info"},s.a.createElement("div",{className:"transfer-info-name"},a.subService&&a.subService.name),s.a.createElement("div",{className:"transfer-info-date"},k," "," / ","".concat(a.touristCount," ").concat(v("people"),"."))),b&&b.length>0&&s.a.createElement("div",{className:"transfer-selecting"},s.a.createElement(y.b,{disabled:l,clearable:!1,valueKey:"variantId",value:null===h||void 0===h?void 0:h.variantId,onChange:function(e){var t=b.find((function(t){return t.variantId===e}));t&&(null===d||void 0===d||d(t.value))},options:b})))},T=k.e.div(j()),w=k.e.div(C(),T),S=function(e){var t=e.readOnly,a=void 0!==t&&t,o=Object(f.a)(v.basketTransfersActions).actions,d=Object(p.a)((function(e){return{transfers:Object(h.m)(e),fetching:e.basketTransfers.fetching,selectedTransfers:Object(h.k)(e),shoppingCartId:e.basketData.shoppingCartId}})),b=d.transfers,g=d.fetching,E=d.selectedTransfers,y=d.shoppingCartId,k=Object(u.c)(r.b).t,O=function(e){var t=[].concat(Object(n.a)(E.filter((function(t){return t.serviceId!==e.serviceId}))),[e]);o.setTransfers({shoppingCartId:y,selectedVariants:t})};return s.a.createElement(m.a,{query:"(max-width: 991px)"},(function(e){return e?b.length>0&&!g?s.a.createElement("div",{className:"transfer-mobile basket-mobile-block"},s.a.createElement("div",{className:"basket-mobile-block-title"},k("Transfers")),b.map((function(e){return s.a.createElement(x,{key:e.id,transfer:e,selectedValues:E,onChange:O,readOnly:a})}))):g&&s.a.createElement(i.a,{description:k("Please wait. Loading order information")}):s.a.createElement("div",{className:"transfer-container"},b.length>0&&s.a.createElement(c.a,{className:"dashboard",title:s.a.createElement("div",null,k("Transfers"))},b.map((function(e){return s.a.createElement(x,{key:e.id,transfer:e,selectedValues:E,onChange:O,readOnly:a})}))),g&&s.a.createElement(l.a,null))}))}},2293:function(e,t,a){},2294:function(e,t,a){},2304:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(793),c=a(106),l=function(e){var t=e.value,a=e.label,n=e.active,i=e.color,l=e.onClick,o=e.disabled;return r.a.createElement(c.c,{outline:!0,selected:t===n,size:"md",onClick:function(){null===l||void 0===l||l(t)},color:i,disabled:o},a)};t.a=function(e){var t=e.color,a=void 0===t?"primary":t,n=e.field,c=e.form,o=e.options,s=e.active,u=e.disabled,d=function(e){c.setFieldValue(n.name,e)};return r.a.createElement(i.a,null,null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement(l,{key:e.value,active:s,color:a,value:e.value,label:e.label,onClick:d,disabled:u})})))}},2305:function(e,t,a){"use strict";var n=a(57),r=a(2246),i=a(0),c=a.n(i),l=a(349),o=a.n(l),s=a(189),u=a(264),d=a(2327),m=c.a.forwardRef((function(e,t){var a=e.label,l=e.placeholder,m=e.type,f=e.disabled,p=e.field,v=e.form,h=e.mask,b=e.selectAllOnFocus,g=e.forwardFocusRef,E=Object(n.a)(e,["label","placeholder","type","disabled","field","form","mask","selectAllOnFocus","forwardFocusRef"]),y=Object(i.useRef)(null),k=function(e){var t,a;null===y||void 0===y||null===(t=y.current)||void 0===t||null===(a=t.setFocused)||void 0===a||a.call(t,!0),b&&e.target.select(),E.onFocus&&E.onFocus(e)},O=function(e){var t,a;null===y||void 0===y||null===(t=y.current)||void 0===t||null===(a=t.setFocused)||void 0===a||a.call(t,!1),E.onBlur&&E.onBlur(e),(null===v||void 0===v?void 0:v.handleBlur)&&v.handleBlur(e)},N=Object(r.f)(v.errors,p.name),C=Object(r.f)(v.touched,p.name);return c.a.createElement(s.a,null,a&&c.a.createElement(u.a,null,a),c.a.createElement("div",{className:"input-container"},h?c.a.createElement(o.a,Object.assign({},E,p,{mask:h,value:p.value,placeholder:l,disabled:f,type:m||"text",ref:t,render:function(e,t){return c.a.createElement("input",Object.assign({ref:function(t){var a;(a=t)&&(null===g||void 0===g||g(p.name,a.focus)),null===e||void 0===e||e(t)}},t,{className:C&&N&&"tourist-input-error"}))},onFocus:k,onBlur:O})):c.a.createElement("input",Object.assign({},E,p,{className:C&&N&&"tourist-input-error",value:p.value,placeholder:l,disabled:f,type:m||"text",ref:function(e){var a;(a=e)&&(null===g||void 0===g||g(p.name,a.focus.bind?a.focus.bind(a):a.focus)),null===t||void 0===t||t(e)},onFocus:k,onBlur:O}))),c.a.createElement(d.a,{error:N,touched:C,ref:y}))}));t.a=m},2306:function(e,t,a){"use strict";var n=a(3),r=a(57),i=a(2246),c=a(0),l=a.n(c),o=a(2265),s=a.n(o),u=a(264),d=(a(2264),a(349)),m=a.n(d),f=a(2257),p=a(2327),v=l.a.forwardRef((function(e,t){var a=e.placeholder,o=void 0===a?"":a,d=e.disabled,v=void 0!==d&&d,h=(e.format,e.clearable),b=void 0!==h&&h,g=e.year,E=void 0!==g&&g,y=e.field,k=e.mask,O=void 0===k?null:k,N=e.label,C=e.form,j=e.forwardFocusRef,x=e.minDate,T=e.maxDate,w=e.locale,S=Object(r.a)(e,["placeholder","disabled","format","clearable","year","field","mask","label","form","forwardFocusRef","minDate","maxDate","locale"]),F=Object(c.useRef)(null);Object(c.useImperativeHandle)(t,(function(){return Object(n.a)({},F.current||{})}));var I=function(e){e&&(null===j||void 0===j||j(y.name,e.focus.bind(e)))},A=Object(i.f)(C.errors,y.name),D=Object(i.f)(C.touched,y.name);return l.a.createElement(f.a,null,N&&l.a.createElement(u.a,{className:D&&A&&"tourist-error"},N),l.a.createElement(s.a,Object.assign({},S,{locale:w,onKeyDown:function(e){var t,a;"Tab"===e.key&&(null===(t=F.current)||void 0===t||null===(a=t.setOpen)||void 0===a||a.call(t,!1))},minDate:x,maxDate:T,placeholderText:o,isClearable:b,disabled:v,dateFormat:"dd.MM.yyyy",selected:y.value?new Date(y.value):void 0,onChange:function(e){var t;C.setFieldValue(y.name,e),null===(t=S.onChange)||void 0===t||t.call(S,e)},peekNextMonth:E,showMonthDropdown:E,showYearDropdown:E,dropdownMode:E?"select":void 0,ref:F,customInput:O?l.a.createElement(m.a,{mask:O,render:function(e,t){return l.a.createElement("input",Object.assign({ref:function(t){null===e||void 0===e||e(t),null===I||void 0===I||I(t)}},t,{className:D&&A&&"tourist-input-error"}))}}):void 0})),l.a.createElement(p.a,{error:A,touched:D}))}));t.a=v},2309:function(e,t,a){"use strict";var n=a(2246),r=a(0),i=a.n(r),c=a(56),l=a(789),o=a(264),s=a(254),u=a(2098),d=a(2327),m=i.a.forwardRef((function(e,t){var a=e.label,m=e.pluginBefore,f=e.pluginAfter,p=e.field,v=e.form,h=e.loading,b=e.className,g=e.forwardFocusRef,E=e.style,y=e.placeholder,k=e.valueKey,O=void 0===k?"value":k,N=e.labelKey,C=void 0===N?"label":N,j=e.tabIndex,x=e.clearable,T=e.onChange,w=e.disabled,S=e.optionRenderer,F=e.options,I=Object(r.useRef)(null),A=function(e){e&&(null===g||void 0===g||g(p.name,e.focus.bind(e)))},D=Object(r.useMemo)((function(){return Array.isArray(F)?F.find((function(e){return e[O]===p.value})):void 0}),[p.value,F]),M=Object(n.f)(v.errors,p.name),P=Object(n.f)(v.touched,p.name);return i.a.createElement(u.a,{className:"select-formik ".concat(b||"").trim(),style:E},a&&i.a.createElement(o.a,null,a),i.a.createElement("div",{className:"select-container ".concat(P&&M?"tourist-input-error":"").trim()},m&&m,i.a.createElement(l.a,{onFocus:function(){var e,t;null===(e=I.current)||void 0===e||null===(t=e.setFocused)||void 0===t||t.call(e,!0)},onBlur:function(e){var t,a,n;null===(t=I.current)||void 0===t||null===(a=t.setFocused)||void 0===a||a.call(t,!1),null===v||void 0===v||null===(n=v.setFieldTouched)||void 0===n||n.call(v,null===p||void 0===p?void 0:p.name,!0)},options:F,placeholder:y,onChange:function(e){v.setFieldValue(p.name,e[O]),null===T||void 0===T||T(e[O])},id:p.name,isLoading:h,value:D,getOptionValue:function(e){return e[O]},getOptionLabel:function(e){return e[C]},tabIndex:j,isClearable:x,isDisabled:w,components:{Option:function(e){return i.a.createElement(c.z.Option,e,S?S(e):e.children)},LoadingIndicator:function(){return i.a.createElement(s.a,{style:{marginRight:"0.5rem"},size:16})}},ref:function(e){null===t||void 0===t||t(e),null===A||void 0===A||A(e)}}),f&&f),i.a.createElement(d.a,{touched:P,error:M,ref:I}))}));t.a=m},2310:function(e,t,a){},2311:function(e,t,a){},2312:function(e,t,a){},2313:function(e,t,a){},2314:function(e,t,a){},2315:function(e,t,a){},2316:function(e,t,a){},2317:function(e,t,a){},2318:function(e,t,a){},2319:function(e,t,a){},2320:function(e,t,a){},2321:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),i=o(r),c=o(a(67)),l=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=function(e){function t(){var e,a,n;s(this,t);for(var r=arguments.length,i=Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={isSticky:!1,wasSticky:!1,style:{}},n.handleContainerEvent=function(e){var t=e.distanceFromTop,a=e.distanceFromBottom,r=e.eventSource,i=n.context.getParent(),c=!1;n.props.relative&&(c=r!==i,t=-(r.scrollTop+r.offsetTop)+n.placeholder.offsetTop);var l=n.placeholder.getBoundingClientRect(),o=n.content.getBoundingClientRect().height,s=a-n.props.bottomOffset-o,u=!!n.state.isSticky,d=c?u:t<=-n.props.topOffset&&a>-n.props.bottomOffset;a=(n.props.relative?i.scrollHeight-i.scrollTop:a)-o;var m=d?{position:"fixed",top:s>0?n.props.relative?i.offsetTop-i.offsetParent.scrollTop:0:s,left:l.left,width:l.width}:{};n.props.disableHardwareAcceleration||(m.transform="translateZ(0)"),n.setState({isSticky:d,wasSticky:u,distanceFromTop:t,distanceFromBottom:a,calculatedHeight:o,style:m})},u(n,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){if(!this.context.subscribe)throw new TypeError("Expected Sticky to be mounted within StickyContainer");this.context.subscribe(this.handleContainerEvent)}},{key:"componentWillUnmount",value:function(){this.context.unsubscribe(this.handleContainerEvent)}},{key:"componentDidUpdate",value:function(){this.placeholder.style.paddingBottom=this.props.disableCompensation?0:(this.state.isSticky?this.state.calculatedHeight:0)+"px"}},{key:"render",value:function(){var e=this,t=i.default.cloneElement(this.props.children({isSticky:this.state.isSticky,wasSticky:this.state.wasSticky,distanceFromTop:this.state.distanceFromTop,distanceFromBottom:this.state.distanceFromBottom,calculatedHeight:this.state.calculatedHeight,style:this.state.style}),{ref:function(t){e.content=c.default.findDOMNode(t)}});return i.default.createElement("div",null,i.default.createElement("div",{ref:function(t){return e.placeholder=t}}),t)}}]),t}(r.Component);d.propTypes={topOffset:l.default.number,bottomOffset:l.default.number,relative:l.default.bool,children:l.default.func.isRequired},d.defaultProps={relative:!1,topOffset:0,bottomOffset:0,disableCompensation:!1,disableHardwareAcceleration:!1},d.contextTypes={subscribe:l.default.func,unsubscribe:l.default.func,getParent:l.default.func},t.default=d},2322:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),c=s(i),l=s(a(1)),o=s(a(149));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(e){function t(){var e,a,n;u(this,t);for(var r=arguments.length,i=Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.events=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],n.subscribers=[],n.rafHandle=null,n.subscribe=function(e){n.subscribers=n.subscribers.concat(e)},n.unsubscribe=function(e){n.subscribers=n.subscribers.filter((function(t){return t!==e}))},n.notifySubscribers=function(e){if(!n.framePending){var t=e.currentTarget;n.rafHandle=(0,o.default)((function(){n.framePending=!1;var e=n.node.getBoundingClientRect(),a=e.top,r=e.bottom;n.subscribers.forEach((function(e){return e({distanceFromTop:a,distanceFromBottom:r,eventSource:t===window?document.body:n.node})}))})),n.framePending=!0}},n.getParent=function(){return n.node},d(n,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getChildContext",value:function(){return{subscribe:this.subscribe,unsubscribe:this.unsubscribe,getParent:this.getParent}}},{key:"componentDidMount",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.notifySubscribers)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.rafHandle&&(o.default.cancel(this.rafHandle),this.rafHandle=null),this.events.forEach((function(t){return window.removeEventListener(t,e.notifySubscribers)}))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",n({},this.props,{ref:function(t){return e.node=t},onScroll:this.notifySubscribers,onTouchStart:this.notifySubscribers,onTouchMove:this.notifySubscribers,onTouchEnd:this.notifySubscribers}))}}]),t}(i.PureComponent);m.childContextTypes={subscribe:l.default.func,unsubscribe:l.default.func,getParent:l.default.func},t.default=m},2323:function(e,t,a){},2325:function(e,t,a){"use strict";var n=a(21),r=a(3),i=a(23),c=a(258),l=a(2107),o=a(2279),s=a(2225),u=a(106),d=a(0),m=a.n(d),f=a(17),p=a(39),v=a(75),h=a(8),b=a(2233),g=a(2223),E=a(2224),y=a(2092),k=function(e){var t=e.onClose,a=void 0===t?function(){}:t,n=e.onSendToEmail,r=void 0===n?function(){}:n,l=Object(d.useState)(""),o=Object(i.a)(l,2),p=o[0],v=o[1],h=Object(d.useState)(!1),k=Object(i.a)(h,2),O=k[0],N=k[1],C=Object(f.c)(c.a).t;return m.a.createElement(b.a,{size:"sm",onClose:function(){a("showEmailModal")},modalTitle:C("Sending documents")},m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:12},m.a.createElement(y.a,{className:"inline",label:C("Email"),onChange:function(e){v(e.target.value)}}))),m.a.createElement(g.a,{className:"m-t-10"},m.a.createElement(E.a,{md:12},m.a.createElement(s.a,{label:C("ZIP archive"),checked:O,onChange:function(e){N(e.target.checked)}}))),m.a.createElement(g.a,{className:"m-t-10"},m.a.createElement(E.a,{lg:12,className:"text-right"},m.a.createElement(u.c,{onClick:function(){r(p,O)},disabled:!p},C("Send to email")))))},O=a(2098),N=a(57),C=m.a.forwardRef((function(e,t){e.label;var a=e.name,n=e.type,r=e.placeholder,i=(e.className,e.disabled),c=e.readonly,l=e.autoFocus,o=(e.pluginBefore,e.pluginAfter,e.accept),s=(e.mask,e.onFocus),u=e.onKeyUp,d=e.onClick,f=e.onBlur,p=e.onKeyDown,v=(e.onClear,e.clearable,e.loading,e.value),h=Object(N.a)(e,["label","name","type","placeholder","className","disabled","readonly","autoFocus","pluginBefore","pluginAfter","accept","mask","onFocus","onKeyUp","onClick","onBlur","onKeyDown","onClear","clearable","loading","value"]);return m.a.createElement("input",Object.assign({},h,{value:v,placeholder:r||"",disabled:i,readOnly:c||!1,type:n||"text",name:a||void 0,autoFocus:l,ref:t,accept:o||void 0,onChange:function(e){h.onChange&&h.onChange(e)},onFocus:s&&s,onKeyUp:u&&u,onClick:d&&d,onBlur:f&&f,onKeyDown:p&&p}))})),j=function(e){var t=e.fileTypes,a=e.onClose,n=e.onUploadFile,l=Object(d.useRef)(),o=Object(f.c)(c.a).t,s=Object(d.useState)((function(){return{fileType:(null===t||void 0===t?void 0:t[0])?t[0].code:"",showOther:!1,file:null,isImage:!1}})),p=Object(i.a)(s,2),v=p[0],h=p[1];return m.a.createElement(b.a,{size:"md",onClose:function(){a()},modalTitle:o("Attaching documents to the order")},m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:6},m.a.createElement(O.b,{style:{width:"100%"},label:o("File type"),labelKey:"name",valueKey:"code",className:"inline",clearable:!1,value:v.fileType,options:t,onChange:function(e){h("Other"===e?function(e){return Object(r.a)({},e,{showOther:!0,fileType:""})}:function(t){return Object(r.a)({},t,{showOther:!1,fileType:e})})}})),v.showOther&&m.a.createElement(E.a,{lg:6},m.a.createElement(y.a,{className:"inline",label:o("Other type"),onChange:function(e){h((function(t){return Object(r.a)({},t,{fileType:e.target.value})}))}})," ")),m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:12},m.a.createElement("div",{className:"m-t-20 documents-upload-input"},m.a.createElement(C,{type:"file",name:"file",ref:l,accept:".png, .jpg, .jpeg, .bmp, .tiff, .tif, .gif, .pdf",onChange:function(e){h((function(t){return Object(r.a)({},t,{file:e.target.files[0],isImage:!!~e.target.files[0].type.indexOf("image")})}))}})))),m.a.createElement(g.a,null,m.a.createElement(E.a,{md:12},m.a.createElement("div",{className:"m-t-20 text-right"},m.a.createElement(u.c,{onClick:function(){v.file&&(n(v.file,v.fileType),l.current&&(l.current.value=""))},disabled:!v.file},o("Upload file"))))))};a(2323),t.a=Object(p.connect)((function(e){var t=e.order;return{documentList:t.documentList,fileTypes:t.fileTypes,fetching:t.fetching}}),(function(e){return{actions:Object(v.bindActionCreators)(h.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.documentList,p=e.fetchDocuments,v=e.sendToEmail,h=e.downloadDocument,b=e.uploadDocument,g=Object(f.c)(c.a).t,E=Object(d.useState)({selectedFiles:[],selectedBlanks:[],showFilesModal:!1,showEmailModal:!1}),y=Object(i.a)(E,2),O=y[0],N=y[1];Object(d.useEffect)((function(){a||p(t)}),[]);var C=function(e){return O.selectedBlanks.includes(e)},x=Object(d.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.blanks)||void 0===e?void 0:e.every((function(e){return O.selectedBlanks.includes(e.id)}))}),[null===a||void 0===a?void 0:a.blanks,O.selectedBlanks]),T=Object(d.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.fileGroups)||void 0===e?void 0:e.every((function(e){return e.files.every((function(e){return O.selectedFiles.includes(e.id)}))}))}),[a,O.selectedFiles]),w=function(e){return O.selectedFiles.includes(e)},S=function(e){return function(){var n=e||(O.selectedBlanks.length>1||O.selectedFiles.length>1),r={orderId:t,selectedFiles:O.selectedFiles,selectedBlanks:O.selectedBlanks,zip:n};if(n||O.selectedFiles.length+O.selectedBlanks.length>1)r.fileName="Archive.zip";else{if(1===O.selectedBlanks.length){var i=a.blanks.find((function(e){return e.id===O.selectedBlanks[0]}));r.fileName="".concat(i.name,".").concat(i.format)}if(1===O.selectedFiles.length){var c=a.fileGroups.find((function(e){return e.files.some((function(e){return e.id===O.selectedFiles[0]}))}));if(c){var l=c.files.find((function(e){return e.id===O.selectedFiles[0]}));r.fileName="".concat(l.name,".").concat(l.format)}}}h(r)}},F=function(e,a){return function(){var n={orderId:t,zip:!1,fileName:"".concat(e.name,".").concat(e.format)};"file"===a&&(n=Object(r.a)({},n,{selectedFiles:[e.id],selectedBlanks:[]})),"blank"===a&&(n=Object(r.a)({},n,{selectedFiles:[],selectedBlanks:[e.id]})),h(n)}},I=function(){N((function(e){return Object(r.a)({},e,{showFilesModal:!1})}))},A=function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!1})}))},D=Object(d.useMemo)((function(){return!(O.selectedBlanks.length>0)&&!(O.selectedFiles.length>0)}),[O.selectedBlanks,O.selectedFiles]);return m.a.createElement(d.Fragment,null,(null===a||void 0===a?void 0:a.links)&&a.links.length>0&&m.a.createElement(l.a,{className:"dashboard"},m.a.createElement("div",{className:"documents-links"},m.a.createElement(o.a,{color:"dark",tag:"h4",bordered:!0},g("Useful links")),m.a.createElement("ul",{className:"documents-links-list"},a.links.map((function(e,t){return m.a.createElement("li",{key:t,className:"documents-list-link"},m.a.createElement("a",{href:e.url,className:"link-secondary",target:"_blank",rel:"noopener noreferrer"},e.name))}))))),m.a.createElement("div",{className:"order-documents"},m.a.createElement(l.a,{className:"dashboard"},a&&a.blanks.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(s.a,{onChange:function(e){N((function(t){var n;return Object(r.a)({},t,{selectedBlanks:(null===(n=e.target)||void 0===n?void 0:n.checked)?a.blanks.map((function(e){return e.id})):[]})}))},checked:x,className:"documents-list-title",label:m.a.createElement("div",null,m.a.createElement("span",null,g("Select all forms")))}),m.a.createElement("ul",{className:"documents-list"},a.blanks.map((function(e){return m.a.createElement("li",{key:e.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(t=e.id,function(){N((function(e){return Object(r.a)({},e,{selectedBlanks:C(t)?e.selectedBlanks.filter((function(e){return e!==t})):[].concat(Object(n.a)(e.selectedBlanks),[t])})}))}),checked:C(e.id)}),m.a.createElement("span",{className:"link-secondary",onClick:F(e,"blank")},e.name));var t})))),a&&a.fileGroups.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(o.a,{color:"dark",tag:"h4",bordered:!0},m.a.createElement(s.a,{onChange:function(e){var t=[];e.target.checked&&a.fileGroups.forEach((function(e){e.files.forEach((function(e){return t.push(e.id)}))})),N((function(e){return Object(r.a)({},e,{selectedFiles:t})}))},checked:T,label:m.a.createElement("div",null,m.a.createElement("span",null,g("Files")))})),m.a.createElement("ul",{className:"documents-list"},a.fileGroups.map((function(e){return e.files.map((function(t){return m.a.createElement("li",{key:t.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(a=t.id,function(){N((function(e){return Object(r.a)({},e,{selectedFiles:w(a)?e.selectedFiles.filter((function(e){return e!==a})):[].concat(Object(n.a)(e.selectedFiles),[a])})}))}),checked:w(t.id)}),m.a.createElement("span",{className:"link-secondary",onClick:F(t,"file")},"".concat(e.name," ").concat(t.name)));var a}))})))),O.showFilesModal&&m.a.createElement(j,{onClose:I,onUploadFile:function(e,a){var n=new FormData;n.append("file",e),b({orderId:t,data:n,type:a}),I()},fileTypes:a.fileTypes}),O.showEmailModal&&m.a.createElement(k,{onClose:A,onSendToEmail:function(e,a){v({orderId:t,data:{blankIds:O.selectedBlanks,fileIds:O.selectedFiles,zip:a,email:e}}),A()}}),m.a.createElement("div",{className:"order-documents-actions"},m.a.createElement(u.c,{color:"success",disabled:D,onClick:S(!1)},g("Download")),m.a.createElement(u.c,{color:"success",disabled:D,onClick:S(!0)},g("Download as archive")),m.a.createElement(u.c,{onClick:function(e){N((function(e){return Object(r.a)({},e,{showFilesModal:!0})}))}},g("Upload documents")),m.a.createElement(u.c,{disabled:D,onClick:function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!0})}))}},g("Send to email"))))))}))},2326:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(139),c=a(10),l=a(14),o=a(9),s=a(32);function u(){var e=Object(c.a)(["\n  position: relative;\n  font-size: 0.875rem;\n  padding: 0.5rem 1.5rem 0.5rem 0.75rem;\n  border: 1px solid;\n  margin-bottom: 1rem;\n  border-radius: ",";\n  background-color: ",";\n  border-color: ",";\n  color: ",";\n  &.small {\n    font-size: 0.75rem;\n    padding: 0.375rem 1rem 0.375rem 0.5rem;\n  }\n  .icon-close {\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    cursor: pointer;\n    border-radius: 100%;\n    padding: 0;\n  }\n"]);return u=function(){return e},e}var d=o.e.div(u(),(function(e){return e.theme.radius}),(function(e){return e.color?Object(l.b)(.35,Object(s.b)(e)):Object(l.c)(e.theme.colors.light,1)}),(function(e){return e.color?Object(l.b)(.3,Object(s.b)(e)):Object(l.a)(.05,e.theme.colors.light)}),(function(e){return Object(l.a)(.1,Object(s.b)(e))})),m=function(e){var t=e.color,a=e.children,n=e.dismissable,c=e.onClose,l=e.small,o=e.className;return r.a.createElement(d,{color:t,"data-component":"alert",className:"alert ".concat(o||""," ").concat(l?"small":"").trim()},a,n&&r.a.createElement("span",{className:"icon-close",onClick:c},r.a.createElement(i.a,{icon:"times-circle"})))};m.defaultProps={color:"warning"};t.a=m},2327:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(23),r=a(0),i=a.n(r),c=a(10);function l(){var e=Object(c.a)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  margin-top: 5px;\n  padding: 0.125rem 0.25rem;\n  background: ",";\n  color: #fff;\n  border: 1px solid ",';\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n  z-index: 1;\n  line-height: 1;\n  &:before {\n    position: absolute;\n    left: 5px;\n    top: -5px;\n    width: 0;\n    height: 0;\n    content: "";\n    z-index: 2;\n    border-bottom: 5px solid ',";\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n  }\n"]);return l=function(){return e},e}var o=a(9).e.span(l(),(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.danger})),s=i.a.forwardRef((function(e,t){var a=e.error,c=e.touched,l=Object(r.useState)(!1),s=Object(n.a)(l,2),u=s[0],d=s[1],m=function(e){return function(){d(e)}};return Object(r.useImperativeHandle)(t,(function(){return{setFocused:d}})),c&&a&&!u?i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(o,{onMouseLeave:m(!1),onMouseEnter:m(!0)},a)):null}))},2332:function(e,t,a){"use strict";var n=a(139),r=a(2246),i=a(0),c=a.n(i),l=a(794),o=c.a.forwardRef((function(e,t){var a=e.className,o=void 0===a?"":a,s=e.label,u=void 0===s?"":s,d=e.disabled,m=e.field,f=e.onChange,p=e.checkIcon,v=void 0===p?"check-square":p,h=e.uncheckIcon,b=void 0===h?"square":h,g=e.tabIndex;return c.a.createElement(i.Fragment,null,c.a.createElement(l.a,{tabIndex:g,className:"checkbox ".concat(o||""," ").concat(m.value?"checked":"").trim()},c.a.createElement("input",Object.assign({ref:t,type:"checkbox",disabled:d,checked:m.value,onClick:f},m)),c.a.createElement(n.a,{className:"checkbox-icon",icon:m.value?v:b}),u&&c.a.createElement("span",{className:"checkbox-label"},u)),c.a.createElement(r.a,{name:m.name},(function(e){return c.a.createElement("div",{className:"small red"},e)})))}));t.a=o},2334:function(e,t,a){"use strict";var n=a(57),r=a(0),i=a.n(r),c=a(2265),l=a.n(c),o=(a(2264),a(349)),s=a.n(o),u=a(264),d=a(2257),m=i.a.forwardRef((function(e,t){var a=e.placeholder,r=void 0===a?"":a,c=(e.format,e.clearable),o=void 0!==c&&c,m=e.year,f=void 0!==m&&m,p=e.mask,v=void 0===p?null:p,h=e.value,b=e.label,g=e.disabled,E=void 0!==g&&g,y=e.minDate,k=e.maxDate,O=Object(n.a)(e,["placeholder","format","clearable","year","mask","value","label","disabled","minDate","maxDate"]);return i.a.createElement(d.a,null,b&&i.a.createElement(u.a,null,b),i.a.createElement(l.a,Object.assign({},O,{minDate:y,maxDate:k,disabled:E,placeholderText:r,isClearable:o,dateFormat:"dd.MM.yyyy",selected:h?new Date(h):void 0,onChange:function(e){O.onChange(e)},peekNextMonth:f,showMonthDropdown:f,showYearDropdown:f,dropdownMode:f?"select":void 0,customInput:v?i.a.createElement(s.a,{mask:v}):void 0,ref:t})))}));t.a=m},2337:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(23),r=a(0),i=a.n(r),c=a(795),l=a(2228),o=function(e){var t=e.defaultValue,a=e.onChange,o=e.options,s=e.className,u=e.disabled,d=e.valueKey,m=void 0===d?"value":d,f=e.labelKey,p=void 0===f?"label":f,v=Object(r.useState)({selected:t||null}),h=Object(n.a)(v,2),b=h[0],g=h[1],E=function(e){g({selected:e}),null===a||void 0===a||a(e)};return i.a.createElement(c.b,{className:"".concat(s||"")},o.map((function(e,t){return i.a.createElement(l.a,{disabled:u,key:t,className:e.className||"",label:e[p],value:e[m],checked:e[m]===b.selected,onChange:E})})))}},2338:function(e,t,a){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}a.d(t,"a",(function(){return B}));var r=a(0),i=a.n(r),c=a(1),l=a.n(c),o=a(265),s=a(2371),u=a.n(s),d=a(2331),m=a.n(d);function f(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(a,n){e=a,t.forEach((function(t){return t(e,n)}))}}}var p=i.a.createContext||function(e,t){var a,n,i="__create-react-context-"+m()()+"__",c=function(e){function a(){var t;return(t=e.apply(this,arguments)||this).emitter=f(t.props.value),t}u()(a,e);var n=a.prototype;return n.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var a,n=this.props.value,r=e.value;((i=n)===(c=r)?0!==i||1/i===1/c:i!==i&&c!==c)?a=0:(a="function"===typeof t?t(n,r):1073741823,0!==(a|=0)&&this.emitter.set(e.value,a))}var i,c},n.render=function(){return this.props.children},a}(r.Component);c.childContextTypes=((a={})[i]=l.a.object.isRequired,a);var o=function(t){function a(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,a){0!==((0|e.observedBits)&a)&&e.setState({value:e.getValue()})},e}u()(a,t);var n=a.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},n.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},n.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},n.getValue=function(){return this.context[i]?this.context[i].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},a}(r.Component);return o.contextTypes=((n={})[i]=l.a.object,n),{Provider:c,Consumer:o}},v=a(698);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var b=a(2372),g=a.n(b);a(209);function E(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}a(208);var y=function(e){var t=p();return t.displayName=e,t}("Router"),k=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={location:t.history.location},a._isMounted=!1,a._pendingLocation=null,t.staticContext||(a.unlisten=t.history.listen((function(e){a._isMounted?a.setState({location:e}):a._pendingLocation=e}))),a}n(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var a=t.prototype;return a.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},a.componentWillUnmount=function(){this.unlisten&&this.unlisten()},a.render=function(){return i.a.createElement(y.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(i.a.Component);i.a.Component;i.a.Component;var O={},N=0;function C(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var a=t,n=a.path,r=a.exact,i=void 0!==r&&r,c=a.strict,l=void 0!==c&&c,o=a.sensitive,s=void 0!==o&&o;return[].concat(n).reduce((function(t,a){if(!a&&""!==a)return null;if(t)return t;var n=function(e,t){var a=""+t.end+t.strict+t.sensitive,n=O[a]||(O[a]={});if(n[e])return n[e];var r=[],i={regexp:g()(e,r,t),keys:r};return N<1e4&&(n[e]=i,N++),i}(a,{end:i,strict:l,sensitive:s}),r=n.regexp,c=n.keys,o=r.exec(e);if(!o)return null;var u=o[0],d=o.slice(1),m=e===u;return i&&!m?null:{path:a,url:"/"===a&&""===u?"/":u,isExact:m,params:c.reduce((function(e,t,a){return e[t.name]=d[a],e}),{})}}),null)}i.a.Component;function j(e){return"/"===e.charAt(0)?e:"/"+e}function x(e,t){if(!e)return t;var a=j(e);return 0!==t.pathname.indexOf(a)?t:h({},t,{pathname:t.pathname.substr(a.length)})}function T(e){return"string"===typeof e?e:Object(o.e)(e)}function w(e){return function(){Object(v.a)(!1)}}function S(){}i.a.Component;i.a.Component;i.a.useContext;function F(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}i.a.Component;i.a.Component;var D=function(e,t){return"function"===typeof e?e(t):e},M=function(e,t){return"string"===typeof e?Object(o.c)(e,null,null,t):e},P=function(e){return e},R=i.a.forwardRef;"undefined"===typeof R&&(R=P);var _=R((function(e,t){var a=e.innerRef,n=e.navigate,r=e.onClick,c=A(e,["innerRef","navigate","onClick"]),l=c.target,o=I({},c,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||l&&"_self"!==l||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return o.ref=P!==R&&t||a,i.a.createElement("a",o)}));var B=R((function(e,t){var a=e.component,n=void 0===a?_:a,r=e.replace,c=e.to,l=e.innerRef,o=A(e,["component","replace","to","innerRef"]);return i.a.createElement(y.Consumer,null,(function(e){e||Object(v.a)(!1);var a=e.history,s=M(D(c,e.location),e.location),u=s?a.createHref(s):"",d=I({},o,{href:u,navigate:function(){var t=D(c,e.location);(r?a.replace:a.push)(t)}});return P!==R?d.ref=t||l:d.innerRef=l,i.a.createElement(n,d)}))})),V=function(e){return e},z=i.a.forwardRef;"undefined"===typeof z&&(z=V);z((function(e,t){var a=e["aria-current"],n=void 0===a?"page":a,r=e.activeClassName,c=void 0===r?"active":r,l=e.activeStyle,o=e.className,s=e.exact,u=e.isActive,d=e.location,m=e.strict,f=e.style,p=e.to,h=e.innerRef,b=A(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return i.a.createElement(y.Consumer,null,(function(e){e||Object(v.a)(!1);var a=d||e.location,r=M(D(p,a),a),g=r.pathname,E=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),y=E?C(a.pathname,{path:E,exact:s,strict:m}):null,k=!!(u?u(y,a):y),O=k?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return e})).join(" ")}(o,c):o,N=k?I({},f,{},l):f,j=I({"aria-current":k&&n||null,className:O,style:N,to:r},b);return V!==z?j.ref=t||h:j.innerRef=h,i.a.createElement(B,j)}))}))},2364:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(1033);t.a=function(e){return r.a.createElement("img",{src:"".concat(i.c).concat(e.srcpath?e.srcpath:"/userfiles/images/site-adaptive/noimage.png","?w=").concat(e.width?e.width:300,"&h=").concat(e.height?e.height:300,"&mode=crop"),alt:"No photo"})}},2368:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),i=a(2266),c=function(e){var t=e.allowedRoles,a=e.unallowedRoles,n=e.children,c=e.notAllowed,l=void 0===c?null:c;return r.a.createElement(i.a,null,(function(e){var r=e.user;if(!r.isAuthenticated&&t)return l;if(!r.isAuthenticated&&!t)return n;if(t&&t.length>0){var i=!1;if(t.forEach((function(e){r.roles&&r.roles.length>0&&r.roles.includes(e)&&(i=!0)})),(null===a||void 0===a?void 0:a.length)&&a.forEach((function(e){r.roles&&r.roles.length>0&&r.roles.includes(e)&&(i=!1)})),!i)return l}return n}))}},2370:function(e,t,a){"use strict";var n=a(10),r=a(57),i=a(14),c=a(0),l=a.n(c),o=a(9),s=a(264);function u(){var e=Object(n.a)(["\n  textarea {\n    position: relative;\n    display: flex;\n    width: 100%;\n    padding: 0.5rem 0.75rem;\n    border: 1px solid ",";\n    border-radius: ",";\n    outline: 0;\n    transition: border-color 150ms, box-shadow 150ms;\n    justify-content: space-between;\n    align-items: center;\n    background: #ffffff;\n    &:hover {\n      border-color: ",";\n    }\n    &:focus {\n      border-color: ",";\n      box-shadow: 0 0 3px ",";\n    }\n  }\n"]);return u=function(){return e},e}var d=o.e.div(u(),(function(e){return Object(i.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(i.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(i.c)(e.theme.colors.primary,.5)}));t.a=function(e){var t=e.className,a=e.label,n=e.onChange,i=e.value,c=e.name,o=e.rows,u=e.tabIndex,m=e.required,f=e.placeholder,p=Object(r.a)(e,["className","label","onChange","value","name","rows","tabIndex","required","placeholder"]);return l.a.createElement(d,{className:"".concat(t||"").trim()},a&&l.a.createElement(s.a,null,a),l.a.createElement("textarea",Object.assign({},p,{placeholder:f||"",tabIndex:u,rows:o||3,name:c,required:m,className:"textarea",value:i,onChange:function(e){var t;null===e||void 0===e||null===(t=e.persist)||void 0===t||t.call(e),null===n||void 0===n||n(e)}})))}},2371:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},2372:function(e,t,a){var n=a(2373);e.exports=f,e.exports.parse=i,e.exports.compile=function(e,t){return l(i(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=m;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var a,n=[],i=0,c=0,l="",u=t&&t.delimiter||"/";null!=(a=r.exec(e));){var d=a[0],m=a[1],f=a.index;if(l+=e.slice(c,f),c=f+d.length,m)l+=m[1];else{var p=e[c],v=a[2],h=a[3],b=a[4],g=a[5],E=a[6],y=a[7];l&&(n.push(l),l="");var k=null!=v&&null!=p&&p!==v,O="+"===E||"*"===E,N="?"===E||"*"===E,C=a[2]||u,j=b||g;n.push({name:h||i++,prefix:v||"",delimiter:C,optional:N,repeat:O,partial:k,asterisk:!!y,pattern:j?s(j):y?".*":"[^"+o(C)+"]+?"})}}return c<e.length&&(l+=e.substr(c)),l&&n.push(l),n}function c(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function l(e,t){for(var a=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(a[r]=new RegExp("^(?:"+e[r].pattern+")$",d(t)));return function(t,r){for(var i="",l=t||{},o=(r||{}).pretty?c:encodeURIComponent,s=0;s<e.length;s++){var u=e[s];if("string"!==typeof u){var d,m=l[u.name];if(null==m){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(n(m)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(0===m.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<m.length;f++){if(d=o(m[f]),!a[s].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(m).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(m),!a[s].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');i+=u.prefix+d}}else i+=u}return i}}function o(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function s(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function m(e,t,a){n(t)||(a=t||a,t=[]);for(var r=(a=a||{}).strict,i=!1!==a.end,c="",l=0;l<e.length;l++){var s=e[l];if("string"===typeof s)c+=o(s);else{var m=o(s.prefix),f="(?:"+s.pattern+")";t.push(s),s.repeat&&(f+="(?:"+m+f+")*"),c+=f=s.optional?s.partial?m+"("+f+")?":"(?:"+m+"("+f+"))?":m+"("+f+")"}}var p=o(a.delimiter||"/"),v=c.slice(-p.length)===p;return r||(c=(v?c.slice(0,-p.length):c)+"(?:"+p+"(?=$))?"),c+=i?"$":r&&v?"":"(?="+p+"|$)",u(new RegExp("^"+c,d(a)),t)}function f(e,t,a){return n(t)||(a=t||a,t=[]),a=a||{},e instanceof RegExp?function(e,t){var a=e.source.match(/\((?!\?)/g);if(a)for(var n=0;n<a.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):n(e)?function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push(f(e[r],t,a).source);return u(new RegExp("(?:"+n.join("|")+")",d(a)),t)}(e,t,a):function(e,t,a){return m(i(e,a),t,a)}(e,t,a)}},2373:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},2374:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(39),c=a(75),l=a(8),o=a(2325);t.a=Object(i.connect)(null,(function(e){return{actions:Object(c.bindActionCreators)(l.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.actions;return r.a.createElement(o.a,{orderId:t,fetchDocuments:a.fetchOrderDocumentList,sendToEmail:a.sendOrderDocumentsToEmail,downloadDocument:a.downloadOrderDocument,uploadDocument:a.uploadOrderDocument})}))},2375:function(e,t,a){},2376:function(e,t,a){"use strict";var n=a(3),r=a(258),i=a(106),c=a(0),l=a.n(c),o=a(17),s=a(2277);a(2377);t.a=function(e){var t=e.style,a=e.hasChanges,c=e.updateOrder,u=e.fetching,d=Object(o.c)(r.a).t;return l.a.createElement("div",{className:"order-sidebar account-order-sidebar",style:Object(n.a)({},t)},l.a.createElement(s.b,{style:Object(n.a)({},t),timer:!1,book:!1}),a&&l.a.createElement(i.c,{fullWidth:!0,onClick:c,disabled:u},d("Save")))}},2377:function(e,t,a){},2378:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(2246),r=a(2261),i=a(17),c=a(258),l=function(e){return Object(i.d)(c.a)(Object(n.g)({enableReinitialize:!0,mapPropsToValues:function(e){return{tourists:e.initialValues,firstName:"",lastName:"",phone:"",email:"",officeId:"",agree:!1,touristsFill:!1,comment:""}},validationSchema:function(e){var t=e.t;return r.object().shape({tourists:r.array().of(r.object().shape({id:r.string().required(""),firstName:r.string().required(t("required")),lastName:r.string().required(t("required")),birthdate:r.string().nullable().required(t("required")),citizenshipId:r.string().nullable().required(t("required")),passport:r.string().required(t("required")),pasportExpiration:r.string().nullable().required(t("required")),visaCenter:r.string().when("visa",{is:!0,then:r.string().nullable().required(t("required")),otherwise:r.string().nullable(),isTaxNumber:r.boolean(),taxNumber:r.string().when("isTaxNumber",{is:!0,then:r.string().nullable().required(t("required")),otherwise:r.string().nullable()})}),visa:r.boolean(),isBiometry:r.boolean(),biomentry:r.string(),mobileBiometric:r.string().nullable(),attributeIds:r.array(),documentType:r.number().nullable().required()})),comment:r.string().nullable()})},handleSubmit:function(e,t){var a,n;null===(a=(n=t.props).onSubmit)||void 0===a||a.call(n,e)}})(e))}},2382:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(57),r=a(258),i=a(2107),c=a(1034),l=a(0),o=a.n(l),s=a(17),u=a(39),d=a(2103),m=a(2102),f=a(2101),p=a(2368),v=a(2384),h=a(2262),b=a(2100),g=Object(u.connect)((function(e){return{selectedFlight:Object(h.j)(e)}}))((function(e){var t=e.selectedFlight,a=e.readOnly;return(null===t||void 0===t?void 0:t.length)?o.a.createElement(b.default,{readOnly:a,booking:!1}):null})),E=a(2505),y=a(2095),k=Object(u.connect)((function(e){return{attributes:Object(E.b)(e)}}))((function(e){var t=Object.assign({},e);return o.a.createElement(y.default,Object.assign({},t,{collapsible:!0,booking:!1}))})),O=a(2280),N=Object(u.connect)((function(e){var t=e.basketTransfers;return{transfers:t.transfers,transferServices:t.transferServices}}))((function(e){var t=e.transferServices,a=e.readOnly;return(null===t||void 0===t?void 0:t.length)?o.a.createElement(O.a,{collapsible:!0,isBooking:!1,readOnly:a}):null})),C=(a(2375),Object(u.connect)((function(e){var t,a,n,r,i=e.order;return{user:e.auth.user,order:i.order,canceled:-1===(null===(t=i.order)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.visualStatus),editTransfers:null===(n=i.order)||void 0===n||null===(r=n.allowedActions)||void 0===r?void 0:r.editTransfers}}))((function(e){var t,a=e.order,l=void 0===a?null:a,u=e.user,h=e.canceled,b=e.editTransfers,E=Object(n.a)(e,["order","user","canceled","editTransfers"]),y=Object(s.c)(r.a).t;return o.a.createElement("div",{className:"order-details"},l.allowedActions.viewHeading&&o.a.createElement(i.a,{className:"dashboard"},o.a.createElement("div",{className:"order-details-info"},o.a.createElement("div",{className:"list-cols cols-3 small"},o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Customer")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.partner.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.partner.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Branch office")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.branch.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.branch.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Phone number")),o.a.createElement("div",null,l.manager.phone)),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Creator")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,null===u||void 0===u?void 0:u.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},null===u||void 0===u?void 0:u.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Lead manager")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.manager.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.manager.name)))),o.a.createElement(p.a,{allowedRoles:[v.a.AGENCY]},o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Contract number")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.agreement.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.agreement.name)))))))),o.a.createElement(d.Tour,null),o.a.createElement(k,E),o.a.createElement(m.Hotels,{isBooking:!1}),o.a.createElement(g,{readOnly:h}),o.a.createElement(N,{readOnly:!b||h}),o.a.createElement(f.default,{tourists:null===E||void 0===E||null===(t=E.values)||void 0===t?void 0:t.tourists,readonly:!l.allowedActions.editExtraServices||h}))})))},2384:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={};a.r(n),a.d(n,"TOURIST",(function(){return r})),a.d(n,"AGENCY",(function(){return i})),a.d(n,"EMPLOYEE",(function(){return c})),a.d(n,"READONLY",(function(){return l})),a.d(n,"DIRECT_PARTNER",(function(){return o})),a.d(n,"ALL",(function(){return s}));var r="Tourist",i="Agent",c="Employee",l="ReadOnly",o="DirectPartner",s=[r,i,c,l,o]},2504:function(e,t,a){},2505:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return d}));var n=a(3),r=a(33),i=a(2262),c=function(e){return e.order.order},l=Object(r.a)(c,(function(e){return e?e.tourists.reduce((function(e,t){var a;return e.concat((null===(a=t.attributes)||void 0===a?void 0:a.attributes)?t.attributes.attributes.filter((function(t){return!e.some((function(e){return e.id===t.id}))})):[])}),[]):[]})),o=Object(r.a)([function(e){return e.orderManagerEvaluation.departments},function(e){return e.orderManagerEvaluation.selectedDepartment}],(function(e,t){var a=e.find((function(e){return e.id===t}));return(null===a||void 0===a?void 0:a.managers.map((function(e){return Object(n.a)({},e,{name:e.department&&0!==e.department.id?"".concat(e.name," (").concat(e.department.name,")"):e.name})})))||[]})),s=Object(r.a)([o,function(e){return e.orderManagerEvaluation.selectedManager}],(function(e,t){return e.find((function(e){return e.id===t}))})),u=Object(r.a)([c,i.d,i.h],(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return[];var r=e.tourists.map((function(r){var i,c=a.find((function(e){return e.touristId===r.id})),l=null,o=null;if(c){var s=c.variants.find((function(e){return e.selected}));l=s?s.id:null}var u=t.find((function(e){return e.touristId===r.id}));if(u){var d=u.variants.find((function(e){return e.selected}));o=d?d.id:null}return Object(n.a)({id:r.id,gender:0===r.gender?"m":"f",firstName:r.firstName,lastName:r.lastName,birthdate:new Date(r.birthDate),citizenshipId:r.citizenshipId,passport:"".concat(r.document.series," ").concat(r.document.number),pasportExpiration:new Date(r.document.dateEnd),visaCenter:l||(null===c||void 0===c?void 0:c.variants.length)&&c.variants[0].id||null,biometry:o,visa:!!l,isBiometry:!!o,additional:[],status:r.status,attributeIds:r.attributeIds,documentType:r.document.type,isTaxNumber:!!r.isTaxNumber,taxNumber:r.taxNumber||""},e.allowedActions,{order:r.order,age:r.age,ageType:r.ageType,birthDateMax:r.birthDateMax,birthDateMin:r.birthDateMin,editable:null===(i=r.attributes)||void 0===i?void 0:i.isEditable})}));return r=r.sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),d=Object(r.a)([function(e){return e.order.unreadCount}],(function(e){return e}))},2506:function(e,t,a){},2507:function(e,t,a){},2508:function(e,t,a){},2509:function(e,t,a){}}]);