(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[798],{1991:function(e,t,a){},2013:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},2014:function(e,t,a){var n=a(2015);e.exports=f,e.exports.parse=l,e.exports.compile=function(e,t){return c(l(e,t),t)},e.exports.tokensToFunction=c,e.exports.tokensToRegExp=m;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function l(e,t){for(var a,n=[],l=0,o=0,c="",u=t&&t.delimiter||"/";null!=(a=r.exec(e));){var d=a[0],m=a[1],f=a.index;if(c+=e.slice(o,f),o=f+d.length,m)c+=m[1];else{var p=e[o],v=a[2],h=a[3],g=a[4],E=a[5],y=a[6],b=a[7];c&&(n.push(c),c="");var C=null!=v&&null!=p&&p!==v,O="+"===y||"*"===y,k="?"===y||"*"===y,N=a[2]||u,j=g||E;n.push({name:h||l++,prefix:v||"",delimiter:N,optional:k,repeat:O,partial:C,asterisk:!!b,pattern:j?s(j):b?".*":"[^"+i(N)+"]+?"})}}return o<e.length&&(c+=e.substr(o)),c&&n.push(c),n}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function c(e,t){for(var a=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(a[r]=new RegExp("^(?:"+e[r].pattern+")$",d(t)));return function(t,r){for(var l="",c=t||{},i=(r||{}).pretty?o:encodeURIComponent,s=0;s<e.length;s++){var u=e[s];if("string"!==typeof u){var d,m=c[u.name];if(null==m){if(u.optional){u.partial&&(l+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(n(m)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(0===m.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<m.length;f++){if(d=i(m[f]),!a[s].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");l+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(m).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):i(m),!a[s].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');l+=u.prefix+d}}else l+=u}return l}}function i(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function s(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function m(e,t,a){n(t)||(a=t||a,t=[]);for(var r=(a=a||{}).strict,l=!1!==a.end,o="",c=0;c<e.length;c++){var s=e[c];if("string"===typeof s)o+=i(s);else{var m=i(s.prefix),f="(?:"+s.pattern+")";t.push(s),s.repeat&&(f+="(?:"+m+f+")*"),o+=f=s.optional?s.partial?m+"("+f+")?":"(?:"+m+"("+f+"))?":m+"("+f+")"}}var p=i(a.delimiter||"/"),v=o.slice(-p.length)===p;return r||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=l?"$":r&&v?"":"(?="+p+"|$)",u(new RegExp("^"+o,d(a)),t)}function f(e,t,a){return n(t)||(a=t||a,t=[]),a=a||{},e instanceof RegExp?function(e,t){var a=e.source.match(/\((?!\?)/g);if(a)for(var n=0;n<a.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):n(e)?function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push(f(e[r],t,a).source);return u(new RegExp("(?:"+n.join("|")+")",d(a)),t)}(e,t,a):function(e,t,a){return m(l(e,a),t,a)}(e,t,a)}},2015:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},2016:function(e,t,a){},2017:function(e,t,a){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}a.d(t,"a",(function(){return _}));var r=a(4),l=a.n(r),o=a(104),c=a.n(o),i=a(644),s=a(2013),u=a.n(s),d=a(867),m=a.n(d);function f(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(a,n){e=a,t.forEach((function(t){return t(e,n)}))}}}var p=l.a.createContext||function(e,t){var a,n,l="__create-react-context-"+m()()+"__",o=function(e){function a(){var t;return(t=e.apply(this,arguments)||this).emitter=f(t.props.value),t}u()(a,e);var n=a.prototype;return n.getChildContext=function(){var e;return(e={})[l]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var a,n=this.props.value,r=e.value;((l=n)===(o=r)?0!==l||1/l===1/o:l!==l&&o!==o)?a=0:(a="function"===typeof t?t(n,r):1073741823,0!==(a|=0)&&this.emitter.set(e.value,a))}var l,o},n.render=function(){return this.props.children},a}(r.Component);o.childContextTypes=((a={})[l]=c.a.object.isRequired,a);var i=function(t){function a(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,a){0!==((0|e.observedBits)&a)&&e.setState({value:e.getValue()})},e}u()(a,t);var n=a.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},n.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},n.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.getValue=function(){return this.context[l]?this.context[l].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},a}(r.Component);return i.contextTypes=((n={})[l]=c.a.object,n),{Provider:o,Consumer:i}},v=a(587);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var g=a(2014),E=a.n(g);a(135);function y(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}a(134);var b=function(e){var t=p();return t.displayName=e,t}("Router"),C=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={location:t.history.location},a._isMounted=!1,a._pendingLocation=null,t.staticContext||(a.unlisten=t.history.listen((function(e){a._isMounted?a.setState({location:e}):a._pendingLocation=e}))),a}n(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var a=t.prototype;return a.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},a.componentWillUnmount=function(){this.unlisten&&this.unlisten()},a.render=function(){return l.a.createElement(b.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(l.a.Component);l.a.Component;l.a.Component;var O={},k=0;function N(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var a=t,n=a.path,r=a.exact,l=void 0!==r&&r,o=a.strict,c=void 0!==o&&o,i=a.sensitive,s=void 0!==i&&i;return[].concat(n).reduce((function(t,a){if(!a&&""!==a)return null;if(t)return t;var n=function(e,t){var a=""+t.end+t.strict+t.sensitive,n=O[a]||(O[a]={});if(n[e])return n[e];var r=[],l={regexp:E()(e,r,t),keys:r};return k<1e4&&(n[e]=l,k++),l}(a,{end:l,strict:c,sensitive:s}),r=n.regexp,o=n.keys,i=r.exec(e);if(!i)return null;var u=i[0],d=i.slice(1),m=e===u;return l&&!m?null:{path:a,url:"/"===a&&""===u?"/":u,isExact:m,params:o.reduce((function(e,t,a){return e[t.name]=d[a],e}),{})}}),null)}l.a.Component;function j(e){return"/"===e.charAt(0)?e:"/"+e}function x(e,t){if(!e)return t;var a=j(e);return 0!==t.pathname.indexOf(a)?t:h({},t,{pathname:t.pathname.substr(a.length)})}function P(e){return"string"===typeof e?e:Object(i.e)(e)}function F(e){return function(){Object(v.a)(!1)}}function w(){}l.a.Component;l.a.Component;l.a.useContext;function S(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}l.a.Component;l.a.Component;var T=function(e,t){return"function"===typeof e?e(t):e},R=function(e,t){return"string"===typeof e?Object(i.c)(e,null,null,t):e},A=function(e){return e},B=l.a.forwardRef;"undefined"===typeof B&&(B=A);var U=B((function(e,t){var a=e.innerRef,n=e.navigate,r=e.onClick,o=D(e,["innerRef","navigate","onClick"]),c=o.target,i=I({},o,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return i.ref=A!==B&&t||a,l.a.createElement("a",i)}));var _=B((function(e,t){var a=e.component,n=void 0===a?U:a,r=e.replace,o=e.to,c=e.innerRef,i=D(e,["component","replace","to","innerRef"]);return l.a.createElement(b.Consumer,null,(function(e){e||Object(v.a)(!1);var a=e.history,s=R(T(o,e.location),e.location),u=s?a.createHref(s):"",d=I({},i,{href:u,navigate:function(){var t=T(o,e.location);(r?a.replace:a.push)(t)}});return A!==B?d.ref=t||c:d.innerRef=c,l.a.createElement(n,d)}))})),M=function(e){return e},z=l.a.forwardRef;"undefined"===typeof z&&(z=M);z((function(e,t){var a=e["aria-current"],n=void 0===a?"page":a,r=e.activeClassName,o=void 0===r?"active":r,c=e.activeStyle,i=e.className,s=e.exact,u=e.isActive,d=e.location,m=e.strict,f=e.style,p=e.to,h=e.innerRef,g=D(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return l.a.createElement(b.Consumer,null,(function(e){e||Object(v.a)(!1);var a=d||e.location,r=R(T(p,a),a),E=r.pathname,y=E&&E.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=y?N(a.pathname,{path:y,exact:s,strict:m}):null,C=!!(u?u(b,a):b),O=C?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return e})).join(" ")}(i,o):i,k=C?I({},f,{},c):f,j=I({"aria-current":C&&n||null,className:O,style:k,to:r},g);return M!==z?j.ref=t||h:j.innerRef=h,l.a.createElement(_,j)}))}))},2018:function(e,t,a){"use strict";var n=a(28),r=a(2),l=a(54),o=a(179),c=a(2051),i=a(2525),s=a(2289),u=a(184),d=a(4),m=a.n(d),f=a(182),p=a(84),v=a(74),h=a(18),g=a(1691),E=a(2260),y=a(2261),b=a(2273),C=function(e){var t=e.onClose,a=void 0===t?function(){}:t,n=e.onSendToEmail,r=void 0===n?function(){}:n,c=Object(d.useState)(""),i=Object(l.a)(c,2),p=i[0],v=i[1],h=Object(d.useState)(!1),C=Object(l.a)(h,2),O=C[0],k=C[1],N=Object(f.d)(o.a).t;return m.a.createElement(g.a,{size:"sm",onClose:function(){a("showEmailModal")},modalTitle:N("Sending documents")},m.a.createElement(E.a,null,m.a.createElement(y.a,{lg:12},m.a.createElement(b.a,{className:"inline",label:N("Email"),onChange:function(e){v(e.target.value)}}))),m.a.createElement(E.a,{className:"m-t-10"},m.a.createElement(y.a,{md:12},m.a.createElement(s.a,{label:N("ZIP archive"),checked:O,onChange:function(e){k(e.target.checked)}}))),m.a.createElement(E.a,{className:"m-t-10"},m.a.createElement(y.a,{lg:12,className:"text-right"},m.a.createElement(u.c,{onClick:function(){r(p,O)},disabled:!p},N("Send to email")))))},O=a(2026),k=a(73),N=m.a.forwardRef((function(e,t){e.label;var a=e.name,n=e.type,r=e.placeholder,l=(e.className,e.disabled),o=e.readonly,c=e.autoFocus,i=(e.pluginBefore,e.pluginAfter,e.accept),s=(e.mask,e.onFocus),u=e.onKeyUp,d=e.onClick,f=e.onBlur,p=e.onKeyDown,v=(e.onClear,e.clearable,e.loading,e.value),h=Object(k.a)(e,["label","name","type","placeholder","className","disabled","readonly","autoFocus","pluginBefore","pluginAfter","accept","mask","onFocus","onKeyUp","onClick","onBlur","onKeyDown","onClear","clearable","loading","value"]);return m.a.createElement("input",Object.assign({},h,{value:v,placeholder:r||"",disabled:l,readOnly:o||!1,type:n||"text",name:a||void 0,autoFocus:c,ref:t,accept:i||void 0,onChange:function(e){h.onChange&&h.onChange(e)},onFocus:s&&s,onKeyUp:u&&u,onClick:d&&d,onBlur:f&&f,onKeyDown:p&&p}))})),j=function(e){var t=e.fileTypes,a=e.onClose,n=e.onUploadFile,c=Object(d.useRef)(),i=Object(f.d)(o.a).t,s=Object(d.useState)((function(){return{fileType:(null===t||void 0===t?void 0:t[0])?t[0].code:"",showOther:!1,file:null,isImage:!1}})),p=Object(l.a)(s,2),v=p[0],h=p[1];return m.a.createElement(g.a,{size:"md",onClose:function(){a()},modalTitle:i("Attaching documents to the order")},m.a.createElement(E.a,null,m.a.createElement(y.a,{lg:6},m.a.createElement(O.b,{style:{width:"100%"},label:i("File type"),labelKey:"name",valueKey:"code",className:"inline",clearable:!1,value:v.fileType,options:t,onChange:function(e){h("Other"===e?function(e){return Object(r.a)({},e,{showOther:!0,fileType:""})}:function(t){return Object(r.a)({},t,{showOther:!1,fileType:e})})}})),v.showOther&&m.a.createElement(y.a,{lg:6},m.a.createElement(b.a,{className:"inline",label:i("Other type"),onChange:function(e){h((function(t){return Object(r.a)({},t,{fileType:e.target.value})}))}})," ")),m.a.createElement(E.a,null,m.a.createElement(y.a,{lg:12},m.a.createElement("div",{className:"m-t-20 documents-upload-input"},m.a.createElement(N,{type:"file",name:"file",ref:c,accept:".png, .jpg, .jpeg, .bmp, .tiff, .tif, .gif, .pdf",onChange:function(e){h((function(t){return Object(r.a)({},t,{file:e.target.files[0],isImage:!!~e.target.files[0].type.indexOf("image")})}))}})))),m.a.createElement(E.a,null,m.a.createElement(y.a,{md:12},m.a.createElement("div",{className:"m-t-20 text-right"},m.a.createElement(u.c,{onClick:function(){v.file&&(n(v.file,v.fileType),c.current&&(c.current.value=""))},disabled:!v.file},i("Upload file"))))))};a(2016),t.a=Object(p.connect)((function(e){var t=e.order;return{documentList:t.documentList,fileTypes:t.fileTypes,fetching:t.fetching}}),(function(e){return{actions:Object(v.bindActionCreators)(h.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.documentList,p=e.fetchDocuments,v=e.sendToEmail,h=e.downloadDocument,g=e.uploadDocument,E=Object(f.d)(o.a).t,y=Object(d.useState)({selectedFiles:[],selectedBlanks:[],showFilesModal:!1,showEmailModal:!1}),b=Object(l.a)(y,2),O=b[0],k=b[1];Object(d.useEffect)((function(){a||p(t)}),[]);var N=function(e){return O.selectedBlanks.includes(e)},x=Object(d.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.blanks)||void 0===e?void 0:e.every((function(e){return O.selectedBlanks.includes(e.id)}))}),[null===a||void 0===a?void 0:a.blanks,O.selectedBlanks]),P=Object(d.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.fileGroups)||void 0===e?void 0:e.every((function(e){return e.files.every((function(e){return O.selectedFiles.includes(e.id)}))}))}),[a,O.selectedFiles]),F=function(e){return O.selectedFiles.includes(e)},w=function(e){return function(){var n=e||(O.selectedBlanks.length>1||O.selectedFiles.length>1),r={orderId:t,selectedFiles:O.selectedFiles,selectedBlanks:O.selectedBlanks,zip:n};if(n||O.selectedFiles.length+O.selectedBlanks.length>1)r.fileName="Archive.zip";else{if(1===O.selectedBlanks.length){var l=a.blanks.find((function(e){return e.id===O.selectedBlanks[0]}));r.fileName="".concat(l.name,".").concat(l.format)}if(1===O.selectedFiles.length){var o=a.fileGroups.find((function(e){return e.files.some((function(e){return e.id===O.selectedFiles[0]}))}));if(o){var c=o.files.find((function(e){return e.id===O.selectedFiles[0]}));r.fileName="".concat(c.name,".").concat(c.format)}}}h(r)}},S=function(e,a){return function(){var n={orderId:t,zip:!1,fileName:"".concat(e.name,".").concat(e.format)};"file"===a&&(n=Object(r.a)({},n,{selectedFiles:[e.id],selectedBlanks:[]})),"blank"===a&&(n=Object(r.a)({},n,{selectedFiles:[],selectedBlanks:[e.id]})),h(n)}},I=function(){k((function(e){return Object(r.a)({},e,{showFilesModal:!1})}))},D=function(){k((function(e){return Object(r.a)({},e,{showEmailModal:!1})}))},T=Object(d.useMemo)((function(){return!(O.selectedBlanks.length>0)&&!(O.selectedFiles.length>0)}),[O.selectedBlanks,O.selectedFiles]);return m.a.createElement(d.Fragment,null,(null===a||void 0===a?void 0:a.links)&&a.links.length>0&&m.a.createElement(c.a,{className:"dashboard"},m.a.createElement("div",{className:"documents-links"},m.a.createElement(i.a,{color:"dark",tag:"h4",bordered:!0},E("Useful links")),m.a.createElement("ul",{className:"documents-links-list"},a.links.map((function(e,t){return m.a.createElement("li",{key:t,className:"documents-list-link"},m.a.createElement("a",{href:e.url,className:"link-secondary",target:"_blank",rel:"noopener noreferrer"},e.name))}))))),m.a.createElement("div",{className:"order-documents"},m.a.createElement(c.a,{className:"dashboard"},a&&a.blanks.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(s.a,{onChange:function(e){k((function(t){var n;return Object(r.a)({},t,{selectedBlanks:(null===(n=e.target)||void 0===n?void 0:n.checked)?a.blanks.map((function(e){return e.id})):[]})}))},checked:x,className:"documents-list-title",label:m.a.createElement("div",null,m.a.createElement("span",null,E("Select all forms")))}),m.a.createElement("ul",{className:"documents-list"},a.blanks.map((function(e){return m.a.createElement("li",{key:e.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(t=e.id,function(){k((function(e){return Object(r.a)({},e,{selectedBlanks:N(t)?e.selectedBlanks.filter((function(e){return e!==t})):[].concat(Object(n.a)(e.selectedBlanks),[t])})}))}),checked:N(e.id)}),m.a.createElement("span",{className:"link-secondary",onClick:S(e,"blank")},e.name));var t})))),a&&a.fileGroups.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(i.a,{color:"dark",tag:"h4",bordered:!0},m.a.createElement(s.a,{onChange:function(e){var t=[];e.target.checked&&a.fileGroups.forEach((function(e){e.files.forEach((function(e){return t.push(e.id)}))})),k((function(e){return Object(r.a)({},e,{selectedFiles:t})}))},checked:P,label:m.a.createElement("div",null,m.a.createElement("span",null,E("Files")))})),m.a.createElement("ul",{className:"documents-list"},a.fileGroups.map((function(e){return e.files.map((function(t){return m.a.createElement("li",{key:t.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(a=t.id,function(){k((function(e){return Object(r.a)({},e,{selectedFiles:F(a)?e.selectedFiles.filter((function(e){return e!==a})):[].concat(Object(n.a)(e.selectedFiles),[a])})}))}),checked:F(t.id)}),m.a.createElement("span",{className:"link-secondary",onClick:S(t,"file")},"".concat(e.name," ").concat(t.name)));var a}))})))),O.showFilesModal&&m.a.createElement(j,{onClose:I,onUploadFile:function(e,a){var n=new FormData;n.append("file",e),g({orderId:t,data:n,type:a}),I()},fileTypes:a.fileTypes}),O.showEmailModal&&m.a.createElement(C,{onClose:D,onSendToEmail:function(e,a){v({orderId:t,data:{blankIds:O.selectedBlanks,fileIds:O.selectedFiles,zip:a,email:e}}),D()}}),m.a.createElement("div",{className:"order-documents-actions"},m.a.createElement(u.c,{color:"success",disabled:T,onClick:w(!1)},E("Download")),m.a.createElement(u.c,{color:"success",disabled:T,onClick:w(!0)},E("Download as archive")),m.a.createElement(u.c,{onClick:function(e){k((function(e){return Object(r.a)({},e,{showFilesModal:!0})}))}},E("Upload documents")),m.a.createElement(u.c,{disabled:T,onClick:function(){k((function(e){return Object(r.a)({},e,{showEmailModal:!0})}))}},E("Send to email"))))))}))},2159:function(e,t,a){"use strict";var n=a(4),r=a.n(n),l=a(84),o=a(74),c=a(18),i=a(2018);t.a=Object(l.connect)(null,(function(e){return{actions:Object(o.bindActionCreators)(c.ordersActions,e)}}))((function(e){var t=e.orderId,a=e.actions;return r.a.createElement(i.a,{orderId:t,fetchDocuments:a.fetchOrderDocumentList,sendToEmail:a.sendOrderDocumentsToEmail,downloadDocument:a.downloadOrderDocument,uploadDocument:a.uploadOrderDocument})}))},2223:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(4),r=a.n(n),l=a(944),o=a(184),c=a(639),i=function(e){var t=e.hasMore,a=e.loading,i=e.activePage,s=e.buttonText,u=e.onPageChange,d=e.onNextPage,m=e.pages,f=Object(n.useContext)(c.b),p=Object(n.useMemo)((function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],n=t?e+1:e,r=1;r<=n;r++)a.push(r);return a}(m,t)}),[m,t]);return r.a.createElement(l.b,null,p.map((function(e){return r.a.createElement(o.c,{key:e,color:i===e?"warning":"default",disabled:a,onClick:(t=e,function(){null===u||void 0===u||u(t)})},e);var t})),r.a.createElement(o.c,{color:"default",disabled:a||!t,onClick:function(){null===d||void 0===d||d()}},s||f.next))}},2229:function(e,t,a){"use strict";a(1991);var n=a(4),r=a.n(n);t.a=function(e){var t=e.flag,a=e.id;return r.a.createElement("div",{className:"flag-icon flag-icon-".concat(t||a&&{29:"gr",6228:"am",6258:"cy",6252:"ge",6237:"it",460:"ru",359:"bg",6239:"az"}[a])})}},2515:function(e,t,a){},2540:function(e,t,a){"use strict";a.r(t),a.d(t,"Orders",(function(){return $}));var n=a(2),r=a(28),l=a(54),o=a(18),c=a(1567),i=a(179),s=a(2274),u=a(2260),d=a(2261),m=a(2051),f=a(2273),p=a(2282),v=a(1803),h=a(184),g=a(2522),E=a(2289),y=a(4),b=a.n(y),C=a(182),O=a(84),k=a(1868),N=a(74),j=a(1572),x=a(1977),P=a(2264),F=a(2229),w=a(2272),S=a(2223),I=a(13),D=a.n(I),T=a(2017),R=a(227),A=a(1691),B=a(2159),U=function(e){var t=e.onClose,a=e.orderId,n=Object(C.d)(i.a).t;return b.a.createElement(A.a,{scrollable:!0,onClose:t,modalTitle:n("Printing documents")},b.a.createElement(s.a,null,b.a.createElement(B.a,{orderId:a})))},_=function(e){var t,a=e.prePayment,n=Object(C.d)(i.a).t;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"list-col"},n("Prepayment")),null===a||void 0===a||null===(t=a.schedule)||void 0===t?void 0:t.map((function(e){var t,a;return b.a.createElement("div",{key:e.order,className:"list-col text-right"},(null===(t=e.context)||void 0===t?void 0:t.sum)||0,b.a.createElement(w.a,{currencyCode:null===(a=e.context)||void 0===a?void 0:a.currencyCode}),"(",null===e||void 0===e?void 0:e.percent,"%)")})))},M=function(e){var t,a,n=e.payment,r=e.title;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"list-col"},r),b.a.createElement("div",{className:"list-col text-right"},(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.sum)||0,b.a.createElement(w.a,{currencyCode:null===n||void 0===n||null===(a=n.context)||void 0===a?void 0:a.currencyCode})))},z=function(e){var t=e.onPageChange,a=e.onNextPage,r=e.changeOrderCode,o=e.pageSize,s=e.orderUrl,u=e.mode,d=e.orders,m=void 0===d?[]:d,f=e.fetching,p=void 0!==f&&f,v=e.activePage,h=void 0===v?1:v,g=e.totalPages,E=void 0===g?1:g,O=Object(j.i)(),N=Object(C.d)(i.a).t,x=Object(y.useState)({showPrintDocumentsModal:!1,printOrderId:void 0}),I=Object(l.a)(x,2),A=I[0],B=I[1],z=function(){k.scroller.scrollTo("orders-search-results",{duration:800,delay:0,smooth:"easeOutCubic"})};return b.a.createElement(y.Fragment,null,b.a.createElement("div",{className:"account-orders-table"},b.a.createElement("div",{className:"account-orders-table-heading small"},b.a.createElement("div",{className:"account-orders-table-item"},b.a.createElement("div",null,N("Reservation"))),b.a.createElement("div",{className:"account-orders-table-item"},b.a.createElement("div",null,N("Prepayment"))),b.a.createElement("div",{className:"account-orders-table-item"},b.a.createElement("div",null,N("Payment"))),b.a.createElement("div",{className:"account-orders-table-item"},b.a.createElement("div",null,N("Documents")))),b.a.createElement("div",{className:"account-orders-table-body"},(null===m||void 0===m?void 0:m.length)>0&&m.map((function(e){var t,a,n,l,o,i,d,m,f,p,v,h,g,E,C,k,j,x,S,I,A,U,z,L,K,$,V,G;return b.a.createElement("div",{key:e.id,className:"account-orders-table-item-holder ".concat(-1===(null===(t=e.status)||void 0===t?void 0:t.visualStatus)&&"canceled")},b.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(R.g)(null===(a=e.status)||void 0===a?void 0:a.visualStatus))},b.a.createElement(P.a,{title:b.a.createElement("div",null,e.country.name)},b.a.createElement("span",{className:"m-r-5"},b.a.createElement(F.a,{flag:e.country.code.toLowerCase()}))),"widget"!==u&&b.a.createElement(T.a,{className:"order-number link-secondary m-r-5",to:"".concat(s||"/account/orders","/").concat(e.id),onClick:(G=e.id,function(){r(G)})},e.id),"widget"===u&&b.a.createElement("a",{className:"order-number link-secondary m-r-5",href:"".concat(s||"/account/orders","/").concat(e.id),target:"_blank",rel:"noopener noreferrer"},e.id),b.a.createElement("span",{className:"small grey"},"".concat(D()(e.dateCreated).format(O.dateFormat)," ").concat(D()(e.dateCreated).format("hh:mm:ss"))),b.a.createElement("div",null,e.touristName,b.a.createElement("span",{className:"small grey m-l-5"},"".concat(e.adultCount," ").concat(N("adult")," "),e.childCount>0?"".concat(e.childCount," ").concat(N("child")):"")),b.a.createElement("div",{className:"small grey m-b-5"},"".concat(D()(e.dateBegin).format(O.dateFormat),"-").concat(D()(e.dateEnd).format(O.dateFormat))),b.a.createElement("div",{className:"small"},b.a.createElement("span",{className:"text-".concat(Object(R.g)(null===(n=e.status)||void 0===n?void 0:n.visualStatus))},null===(l=e.status)||void 0===l?void 0:l.name))),b.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(R.g)(null===(o=e.prePayment)||void 0===o?void 0:o.visualStatus))},b.a.createElement("div",{className:"list-cols cols-2 small"},b.a.createElement(_,{prePayment:e.prePayment}),b.a.createElement(M,{payment:null===(i=e.payment)||void 0===i?void 0:i.paid,title:N("Paid")}),b.a.createElement(M,{payment:null===(d=e.prePayment)||void 0===d?void 0:d.debt,title:N("Debt")})),e.prePayment&&e.prePayment.allowPayment&&b.a.createElement(y.Fragment,null,"widget"!==u&&b.a.createElement("a",{href:"/payments/".concat(e.id),target:"_blank",rel:"noopener noreferrer"},b.a.createElement("span",{className:"small link m-r-5"},N("Pay"))),"widget"===u&&b.a.createElement("a",{href:"/payments/".concat(e.id),target:"_blank",rel:"noopener noreferrer"},b.a.createElement("span",{className:"small link m-r-5"},N("Pay")))),e.prePayment&&e.prePayment.allowPayment&&e.prePayment.prePaymentDate&&b.a.createElement("span",{className:"xsmall grey"},"".concat(N("to")," ").concat(D()(e.prePayment.prePaymentDate).format(O.dateFormat)))),b.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(R.g)(e.payment&&e.payment.visualStatus))},b.a.createElement("div",{className:"list-cols cols-2 small"},b.a.createElement("div",{className:"list-col"},N("To pay")),b.a.createElement("div",{className:"list-col text-right"},e.price&&"".concat((null===(m=e.price.priceToPay)||void 0===m||null===(f=m.context)||void 0===f?void 0:f.sum)||0),b.a.createElement(w.a,{currencyCode:null===(p=e.price.priceToPay)||void 0===p||null===(v=p.context)||void 0===v?void 0:v.currencyCode})),b.a.createElement("div",{className:"list-col"},N("Paid")),b.a.createElement("div",{className:"list-col text-right"},(null===(h=e.payment)||void 0===h||null===(g=h.paid)||void 0===g||null===(E=g.context)||void 0===E?void 0:E.sum)||0,b.a.createElement(w.a,{currencyCode:null===(C=e.payment)||void 0===C||null===(k=C.paid)||void 0===k||null===(j=k.context)||void 0===j?void 0:j.currencyCode})),b.a.createElement("div",{className:"list-col"},N("Debt")),b.a.createElement("div",{className:"list-col text-right"},(null===(x=e.payment)||void 0===x||null===(S=x.debt)||void 0===S||null===(I=S.context)||void 0===I?void 0:I.sum)||0,b.a.createElement(w.a,{currencyCode:null===(A=e.payment)||void 0===A||null===(U=A.debt)||void 0===U||null===(z=U.context)||void 0===z?void 0:z.currencyCode}))),e.payment&&e.payment.allowPayment&&b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://online215.mouzenidis-travel.ru/OrderPayment/Index/".concat(e.id)},b.a.createElement("span",{className:"small link m-r-5"},N("Pay"))),e.payment&&e.payment.allowPayment&&e.payment.fullPaymentDate&&b.a.createElement("span",{className:"xsmall grey"},"".concat(N("to")," ").concat(D()(e.payment.fullPaymentDate).format(O.dateFormat)))),b.a.createElement("div",{className:"account-orders-table-item status-".concat(Object(R.g)(e.documents&&e.documents.visualStatus))},b.a.createElement("div",{className:"list-cols small"},b.a.createElement("div",{className:"list-col"},(null===(L=e.documents)||void 0===L?void 0:L.visa)&&b.a.createElement(y.Fragment,null,b.a.createElement("div",null,N("Visa")),b.a.createElement("span",{className:"small grey"},"".concat(e.documents.visa.status?N(e.documents.visa.status):""," ").concat(e.documents.visa.date?D()(e.documents.visa.date).format(O.dateFormat):"")," "))),b.a.createElement("div",{className:"list-col"},b.a.createElement("div",null,N("Documents"),b.a.createElement(P.a,{title:b.a.createElement("span",null,N("Print documents"))},b.a.createElement("span",{className:"link m-l-5"},b.a.createElement(c.a,{name:e.id,icon:"print",onClick:(V=e.id,function(){B({showPrintDocumentsModal:!0,printOrderId:V})})})))),b.a.createElement("span",{className:"small grey"},null===(K=e.documents)||void 0===K||null===($=K.status)||void 0===$?void 0:$.name)))))})))),m&&b.a.createElement(S.a,{buttonText:N("Next"),pages:E,activePage:h,loading:p,hasMore:m.length===o,onPageChange:function(e){t(e),z()},onNextPage:function(){a({activePage:h+1,totalPages:E+1}),z()}}),A.showPrintDocumentsModal&&b.a.createElement(U,{orderId:A.printOrderId,onClose:function(){B((function(e){return Object(n.a)({},e,{showPrintDocumentsModal:!1})}))}}))},L=(a(2515),[{name:"NotPaid",ids:[0],id:1},{name:"PartiallyPaid",ids:[1],id:2},{name:"FullyPaid",ids:[2,3],id:3}]),K=[{name:"Without visa",id:0},{name:"Not defined",id:1},{name:"At the consulate",id:2},{name:"Ok",id:3},{name:"Denied",id:4}],$=function(e){var t=e.actions,a=e.filter,o=e.orders,O=e.countries,N=e.fetching,x=e.pageSize,P=e.statuses,F=e.users,w=e.orderUrl,S=e.mode,I=Object(j.i)(),D=Object(C.d)(i.a).t;Object(y.useEffect)((function(){t.fetchOrdersPageData(a)}),[]);var T=Object(y.useState)({activePage:1,totalPages:1}),R=Object(l.a)(T,2),A=R[0],B=R[1],U=function(e){a.countryId===e?t.countryIdChanged(0):t.countryIdChanged(e),_()},_=function(){B({activePage:1,totalPages:1})};return b.a.createElement(s.a,null,b.a.createElement(u.a,{justify:"center"},b.a.createElement(d.a,{md:12},b.a.createElement("div",{className:"account-orders"},b.a.createElement(m.a,{className:"dashboard",style:{marginBottom:0}},b.a.createElement("div",{className:"account-orders-filters"},b.a.createElement(u.a,null,b.a.createElement(d.a,{md:3},b.a.createElement("div",{className:""},b.a.createElement(f.a,{name:"orderId",label:D("Search"),placeholder:D("Reservation number or tourist data"),value:a.name,onChange:function(e){var a=e.target.name,n=e.target.value;"orderId"===a&&t.orderCodeChanged(n)}}))),b.a.createElement(d.a,{md:2},b.a.createElement("div",{className:""},b.a.createElement(p.a,{clearable:!0,year:!0,format:I.dateFormat,placeholder:I.dateFormat,value:a.dateCreatedFrom,label:D("Reservation date from"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onReservationDateFromChange(e.toDateString()):t.onReservationDateFromChange(void 0)}}))),b.a.createElement(d.a,{md:2},b.a.createElement("div",{className:""},b.a.createElement(p.a,{clearable:!0,year:!0,format:I.dateFormat,placeholder:I.dateFormat,value:a.dateCreatedTo,label:D("Reservation date to"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onReservationDateToChange(e.toDateString()):t.onReservationDateToChange(void 0)}}))),b.a.createElement(d.a,{md:2},b.a.createElement("div",{className:""},b.a.createElement(p.a,{clearable:!0,year:!0,format:I.dateFormat,placeholder:I.dateFormat,label:D("Tour date from"),value:a.tourDateFrom,mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onTourDateFromChange(e.toDateString()):t.onTourDateFromChange(void 0)}}))),b.a.createElement(d.a,{md:2},b.a.createElement("div",{className:""},b.a.createElement(p.a,{clearable:!0,year:!0,format:I.dateFormat,placeholder:I.dateFormat,value:a.tourDateTo,label:D("Tour date until"),mask:[/\d/,/\d/,".",/\d/,/\d/,".",/\d/,/\d/,/\d/,/\d/],onChange:function(e){e?t.onTourDateToChange(e.toDateString()):t.onTourDateToChange(void 0)}}))),b.a.createElement(d.a,{md:1},b.a.createElement(v.a,{visible:!1},D("Search")),b.a.createElement("div",{className:""},b.a.createElement(h.c,{onClick:function(){t.fetchOrderList({}),_()}},D("Search"))))))),b.a.createElement(k.Element,{name:"orders-search-results"},b.a.createElement("div",{className:"account-orders-filters-results"},b.a.createElement("div",{className:"account-orders-post-filters"},b.a.createElement("div",{className:"account-orders-post-filter"},b.a.createElement(g.a,{label:D("Country"),trigger:b.a.createElement(h.c,{size:"sm",color:a.countryId?"primary":"default",pluginAfter:a.countryId?b.a.createElement(c.a,{icon:"times",onClick:function(){return U(a.countryId)}}):void 0},D("Country"))},b.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},b.a.createElement("ul",{className:"list-group nostyles"},O.map((function(e){return b.a.createElement("li",{key:e.id},b.a.createElement(E.a,{label:e.name,checked:a.countryId===e.id,onChange:function(){return U(e.id)}}))})))))),b.a.createElement("div",{className:"account-orders-post-filter"},b.a.createElement(g.a,{label:D("Order status"),trigger:b.a.createElement(h.c,{size:"sm",color:a.statusIds.length?"primary":"default",pluginAfter:a.statusIds.length?b.a.createElement(c.a,{icon:"times",onClick:function(){t.onOrderStatusChange([]),_()}}):void 0},D("Order status"))},b.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},b.a.createElement("ul",{className:"list-group nostyles"},P.map((function(e){return b.a.createElement("li",{key:e.id},b.a.createElement(E.a,{key:e.id,label:e.name,checked:a.statusIds.indexOf(e.id)>-1,onChange:function(){return function(e){var n=[];n=a.statusIds.indexOf(e)>-1?Object(r.a)(a.statusIds.filter((function(t){return t!==e}))):[].concat(Object(r.a)(a.statusIds),[e]),t.onOrderStatusChange(n),_()}(e.id)}}))})))))),b.a.createElement("div",{className:"account-orders-post-filter"},b.a.createElement(g.a,{label:D("Payment status"),trigger:b.a.createElement(h.c,{size:"sm",color:a.paymentStatusIds.length?"primary":"default",pluginAfter:a.paymentStatusIds.length?b.a.createElement(c.a,{icon:"times",onClick:function(){t.onPaymentTypeChange([]),_()}}):void 0},D("Payment status"))},b.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},b.a.createElement("ul",{className:"nostyles"},null===L||void 0===L?void 0:L.map((function(e){return b.a.createElement("li",{key:e.id+e.name},b.a.createElement(E.a,{label:b.a.createElement("span",null,D(e.name)),checked:e.ids.every((function(e){return a.paymentStatusIds.includes(e)})),onChange:(n=e.ids,function(){var e=[];e=n.every((function(e){return a.paymentStatusIds.includes(e)}))?Object(r.a)(a.paymentStatusIds.filter((function(e){return!n.includes(e)}))):[].concat(Object(r.a)(a.paymentStatusIds),Object(r.a)(n)),t.onPaymentTypeChange(e),_()})}));var n})))))),b.a.createElement("div",{className:"account-orders-post-filter"},b.a.createElement(g.a,{label:D("Visa status"),trigger:b.a.createElement(h.c,{size:"sm",color:a.visaStatusIds.length?"primary":"default",pluginAfter:a.visaStatusIds.length?b.a.createElement(c.a,{icon:"times",onClick:function(){t.onVisaStatusChange([]),_()}}):void 0},D("Visa status"))},b.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},b.a.createElement("ul",{className:"nostyles"},K.map((function(e){return b.a.createElement("li",{key:e.id+e.name},b.a.createElement(E.a,{label:b.a.createElement("span",null,D(e.name)),checked:a.visaStatusIds.includes(e.id),onChange:(n=e.id,function(){var e=[];e=a.visaStatusIds.includes(n)?Object(r.a)(a.visaStatusIds.filter((function(e){return e!==n}))):[].concat(Object(r.a)(a.visaStatusIds),[n]),t.onVisaStatusChange(e),_()})}));var n})))))),b.a.createElement("div",{className:"account-orders-post-filter"},b.a.createElement(g.a,{label:D("Creator"),trigger:b.a.createElement(h.c,{size:"sm",color:a.onlineUserIds.length?"primary":"default",pluginAfter:a.onlineUserIds.length?b.a.createElement(c.a,{icon:"times",onClick:function(){t.onUsersChange([]),_()}}):void 0},D("Creator"))},b.a.createElement("div",{className:"account-orders-post-filter-dropdown p1"},b.a.createElement("ul",{className:"nostyles"},F.map((function(e){return b.a.createElement("li",{key:e.id},b.a.createElement(E.a,{label:b.a.createElement("span",null,e.name),checked:a.onlineUserIds.indexOf(e.id)>-1,onChange:function(){return function(e){var n=[];n=a.onlineUserIds.indexOf(e)>-1?Object(r.a)(a.onlineUserIds.filter((function(t){return t!==e}))):[].concat(Object(r.a)(a.onlineUserIds),[e]),t.onUsersChange(n),_()}(e.id)}}))})))))))),b.a.createElement(m.a,{className:"dashboard"},b.a.createElement(z,{orders:o,fetching:N,activePage:A.activePage,totalPages:A.totalPages,pageSize:x,orderUrl:w,mode:S,onNextPage:function(e){t.fetchOrderList({pageNumber:e.activePage}),B((function(t){return Object(n.a)({},t,{},e)}))},onPageChange:function(e){t.fetchOrderList({pageNumber:e}),B((function(t){return Object(n.a)({},t,{activePage:e})}))},changeOrderCode:function(e){t.changeOrderCode(e)}})))))))};t.default=Object(O.connect)((function(e){return{countries:e.ordersList.countries,statuses:Object(x.a)(e),orders:e.ordersList.orders,app:e.app,totalCount:e.ordersList.totalCount,fetching:e.ordersList.fetching,fetched:e.ordersList.fetched,filter:e.ordersFilter,users:Object(x.b)(e),pageSize:e.ordersFilter.pageSize}}),(function(e){return{actions:Object(N.bindActionCreators)(Object(n.a)({},o.ordersActions,{},o.ordersFilterActions),e)}}))(b.a.memo($))}}]);