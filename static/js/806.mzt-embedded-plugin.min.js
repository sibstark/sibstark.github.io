(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[806],{2114:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(262),i=a(108),l=a(2121),c=a(2255),s=a(2229),o=a(12),u=a.n(o),d=a(0),m=a.n(d),f=a(17),h=a(79),p=a.n(h),g=a(39),v=a(75),b=a(23),E=a(8),k=a(21),T=a(33),y=Object(T.a)([function(e,t){return e.selectedFlightService.filter((function(e){return e.flightId===t}))}],(function(e){return e.reduce((function(e,t){var a=e.find((function(e){return e.id===t.id}));return a?[].concat(Object(k.a)(e.filter((function(e){return e.id!==t.id}))),[Object(n.a)({},a,{count:a.count+t.count,totalAmount:a.totalAmount+t.totalAmount})]):e.concat([t])}),[])})),C=Object(T.a)([function(e){return e.flightServiceList}],(function(e){return e.reduce((function(e,t){var a=e.find((function(e){return e.group===t.category}));return a?a.items.push(t):e.push({group:t.category,items:[t],isNeedTranslation:!1,order:t.categoryOrder}),e}),e&&e.length>0?[{group:"All",items:e,isNeedTranslation:!0,order:0}]:[]).sort((function(e,t){return e.order-t.order}))})),F=Object(T.a)([function(e,t){return e.minimalPrices.find((function(e){return e.flightId===t}))}],(function(e){return e})),N=Object(T.a)([function(e){return e.selectedFlightService},function(e){return e.selectedFlightId}],(function(e,t){return e.filter((function(e){return e.flightId===t}))})),O=a(2285),j=a(10),S=a(9),w=a(2236),A=a(2237),x=a(2238),I=a(798),M=a(2240),D=a(2387),P=a(2246),V=a(2260),R=a(141),H=a(14);function B(){var e=Object(j.a)(["\n  padding: 0.5rem 0 0 0;\n  margin-top: 1rem;\n  border-top: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: ",";\n  font-weight: 500;\n  .shop-summary-total-text {\n    text-transform: uppercase;\n  }\n  .shop-summary-total-price {\n    font-weight: 500;\n  }\n"]);return B=function(){return e},e}function _(){var e=Object(j.a)(["\n  .shop-summary-list-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n    margin-bottom: 0.25rem;\n    padding-bottom: 0.25rem;\n    border-bottom: 1px dotted ",";\n    &:last-child {\n      border-bottom: 0;\n    }\n    .shop-summary-list-item-price {\n      color: ",";\n      font-weight: 500;\n    }\n  }\n"]);return _=function(){return e},e}function z(){var e=Object(j.a)(["\n  color: ",";\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.375rem;\n  font-weight: 500;\n  border-bottom: 1px solid ",";\n"]);return z=function(){return e},e}function L(){var e=Object(j.a)(["\n  position: sticky;\n  top: 0;\n  .shop-summary-title {\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.25rem;\n    margin-bottom: 1rem;\n    font-weight: 500;\n  }\n  .shop-summary-empty {\n    text-align: center;\n    padding: 1.5rem 0 0 0;\n    .icon {\n      font-size: 2.5rem;\n      margin-bottom: 1rem;\n      color: ",";\n    }\n  }\n  .shop-summary-empty-title {\n    font-weight: 500;\n    font-size: 1rem;\n    margin-bottom: 0.5rem;\n  }\n  .shop-summary-empty-description {\n    color: ",";\n  }\n"]);return L=function(){return e},e}function q(){var e=Object(j.a)(["\n  .in-flight-item-panel {\n    padding-top: 1rem;\n    .in-flight-item-panel-actions {\n      ul {\n        li {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          border-radius: ",";\n          margin-bottom: 0.5rem;\n          .in-flight-item-tourist-name {\n            flex: 1;\n            border: 1px solid #eee;\n            padding: 0.375rem;\n            margin-right: 0.5rem;\n            border-radius: ",";\n          }\n          .item-panel-number-input {\n            flex: 0 0 150px;\n          }\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}function G(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  @media (max-width: 768px) {\n    display: block;\n  }\n\n  .in-flight-item-image {\n    img {\n      max-width: 80px;\n      border-radius: ",";\n      @media (max-width: 768px) {\n        max-width: 100%;\n      }\n    }\n  }\n  .in-flight-item-container {\n    flex: 1;\n    display: flex;\n    justify-content: space-between;\n    @media (max-width: 768px) {\n      display: block;\n    }\n    .in-flight-item-info {\n      flex: 1 0 60%;\n      padding: 0 1rem;\n      @media (max-width: 768px) {\n        padding: 0.75rem 0;\n        margin-bottom: 0.75rem;\n      }\n    }\n    .in-flight-item-info-title {\n      flex: 1;\n      font-size: 1rem;\n      color: ",";\n      font-weight: 500;\n    }\n    .in-flight-item-info-category {\n      font-size: 0.875rem;\n      color: ",";\n      font-weight: normal;\n    }\n    .in-flight-item-info-actions {\n      display: inline-flex;\n      justify-content: flex-end;\n      align-items: center;\n      align-self: center;\n      @media (max-width: 768px) {\n        width: 100%;\n      }\n    }\n    .in-flight-item-info-actions-price {\n      margin-right: 1rem;\n      & > span {\n        font-weight: 500;\n        font-size: 1rem;\n      }\n    }\n    .in-flight-item-info-desrciption {\n      font-size: 0.75rem;\n      font-weight: normal;\n      line-height: 1.2;\n    }\n  }\n"]);return G=function(){return e},e}function U(){var e=Object(j.a)([""]);return U=function(){return e},e}var W=function(e){var t=e.onSave,a=e.onMountAction,c=e.flightService,o=e.fetching,u=e.tourists,h=e.selectedFlightId,p=e.selectedFlightService,g=Object(f.c)(r.b).t;Object(d.useEffect)((function(){a(),t(p)}),[]),Object(d.useEffect)((function(){y((function(e){return Object(n.a)({},e,{selectedGroup:c&&c.length>0?c[0].group:"",selectedGroupItems:c&&c.length>0?c[0].items:[]})}))}),[c]);var v=Object(d.useState)({selectedGroup:c&&c.length>0?c[0].group:"",selectedGroupItems:c&&c.length>0?c[0].items:[],currentIndex:void 0,basket:p}),E=Object(b.a)(v,2),T=E[0],y=E[1],C=function(e,t){var a=T.basket.find((function(a){return a.touristId===e&&a.id===t}));return a?a.count:0},F=Object(d.useMemo)((function(){var e=function(e){var t=u.find((function(t){return t.id===e})),a=u.indexOf(t);return t.firstName?"".concat(t.firstName," ").concat(t.lastName):"".concat(g("Tourist")," ").concat(++a)},t=function(t){return{name:e(t.touristId),count:t.count,currencyCode:t.currencyCode,amount:t.amount,id:t.touristId}};return{totalCost:T.basket.reduce((function(e,t){return e+(t.totalAmount||0)}),0),currencyCode:T.basket&&T.basket[0]&&T.basket[0].currencyCode,recipeItems:T.basket.reduce((function(e,a){var n,r=e.find((function(e){return e.id===a.id}));return r?(r.tourists=r.tourists.concat([t(a)]).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0})),e):e.concat([(n=a,{id:n.id,name:n.name,tourists:[t(n)]})])}),[])}}),[T.basket]);return m.a.createElement(Y,null,m.a.createElement(w.a,null,m.a.createElement(A.a,null,m.a.createElement(x.a,{md:12},m.a.createElement(I.b,{segmented:!0},c.map((function(e,t){return m.a.createElement(i.c,{key:t,selected:T.selectedGroup===e.group,color:T.selectedGroup!==e.group?"default":void 0,onClick:(a=e.group,function(){var e=c.find((function(e){return e.group===a}));e&&y((function(t){return Object(n.a)({},t,{selectedGroup:e.group,selectedGroupItems:e.items})}))})},e.isNeedTranslation?g(e.group):e.group);var a}))))),m.a.createElement(A.a,{className:"m-t-15"},m.a.createElement(x.a,{md:8},T.selectedGroupItems.map((function(e){return m.a.createElement(l.a,{key:e.id,className:"dashboard"},m.a.createElement(M.a,{isOpened:T.currentIndex===e.id,triggerBefore:!0,onToggle:(a=e.id,function(){y((function(e){return Object(n.a)({},e,{currentIndex:e.currentIndex===a?void 0:a})}))}),trigger:m.a.createElement(J,null,m.a.createElement("div",{className:"in-flight-item-image"},e.photo?m.a.createElement("img",{src:"".concat(e.photo,"?w=150&h=120&mode=crop"),alt:e.name}):m.a.createElement(D.a,null)),m.a.createElement("div",{className:"in-flight-item-container"},m.a.createElement("div",{className:"in-flight-item-info"},m.a.createElement("div",{className:"in-flight-item-info-title"},e.name),m.a.createElement("div",{className:"in-flight-item-info-desrciption",dangerouslySetInnerHTML:{__html:e.description}})),m.a.createElement("div",{className:"in-flight-item-info-actions"},m.a.createElement("span",{className:"in-flight-item-info-actions-price"},m.a.createElement("span",null,e.amount)," ",m.a.createElement(P.a,{currencyCode:e.currencyCode})),m.a.createElement(i.c,{color:T.currentIndex===e.id?"":"warning"},T.currentIndex===e.id?g("Close"):g("Select")))))},m.a.createElement(K,null,m.a.createElement("div",{className:"in-flight-item-panel"},m.a.createElement("div",{className:"in-flight-item-panel-actions"},m.a.createElement("ul",null,u.map((function(a,r){return m.a.createElement("li",{key:a.id},m.a.createElement("div",{className:"in-flight-item-tourist-name"},a.firstName?"".concat(a.firstName," ").concat(a.lastName):"".concat(g("Tourist")," ").concat(++r)),m.a.createElement("div",{className:"item-panel-number-input"},m.a.createElement(V.a,{min:0,max:e.maxCount||10,value:C(a.id,e.id),onChange:(i=a.id,l=e.id,c=e.name,s=e.currencyCode,o=e.amount,function(e){y((function(a){var r=a.basket.filter((function(e){return!(e.id===l&&e.touristId===i)}));return e>0&&(r=[].concat(Object(k.a)(r),[{flightId:h||"",id:l,touristId:i,name:c,currencyCode:s,amount:o,count:e,totalAmount:e*o}])),t(r),Object(n.a)({},a,{basket:r})}))})})));var i,l,c,s,o}))))))));var a}))),m.a.createElement(x.a,{md:4},m.a.createElement(Q,null,m.a.createElement(l.a,{className:"dashboard"},m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"shop-summary-title"},g("Summary")),F.recipeItems&&F.recipeItems.length>0?F.recipeItems.map((function(e){return m.a.createElement("div",{className:"m-b-10",key:e.id},m.a.createElement(Z,null,e.name),m.a.createElement(X,null,e.tourists.map((function(e){return m.a.createElement("div",{className:"shop-summary-list-item",key:e.id},m.a.createElement("span",null,e.name),m.a.createElement("span",{className:"shop-summary-list-item-price"},"".concat(e.count," x ").concat(e.amount),m.a.createElement(P.a,{currencyCode:e.currencyCode})))}))))})):m.a.createElement("div",{className:"shop-summary-empty"},m.a.createElement("div",null,m.a.createElement(R.a,{icon:"basket"})),m.a.createElement("div",null,m.a.createElement("div",{className:"shop-summary-empty-title"},g("Empty menu")),m.a.createElement("p",{className:"shop-summary-empty-description"},g("Looks like you heven't made your choice yet...")))),F.recipeItems&&F.recipeItems.length>0&&m.a.createElement($,null,m.a.createElement("div",{className:"shop-summary-total-text"},g("Total")),m.a.createElement("div",{className:"shop-summary-total-price"},F.totalCost," ",m.a.createElement(P.a,{currencyCode:F.currencyCode}))))))))),o&&m.a.createElement(s.a,null))},Y=S.e.div(U()),J=S.e.div(G(),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.grey})),K=S.e.div(q(),(function(e){return e.theme.radius}),(function(e){return e.theme.radius})),Q=S.e.div(L(),(function(e){return e.theme.colors.dark}),(function(e){return Object(H.c)(e.theme.colors.dark,.5)}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.grey})),Z=S.e.div(z(),(function(e){return e.theme.colors.dark}),(function(e){return Object(H.c)(e.theme.colors.dark,.15)})),X=S.e.div(_(),(function(e){return Object(H.c)(e.theme.colors.dark,.15)}),(function(e){return e.theme.colors.dark})),$=S.e.div(B(),(function(e){return e.theme.colors.dark})),ee=function(e){var t=e.children,a=e.isOpened,n=e.onCloseCallback,l=e.onSaveCallback,s=Object(f.c)(r.b).t,o=function(){n()};return a?m.a.createElement(c.a,{scrollable:!0,onClose:o,modalTitle:s("Select item"),className:"bg-dashboard",modalFooter:m.a.createElement(w.a,null,m.a.createElement(A.a,null,m.a.createElement(x.a,{lg:12},m.a.createElement("div",{className:"text-right"},m.a.createElement(I.b,{segmented:!0,align:"flex-end",fullwidth:!0},m.a.createElement(i.c,{color:"dark",plain:!0,onClick:o},s("Cancel")),m.a.createElement(i.c,{color:"success",onClick:function(){l(),o()}},s("Save")))))))},t):null},te=function(){var e=Object(g.useDispatch)(),t=Object(g.useSelector)((function(e){return{isOpened:e.basketMeal.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:C(e.basketMeal),fetching:e.basketMeal.fetching,tourists:Object(O.c)(e),selectedFlightId:e.basketMeal.selectedFlightId,selectedFlightService:N(e.basketMeal)}}),g.shallowEqual),a=t.isOpened,n=t.shoppingCartId,r=t.flightService,i=t.fetching,l=t.tourists,c=t.selectedFlightId,s=t.selectedFlightService,o=Object(d.useState)({basket:[]}),u=Object(b.a)(o,2),f=u[0],h=u[1];return m.a.createElement(ee,{isOpened:a,onSaveCallback:function(){e(E.basketMealActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketMealActions.closeExtraShopModal())}},m.a.createElement(W,{onSave:function(e){h({basket:e})},onMountAction:function(){0===r.length&&e(E.basketMealActions.fetchFlightService(n))},flightService:r,fetching:i,tourists:l,selectedFlightId:c,selectedFlightService:s}))},ae=function(){var e=Object(g.useDispatch)(),t=Object(g.useSelector)((function(e){return{isOpened:e.basketFlightExtra.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:C(e.basketFlightExtra),fetching:e.basketFlightExtra.fetching,tourists:Object(O.c)(e),selectedFlightId:e.basketFlightExtra.selectedFlightId,selectedFlightService:N(e.basketFlightExtra)}}),g.shallowEqual),a=t.isOpened,n=t.shoppingCartId,r=t.flightService,i=t.fetching,l=t.tourists,c=t.selectedFlightId,s=t.selectedFlightService,o=Object(d.useState)({basket:[]}),u=Object(b.a)(o,2),f=u[0],h=u[1];return m.a.createElement(ee,{isOpened:a,onSaveCallback:function(){e(E.basketFlightExtraActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketFlightExtraActions.closeExtraShopModal())}},m.a.createElement(W,{onSave:function(e){h({basket:e})},onMountAction:function(){0===r.length&&e(E.basketFlightExtraActions.fetchFlightService(n))},flightService:r,fetching:i,tourists:l,selectedFlightId:c,selectedFlightService:s}))},ne=function(e){return e.basketFlights.directFlights},re=function(e){return e.basketFlights.backFlights},ie=Object(T.a)(ne,re,(function(e,t){return e.map((function(e){var a=e.linkedVariants&&e.linkedVariants.length&&t.find((function(t){return t.id===e.linkedVariants[0].priceId}));return Object(n.a)({},e,{linkedVariants:e.linkedVariants.map((function(e){return Object(n.a)({},e,{linkedFlight:t.find((function(t){return t.id===e.priceId}))})})),cheapestBackFlight:a})})).map((function(e){return Object(n.a)({},e,{_addPrice:le(e,e.cheapestBackFlight)})}))}));function le(e,t){var a,n,r=null;return(null===t||void 0===t||null===(a=t.rtVariants)||void 0===a?void 0:a.some((function(t){return t.directId===e.id})))&&(r=t.rtVariants.find((function(t){return t.directId===e.id}))),r?r.addPricePair:(null===e||void 0===e||null===(n=e.linkedVariants)||void 0===n?void 0:n.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))?e.linkedVariants.find((function(e){return e.priceId===t.id})).addPricePair:((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)}function ce(e,t,a){var n=Number(u()(a).format("HH"));return Number(e)<=n&&n<=Number(t)}var se=Object(T.a)(ie,(function(e){return e.basketFlights.filter}),(function(e,t){return e=Object(k.a)(e.filter((function(e){return ce(t.directArrivalTime.from,t.directArrivalTime.to,e.arrivalTime)&&ce(t.directDepartureTime.from,t.directDepartureTime.to,e.departureTime)})).map((function(e){var a=e.linkedVariants.filter((function(e){return ce(t.backArrivalTime.from,t.backArrivalTime.to,e.linkedFlight.arrivalTime)&&ce(t.backDepartureTime.from,t.backDepartureTime.to,e.linkedFlight.departureTime)}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})}))),t.selectedAirlines.length&&(e=Object(k.a)(e.filter((function(e){return t.selectedAirlines.includes(e.airlineCode)})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedAirlines.includes(e.linkedFlight.airlineCode)}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.selectedFlightTypes.length&&(e=Object(k.a)(e.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e[t]}))})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e.linkedFlight[t]}))}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.selectedStopovers.length&&(e=Object(k.a)(e.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.isConnected:"isConnected"!==t||!0===e.isConnected}))})).map((function(e){var a=e.linkedVariants.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.linkedFlight.isConnected:"isConnected"!==t||!0===e.linkedFlight.isConnected}))}));return Object(n.a)({},e,{linkedVariants:a,cheapestBackFlight:a.length?a[0].linkedFlight:void 0})})))),t.withLuggage&&!0===t.withLuggage&&(e=Object(k.a)(e.filter((function(e){return e.selectedTariff&&e.selectedTariff.baggageInfo&&"0 PC"!==e.selectedTariff.baggageInfo||e.hasMoreTariffs})).map((function(e){var t=e.linkedVariants.filter((function(e){return e.linkedFlight&&e.linkedFlight.selectedTariff&&e.linkedFlight.selectedTariff.baggageInfo&&"0 PC"!==e.linkedFlight.selectedTariff.baggageInfo||e.linkedFlight&&e.linkedFlight.hasMoreTariffs}));return Object(n.a)({},e,{linkedVariants:t,cheapestBackFlight:t.length?t[0].linkedFlight:void 0})})))),(e=(e=e.filter((function(e){return!!e.cheapestBackFlight}))).map((function(e){return Object(n.a)({},e,{_addPrice:le(e,e.cheapestBackFlight)})}))).sort((function(e,t){return e._addPrice-t._addPrice})),e})),oe=Object(T.a)(re,(function(e){return e})),ue=Object(T.a)(ne,re,(function(e,t){var a=[];return t.map((function(e){return{name:e.airlineName,id:e.airlineCode}})).concat(e.map((function(e){return{name:e.airlineName,id:e.airlineCode}}))).forEach((function(e){a.some((function(t){return t.id===e.id}))||a.push(e)})),a.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}))})),de=(Object(T.a)((function(e){return e.basketFlights.filter}),(function(e){return e.filter.onlyDirectFlights}),oe,ie,(function(e,t,a,r){var i=a.some((function(e){return!e.isConnected}));return i=r.some((function(e){return!e.isConnected})),Object(n.a)({},e,{direct:!(!t||!i)})})),Object(T.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return null===e||void 0===e?void 0:e.map((function(t,a){return a%2===0?e.slice(a,a+2):null})).filter((function(e){return e})).map((function(e){var t=Object(b.a)(e,2);return{direct:t[0],back:t[1]}}))}))),me=Object(T.a)((function(e){return e.basketFlights.rules}),(function(e){return e.basketFlights.selectedRuleHash}),(function(e,t){var a=e.find((function(e){return e.hash===t}));return null===a||void 0===a?void 0:a.rules})),fe=Object(T.a)(ie,(function(e){return e.some((function(e){return e.isMouzenidis&&e.linkedVariants&&e.linkedVariants.some((function(e){return e.linkedFlight.isMouzenidis}))}))})),he=a(42),pe=a(47),ge=a(62),ve=a(63),be=a(2244),Ee=a(2258),ke=a(121),Te=a(268);function ye(){var e=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  .toggle-button-switcher {\n    background-color: ",";\n    border: 1px solid ",";\n    border-radius: 24px;\n    width: 40px;\n    height: 24px;\n    position: relative;\n    transition: all 0.15s ease-out;\n    margin: 0 0.25rem;\n    cursor: pointer;\n    .toggle-button-switch {\n      background: ",";\n      border-radius: 50%;\n      text-align: center;\n      text-decoration: none;\n      height: 24px;\n      width: 24px;\n      position: absolute;\n      top: -1px;\n      left: -1px;\n      transition: all 0.15s ease-out;\n      font-size: 0.75rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #fff;\n      .svg-inline--fa {\n        margin-left: 0.125rem;\n      }\n    }\n    &.active {\n      background-color: ",";\n      border: 1px solid ",";\n      .toggle-button-switch {\n        background: ",";\n        left: 16px;\n      }\n    }\n  }\n"]);return ye=function(){return e},e}var Ce=function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(){var e;Object(he.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isToggleOn:e.props.value},e.handleClick=function(t){e.state.isToggleOn!==t&&e.setState({isToggleOn:t},(function(){return e.props.onChange&&e.props.onChange(t)}))},e}return Object(pe.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({isToggleOn:this.props.value})}},{key:"render",value:function(){var e=this,t=this.props,a=t.labelOn,n=t.labelOff;return m.a.createElement(ke.a,null,(function(t){return m.a.createElement(Fe,{className:"toggle-button"},n&&m.a.createElement(Te.a,{onClick:function(){return e.handleClick(!1)}},n||t.off),m.a.createElement("span",{className:"toggle-button-switcher ".concat(e.state.isToggleOn?"active":"").trim(),onClick:function(){return e.handleClick(!e.state.isToggleOn)}},m.a.createElement("span",{className:"toggle-button-switch"},e.state.isToggleOn?m.a.createElement(R.a,{icon:"check"}):m.a.createElement(R.a,{icon:"times"}))),a&&m.a.createElement(Te.a,{onClick:function(){return e.handleClick(!0)}},a||t.on))}))}}]),a}(d.PureComponent),Fe=S.e.div(ye(),(function(e){return Object(H.c)(e.theme.colors.danger,.1)}),(function(e){return Object(H.c)(e.theme.colors.danger,0)}),(function(e){return e.theme.colors.danger}),(function(e){return Object(H.c)(e.theme.colors.danger,.1)}),(function(e){return Object(H.c)(e.theme.colors.danger,.2)}),(function(e){return e.theme.colors.success})),Ne=a(2239),Oe=a(11),je=(a(2388),a(2389)),Se=a.n(je),we=(a(2341),function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(){var e;Object(he.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={from:null!==e.props.from&&void 0!==e.props.from?e.props.from:0,to:null!==e.props.to&&void 0!==e.props.to?e.props.to:23},e.onChange=function(t){e.setState({from:t[0],to:t[1]})},e.onAfterChange=function(){e.props.onChange({from:e.state.from,to:e.state.to})},e}return Object(pe.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.label,n=t.min,r=t.max,i=t.step,l=t.inline,c=this.state,s=c.from,o=c.to;return m.a.createElement("div",{className:"timepicker"},a&&m.a.createElement(Te.a,null,a),l?m.a.createElement(Se.a,{defaultValue:[s,o],min:n,max:r,step:i,marks:(e={},Object(Oe.a)(e,s,s),Object(Oe.a)(e,o,o),e),onChange:this.onChange,onAfterChange:this.onAfterChange}):m.a.createElement(Ee.a,{className:"timepicker-dropdown",label:a||"Time",trigger:m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"timepicker-trigger"},m.a.createElement("div",{className:"icon"},m.a.createElement(R.a,{icon:"clock"})),m.a.createElement("div",{className:"timepicker-value"},"".concat(s<10?"0"+s:s,":00 - ").concat(o,":00"))))},m.a.createElement(Se.a,{defaultValue:[s,o],min:n,max:r,step:i,onChange:this.onChange,onAfterChange:this.onAfterChange})))}}]),a}(d.Component));we.defaultProps={min:0,max:23,step:1};var Ae=we,xe=a(344);function Ie(){var e=Object(j.a)(["\n  padding: 0.375rem 0.5rem;\n  margin-bottom: 0.5rem;\n  border-radius: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  .flight-item-actions {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ie=function(){return e},e}function Me(){var e=Object(j.a)(["\n  margin: 0;\n  padding: 0.5rem;\n  list-style: none;\n  border: 1px solid #eee;\n  border-radius: ",";\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.375rem;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 0.25rem;\n    &:last-child {\n      border: none;\n      margin-bottom: 0;\n      padding-bottom: 0;\n    }\n    .item-list-title {\n      flex: 0 0 50%;\n    }\n    .item-list-actions {\n      .item-list-actions-text {\n        cursor: pointer;\n        font-size: 0.75rem;\n        color: #333;\n        border-bottom: 1px dotted;\n        margin-right: 1rem;\n        &:hover {\n          color: ",";\n        }\n      }\n      .icon {\n        margin-left: 0.75rem;\n      }\n      .item-list-actions-edit {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n      .item-list-actions-delete {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n  }\n"]);return Me=function(){return e},e}var De=function(e){var t=e.isReadOnly,a=void 0!==t&&t,n=e.minimalPrice,l=e.items,c=e.onOpenShopCallback,s=e.onDeleteItemCallback,o=e.selectedTitle,u=e.notSelectedTitle,d=e.addButtonTitle,h=Object(f.c)(r.b).t,p=l&&l.length>0||!1;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Ve,{isSelected:p},m.a.createElement("div",{className:"".concat(!p&&"text-danger")},p?o:u),m.a.createElement("div",{className:"flight-item-actions"},!p&&n&&!a&&m.a.createElement("span",{className:"m-r-10"},h("from")," ",n.amount,m.a.createElement(P.a,{currencyCode:n.currencyCode})),!a&&m.a.createElement(i.c,{size:"sm",color:"default",onClick:c},d))),l&&l.length>0&&m.a.createElement(Pe,null,l.map((function(e){return m.a.createElement("li",{key:e.id},m.a.createElement("span",{className:"item-list-title"},e.name),m.a.createElement("span",{className:"item-list-actions"},m.a.createElement("span",{className:"item-list-actions-text",onClick:a?void 0:c},"".concat(e.count," x ").concat(e.amount," = ").concat(e.totalAmount),m.a.createElement(P.a,{currencyCode:e.currencyCode})),!a&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"item-list-actions-edit",onClick:c},m.a.createElement(R.a,{icon:"pencil"})),m.a.createElement("span",{className:"item-list-actions-delete",onClick:(t=e.id,function(){s(t)})},m.a.createElement(R.a,{icon:"trash"})))));var t}))))},Pe=S.e.ul(Me(),(function(e){return"0 0 ".concat(e.theme.radius," ").concat(e.theme.radius)}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.danger})),Ve=S.e.div(Ie(),(function(e){return e.isSelected?"".concat(e.theme.radius," ").concat(e.theme.radius," 0 0}"):e.theme.radius}),(function(e){return e.isSelected?Object(H.c)(e.theme.colors.success,.1):Object(H.c)(e.theme.colors.danger,.1)})),Re=function(e){var t=e.flightId,a=e.isReadOnly,n=void 0!==a&&a,i=Object(f.c)(r.b).t,l=Object(g.useSelector)((function(e){return{selectedFlightService:y(e.basketMeal,t),minimalPrice:F(e.basketMeal,t)}}),g.shallowEqual),c=l.selectedFlightService,s=l.minimalPrice,o=Object(g.useDispatch)();return m.a.createElement(De,{isReadOnly:n,minimalPrice:s,items:c,onOpenShopCallback:function(){o(E.basketMealActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=c.find((function(t){return t.id===e}));confirm(i("Do you want to delete meal?"))&&o(E.basketMealActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_meal_title"),notSelectedTitle:i("Meal is not included"),addButtonTitle:i("Add meals")})},He=function(e){var t=e.flightId,a=e.isReadOnly,n=void 0!==a&&a,i=Object(f.c)(r.b).t,l=Object(g.useSelector)((function(e){return{selectedFlightService:y(e.basketFlightExtra,t),minimalPrice:F(e.basketFlightExtra,t)}}),g.shallowEqual),c=l.selectedFlightService,s=l.minimalPrice,o=Object(g.useDispatch)();return m.a.createElement(De,{isReadOnly:n,minimalPrice:s,items:c,onOpenShopCallback:function(){o(E.basketFlightExtraActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=c.find((function(t){return t.id===e}));confirm(i("Do you want to delete extra?"))&&o(E.basketFlightExtraActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_extra_title"),notSelectedTitle:i("Extra is not included"),addButtonTitle:i("Add extra")})};function Be(){var e=Object(j.a)(["\n  display: block;\n  height: 100px;\n  width: 100px;\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    content: url(",");\n  }\n"]);return Be=function(){return e},e}var _e=function(e){var t=e.src,a=e.alt,n=e.className,r=e.placeholder,i=e.usePlaceholderUsBackground,l=Object(d.useState)(r),c=Object(b.a)(l,2),s=c[0],o=c[1],u=Object(d.useState)(),f=Object(b.a)(u,2),h=f[0],p=f[1];return Object(d.useEffect)((function(){var e,a=!1;return h&&s!==t&&(IntersectionObserver?(e=new IntersectionObserver((function(n){n.forEach((function(n){!a&&(n.intersectionRatio>0||n.isIntersecting)&&(o(t),e.unobserve(h))}))}),{threshold:.01,rootMargin:"75%"})).observe(h):o(t)),function(){var t;a=!0,(null===(t=e)||void 0===t?void 0:t.unobserve)&&e.unobserve(h)}}),[t,s,h]),m.a.createElement(ze,{className:n,ref:p,src:s,alt:a,onLoad:function(e){},onError:function(e){i&&(e.target.src="".concat(r)),e.target.classList.add("src-loading-error")}})},ze=S.e.img(Be(),(function(e){return e.placeholder}));_e.defaultProps={placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=",usePlaceholderUsBackground:!1};var Le=_e,qe=a(1048),Ge=a(226),Ue=a(1047),We=(a(2299),function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(e){var r;return Object(he.a)(this,a),(r=t.call(this,e)).tariffTypes=[],r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.actions.showFlightRules("")},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(a){return a.flightHash===e&&a.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.actions.fetchFlightTariffs("")},r.onSelectTariff=function(e,t){return function(){r.setState((function(a){return{selectedTariffs:[].concat(Object(k.a)(a.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(n.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(pe.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?this.props.durationMinutes:(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0),a=Math.floor(t/60),n=t%60,i=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){var r,l;return m.a.createElement("div",{className:"flight-item-mobile"},m.a.createElement("div",{className:"flight-item-mobile-top"},m.a.createElement("div",{className:"flight-item-mobile-left"},m.a.createElement("div",{className:"date"},u()(e.props.departureTime).format(null===(r=e.context)||void 0===r?void 0:r.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode)),m.a.createElement("div",{className:"flight-item-mobile-center"},m.a.createElement("div",{className:"flight-details-duration"},a>0&&"".concat(a," ").concat(t("hours_short"),".")," ",n>0&&n+" ".concat(t("minutes_short"),".")),m.a.createElement("div",{className:"flight-details-icon"},i&&"Bus"!==i?m.a.createElement(R.a,{icon:"plane-departure"}):m.a.createElement(R.a,{icon:"bus"})),m.a.createElement("div",{className:"flight-details-stops"},e.props.isConnected?m.a.createElement("div",null,e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",null,m.a.createElement("span",null,t("Direct flight"))))),m.a.createElement("div",{className:"flight-item-mobile-right"},m.a.createElement("div",{className:"date"},u()(e.props.arrivalTime).format(null===(l=e.context)||void 0===l?void 0:l.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.arrivalTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode))),m.a.createElement("div",{className:"flight-item-mobile-bottom"},m.a.createElement("div",{className:"flight-item-mobile-bottom-number"},m.a.createElement("span",{className:"m-r-5"}," ",e.props.airlineName),m.a.createElement("span",{className:"grey"},"(",e.props.flightNumber,")"))))}))}}]),a}(d.PureComponent));We.contextType=Ge.a;var Ye=Object(g.connect)((function(e){return{tariffs:e.basketFlights.tariffs}}),(function(e){return{actions:Object(v.bindActionCreators)(E.basketFlightsActions,e)}}))(We),Je=(a(2339),function(e){var t=Math.floor(e.durationMinutes/60),a=e.durationMinutes%60,n=Math.floor(e.stopDurationMinutes/60),i=e.stopDurationMinutes%60,l=Object(f.c)(r.b).t;return m.a.createElement("div",{className:"flight-result-details-item"},m.a.createElement("div",{className:"flight-result-details-item-logo"},m.a.createElement("img",{src:e.airline&&e.airline.code?"".concat(Ue.c,"/userfiles/iata-air-logos/").concat(e.airline.code,".png"):"".concat(Ue.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.airline&&e.airline.name||"nologo"})),m.a.createElement("div",{className:"flight-result-details-item-info"},m.a.createElement("div",{className:"details-item-info-airline"},m.a.createElement("div",{className:"details-item-info-airline-title"},e.airline&&e.airline.name),m.a.createElement("div",{className:"details-item-info-class"},e.tariff&&e.tariff.name),m.a.createElement("div",{className:"details-item-info-airline-type"},"(",e.flightNumber,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline"},m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.departureTime).format("HH:mm")),m.a.createElement("span",null,e.departureCity&&e.departureCity.name,", "),m.a.createElement("span",null,"(",e.departureAirport&&e.departureAirport.code,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline-duration"},m.a.createElement("span",null,"".concat(t," ").concat(l("hours_short"),".")," ",a>0&&a+" ".concat(l("minutes_short"),"."))),m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.arrivalTime).format("HH:mm")),m.a.createElement("span",null,e.arrivalCity&&e.arrivalCity.name,", "),m.a.createElement("span",null,"(",e.arrivalAirport&&e.arrivalAirport.code,")"))),e.stopDurationMinutes&&m.a.createElement("div",{className:"flight-result-details-item-connections"},m.a.createElement(R.a,{icon:"clock",className:"icon"}),m.a.createElement("span",null,"".concat(n," ").concat(l("hours_short"),".")," ",i>0&&i+" ".concat(l("minutes_short"),".")," "),m.a.createElement("span",null,l("Connect in")," ",e.arrivalCity&&e.arrivalCity.name," (",e.arrivalAirport&&e.arrivalAirport.code,")"))))}),Ke=function(e){var t=e.segments;return m.a.createElement(m.a.Fragment,null," ",t.map((function(e,t){return m.a.createElement(Je,Object.assign({key:t},e))})))},Qe=function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(e){var r;return Object(he.a)(this,a),(r=t.call(this,e)).tariffTypes={ow:"\u0422\u0443\u0434\u0430",owBack:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e",rt:"\u0422\u0443\u0434\u0430 \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e"},r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.showFlightRules()},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(a){return a.flightHash===e&&a.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.fetchFlightTariffs()},r.onSelectTariff=function(e,t){return function(){r.setState((function(a){return{selectedTariffs:[].concat(Object(k.a)(a.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(n.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(pe.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0):this.props.durationMinutes,a=Math.floor(t/60),l=t%60,s=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(p.a,{query:"(max-width: 991px)"},(function(r){var o,f;return r?m.a.createElement(Ye,e.props):m.a.createElement("div",{className:"flight-item"},m.a.createElement("div",{className:"flight-header"},m.a.createElement("div",{className:"flight-header-left"},m.a.createElement("div",{className:"flight-header"},s&&"Bus"!==s?m.a.createElement(Le,{className:"airline-image",usePlaceholderUsBackground:!0,placeholder:"".concat(Ue.c,"/userfiles/iata-air-logos/000.png"),src:e.props.airlineCode?"".concat(Ue.c,"/userfiles/iata-air-logos/").concat(e.props.airlineCode,".png"):"".concat(Ue.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.props.airlineName}):m.a.createElement(Le,{className:"airline-image",src:"".concat(Ue.c,"/userfiles/iata-air-logos/00.png"),alt:e.props.airlineName}),s&&"Bus"!==s?m.a.createElement("span",null,m.a.createElement("span",{className:"airline-name"},e.props.airlineName),m.a.createElement("span",{className:"header-info-block"},e.props.flightNumber)):t("Bus"),(e.props.isMouzenidis||e.props.isCharter)&&m.a.createElement("span",{className:"header-info-block"},e.props.isMouzenidis&&!e.props.isCharter&&t("Mouzenidis flight"),e.props.isCharter&&t("Charter")," "))),m.a.createElement("div",{className:"flight-header-right"},m.a.createElement("div",{className:"fare-type"},e.props.selectedTariff&&e.props.selectedTariff.name,s&&"Bus"!==s&&e.props.rules&&m.a.createElement(qe.a,{title:t("Tariff rules")},m.a.createElement(R.a,{onClick:e.showFlightRules,icon:"info-circle",className:"m-l-5 primary icon"}))),!e.props.disableSelectionTariffs&&m.a.createElement(i.c,{type:"button",size:"sm",color:"default",onClick:e.fetchFlightTariffs,loading:e.props.tariffsFetching},t("Change tariff")),e.state.toggled&&m.a.createElement(c.a,{onClose:e.onCancelSelecting,modalTitle:t("Flight fare"),onToggle:e.fetchFlightTariffs,modalFooter:m.a.createElement("div",{className:"fare-type-footer"},m.a.createElement(i.c,{size:"sm",color:"dark",plain:!0,onClick:e.onCancelSelecting},t("Cancel")),m.a.createElement(i.c,{size:"sm",color:"success",onClick:e.onConfrimSelecting},t("Confirm"))," ")},m.a.createElement("div",{className:"fare-type-change"},m.a.createElement("div",{className:"fare-type-container"},e.props.tariffsFetching?m.a.createElement(be.a,{style:{minWidth:360},description:t("Search all available rates")}):m.a.createElement(d.Fragment,null,e.props.tariffs.map((function(a){return m.a.createElement(d.Fragment,{key:a.type},e.state.tariffAlert&&"ow"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement(R.a,{icon:"lock",className:"m-r-5 primary icon"})),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))),m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing"},e.tariffTypes[a.type]),m.a.createElement("ul",{className:"nostyles"},a.tariffs.map((function(n,r){return m.a.createElement("li",{key:r,className:e.isSelectedTariff(a.flightHash,n.name)?"selected":"",onClick:e.onSelectTariff(a.flightHash,n)},m.a.createElement("div",{className:"fare-type-name"},n.name),m.a.createElement("div",{className:"fare-type-baggage"},m.a.createElement(R.a,{icon:"baggage",className:"icon"}),n.baggageInfo?n.baggageInfo:t("No")),m.a.createElement("div",{className:"fare-type-pricing"},0!==n.addPrice?m.a.createElement(d.Fragment,null,"+ ".concat(Object(xe.b)(n.addPrice)," ")," ",m.a.createElement(P.a,{currencyCode:e.props.currencyCode})):t("No surcharge"),m.a.createElement(qe.a,{title:m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement(R.a,{icon:"baggage",className:"icon"})," ",m.a.createElement("span",null,t("baggage"))," ",n.baggageInfo?n.baggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(R.a,{icon:"hand-baggage",className:"icon"})," ",m.a.createElement("span",null,t("hand luggage"))," ",n.handBaggageInfo?n.handBaggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(R.a,{icon:"return-arrow",className:"icon"})," ",m.a.createElement("span",null,t("refund"))," ",n.canReturn?t("Yes"):t("No")),m.a.createElement("div",null,m.a.createElement(R.a,{icon:"change-arrows",className:"icon"})," ",m.a.createElement("span",null,t("exchange"))," ",n.canExchange?t("Yes"):t("No")))},m.a.createElement("span",null,m.a.createElement(R.a,{icon:"info-circle",className:"icon link small"})))))})))),e.state.tariffAlert&&"owBack"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement("div",null,m.a.createElement(R.a,{icon:"lock",className:"m-r-5 primary icon"}))),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))))})))))))),m.a.createElement("div",{className:"flight-body"},m.a.createElement("div",{className:"flight-left"},m.a.createElement("div",{className:"flight-info-row"},s&&"Bus"!==s&&m.a.createElement("div",{className:"flight-airport-code link"},m.a.createElement(qe.a,{title:e.props.departureAirportName},m.a.createElement("div",null,e.props.departureCityName,","," ",e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode))),m.a.createElement("div",{className:"flight-duration"},t("Duration")," ",a>0&&"".concat(a," ").concat(t("hours_short"),".")," ",l>0&&l+" ".concat(t("minutes_short"),".")),s&&"Bus"!==s&&m.a.createElement("div",{className:"flight-airport-code link text-right"},m.a.createElement(qe.a,{title:e.props.arrivalAirportName},m.a.createElement("div",null,e.props.arrivalCityName,","," ",e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode)))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"flight-line"},e.props.isConnected&&m.a.createElement("span",null)),m.a.createElement("div",{className:"flight-time  text-right"},u()(e.props.arrivalTime).format("HH:mm"))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-info"},m.a.createElement("div",{className:"flight-date"},u()(e.props.departureTime).format(null===(o=e.context)||void 0===o?void 0:o.localeDateFormat))),e.props.isConnected?m.a.createElement("div",{className:"flight-layover"},e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",{className:"flight-layover"},m.a.createElement("span",{className:"green small"},t("Direct flight"))),m.a.createElement("div",{className:"flight-info text-right"},m.a.createElement("div",{className:"flight-date"},u()(e.props.arrivalTime).format(null===(f=e.context)||void 0===f?void 0:f.localeDateFormat))))),m.a.createElement("div",{className:"flight-right"},e.props.selectedTariff&&m.a.createElement(at,e.props.selectedTariff))),e.state.showDetails&&e.props.segments&&m.a.createElement(c.a,{className:"flights-details-info",onClose:e.closeDetails,modalTitle:t("Flight details")},m.a.createElement(Ke,{segments:e.props.segments.map((function(t,a){return Object(n.a)({},t,{stopDurationMinutes:e.props.stopDurationMinutes&&e.props.stopDurationMinutes[a]})}))})))}))}))}}]),a}(d.PureComponent);Qe.contextType=Ge.a;var Ze=a(2349),Xe=a(2235),$e=function(){var e=Object(f.c)(r.b).t;return m.a.createElement(Xe.a,{themes:Xe.b.mouzenidis},m.a.createElement(Ze.a,{color:"warning",small:!0},"".concat(e("According to the terms of booking charter flights")," ").concat(e("the time and airport of departure can be changed"),". ").concat(e("We will inform you about this in advance"),".")))},et=function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(e){var r;Object(he.a)(this,a),(r=t.call(this,e)).getDefaultSelectedTariffs=function(e){var t=[];return(null===e||void 0===e?void 0:e.tariff)?(t.push(Object(n.a)({},e.tariff,{name:e.tariff.name,flightHash:e.hash})),t):(r.props.direct&&r.props.direct.selectedTariff&&r.props.direct.selectedTariff.name&&t.push(Object(n.a)({},r.props.direct.selectedTariff,{flightHash:r.props.direct.hash})),r.props.back&&r.props.back.selectedTariff&&r.props.back.selectedTariff.name&&t.push(Object(n.a)({},r.props.back.selectedTariff,{flightHash:r.props.back.hash})),t)},r.getTariffs=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.tariffs;return n?a?n.filter((function(e){return e.flightHash===a.hash})):n.filter((function(a){return a.flightHash===e||a.flightHash===t})):[]},r.getRtVariant=function(e,t){var a;return(null===t||void 0===t||null===(a=t.rtVariants)||void 0===a?void 0:a.some((function(t){return t.directId===e.id})))?t.rtVariants.find((function(t){return t.directId===e.id})):null},r.calculateAddPrice=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.state.selectedTariffs,i=r.calculateCleanAddPrice(e,t,a);return a?i+r.getAdditionalTariffPrice(a.hash,n):i+r.getAdditionalTariffPrice(null===e||void 0===e?void 0:e.hash,n)+r.getAdditionalTariffPrice(e&&t&&t.hash,n)},r.calculateCleanAddPrice=function(e,t,a){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.correctionPrice||0;if(a)return a.addPricePair-i;if((null===e||void 0===e||null===(n=e.linkedVariants)||void 0===n?void 0:n.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))){var l=e.linkedVariants.find((function(e){return e.priceId===t.id}));return l.addPricePair-i}return((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)-i},r.getAdditionalTariffPrice=function(e,t){var a=t.find((function(t){return t.flightHash===e}));return(null===a||void 0===a?void 0:a.addPrice)||0},r.changeReturnFlightShow=function(){r.setState({changeReturnFlight:!0})},r.changeReturnFlightClose=function(){r.setState({changeReturnFlight:!1})},r.changeFlights=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(){var i=null,l=null;if(a){var c=r.state.selectedTariffs.find((function(e){return e.flightHash===a.hash}));l=(null===c||void 0===c?void 0:c.hash)||a.hash,i=(null===c||void 0===c?void 0:c.hash)||e.hash}else{var s=r.state.selectedTariffs.find((function(t){return t.flightHash===(null===e||void 0===e?void 0:e.hash)})),o=r.state.selectedTariffs.find((function(e){return e.flightHash===(null===t||void 0===t?void 0:t.hash)}));i=(null===s||void 0===s?void 0:s.hash)||(null===e||void 0===e?void 0:e.hash),l=(null===o||void 0===o?void 0:o.hash)||(null===t||void 0===t?void 0:t.hash)}r.props.selectFlights&&r.props.selectFlights({directHash:i,backHash:l,correctionPrice:n+r.props.correctionPrice}),r.changeReturnFlightClose()}},r.showFlightRules=function(e){return function(){return r.props.actions.showFlightRules(e)}},r.fetchFlightTariffs=function(e,t,a){return function(){var i=null;a&&!r.props.tariffs.some((function(e){return e.flightHash===a.hash}))?i={rtHash:a.hash}:a||r.props.tariffs.some((function(t){return t.flightHash===e}))&&r.props.tariffs.some((function(e){return e.flightHash===t}))||(i={owHash:e,owBackHash:t}),i&&Object.keys(i)&&r.props.actions.fetchFlightTariffs(Object(n.a)({shoppingCartId:r.props.shoppingCartId},i))}},r.onSelectTariffs=function(e){r.setState((function(t){var a=[].concat(Object(k.a)(t.selectedTariffs.filter((function(t){return!e.some((function(e){return e.flightHash===t.flightHash}))}))),Object(k.a)(e));return{selectedTariffs:a,addPrice:r.calculateAddPrice(r.props.direct,r.props.back,r.state.rtVariant,a)}}),(function(){r.props.promo&&r.changeFlights(r.props.direct,r.props.back,r.state.rtVariant,r.state.addPrice)()}))},r.getSelectedTariff=function(e,t){return t?r.state.selectedTariffs.find((function(e){return e.flightHash===t.hash}))||(null===e||void 0===e?void 0:e.selectedTariff):r.state.selectedTariffs.find((function(t){return t.flightHash&&t.flightHash===(null===e||void 0===e?void 0:e.hash)}))||(null===e||void 0===e?void 0:e.selectedTariff)};var i=r.getRtVariant(e.direct,e.back);return r.state={changeReturnFlight:!1,addPrice:r.calculateAddPrice(e.direct,e.back,i,[]),rtVariant:i,selectedTariffs:r.getDefaultSelectedTariffs(i)},r}return Object(pe.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;(e.direct!==this.props.direct||e.back!==this.props.back)&&this.props.back&&this.props.direct&&this.setState((function(e){var a=t.getRtVariant(t.props.direct,t.props.back);return{rtVariant:a,addPrice:t.calculateAddPrice(t.props.direct,t.props.back,a),selectedTariffs:e.selectedTariffs.length?e.selectedTariffs:t.getDefaultSelectedTariffs(a)}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.direct,n=t.back,l=t.promo,s=t.tariffsFetching,o=t.transport,u=t.currencyCode,h=t.booking,p=t.prePayment;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"flight"},a&&m.a.createElement(d.Fragment,null,((null===n||void 0===n?void 0:n.isCharter)||a.isCharter||!a.isGds||!(null===n||void 0===n?void 0:n.isGds))&&m.a.createElement($e,null),m.a.createElement(Qe,Object.assign({},a,{selectedTariff:e.getSelectedTariff(a,e.state.rtVariant),showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:a.hash),fetchFlightTariffs:e.fetchFlightTariffs(a.hasMoreTariffs&&a.hash||void 0,null===n||void 0===n?void 0:n.hash,e.state.rtVariant),tariffsFetching:s,tariffs:e.getTariffs(a.hash,null===n||void 0===n?void 0:n.hash,e.state.rtVariant),selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,transport:o,disableSelectionTariffs:!h||(e.state.rtVariant?!e.state.rtVariant.hasMoreTariffs:!(null===n||void 0===n?void 0:n.hasMoreTariffs)&&!a.hasMoreTariffs),hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:a.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&a.showMeals&&m.a.createElement(Re,{flightId:a.serviceId,isReadOnly:!a.enableMeals}),e.props.hasExtra&&a.showExtras&&m.a.createElement(He,{flightId:a.serviceId,isReadOnly:!a.enableExtras})),n&&m.a.createElement(d.Fragment,null,m.a.createElement(Qe,Object.assign({},n,{disableSelectionTariffs:!0,selectedTariff:e.getSelectedTariff(n,e.state.rtVariant),hash:e.state.rtVariant?e.state.rtVariant.hash:n.hash,showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:n.hash),transport:o,hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:n.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&n.showMeals&&m.a.createElement("div",null,m.a.createElement(Re,{flightId:n.serviceId,isReadOnly:!n.enableMeals})),e.props.hasExtra&&a.showExtras&&m.a.createElement(He,{flightId:n.serviceId,isReadOnly:!n.enableExtras})),a&&!l?m.a.createElement("div",{className:"flight-footer"},a.linkedVariants&&a.linkedVariants.length>1&&m.a.createElement("div",{className:"footer-flight-left"},m.a.createElement(i.c,{color:"primary",onClick:e.changeReturnFlightShow},"".concat(t("More")," ").concat(a.linkedVariants.length-1," ").concat(t("returned flights")))),m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(nt,{timeLimit:(null===a||void 0===a?void 0:a.timeLimit)?a.timeLimit:null===n||void 0===n?void 0:n.timeLimit,prePayment:null===p||void 0===p?void 0:p.prePaymentDate}),m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:e.changeFlights(a,n,e.state.rtVariant,e.state.addPrice)},m.a.createElement("span",null,t("Select")),e.state.addPrice>=0?"+":""," ",Object(xe.b)(e.state.addPrice)," ",m.a.createElement(P.a,{currencyCode:u}))))):(null===a||void 0===a?void 0:a.timeLimit)||(null===n||void 0===n?void 0:n.timeLimit)?m.a.createElement("div",{className:"flight-footer"},m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(nt,{timeLimit:(null===a||void 0===a?void 0:a.timeLimit)?a.timeLimit:n.timeLimit,prePayment:null===p||void 0===p?void 0:p.prePaymentDate}))):null,e.state.changeReturnFlight&&m.a.createElement(c.a,{scrollable:!0,modalTitle:t("Flight back options"),onClose:e.changeReturnFlightClose},m.a.createElement("div",{className:"change-flight-modal-heading-departure"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(R.a,{icon:"plane-alt",className:"m-r-10"}),t("Outbound flight"))),m.a.createElement(Qe,Object.assign({},a,{showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:a.hash),transport:o,disableSelectionTariffs:!0,currencyCode:u})),m.a.createElement("div",{className:"change-flight-modal-heading-return"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(R.a,{icon:"plane-alt",className:"m-r-10"}),t("Flight back options")),m.a.createElement("div",{className:"change-flight-modal-heading-right"},t("Extra charge for outbound + back flight"))),m.a.createElement(tt,{direct:a,getRtVariant:e.getRtVariant,calculateAddPrice:e.calculateAddPrice,getSelectedTariff:e.getSelectedTariff,fetchFlightTariffs:e.fetchFlightTariffs,getTariffs:e.getTariffs,changeFlights:e.changeFlights,translater:t,transport:o,tariffsFetching:s,showFlightRules:e.showFlightRules,selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,calculateCleanAddPrice:e.calculateCleanAddPrice,currencyCode:u}))))}))}}]),a}(d.PureComponent);et.defaultProps={promo:!1,hasMeal:!1,hasExtra:!1};var tt=function(e){var t=e.direct,a=e.getRtVariant,r=e.calculateAddPrice,i=e.getSelectedTariff,l=e.fetchFlightTariffs,c=e.getTariffs,s=e.changeFlights,o=e.translater,u=e.tariffsFetching,d=e.showFlightRules,f=e.selectedTariffs,h=e.onSelectTariffs,p=e.calculateCleanAddPrice,g=e.currencyCode,v=e.transport,b=t.linkedVariants.map((function(e){var i=a(t,e.linkedFlight),l=r(t,e.linkedFlight,i),c=p(t,e.linkedFlight,i);return Object(n.a)({},e,{_rtVariant:i,_addPrice:l,_cleanPrice:c})}));return b.sort((function(e,t){return e._cleanPrice-t._cleanPrice})),b.map((function(e){return m.a.createElement("div",{key:e.priceId,className:"flight"},e.linkedFlight&&m.a.createElement(Qe,Object.assign({},e.linkedFlight,{selectedTariff:i(e.linkedFlight,e._rtVariant),transport:v,disableSelectionTariffs:e._rtVariant?!e._rtVariant.hasMoreTariffs:(!e.linkedFlight||!e.linkedFlight.hasMoreTariffs)&&!t.hasMoreTariffs,hash:e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash,showFlightRules:d(e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash),fetchFlightTariffs:l((null===t||void 0===t?void 0:t.hasMoreTariffs)&&t.hash||void 0,e.linkedFlight.hash,e._rtVariant),tariffsFetching:u,tariffs:c(null===t||void 0===t?void 0:t.hash,e.linkedFlight&&e.linkedFlight.hash,e._rtVariant),selectedTariffs:f,onSelectTariffs:h,currencyCode:g,hasMoreTariffs:e._rtVariant?e._rtVariant.hasMoreTariffs:e.linkedFlight.hasMoreTariffs})),m.a.createElement("div",{className:"flight-footer-modal"},m.a.createElement("div",{className:"footer-flight-modal-left"},m.a.createElement(nt,{timeLimit:e.linkedFlight&&e.linkedFlight.timeLimit})),m.a.createElement("div",{className:"footer-flight-modal-right"},m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:s(t,e.linkedFlight,e._rtVariant,e._addPrice)},m.a.createElement("span",null,o("Select"))," ",e._addPrice>=0?"+":""," ",Object(xe.b)(e._addPrice)," ",m.a.createElement(P.a,{className:"m-l-5",size:14,currencyCode:g}))))))}))},at=function(e){return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement("div",{className:"fare-details"},m.a.createElement("ul",{className:"fare-details-list nostyles"},m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("baggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.baggageInfo?e.baggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("hand luggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.handBaggageInfo?e.handBaggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("refund"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canReturn?t("Yes"):t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("exchange"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canExchange?t("Yes"):t("No")))))}))},nt=function(e){var t=e.timeLimit,a=e.prePayment,n=void 0===a?null:a;return t&&n&&(t=u()(t)>u()(n)?n:t),t?m.a.createElement(f.b,{ns:r.b},(function(e){return m.a.createElement("div",{className:"flight-payment-info"},"".concat(e("Payment before"),": ").concat(u()(t).format("DD MMM YYYY, HH:mm:ss")))})):null},rt=Object(g.connect)((function(e){var t,a,n;return{tariffsFetching:e.basketFlights.tariffsFetching,tariffs:e.basketFlights.tariffs,shoppingCartId:e.basketData.shoppingCartId,currencyCode:null===(t=e.basketData.price)||void 0===t||null===(a=t.priceTotal)||void 0===a||null===(n=a.tour)||void 0===n?void 0:n.currencyCode,correctionPrice:e.basketFlights.flightsCorrectionPrice,prePayment:e.order&&e.order.order&&e.order.order.prePayment}}),(function(e){return{actions:Object(v.bindActionCreators)(E.basketFlightsActions,e)}}))(et),it=(a(2340),function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(){var e;Object(he.a)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).onChangeFlight=function(t){e.props.actions.setSelectedFlight(Object(n.a)({shoppingCartId:e.props.shoppingCartId},t)),e.props.actions.showChangeFlightModal(!1)},e.isSelectedAirline=function(t){return e.props.filter.selectedAirlines.includes(t)},e.isSelectedFlightType=function(t){return e.props.filter.selectedFlightTypes.includes(t)},e.isSelectedStopover=function(t){return e.props.filter.selectedStopovers.includes(t)},e.onCheckAirline=function(t){return function(){e.isSelectedAirline(t)?e.props.actions.changeFilter({key:"selectedAirlines",value:e.props.filter.selectedAirlines.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedAirlines",value:[].concat(Object(k.a)(e.props.filter.selectedAirlines),[t])})}},e.onClearSelectedAirlines=function(){e.props.actions.changeFilter({key:"selectedAirlines",value:[]})},e.onCheckFlightType=function(t){return function(){e.isSelectedFlightType(t)?e.props.actions.changeFilter({key:"selectedFlightTypes",value:e.props.filter.selectedFlightTypes.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedFlightTypes",value:[].concat(Object(k.a)(e.props.filter.selectedFlightTypes),[t])})}},e.onClearSelectedFlightTypes=function(){e.props.actions.changeFilter({key:"selectedFlightTypes",value:[]})},e.onCheckStopover=function(t){return function(){e.isSelectedStopover(t)?e.props.actions.changeFilter({key:"selectedStopovers",value:e.props.filter.selectedStopovers.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedStopovers",value:[].concat(Object(k.a)(e.props.filter.selectedStopovers),[t])})}},e.onClearSelectedStopovers=function(){e.props.actions.changeFilter({key:"selectedStopovers",value:[]})},e.onChangeTiming=function(t){return function(a){e.props.actions.changeFilter({key:t,value:a})}},e.onClearTiming=function(){e.props.actions.clearTimings()},e.isTimingChanged=function(e){return 0!==e.from||23!==e.to},e.isTimingsChanged=function(){return e.isTimingChanged(e.props.filter.backDepartureTime)||e.isTimingChanged(e.props.filter.directDepartureTime)||e.isTimingChanged(e.props.filter.backArrivalTime)||e.isTimingChanged(e.props.filter.directArrivalTime)},e.onClearWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!1})},e.onChangeWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!e.props.filter.withLuggage})},e}return Object(pe.a)(a,[{key:"componentDidMount",value:function(){this.props.backFlights.length||this.props.directFlights.length||this.props.fetching||this.props.actions.fetchFlights(this.props.shoppingCartId)}},{key:"componentDidUpdate",value:function(){this.props.fetching||this.props.directFlights.length||!this.props.filter.firstStart||(this.props.actions.changeFilter({key:"firstStart",value:!1}),this.onClearSelectedStopovers())}},{key:"render",value:function(){var e=this;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(w.a,null,e.props.fetching?m.a.createElement(be.a,{description:t("Searching for all available flights")}):m.a.createElement(m.a.Fragment,null,m.a.createElement(A.a,null,m.a.createElement(x.a,{md:12},m.a.createElement("div",{className:"change-flight-filters"},e.props.showOnlyMouzenidis&&m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedFlightTypes.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedFlightTypes.length?m.a.createElement(R.a,{icon:"times",onClick:e.onClearSelectedFlightTypes}):void 0,onClick:e.onCheckFlightType("isMouzenidis")},t("Only MOUZENIDIS"))),m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedStopovers.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedStopovers.length?m.a.createElement(R.a,{onClick:e.onClearSelectedStopovers,icon:"times"}):void 0,onClick:e.onCheckStopover("isNotConnected")},t("Direct flights"))),m.a.createElement("div",{className:"account-orders-post-filter"},m.a.createElement(Ee.a,{label:t("With luggage"),trigger:m.a.createElement(i.c,{size:"sm",color:e.props.filter.withLuggage?"primary":"default",pluginAfter:e.props.filter.withLuggage?m.a.createElement(R.a,{onClick:e.onClearWithLuggage,icon:"times"}):void 0},t("With luggage"))},m.a.createElement("div",{className:"p1 account-orders-post-filter-dropdown"},m.a.createElement("div",{className:"account-orders-post-filter-visa"},m.a.createElement("div",{className:"account-orders-post-filter-visa-info"},m.a.createElement("div",{className:"bold title"},t("With luggage")),m.a.createElement("p",{className:"desc"},t("Flights with luggage or the ability to select the tariff"))),m.a.createElement(Ce,{labelOn:t("Yes"),labelOff:t("No"),onChange:e.onChangeWithLuggage,value:e.props.filter.withLuggage}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Airlines"),trigger:m.a.createElement(i.c,{color:e.props.filter.selectedAirlines.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedAirlines.length?m.a.createElement(R.a,{onClick:e.onClearSelectedAirlines,icon:"times"}):void 0},t("Airlines"))},m.a.createElement("ul",{className:"nostyles"},e.props.airlines.map((function(t){return m.a.createElement("li",{key:t.id},m.a.createElement(Ne.a,{label:t.name,checked:e.isSelectedAirline(t.id),onChange:e.onCheckAirline(t.id)}))}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Timing"),trigger:m.a.createElement(i.c,{size:"sm",color:e.isTimingsChanged()?"primary":"default",pluginAfter:e.isTimingsChanged()?m.a.createElement(R.a,{onClick:e.onClearTiming,icon:"times"}):void 0},t("Timing"))},m.a.createElement("div",{className:"change-flight-filters-timing"},m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Ae,{inline:!0,label:t("Departure time"),from:e.props.filter.directDepartureTime.from,to:e.props.filter.directDepartureTime.to,onChange:e.onChangeTiming("directDepartureTime")}),m.a.createElement(Ae,{inline:!0,label:t("Arrival time"),from:e.props.filter.directArrivalTime.from,to:e.props.filter.directArrivalTime.to,onChange:e.onChangeTiming("directArrivalTime")})),m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Ae,{inline:!0,label:t("Departure time Return"),from:e.props.filter.backDepartureTime.from,to:e.props.filter.backDepartureTime.to,onChange:e.onChangeTiming("backDepartureTime")}),m.a.createElement(Ae,{inline:!0,label:t("Arrival time Return"),from:e.props.filter.backArrivalTime.from,to:e.props.filter.backArrivalTime.to,onChange:e.onChangeTiming("backArrivalTime")})))))))),m.a.createElement(A.a,null,m.a.createElement(x.a,{md:12},m.a.createElement("div",{className:"change-flight"},e.props.directFlights.map((function(t){return m.a.createElement(l.a,{key:t.id,className:"dashboard"},m.a.createElement(rt,{transport:e.props.transport,direct:t,back:t.cheapestBackFlight,selectFlights:e.onChangeFlight,booking:e.props.booking}))})))))))}))}}]),a}(d.PureComponent)),lt=Object(g.connect)((function(e){return{fetching:e.basketFlights.fetching,shoppingCartId:e.basketData.shoppingCartId,backFlights:oe(e),directFlights:se(e),airlines:ue(e),filter:e.basketFlights.filter,showOnlyMouzenidis:fe(e)}}),(function(e){return{actions:Object(v.bindActionCreators)(E.basketFlightsActions,e)}}))(it),ct=function(e){Object(ve.a)(a,e);var t=Object(ge.a)(a);function a(){var e;Object(he.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).closeModal=function(){e.props.actions.showFlightRules(e.props.selectedHash)},e}return Object(pe.a)(a,[{key:"componentDidMount",value:function(){this.props.rules||this.props.actions.fetchFlightRules(this.props.selectedHash)}},{key:"render",value:function(){return m.a.createElement(c.a,{scrollable:!0,modalTitle:"Fare rules",onClose:this.closeModal},m.a.createElement("div",null,m.a.createElement("pre",null,m.a.createElement("p",null,this.props.rules)),this.props.fetching&&m.a.createElement(s.a,null)))}}]),a}(d.PureComponent),st=Object(g.connect)((function(e){return{rules:me(e),selectedHash:e.basketFlights.selectedRuleHash,fetching:e.basketFlights.rulesFetching,shoppingCartId:e.basketData.shoppingCartId}}),(function(e){return{actions:Object(v.bindActionCreators)(E.basketFlightsActions,e)}}))(ct);a(2338),t.default=Object(g.connect)((function(e){return{showChangeFlight:e.basketFlights.showChangeFlight,showRules:e.basketFlights.showRules,showIssueTickets:e.basketFlights.showIssueTickets,showIssueError:e.basketFlights.showIssueError,showIssueSuccess:e.basketFlights.showIssueTicketsSuccess,fetching:e.basketFlights.fetching||e.basketActualization.fetching||e.basketMeal.fetching,shoppingCartId:e.basketData.shoppingCartId,allowFlightSelection:e.basketFlights.allowFlightSelection,selectedFlights:de(e),allowMoveToTickets:e.basketPageData.allowMoveToTickets,allowTicketsReservation:e.basketPageData.allowTicketsReservation,autoIssuedDate:e.basketPageData.autoIssuedDate,ordercode:e.order&&e.order.order?e.order.order.code:null,tour:e.basketData}}),(function(e){return{actions:Object(v.bindActionCreators)(Object(n.a)({},E.basketActions,{},E.basketFlightsActions),e)}}))((function(e){var t=e.readOnly,a=e.allowFlightSelection,o=e.allowMoveToTickets,h=e.allowTicketsReservation,g=e.showIssueTickets,v=e.showIssueSuccess,b=e.showIssueError,E=e.showChangeFlight,k=e.showRules,T=e.fetching,y=e.actions,C=e.shoppingCartId,F=e.tour,N=e.ordercode,O=e.selectedFlights,j=e.autoIssuedDate,S=e.booking,w=void 0===S||S,A=function(){y.showChangeFlightModal(!0)},x=function(){y.showIssueTicketsModal(!0)},I=function(){y.showIssueTicketsModal(!1)},M=function(){y.setSelectedTab("documents")},D=function(e){y.setSelectedFlight(Object(n.a)({shoppingCartId:C},e))},P=Object(f.c)(r.b).t;return(null===O||void 0===O?void 0:O.length)?m.a.createElement(d.Fragment,null,m.a.createElement(p.a,{query:"(max-width: 991px)"},(function(e){return e?m.a.createElement("div",{className:"flights-mobile basket-mobile-block"},m.a.createElement("div",{className:"basket-mobile-block-title"},m.a.createElement("div",null,F&&"Bus"===F.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights")),m.a.createElement("div",{className:"basket-mobile-block-title-action"})),m.a.createElement("div",{className:"flight-mobile-item"},m.a.createElement("div",{className:"flight-mobile-item-body"},m.a.createElement("div",{className:"flights"},O.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:F.tour.transportType,direct:e.direct,back:e.back,selectFlights:D,promo:!0,booking:w})}))),!t&&w&&a?F&&"Bus"!==F.tour.transportType&&m.a.createElement("div",{onClick:A},m.a.createElement(i.c,{fullWidth:!0,color:"primary"},P("Select another flight"))):m.a.createElement("div",null,o&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:M},P("Tickets has been issued")),h&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:x},P("Issue the tickets")),j&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(j).format("HH:mm DD MMM"))))))):m.a.createElement("div",{className:"flights-wrapper"},m.a.createElement(l.a,{title:F&&"Bus"===F.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights"),className:"dashboard",actions:!t&&w&&a?F&&"Bus"!==F.tour.transportType&&m.a.createElement("div",{onClick:A},m.a.createElement(i.c,{type:"button",size:"sm",color:"primary"},P("Select another flight"))):m.a.createElement("div",null,o&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:M},P("Tickets has been issued")),h&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:x},P("Issue the tickets")),j&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(j).format("HH:mm DD MMM"))))},m.a.createElement("div",{className:"flights"},O.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:F.tour.transportType,direct:e.direct,back:e.back,selectFlights:D,promo:!0,booking:w})})))))})),m.a.createElement(te,null),m.a.createElement(ae,null),g&&m.a.createElement(c.a,{modalTitle:P(v?"Tickets has been issued successfully":"Issue the tickets?"),onClose:I},v&&P("Tickets has been issued successfully"),T&&P("Tickets are issuing"),b&&m.a.createElement("span",null,P("An error occurred during checkout. Please try again or contact sales office.")),T&&m.a.createElement(s.a,null),m.a.createElement("div",{className:"text-right"},m.a.createElement(i.c,{type:"button",color:"danger",onClick:I},P("Close"))," ",!v&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){y.issueOrderTickets(N)}},P("Confirm"))," ",v&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){y.showIssueTicketsModal(!1),y.setSelectedTab("documents")}},P("Electronic ticket(s)")))),E&&m.a.createElement(c.a,{scrollable:!0,onClose:function(){y.showChangeFlightModal(!1)},modalTitle:P("Change flight")},m.a.createElement(lt,{transport:F.tour.transportType,booking:w})),k&&m.a.createElement(st,null),T&&m.a.createElement(s.a,null)):null}))},2285:function(e,t,a){"use strict";a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"l",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"g",(function(){return g})),a.d(t,"m",(function(){return v})),a.d(t,"k",(function(){return b})),a.d(t,"e",(function(){return E})),a.d(t,"i",(function(){return k})),a.d(t,"f",(function(){return F})),a.d(t,"c",(function(){return N})),a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return w}));var n=a(21),r=a(3),i=a(2284),l=a(33),c=function(e){return e.basketData.shoppingCart},s=function(e){return e.basketVisas.visaCenters},o=function(e){return e.basketTransfers.transfers},u=function(e){return e.basketTransfers.transferServices},d=Object(l.a)(s,(function(e){return e})),m=Object(l.a)((function(e){return e.basketVisas.mobileBiometrics}),(function(e){return e})),f=function(e){return e.basketData.fields},h=Object(l.a)(c,(function(e){return(null===e||void 0===e?void 0:e.services)?e.services.filter((function(e){return"Hotel"===e.type})).sort((function(e,t){return new Date(e.dateBegin).valueOf()-new Date(t.dateBegin).valueOf()})):[]})),p=Object(l.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return e.map((function(e){return Object(r.a)({},e)}))})),g=Object(l.a)([function(e){var t,a;return(null===(t=e.basketData)||void 0===t||null===(a=t.shoppingCart)||void 0===a?void 0:a.tourists)||[]},s,c],(function(e,t,a){return e.map((function(e){var n,i,l,c=t.find((function(t){return t.touristId===e.id}));return Object(r.a)({id:e.id,gender:"m",firstName:"",lastName:"",birthdate:"",citizenshipId:null,passport:"",pasportExpiration:"",pasportExpirationMin:new Date,visaCenter:c?null===(n=c.variants)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.id:null,biometry:null,visa:!1,isBiometry:!1,attributeIds:[],documentType:null,birthDateMax:e.birthDateMax,birthDateMin:e.birthDateMin,isTaxNumber:!!(null===(l=e.extraFields)||void 0===l?void 0:l.taxNumber),taxNumber:e.taxNumber||""},null===a||void 0===a?void 0:a.allowedActions,{roomGroup:e.roomGroup,order:e.order,age:e.age,ageType:e.ageType,editable:!0})})).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),v=Object(l.a)(u,o,(function(e,t){var a=e.map((function(e){var a=null===t||void 0===t?void 0:t.find((function(t){return t.serviceId===e.id}));return Object(r.a)({},e,{transfers:(null===a||void 0===a?void 0:a.variants)||[]})}));return a.some((function(e){return e.isFake}))&&a.some((function(e){return!e.transfers.length}))?[]:a})),b=Object(l.a)((function(e){return e.basketTransfers.selectedTransfers}),u,o,(function(e,t,a){return(null===e||void 0===e?void 0:e.length)?e:(null===t||void 0===t?void 0:t.length)&&a&&a.length?t.reduce((function(e,t){var r,i=a.find((function(e){return e.serviceId===t.id})),l=null;if(null===i||void 0===i||null===(r=i.variants)||void 0===r?void 0:r.length){var c=t.isFake?i.variants[0]:i.variants.find((function(e){return e.selected}));l=c?{serviceId:t.id,variantId:c.id}:null}return l?[].concat(Object(n.a)(e),[l]):e}),[]):[]})),E=Object(l.a)(c,(function(e){return e})),k=Object(l.a)([function(e){return e.basketPageData.offices}],(function(e){return e&&1===e.length?e[0].id:""})),T="context",y="tour",C="local",F=Object(l.a)([function(e){return e.basketData.price}],(function(e){var t,a,n,r,i,l;if(!e)return[];var c=null===(t=e.priceTotal)||void 0===t||null===(a=t.context)||void 0===a?void 0:a.currencyCode,s=null===(n=e.priceTotal)||void 0===n||null===(r=n.tour)||void 0===r?void 0:r.currencyCode,o=null===(i=e.priceTotal)||void 0===i||null===(l=i.local)||void 0===l?void 0:l.currencyCode;return c===s&&[{type:T,code:c},{type:C,code:o}],c!==o&&o!==s||[{type:T,code:c},{type:y,code:s}],[{type:T,code:c},{type:C,code:o},{type:y,code:s}].reduce((function(e,t){return e.some((function(e){return e.code===t.code}))?e:e.concat([t])}),[])})),N=Object(l.a)((function(e){var t;return(null===(t=e.basketData.formValues)||void 0===t?void 0:t.tourists)||[]}),(function(e){return Object(n.a)(e).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0}))})),O=function(e,t,a){var n={id:i.string().required(""),visaCenter:i.string().when("visa",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()}),visa:i.boolean(),isBiometry:i.boolean(),biomentry:i.string(),mobileBiometric:i.string().nullable(),attributeIds:i.array(),isTaxNumber:i.boolean(),taxNumber:i.string().when("isTaxNumber",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()})};return a.forEach((function(t){n[t.code]=t.required?i[t.type]().nullable().required(e("required")):i[t.type]().nullable()})),i.array().of(i.object().shape(n))},j=function(e,t){return t},S=Object(l.a)([j,f],(function(e,t){return function(e,t,a){return i.object().shape({tourists:O(e,0,a),officeId:i.string().nullable().required(e("required")),agree:i.boolean().oneOf([!0],e("required")),userAgreement:i.boolean().oneOf([!0],e("required")),emergencyPhone:i.string().nullable().required(e("required")),comment:i.string().nullable(),isPrebooking:i.bool(),officeDisabled:i.bool()})}(e.t,e.theme,t)})),w=Object(l.a)([j,f],(function(e,t){return O(e.t,e.theme,t)}))},2299:function(e,t,a){},2331:function(e,t,a){"use strict";var n=function(){};e.exports=n},2338:function(e,t,a){},2339:function(e,t,a){},2340:function(e,t,a){},2341:function(e,t,a){},2349:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(141),l=a(10),c=a(14),s=a(9),o=a(32);function u(){var e=Object(l.a)(["\n  position: relative;\n  font-size: 0.875rem;\n  padding: 0.5rem 1.5rem 0.5rem 0.75rem;\n  border: 1px solid;\n  margin-bottom: 1rem;\n  border-radius: ",";\n  background-color: ",";\n  border-color: ",";\n  color: ",";\n  &.small {\n    font-size: 0.75rem;\n    padding: 0.375rem 1rem 0.375rem 0.5rem;\n  }\n  .icon-close {\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    cursor: pointer;\n    border-radius: 100%;\n    padding: 0;\n  }\n"]);return u=function(){return e},e}var d=s.e.div(u(),(function(e){return e.theme.radius}),(function(e){return e.color?Object(c.b)(.35,Object(o.b)(e)):Object(c.c)(e.theme.colors.light,1)}),(function(e){return e.color?Object(c.b)(.3,Object(o.b)(e)):Object(c.a)(.05,e.theme.colors.light)}),(function(e){return Object(c.a)(.1,Object(o.b)(e))})),m=function(e){var t=e.color,a=e.children,n=e.dismissable,l=e.onClose,c=e.small,s=e.className;return r.a.createElement(d,{color:t,"data-component":"alert",className:"alert ".concat(s||""," ").concat(c?"small":"").trim()},a,n&&r.a.createElement("span",{className:"icon-close",onClick:l},r.a.createElement(i.a,{icon:"times-circle"})))};m.defaultProps={color:"warning"};t.a=m},2387:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(1047);t.a=function(e){return r.a.createElement("img",{src:"".concat(i.c).concat(e.srcpath?e.srcpath:"/userfiles/images/site-adaptive/noimage.png","?w=").concat(e.width?e.width:300,"&h=").concat(e.height?e.height:300,"&mode=crop"),alt:"No photo"})}}}]);