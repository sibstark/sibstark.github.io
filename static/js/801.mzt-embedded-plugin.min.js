(this["webpackJsonp@mzt/embedded-plugin"]=this["webpackJsonp@mzt/embedded-plugin"]||[]).push([[801,805,806,807,813],{1035:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(23),r=n(0),i=n.n(r),c=n(39),l=n(2262),o=i.a.createContext({activeCurrency:null,currencies:[],onChangeCurrency:function(e){},extractPrice:function(e,t){}}),s=(o.Consumer,function(e){return function(t){var n=Object(r.useState)(),s=Object(a.a)(n,2),u=s[0],d=s[1],m=Object(c.useSelector)((function(e){return Object(l.f)(e)}));return Object(r.useEffect)((function(){d((function(e){return function(e,t){return e?t.find((function(t){return t.code===e.code})):(null===t||void 0===t?void 0:t.length)?t[0]:null}(e,m)}))}),[m]),i.a.createElement(o.Provider,{value:{activeCurrency:u,currencies:m,onChangeCurrency:function(e){return function(){d(e)}},extractPrice:function(e,t){var n;return u?null===e||void 0===e||null===(n=e[u.type])||void 0===n?void 0:n[t]:null===e||void 0===e?void 0:e[t]}}},i.a.createElement(e,t))}})},1036:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n(0),r=n.n(a).a.createContext({}),i=r.Provider;r.Consumer},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(192),r=n(42),i=n(47),c=n(62),l=n(63),o=n(2246),s=n(0),u=n.n(s),d=function(e){return function(t){Object(l.a)(s,t);var n=Object(c.a)(s);function s(){var e;Object(r.a)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).fieldRefs=[],e.forwardFocusRef=function(t,n){n&&!e.fieldRefs.some((function(e){return e.name===t}))&&e.fieldRefs.push({name:t,focus:n})},e}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(e){if(e.isSubmitting&&!this.props.isSubmitting&&!this.props.isValid&&this.props.errors&&Object.keys(this.props.errors).length>0){var t,n=Object(a.a)(this.fieldRefs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object(o.f)(this.props.errors,r.name)){r.focus&&"function"===typeof r.focus&&r.focus();break}}}catch(i){n.e(i)}finally{n.f()}}}},{key:"render",value:function(){return u.a.createElement(e,Object.assign({forwardFocusRef:this.forwardFocusRef},this.props))}}]),s}(s.PureComponent)}},1038:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var a=n(3),r=n(23),i=n(139),c=n(258),l=n(2221),o=n(2107),s=n(2232),u=n(0),d=n.n(u),m=function(e){var t=e.isOpened,n=void 0!==t&&t,a=e.children,c=e.className,l=void 0===c?"":c,o=e.iconClassName,s=void 0===o?"":o,m=Object(u.useState)(n),f=Object(r.a)(m,2),v=f[0],p=f[1];Object(u.useEffect)((function(){n!==v&&p(!v)}),[n]);var h=function(){p((function(e){return!e}))};return d.a.createElement("span",{className:l,onClick:h},a,d.a.createElement("span",null,d.a.createElement(i.a,{icon:v?"chevron-down":"chevron-up",className:s,onClick:h})))},f=n(2226),v=n(106),p=n(2215),h=n(2384),b=n(17),g=n(2368),E=n(2214),y=n(2213),k=n(8),O=n(340),N=n(1035),j=function(){var e,t=Object(u.useContext)(N.a),n=t.extractPrice,a=t.activeCurrency,r=Object(b.c)(c.b).t,i=Object(E.a)((function(e){return e.basketData.price}));return i?d.a.createElement(g.a,{allowedRoles:[h.a.AGENCY],unallowedRoles:[h.a.READONLY]},d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"summary-agency"},d.a.createElement(f.a,{triggerBefore:!0,isOpened:!1,trigger:d.a.createElement("div",{className:"summary-agency-title"},r("For agencies"),d.a.createElement(m,{iconClassName:"flipping-icon-vertical"}))},d.a.createElement("div",{className:"summary-agency-list"},d.a.createElement("div",{className:"summary-agency-item"},d.a.createElement("div",{className:"summary-agency-item-title"},"".concat(r("Comission")," (").concat(i.commission.percent,"%)")),d.a.createElement("div",{className:"summary-agency-item-sum"},"".concat(Object(O.b)(n(null===(e=i.commission)||void 0===e?void 0:e.value,"sum")))," ",a&&d.a.createElement(s.a,{currencyCode:a.code})," ")),d.a.createElement("div",{className:"summary-agency-item"},d.a.createElement("div",{className:"summary-agency-item-title"},r("To pay")),d.a.createElement("div",{className:"summary-agency-item-sum"},"".concat(Object(O.b)(n(null===i||void 0===i?void 0:i.priceToPay,"sum")))," ",a&&d.a.createElement(s.a,{currencyCode:a.code})))))))):null},C=n(2092),x=(n(2294),function(){var e=Object(E.a)((function(e){var t=e.basketPromo,n=e.basketData;return{data:t.data,fetching:t.fetching,shoppingCartId:n.shoppingCartId}})),t=e.data,n=e.fetching,a=e.shoppingCartId,i=Object(b.c)(c.b).t,l=Object(u.useState)(""),o=Object(r.a)(l,2),s=o[0],m=o[1],p=Object(y.a)(k.basketActions).actions;return d.a.createElement("div",null,d.a.createElement(f.a,{triggerBefore:!0,trigger:d.a.createElement("span",{className:"link"},i("Do you have a promocode"),"?")},d.a.createElement("div",null,d.a.createElement("div",{className:"basket-promocode"},d.a.createElement(C.a,{placeholder:i("Discount code"),value:s,onChange:function(e){m(e.target.value)},disabled:t&&!0===t.isValid}),d.a.createElement(v.c,{loading:n,disabled:!s||t&&!0===t.isValid,onClick:function(){p.checkPromoCode({shoppingCartId:a,code:s})}},i("Check code"))),t&&!1===t.isValid&&d.a.createElement("p",{className:"text-red"},i("Your discount code is not valid")),t&&!0===t.isValid&&d.a.createElement("p",{className:"text-green"},i("Success")))))}),T=n(42),w=n(47),F=n(62),S=n(63),I=function(e){Object(S.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).timer=void 0,e.state={time:e.props.initialTime||0},e.setTimer=function(){e.state.time>0&&clearInterval(e.timer),e.timer=setInterval((function(){e.setState((function(t){return e.props.onTimeChange&&e.props.onTimeChange(t.time-1),{time:t.time-1}}))}),1e3)},e}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"componentDidUpdate",value:function(e){this.props.resetCount!==e.resetCount&&(this.setState({time:e.initialTime}),this.setTimer())}},{key:"componentWillUpdate",value:function(e,t){0===t.time&&clearInterval(this.timer)}},{key:"render",value:function(){var e=this.state.time,t=Math.floor(e/60),n=e%60;return d.a.createElement("div",{className:"timer"},t+":"+(n>9?n:"0"+n))}}]),n}(u.PureComponent),A=function(e){var t=e.onExpired,n=e.onResetTimer,l=Object(b.c)(c.b).t,o=Object(u.useState)({time:1800,resetCount:0}),s=Object(r.a)(o,2),m=s[0],f=s[1];return d.a.createElement("div",{className:"summary-timer",style:{backgroundColor:function(e,t){var n=Math.floor(200*(1-e/t)),a=Math.floor(e/t*200);return"rgb(".concat(n,", ").concat(a,", 0)")}(m.time,1800)}},d.a.createElement(i.a,{className:"icon-fire",icon:"fire"}),d.a.createElement("div",{className:"time"},d.a.createElement(I,{initialTime:1800,resetCount:m.resetCount,onTimeChange:function(e){0===e&&(null===t||void 0===t||t()),f((function(t){return Object(a.a)({},t,{time:e})}))}}),d.a.createElement("div",{className:"label"},m.time>0?l("Price is valid"):l("Price is not valid"))),d.a.createElement("span",{className:"icon-reset-timer ".concat(0!==m.time?"invisible":""),onClick:function(){f((function(e){return Object(a.a)({},e,{resetCount:e.resetCount+1})})),null===n||void 0===n||n()}},d.a.createElement(i.a,{icon:"sync-alt"})))},D=n(1034),M=n(39),P=function(){var e,t,n,a,r,i,o,m,f,v,p=Object(u.useContext)(N.a),h=p.extractPrice,g=p.activeCurrency,E=Object(b.c)(c.b).t,y=Object(M.useSelector)((function(e){return e.basketData.price}),M.shallowEqual);return y?d.a.createElement("div",{className:"summary-container"},d.a.createElement("div",{className:"summary-list"},d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},E("Tour Package")),d.a.createElement("div",{className:"summary-list-item-sum"},"".concat((null===(e=y.details)||void 0===e?void 0:e.packet)&&Object(O.b)(h(null===(t=y.details)||void 0===t||null===(n=t.packet)||void 0===n?void 0:n.price,"sum")))," ",g&&d.a.createElement(s.a,{currencyCode:g.code,size:14})),d.a.createElement("ul",{className:"summary-list-item-full-width"},null===(a=y.details)||void 0===a||null===(r=a.packet)||void 0===r||null===(i=r.services)||void 0===i?void 0:i.map((function(e){return d.a.createElement(R,{key:e.id,priceItem:e})})))),null===(o=y.details)||void 0===o||null===(m=o.addServices)||void 0===m?void 0:m.map((function(e,t){return d.a.createElement("div",{key:t,className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},e.name),d.a.createElement("div",{className:"summary-list-item-sum"},d.a.createElement("span",null,h(e.price,"sum")>0?"+".concat(Object(O.b)(h(e.price,"sum"))):Object(O.b)(h(e.price,"sum"))," "),g&&d.a.createElement(s.a,{currencyCode:g.code})))})),d.a.createElement(l.a,{themes:l.b.mouzenidis},d.a.createElement(d.a.Fragment,null,null===(f=y.details)||void 0===f||null===(v=f.discounts)||void 0===v?void 0:v.map((function(e){return d.a.createElement("div",{key:e.code,className:"summary-list-item"},d.a.createElement("div",{className:"summary-list-item-title"},e.name),d.a.createElement("div",{className:"summary-list-item-sum"},d.a.createElement("span",null,h(e.price,"sum")>0?"+".concat(Object(O.b)(h(e.price,"sum"))):Object(O.b)(h(e.price,"sum"))," "),g&&d.a.createElement(s.a,{currencyCode:g.code})))}))))))):null},R=function(e){var t=e.priceItem;return!!t.description?d.a.createElement("li",null,d.a.createElement("span",null,t.name.toLowerCase(),d.a.createElement(D.a,{title:d.a.createElement("div",null,t.description)},d.a.createElement("span",null,d.a.createElement(i.a,{className:"link small m-l-5",icon:"info-circle"}))))):d.a.createElement("li",null,t.name.toLowerCase())},_=function(){var e=Object(u.useContext)(N.a),t=e.extractPrice,n=e.activeCurrency,a=Object(b.c)(c.b).t,r=Object(M.useSelector)((function(e){return{price:e.basketData.price,tour:e.basketData.tour}}),M.shallowEqual),i=r.price,l=r.tour;return d.a.createElement("div",{className:"summary-total"},d.a.createElement("div",{className:"summary-total-title"},d.a.createElement("div",null,a("Price")),d.a.createElement("span",{className:"small grey"},l&&"".concat(a("Your tour for")," ").concat(l.nights," ").concat(a("nights")))),d.a.createElement("div",{className:"summary-total-info"},d.a.createElement("div",{className:"summary-total-info-price text-orange"},Object(O.b)(t(null===i||void 0===i?void 0:i.priceTotal,"sum"))," ",n&&d.a.createElement(s.a,{currencyCode:n.code}))))},B=n(12),V=n.n(B),z=n(2090),H=n(140),L=n(21),q=n(2233),U=n(2222),Y=n(2223),G=n(2224),K=n(2337),W=n(2370),X=n(2089),Z=n(1033),J=function(e){var t=e.confirm,n=e.cancel,i=Object(u.useState)({fetching:!1,reasons:[],selectedReason:void 0,reasonText:""}),l=Object(r.a)(i,2),o=l[0],s=l[1],m=function(e){var t,n;return null===(t=o.reasons)||void 0===t||null===(n=t.find((function(t){return t.id===e})))||void 0===n?void 0:n.isCustom};Object(u.useEffect)((function(){s((function(e){return Object(a.a)({},e,{fetching:!0})})),X.a.get("".concat(Z.b,"/orders/cancellation-reasons"),null).then((function(e){s((function(t){return Object(a.a)({},t,{fetching:!1,reasons:Object(L.a)(e.data)})}))})).catch((function(){s((function(e){return Object(a.a)({},e,{fetching:!1})}))}))}),[]);var f=Object(u.useMemo)((function(){return!!o.fetching||(!(!o.selectedReason||!m(o.selectedReason)||o.reasonText)||!o.selectedReason)}),[o.selectedReason,o.reasonText,o.fetching]),h=Object(b.c)(c.a).t,g=function(){var e=null;if(o.selectedReason&&m(o.selectedReason))e=o.reasonText;else{var n=o.reasons.find((function(e){return e.id===o.selectedReason}));e=null===n||void 0===n?void 0:n.name}t({reason:e,reasonId:o.selectedReason})};return d.a.createElement(q.a,{modalTitle:h("Request cancellation"),modalFooter:function(e){var t=e.closeModal;return d.a.createElement(U.a,null,d.a.createElement(Y.a,null,d.a.createElement(G.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement(v.c,{color:"dark",plain:!0,onClick:t},h("Cancel"))," ",d.a.createElement(v.c,{type:"button",color:"success",onClick:g,disabled:f},h("Confirm"))))))},onClose:n},d.a.createElement(U.a,null,d.a.createElement(Y.a,{className:"m-b-15"},d.a.createElement(G.a,{lg:12},h("Do you want to send a cancellation request"),"?")),d.a.createElement(Y.a,null,d.a.createElement(G.a,{lg:12},h("Choose a reason"),":")),d.a.createElement(Y.a,null,d.a.createElement(G.a,{lg:12},o.reasons&&d.a.createElement(K.a,{valueKey:"id",labelKey:"name",options:o.reasons,onChange:function(e){s((function(t){return Object(a.a)({},t,{selectedReason:e})}))}}),o.selectedReason&&m(o.selectedReason)&&d.a.createElement(W.a,{className:"m-t-5",value:o.reasonText,onChange:function(e){var t;"string"===typeof(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)&&s((function(t){return Object(a.a)({},t,{reasonText:e.target.value})}))}}))),o.fetching&&d.a.createElement(p.a,null)))},Q=function(){var e,t,n,i,l,p,h,g=Object(H.e)(),y=Object(u.useContext)(N.a),j=y.extractPrice,C=y.activeCurrency,x=Object(u.useState)({canceled:!1,showConfirmDialog:!1}),T=Object(r.a)(x,2),w=T[0],F=T[1],S=Object(M.useDispatch)(),I=Object(b.c)(c.b).t,A=Object(E.a)((function(e){return{payment:e.basketData.payment,isPreeBooking:e.order.isPreeBooking,order:e.order.order}})),D=A.payment,P=A.isPreeBooking,R=A.order;return d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"summary-orders summary-agency"},d.a.createElement(f.a,{isOpened:!0,className:"m-b-15",triggerBefore:!0,trigger:d.a.createElement("div",{className:"summary-agency-title"},I("Payment"),d.a.createElement(m,{isOpened:!0,iconClassName:"flipping-icon-vertical"}))},d.a.createElement("div",{className:"p-t-10 p-b-10"},(null===D||void 0===D||null===(e=D.avia)||void 0===e?void 0:e.timeLimit)&&j(null===D||void 0===D?void 0:D.avia,"sum")?d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Airline Ticketing")),d.a.createElement("div",{className:"small grey"},"".concat(I("pay_up_to")," ").concat(V()(null===D||void 0===D||null===(t=D.avia)||void 0===t?void 0:t.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(null===D||void 0===D||null===(n=D.avia)||void 0===n?void 0:n.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(D&&Object(O.b)(j(null===D||void 0===D?void 0:D.avia,"sum")))," ",C&&d.a.createElement(s.a,{currencyCode:C.code}))):null,null===D||void 0===D||null===(i=D.schedule)||void 0===i?void 0:i.map((function(e){return d.a.createElement("div",{key:e.order,className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,"".concat(I(e.textKey)," ").concat(e.percent?"(".concat(e.percent,"%)"):"")),e.timeLimit&&d.a.createElement("div",{className:"small grey"},"".concat(I("until")," ").concat(V()(e.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(e.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(j(e,"sum"))||0)," ",C&&d.a.createElement(s.a,{currencyCode:C.code})))})),(null===D||void 0===D?void 0:D.paid)&&d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Paid"))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(j(D.paid,"sum"))," ")," ",C&&d.a.createElement(s.a,{currencyCode:C.code}))),(null===D||void 0===D?void 0:D.debt)&&d.a.createElement("div",{className:"summary-orders-item"},d.a.createElement("div",{className:"summary-orders-item-title"},d.a.createElement("div",null,I("Debt")),D.debt.timeLimit&&d.a.createElement("div",{className:"small grey"},"".concat(I("until")," ").concat(V()(D.debt.timeLimit).format(null===g||void 0===g?void 0:g.dateFormat)," ").concat(V()(D.debt.timeLimit).format("HH:mm")))),d.a.createElement("div",{className:"summary-orders-item-sum"},"".concat(Object(O.b)(j(D.debt,"sum"))||0)," ",C&&d.a.createElement(s.a,{currencyCode:C.code}))))),P&&d.a.createElement(v.c,{type:"button",fullWidth:!0,color:"primary",onClick:function(){S(k.ordersActions.confirmBooking(R.code))}},I("Confirm booking")),D&&j(D.debt,"sum")>0&&D.allowPayment&&d.a.createElement("a",{rel:"noopener noreferrer",href:Object(z.a)("/payments/".concat(R.code)),target:"_blank"},d.a.createElement(v.c,{type:"button",fullWidth:!0,color:"success"},I("Pay"))),2!==(null===R||void 0===R||null===(l=R.status)||void 0===l?void 0:l.id)&&d.a.createElement("div",{className:"order-page-cancelation m-t-5"},d.a.createElement(v.c,{type:"button",fullWidth:!0,color:"danger",disabled:w.canceled,onClick:function(){F((function(e){return Object(a.a)({},e,{showConfirmDialog:!0})}))}},w.canceled&&I("Cancellation request is sent"),!w.canceled&&0===(null===(p=R.cancellationStatus)||void 0===p?void 0:p.cancellationStatus)&&I("Cancellation Request"),!w.canceled&&1===(null===(h=R.cancellationStatus)||void 0===h?void 0:h.cancellationStatus)&&I("Cancel order")),w.showConfirmDialog&&d.a.createElement(J,{confirm:function(e){S(k.ordersActions.cancelOrder(Object(a.a)({orderCode:R.code},e))),F((function(e){return Object(a.a)({},e,{showConfirmDialog:!1,canceled:!0})}))},cancel:function(){F((function(e){return Object(a.a)({},e,{showConfirmDialog:!1})}))}}))))},$=(n(2278),function(e){var t,n=e.submitAllowed,O=void 0!==n&&n,C=e.timer,T=void 0===C||C,w=e.book,F=void 0===w||w,S=e.submitForm,I=e.showPromo,D=e.style,M=e.isValid,R=Object(u.useContext)(N.a),B=R.activeCurrency,V=R.currencies,z=R.onChangeCurrency,H=Object(b.c)(c.b).t,L=Object(u.useState)({summaryOpened:F}),q=Object(r.a)(L,2),U=q[0],Y=q[1],G=Object(E.a)((function(e){return{shoppingCartId:e.basketData.shoppingCartId,basketPageData:e.basketPageData,auth:e.auth,fetching:e.basketActualization.fetching||e.basketDiscount.fetching||e.basketData.fetching,shoppingCart:e.basketData.shoppingCart,tour:e.basketData.tour,price:e.basketData.price}})),K=G.shoppingCartId,W=G.basketPageData,X=G.auth,Z=G.fetching,J=G.shoppingCart,$=Object(y.a)(Object(a.a)({},k.basketActions,{},k.authActions)).actions,ee=Object(u.useMemo)((function(){return 0===(null===J||void 0===J?void 0:J.contractType)?H("Agency contract"):1===(null===J||void 0===J?void 0:J.contractType)?H("Direct contract"):""}),[null===J||void 0===J?void 0:J.contractType]),te=Object(u.useMemo)((function(){var e;return(null===(e=W.bookingBlockedByCause)||void 0===e?void 0:e.length)>0}),[null===W||void 0===W?void 0:W.bookingBlockedByCause]);return d.a.createElement("div",{className:"summary",style:Object(a.a)({},D)},F&&J&&"undefined"!==typeof J.contractType&&d.a.createElement(g.a,{allowedRoles:[h.a.DIRECT_PARTNER]},d.a.createElement(o.a,{className:"dashboard"},d.a.createElement("div",{className:"is-partner"},d.a.createElement("span",{className:"is-partner-icon"},d.a.createElement(i.a,{icon:"handshake"})),d.a.createElement("span",null,ee)))),T&&d.a.createElement(A,{onExpired:function(){$.basketExpired(!0)},onResetTimer:function(){K&&$.renewBasket(K)}}),d.a.createElement(o.a,{className:"dashboard"},d.a.createElement(l.a,{themes:l.b.mouzenidis},d.a.createElement("div",{className:"summary-switch"},d.a.createElement("div",null,d.a.createElement("span",{className:"m-r-5"},H("Currency")),d.a.createElement("span",{className:"summary-switch-items"},null===V||void 0===V?void 0:V.map((function(e){return d.a.createElement("div",{key:e.code,className:"summary-switch-item ".concat(B&&B.type===e.type?"active":"link"),onClick:z(e)},d.a.createElement(s.a,{currencyCode:e.code,size:12}))})))),d.a.createElement("div",{className:"summary-switch-btn ".concat(U.summaryOpened?"opened":""),onClick:function(){Y((function(e){return Object(a.a)({},e,{summaryOpened:!e.summaryOpened})}))}},d.a.createElement(m,{isOpened:U.summaryOpened,iconClassName:"flipping-icon-vertical"})))),d.a.createElement(f.a,{isOpened:U.summaryOpened},d.a.createElement(P,null)),d.a.createElement(_,null),I&&(null===J||void 0===J?void 0:J.allowPromoCode)&&d.a.createElement("div",{className:"m-t-5"},d.a.createElement(g.a,{allowedRoles:[h.a.TOURIST,h.a.EMPLOYEE],unallowedRoles:[h.a.AGENCY]},d.a.createElement(x,null)))),d.a.createElement(j,null),!F&&(null===J||void 0===J||null===(t=J.allowedActions)||void 0===t?void 0:t.viewPayments)&&d.a.createElement(Q,null),F&&d.a.createElement(g.a,{allowedRoles:[h.a.AGENCY],unallowedRoles:[h.a.READONLY,h.a.TOURIST,h.a.AGENCY]},d.a.createElement("div",{className:"summary-total-button-group"},d.a.createElement(v.c,{type:"button",onClick:function(){X.user&&X.user.isAuthenticated?null===S||void 0===S||S():$.authorize({source:"booking"})},disabled:!(O&&M&&!te)},H("Book")))),Z&&d.a.createElement(p.a,null))})},1040:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=100,r=function(){return a+=1},i=function(e){a=100;var t=function(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{lastName:r(),firstName:r(),birthdate:r(),citizenshipId:r(),passport:r(),pasportExpiration:r(),taxNumber:r(),order:e.order}})):[{lastName:r(),firstName:r(),birthdate:r(),citizenshipId:r(),passport:r(),pasportExpiration:r(),taxNumber:r(),order:0}]}(e.tourists);return{tourists:t,emergencyPhone:r(),officeId:r(),comment:r(),agree:r(),userAgreement:r(),prebooking:r(),booking:r(),tourist:function(e){return null===t||void 0===t?void 0:t.find((function(t){return t.order===e}))}}}},2095:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(57),i=n(258),c=n(2107),l=n(2279),o=n(2215),s=n(2326),u=n(1034),d=n(2246),m=n(0),f=n.n(m),v=n(17),p=n(79),h=n.n(p),b=n(39),g=n(75),E=n(2088),y=n(8),k=n(21),O=n(139),N=n(155),j=n(264),C=n(2304),x=n(2305),T=n(2306),w=n(2309),F=n(2105),S=n(2225),I=n(106),A=n(254),D=n(1036),M=n(23),P=n(2235),R=n(2098),_=n(12),B=n.n(_),V=n(33),z=n(2262),H=function(e,t){return t},L=Object(V.a)([function(e){return e.basketInsurance.insurance}],(function(e){return e.map((function(e){return Object(a.a)({},e,{variants:e.variants&&e.variants.map((function(e){return{label:e.name,value:e.id}}))})}))})),q=Object(V.a)([z.e,function(e){return e.basketInsurance.selectedInsurance},H],(function(e,t,n){return t.map((function(t){var n,a,r,i=null===e||void 0===e||null===(n=e.tourists)||void 0===n?void 0:n.filter((function(e){return e.services.some((function(e){return e===t.id||t.parentId}))}));return{name:null===t||void 0===t||null===(a=t.subService)||void 0===a?void 0:a.name,touristIds:null===i||void 0===i?void 0:i.map((function(e){return e.id})),dateBegin:t.dateBegin,dateEnd:t.dateEnd,subService:null===(r=t.subService1)||void 0===r?void 0:r.name,groupId:t.groupId}})).filter((function(e){var t;return null===e||void 0===e||null===(t=e.touristIds)||void 0===t?void 0:t.includes(n)}))})),U=Object(V.a)([function(e){return e.basketInsurance.selectedInsuranceServices},H],(function(e,t){return e.filter((function(e){return e.touristId===t}))})),Y=n(2214),G=n(2213),K=n(140),W=function(e){var t=e.touristId,n=e.editInsurances,a=Object(Y.a)((function(e){return{insurance:L(e),selectedInsurance:q(e,t),selectedInsuranceServices:U(e,t),shoppingCartId:e.basketData.shoppingCartId}})),r=a.insurance,c=a.selectedInsurance,l=a.selectedInsuranceServices,o=a.shoppingCartId,s=Object(G.a)(y.basketInsuranceActions).actions,d=Object(v.c)(i.b).t,p=Object(K.e)(),h=function(e){var t=l.find((function(t){return t.groupId===e}));if(!t){var n,a=r.find((function(t){return t.groupId===e}));return(null===a||void 0===a||null===(n=a.variants)||void 0===n?void 0:n.length)&&a.variants[0].value}return null===t||void 0===t?void 0:t.variantId},b=function(e){s.addTouristInsurance({shoppingCartId:o,service:e})},g=function(e){s.removeTouristInsurance({shoppingCartId:o,service:e})},E=Object(m.useMemo)((function(){var e=c.map((function(e){return e.name})).join(", ");return e?": ".concat(e):""}),[c]),k=function(e){return function(n){if(n.target.checked){var a,i=r.find((function(t){return t.groupId===e})),c=(null===i||void 0===i||null===(a=i.variants)||void 0===a?void 0:a.length)&&i.variants[0].value;c&&b({touristId:t,variantId:c,groupId:e})}else{var l=h(e);g({touristId:t,variantId:l,groupId:e})}}},N=function(e){return function(n){b({touristId:t,variantId:n,groupId:e})}},j=Object(m.useMemo)((function(){return 1===(null===l||void 0===l?void 0:l.length)&&(null===r||void 0===r?void 0:r.length)&&n}),[l,r,n]);return((null===r||void 0===r?void 0:r.length)||(null===c||void 0===c?void 0:c.length))&&(n||(null===c||void 0===c?void 0:c.length))?f.a.createElement("div",{className:"basket-tourist-form-visa"},f.a.createElement(P.a,{label:d("Add insurance"),triggerBefore:!0,trigger:f.a.createElement(u.a,{title:(null===c||void 0===c?void 0:c.length)?"".concat(d("Insurance")).concat(E):d("Add insurance")},f.a.createElement(I.c,{size:"sm",type:"button",color:(null===c||void 0===c?void 0:c.length)?"primary":"default",pluginAfter:j?f.a.createElement(O.a,{onClick:function(){var e=l||[],n=Object(M.a)(e,1)[0],a=h(null===n||void 0===n?void 0:n.groupId);g({touristId:t,variantId:a,groupId:null===n||void 0===n?void 0:n.groupId})},icon:"times"}):void 0},(null===c||void 0===c?void 0:c.length)?f.a.createElement("span",{className:"basket-tourist-form-visa-button-text"},"".concat(d("Insurance")).concat(E)):d("Add insurance"))," ")},null===r||void 0===r?void 0:r.map((function(e,t){var a,r;return f.a.createElement("div",{key:"ins_".concat(t),className:"basket-tourist-form-visa-dropdown"},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(S.a,{label:e.name,disabled:!n,checked:(r=e.groupId,c.some((function(e){return e.groupId===r}))),onChange:k(e.groupId)}),(null===e||void 0===e||null===(a=e.variants)||void 0===a?void 0:a.length)&&f.a.createElement(R.b,{label:d("Insurance cover"),clearable:!1,disabled:!n,value:h(e.groupId),options:e.variants,onChange:N(e.groupId)}),f.a.createElement("div",{className:"services-timeline-date m-t-10"},B()(e.dateBegin).format(p.dateFormat)," -"," ",B()(e.dateEnd).format(p.dateFormat))))})))):null},X=n(2217),Z=Object(V.a)((function(e,t){return e.basketTouristDocuments.touristsDocumentTypes.filter((function(e){return e.countryId===t.values.citizenshipId}))}),(function(e){return e})),J=Object(b.connect)((function(e,t){return{documentTypes:Z(e,t)}}),null)((function(e){var t=e.member,n=e.documentTypes,a=e.forwardFocusRef,r=e.editable,c=e.values,l=e.form,o=function(e){return function(e){if(null===e||void 0===e?void 0:e.mask)return{mask:e.mask.split(",").map((function(e){return" "===e?e:new RegExp(e)})),splitted:e.mask.split(","),id:e.documentTypeId}}(e)},s=Object(v.c)(i.b).t,u=Object(m.useContext)(D.a),p=Object(m.useState)(void 0),h=Object(M.a)(p,2),b=h[0],g=h[1];Object(m.useEffect)((function(){var e=function(){if(null===n||void 0===n?void 0:n.length){return(c.documentType?n.find((function(e){return e.documentTypeId===c.documentType&&e.countryId===c.citizenshipId})):n.find((function(e){return e.isDefault&&e.countryId===c.citizenshipId})))||null}return null}();g(o(e)),e&&e.documentTypeId!==c.documentType&&E(e.documentTypeId)}),[c.documentType,n]);var E=function(e){e||l.setFieldValue("".concat(t,".passport"),""),l.setFieldValue("".concat(t,".documentType"),e)};return f.a.createElement(d.b,{name:"".concat(t,".passport")},(function(e){var i,l;return(null===b||void 0===b||null===(i=b.splitted)||void 0===i?void 0:i.length)&&(e.field.onChange=function(e,t,n,a,r){return function(i){var c=i.target.value.split(n),l=c.length?1===c.length?"":c[0]:"",o=c.length?1===c.length?c[0]:c[1]:"";l&&l.length>a&&(l=l.substring(0,a)),o&&o.length>r&&(o=o.substring(0,r)),t.setFieldValue(e,l?"".concat(l).concat(n).concat(o):o)}}("".concat(t,".passport"),e.form,b.splitted[0],parseInt(b.splitted[1],10),parseInt(b.splitted[2],10))),f.a.createElement(x.a,{tabIndex:null===(l=u.tourist(c.order))||void 0===l?void 0:l.passport,form:e.form,field:e.field,disabled:!r,forwardFocusRef:a,label:r&&n&&n.length?f.a.createElement(X.a,{className:"passport-dropdown",valueKey:"documentTypeId",labelKey:"documentTypeName",value:c.documentType,onChange:E,items:n}):f.a.createElement("div",null,s("Passport")),mask:null===b||void 0===b?void 0:b.mask,selectAllOnFocus:!0})}))})),Q=n(2207),$={1:"AnketaVisa",2:"BiometricConfirmation",3:"AnketaProvisa",4:"ProvisaDocument"},ee=function(e){var t=e.touristId,n=e.visualStatus,a=Object(K.e)(),r=Object(v.c)(i.b).t,c=Object(b.useSelector)((function(e){var n,a=null===(n=e.basketVisas.visaCenters)||void 0===n?void 0:n.find((function(e){return e.touristId===t}));return{visaDocuments:null===a||void 0===a?void 0:a.visaDocuments,visaStatus:null===a||void 0===a?void 0:a.visaStatus}}),b.shallowEqual),l=c.visaDocuments,o=c.visaStatus,s=Object(m.useMemo)((function(){return(null===o||void 0===o?void 0:o.hasErrors)&&(null===o||void 0===o?void 0:o.messages)?o.messages.join():0===n&&(null===o||void 0===o?void 0:o.dateFromEmbassy)?"".concat(r("Visa received")," ").concat(B()(o.dateFromEmbassy).format(a.dateFormat)):2===n&&(null===o||void 0===o?void 0:o.visaReject)?r("Refusal of a visa"):1===n?(null===o||void 0===o?void 0:o.dateToEmbassy)?"".concat(r("Documents sent to the consulate")," ").concat(B()(o.dateToEmbassy).format(a.dateFormat)):!(null===o||void 0===o?void 0:o.dateToEmbassy)&&(null===o||void 0===o?void 0:o.dateReceived)?"".concat(r("Documents for registration received")," ").concat(B()(o.dateReceived).format(a.dateFormat)):r("Waiting for the visa documents"):void 0}),[o,n]);return o&&s?f.a.createElement("div",{className:"basket-tourist-form-status small"},f.a.createElement("span",{className:"orange"},s),null===l||void 0===l?void 0:l.map((function(e,t){return f.a.createElement("a",{key:t,className:"link small dotted m-r-5",href:"".concat(e.isOldSite?"https://online215.mouzenidis-travel.ru":Object(Q.a)()).concat(e.documentLink),target:"_blank",rel:"noopener noreferrer"},r($[e.type]))}))):null},te=n(2332),ne=function(e){var t=e.touristId,n=e.values,a=e.member,r=e.onSelectVisa,c=e.onDeleteVisa,l=e.setFieldValue,o=e.onDeleteBiometry,s=e.onSelectBiometry,u=Object(v.c)(i.b).t,p=Object(b.useSelector)((function(e){var n,a,r=null===(n=e.basketVisas.visaCenters)||void 0===n?void 0:n.find((function(e){return e.touristId===t})),i=null===(a=e.basketVisas.mobileBiometrics)||void 0===a?void 0:a.find((function(e){return e.touristId===t}));return{visaOptions:null===r||void 0===r?void 0:r.variants,mobileBiometricOptions:null===i||void 0===i?void 0:i.variants,visaCenters:e.basketVisas.visaCenters}}),b.shallowEqual),h=p.visaOptions,g=p.mobileBiometricOptions,E=p.visaCenters,y=Object(m.useMemo)((function(){var e=null===h||void 0===h?void 0:h.find((function(e){return e.id===n.visaCenter}));return(null===e||void 0===e?void 0:e.name)||""}),[h,n.visaCenter]);return(n.visa||n.editVisas)&&E.length?f.a.createElement("div",{className:"basket-tourist-form-visa"},f.a.createElement(P.a,{label:u("Add visa"),triggerBefore:!0,trigger:f.a.createElement(I.c,{type:"button",size:"sm",color:n.visaCenter&&n.visa?"primary":"default",pluginAfter:n.editVisas&&n.visaCenter&&n.visa&&f.a.createElement("span",{onClick:function(e){e.stopPropagation(),(null===n||void 0===n?void 0:n.visaCenter)&&(null===c||void 0===c||c({selectedVariants:[n.visaCenter],selectedMobileBiometryVariants:n.biometry?[n.biometry]:[]})),null===l||void 0===l||l("".concat(a,".isBiometry"),!1),null===l||void 0===l||l("".concat(a,".visa"),!1),null===l||void 0===l||l("".concat(a,".biometry"),null)}},f.a.createElement(O.a,{icon:"times"}))},n.visaCenter&&n.visa?"".concat(u("Visa application"),": ").concat(y):u("Add visa"))},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown"},f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(d.b,{label:u("Apply for a visa"),name:"".concat(a,".visa"),onChange:function(e){e.target.checked?(null===n||void 0===n?void 0:n.visaCenter)&&(null===r||void 0===r||r({selectedVariants:[n.visaCenter]})):((null===n||void 0===n?void 0:n.visaCenter)&&(null===c||void 0===c||c({selectedVariants:[n.visaCenter],selectedMobileBiometryVariants:n.biometry?[n.biometry]:[]})),null===l||void 0===l||l("".concat(a,".isBiometry"),!1),null===l||void 0===l||l("".concat(a,".biometry"),null))},component:te.a,disabled:!n.editVisas}),f.a.createElement(d.b,{name:"".concat(a,".visaCenter"),label:u("Visa Center"),valueKey:"id",labelKey:"name",placeholder:u("Select"),onChange:function(e){null===r||void 0===r||r({selectedVariants:[e]})},options:h,clearable:!1,component:w.a,disabled:!n.editVisas||!n.visa})),(null===g||void 0===g?void 0:g.length)>0&&f.a.createElement("div",{className:"basket-tourist-form-visa-dropdown-item"},f.a.createElement(d.b,{label:u("Mobile biometry"),name:"".concat(a,".isBiometry"),component:te.a,onChange:function(e){e.target.checked||(null===l||void 0===l||l("".concat(a,".biometry"),null),(null===n||void 0===n?void 0:n.biometry)&&(null===o||void 0===o||o({selectedVariants:[n.biometry]})))},disabled:!n.editMobileBiometrics}),f.a.createElement(d.b,{name:"".concat(a,".biometry"),valueKey:"id",labelKey:"name",clearable:!1,label:u("Choose a city"),placeholder:u("Select"),onChange:function(e){null===s||void 0===s||s({selectedVariants:[{serviceId:e}]})},options:g,component:w.a,disabled:!n.editMobileBiometrics||!n.isBiometry}))))):null},ae=function(e){var t=e.tourist,n=Object(v.c)([i.b,i.f]).t,a=Object(m.useMemo)((function(){switch(t.ageType){case 0:return"".concat(n("Adult"));case 1:return"".concat(n("Child")," ").concat(n("".concat(i.f,":childWithCountAges"),{count:t.age}));case 2:return"".concat(n("Infant")," ").concat(n("".concat(i.f,":childWithCountAges"),{count:t.age}));default:return"".concat(n("Adult"))}}),[t.age,t.ageType]);return Object(m.useMemo)((function(){return f.a.createElement("div",{className:"tourist-age"},a)}),[a])},re=(n(2260),function(e){var t,n,a,c,l,o=e.fields,s=e.form,u=e.member,p=e.values,h=e.getDocumentTypes,b=e.citizenships,g=e.citizenshipsLoading,E=e.booking,y=e.attributes,M=e.forwardFocusRef,P=e.visasFetching,R=Object(r.a)(e,["fields","form","member","values","getDocumentTypes","citizenships","citizenshipsLoading","booking","attributes","forwardFocusRef","visasFetching"]),_=Object(v.c)(i.b),B=_.t,V=_.i18n,z=Object(K.e)(),H=Object(m.useContext)(D.a),L=function(e){return function(t){var n,a=null===(n=t.target.value)||void 0===n?void 0:n.toUpperCase();s.setFieldValue(e,a)}},q=Object(N.a)((function(e){return!(o.length>0)||o.findIndex((function(t){return t.code===e}))>-1}));return f.a.createElement(f.a.Fragment,null,f.a.createElement(ae,{tourist:p}),f.a.createElement(f.a.Fragment,null,f.a.createElement(d.b,{name:"".concat(u,".id"),style:{display:"none"}}),q("gender")&&f.a.createElement("div",{className:"basket-tourist-form-item gender"},f.a.createElement(j.a,null,B("Gender")),f.a.createElement(d.b,{name:"".concat(u,".gender"),component:C.a,disabled:!p.editable,type:"default",active:p.gender||"m",options:[{value:"m",label:B("M")},{value:"f",label:B("F")}]})),q("lastName")&&f.a.createElement("div",{className:"basket-tourist-form-item surname"},f.a.createElement(d.b,{name:"".concat(u,".lastName")},(function(e){var t;return e.field.onChange=L("".concat(u,".lastName")),f.a.createElement(x.a,{tabIndex:null===(t=H.tourist(p.order))||void 0===t?void 0:t.lastName,form:e.form,field:e.field,disabled:!p.editable,forwardFocusRef:M,type:"text",label:B("Last name")})})),p.isTaxNumber&&f.a.createElement(d.b,{name:"".concat(u,".taxNumber"),tabIndex:null===(t=H.tourist(p.order))||void 0===t?void 0:t.taxNumber,disabled:!p.editable,forwardFocusRef:M,type:"text",label:B("Tax number"),component:x.a})),q("firstName")&&f.a.createElement("div",{className:"basket-tourist-form-item name"},f.a.createElement(d.b,{name:"".concat(u,".firstName")},(function(e){var t;return e.field.onChange=L("".concat(u,".firstName")),f.a.createElement(x.a,{tabIndex:null===(t=H.tourist(p.order))||void 0===t?void 0:t.firstName,form:e.form,field:e.field,disabled:!p.editable,forwardFocusRef:M,type:"text",label:B("Name")})}))),q("birthdate")&&f.a.createElement("div",{className:"basket-tourist-form-item date-of-birth"},f.a.createElement(d.b,{locale:V.language,name:"".concat(u,".birthdate"),component:T.a,tabIndex:null===(n=H.tourist(p.order))||void 0===n?void 0:n.birthdate,label:B("Date of birth"),mask:z.dateFormatMask,clearable:!1,format:z.dateFormat,placeholder:z.dateFormat,disabled:!p.editable,minDate:p.birthDateMin?new Date(p.birthDateMin):void 0,maxDate:p.birthDateMax?new Date(p.birthDateMax):void 0,year:!0,forwardFocusRef:M})),q("citizenshipId")&&f.a.createElement("div",{className:"basket-tourist-form-item citizenship"},f.a.createElement(d.b,{tabIndex:null===(a=H.tourist(p.order))||void 0===a?void 0:a.citizenshipId,label:B("Citizenship"),name:"".concat(u,".citizenshipId"),forwardFocusRef:M,valueKey:"id",labelKey:"name",placeholder:B("Select"),loading:g,options:b,clearable:!1,component:w.a,disabled:!p.editable,onChange:function(e){e&&h&&h(e,p.id),s.setFieldValue("".concat(u,".citizenshipId"),e)}})),q("passport")&&f.a.createElement("div",{className:"basket-tourist-form-item passport"},f.a.createElement(J,Object.assign({},R,{form:s,forwardFocusRef:M,values:p,member:u,editable:p.editable}))),q("pasportExpiration")&&f.a.createElement("div",{className:"basket-tourist-form-item passport-date"},f.a.createElement(d.b,{name:"".concat(u,".pasportExpiration"),component:T.a,tabIndex:null===(c=H.tourist(p.order))||void 0===c?void 0:c.pasportExpiration,label:B("Valid until"),mask:z.dateFormatMask,clearable:!1,format:z.dateFormat,placeholder:z.dateFormat,year:!0,disabled:!p.editable,minDate:p.pasportExpirationMin?new Date(p.pasportExpirationMin):void 0,forwardFocusRef:M})),(null===y||void 0===y?void 0:y.length)?f.a.createElement("div",{className:"basket-tourist-form-item more-options"},f.a.createElement(j.a,{visible:!1},B("More")),f.a.createElement(F.a,{position:"bottom-right",content:f.a.createElement("div",null,f.a.createElement("ul",{className:"nostyles"},y.map((function(e){return f.a.createElement("li",{key:e.id},f.a.createElement(S.a,{label:e.name,checked:p.attributeIds.includes(e.id),onChange:(t=e.id,function(e){e.target.checked?s.setFieldValue("".concat(u,".attributeIds"),[].concat(Object(k.a)(p.attributeIds),[t])):s.setFieldValue("".concat(u,".attributeIds"),Object(k.a)(p.attributeIds.filter((function(e){return e!==t}))))}),disabled:!p.editable}));var t}))))},f.a.createElement(I.c,{color:"default"},f.a.createElement(O.a,{icon:"ellipsis-h"})))):null,f.a.createElement("div",{className:"basket-tourist-form-other"},f.a.createElement("div",{className:"basket-tourist-form-actions"},f.a.createElement(ne,Object.assign({},R,{touristId:p.id,member:u,values:p})),P&&f.a.createElement(A.a,{className:"m-r-10",size:16,color:"dark"}),f.a.createElement(W,{touristId:p.id,editInsurances:p.editInsurances})),f.a.createElement("div",{className:"basket-tourist-form-tags"},null===y||void 0===y?void 0:y.filter((function(e){return p.attributeIds.includes(e.id)})).map((function(e){return f.a.createElement("div",{key:e.id,className:"basket-tourist-form-item-tag"},e.name,f.a.createElement("span",null,p.editable&&f.a.createElement(O.a,{icon:"times",onClick:(t=e.id,function(){s.setFieldValue("".concat(u,".attributeIds"),Object(k.a)(p.attributeIds.filter((function(e){return e!==t}))))})})));var t}))),!E&&f.a.createElement(ee,{visualStatus:null===(l=p.status)||void 0===l?void 0:l.visualStatus,touristId:p.id}))))}),ie=n(2221),ce=function(){var e=Object(v.c)(i.b).t;return f.a.createElement(ie.a,{themes:ie.b.mouzenidis},f.a.createElement(h.a,{query:"(max-width: 991px)"},(function(t){return t?f.a.createElement(s.a,{color:"warning",small:!0},"".concat(e("Attention"),"! ").concat(e("For tourists over 65 years there is an")," ")," ","".concat(e("age-specific rate"),".")," "," ".concat(e("The reservation cost will be recalculated"),".")):f.a.createElement(s.a,{color:"warning",small:!0},"".concat(e("Attention"),"! ").concat(e("For tourists over 65 years there is an")," "),f.a.createElement(u.a,{title:f.a.createElement("div",null,"".concat(e("Russia"),": 65 ").concat(e("years old"),"-x2, 70 ").concat(e("years old"),"-x3, 75 ").concat(e("years old"),"-x4. ").concat(e("Ukraine"),": ").concat(e("from")," 70 ").concat(e("years old")," ").concat(e("and")," ").concat(e("older"),"-x2"))},f.a.createElement("div",{className:"dotted link"},"".concat(e("age-specific rate"),".")))," ".concat(e("The reservation cost will be recalculated"),"."))})))};t.default=Object(b.connect)((function(e){var t,n,a;return{touristsFetching:e.basketTouristDocuments.touristsFetching,citizenships:e.basketPageData.citizenships,visasFetching:e.basketVisas.fetching,shoppingCartId:e.basketData.shoppingCartId,fetching:e.basketData.fetching||e.basketVisas.changing||e.basketInsurance.fetching,fields:e.basketData.fields,showBookingCondition:null===(t=e.basketData.shoppingCart)||void 0===t||null===(n=t.metaData)||void 0===n||null===(a=n.services)||void 0===a?void 0:a.showBasketTouristInsuranceInfo}}),(function(e){return{actions:Object(g.bindActionCreators)(Object(a.a)({},y.basketActions,{},y.basketVisasActions),e)}}))((function(e){var t=e.values,n=e.citizenshipsLoading,s=e.booking,u=e.fetching,p=e.touristsFetching,h=e.shoppingCartId,b=e.actions,g=e.showBookingCondition,y=Object(r.a)(e,["values","citizenshipsLoading","booking","fetching","touristsFetching","shoppingCartId","actions","showBookingCondition"]),k=Object(v.c)(i.b).t;Object(m.useEffect)((function(){b.saveFormValues(t)}),[t]);var O=Object(E.a)((function(){t.tourists&&b.setTourists({shoppingCartId:h,tourists:t.tourists})}),100),N=function(e){b.setSelectedVisas(Object(a.a)({shoppingCartId:h},e))},j=function(e){b.deleteSelectedVisas(Object(a.a)({shoppingCartId:h},e))},C=function(e){b.setSelectedMobileBiometrics(Object(a.a)({shoppingCartId:h},e))},x=function(e){b.deleteSelectedMobileBiometrics(Object(a.a)({shoppingCartId:h},e))},T=function(e,t){b.getTouristsDocumentTypes({countryIds:[e],touristId:t})},w=Object(m.useMemo)((function(){return t.tourists.reduce((function(e,t,n){t.index=n;var a=t.roomGroup?t.roomGroup.name+" (".concat(t.roomGroup.index,")"):"",r=e.find((function(e){return e.name===a}));return r?(r.tourists.push(t),e):(e.push({name:a,tourists:[t]}),e)}),[])}),[t.tourists]);return f.a.createElement(c.a,{title:k("Guests"),className:"dashboard basket-tourists"},s&&g&&f.a.createElement(ce,null),t.tourists&&f.a.createElement(d.c,{name:"tourists",render:function(e){return w.map((function(t,a){return f.a.createElement("div",{className:t.name?"":"m-t-10",key:t.name||a},t.name&&f.a.createElement(l.a,{className:"m-t-10",color:"dark",tag:"h2",bordered:!0},t.name),t.tourists.map((function(t){return f.a.createElement("div",{key:t.id,className:"basket-tourist-container"},f.a.createElement("div",{className:"basket-tourist-form"},f.a.createElement(re,Object.assign({},y,e,{onBirthdateChanged:O,onSelectVisa:N,onDeleteVisa:j,onSelectBiometry:C,onDeleteBiometry:x,getDocumentTypes:T,values:t,member:"tourists[".concat(t.index,"]"),booking:s,citizenshipsLoading:n}))),(u||(null===p||void 0===p?void 0:p.includes(t.id)))&&f.a.createElement(o.a,null))})))}))}}))}))},2100:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(258),i=n(106),c=n(2107),l=n(2233),o=n(2215),s=n(12),u=n.n(s),d=n(0),m=n.n(d),f=n(17),v=n(79),p=n.n(v),h=n(39),b=n(75),g=n(23),E=n(8),y=n(21),k=n(33),O=Object(k.a)([function(e,t){return e.selectedFlightService.filter((function(e){return e.flightId===t}))}],(function(e){return e.reduce((function(e,t){var n=e.find((function(e){return e.id===t.id}));return n?[].concat(Object(y.a)(e.filter((function(e){return e.id!==t.id}))),[Object(a.a)({},n,{count:n.count+t.count,totalAmount:n.totalAmount+t.totalAmount})]):e.concat([t])}),[])})),N=Object(k.a)([function(e){return e.flightServiceList}],(function(e){return e.reduce((function(e,t){var n=e.find((function(e){return e.group===t.category}));return n?n.items.push(t):e.push({group:t.category,items:[t],isNeedTranslation:!1,order:t.categoryOrder}),e}),e&&e.length>0?[{group:"All",items:e,isNeedTranslation:!0,order:0}]:[]).sort((function(e,t){return e.order-t.order}))})),j=Object(k.a)([function(e,t){return e.minimalPrices.find((function(e){return e.flightId===t}))}],(function(e){return e})),C=Object(k.a)([function(e){return e.selectedFlightService},function(e){return e.selectedFlightId}],(function(e,t){return e.filter((function(e){return e.flightId===t}))})),x=n(2262),T=n(10),w=n(9),F=n(2222),S=n(2223),I=n(2224),A=n(793),D=n(2226),M=n(2364),P=n(2232),R=n(2237),_=n(139),B=n(14);function V(){var e=Object(T.a)(["\n  padding: 0.5rem 0 0 0;\n  margin-top: 1rem;\n  border-top: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: ",";\n  font-weight: 500;\n  .shop-summary-total-text {\n    text-transform: uppercase;\n  }\n  .shop-summary-total-price {\n    font-weight: 500;\n  }\n"]);return V=function(){return e},e}function z(){var e=Object(T.a)(["\n  .shop-summary-list-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n    margin-bottom: 0.25rem;\n    padding-bottom: 0.25rem;\n    border-bottom: 1px dotted ",";\n    &:last-child {\n      border-bottom: 0;\n    }\n    .shop-summary-list-item-price {\n      color: ",";\n      font-weight: 500;\n    }\n  }\n"]);return z=function(){return e},e}function H(){var e=Object(T.a)(["\n  color: ",";\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.375rem;\n  font-weight: 500;\n  border-bottom: 1px solid ",";\n"]);return H=function(){return e},e}function L(){var e=Object(T.a)(["\n  position: sticky;\n  top: 0;\n  .shop-summary-title {\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.25rem;\n    margin-bottom: 1rem;\n    font-weight: 500;\n  }\n  .shop-summary-empty {\n    text-align: center;\n    padding: 1.5rem 0 0 0;\n    .icon {\n      font-size: 2.5rem;\n      margin-bottom: 1rem;\n      color: ",";\n    }\n  }\n  .shop-summary-empty-title {\n    font-weight: 500;\n    font-size: 1rem;\n    margin-bottom: 0.5rem;\n  }\n  .shop-summary-empty-description {\n    color: ",";\n  }\n"]);return L=function(){return e},e}function q(){var e=Object(T.a)(["\n  .in-flight-item-panel {\n    padding-top: 1rem;\n    .in-flight-item-panel-actions {\n      ul {\n        li {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          border-radius: ",";\n          margin-bottom: 0.5rem;\n          .in-flight-item-tourist-name {\n            flex: 1;\n            border: 1px solid #eee;\n            padding: 0.375rem;\n            margin-right: 0.5rem;\n            border-radius: ",";\n          }\n          .item-panel-number-input {\n            flex: 0 0 150px;\n          }\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}function U(){var e=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  @media (max-width: 768px) {\n    display: block;\n  }\n\n  .in-flight-item-image {\n    img {\n      max-width: 80px;\n      border-radius: ",";\n      @media (max-width: 768px) {\n        max-width: 100%;\n      }\n    }\n  }\n  .in-flight-item-container {\n    flex: 1;\n    display: flex;\n    justify-content: space-between;\n    @media (max-width: 768px) {\n      display: block;\n    }\n    .in-flight-item-info {\n      flex: 1 0 60%;\n      padding: 0 1rem;\n      @media (max-width: 768px) {\n        padding: 0.75rem 0;\n        margin-bottom: 0.75rem;\n      }\n    }\n    .in-flight-item-info-title {\n      flex: 1;\n      font-size: 1rem;\n      color: ",";\n      font-weight: 500;\n    }\n    .in-flight-item-info-category {\n      font-size: 0.875rem;\n      color: ",";\n      font-weight: normal;\n    }\n    .in-flight-item-info-actions {\n      display: inline-flex;\n      justify-content: flex-end;\n      align-items: center;\n      align-self: center;\n      @media (max-width: 768px) {\n        width: 100%;\n      }\n    }\n    .in-flight-item-info-actions-price {\n      margin-right: 1rem;\n      & > span {\n        font-weight: 500;\n        font-size: 1rem;\n      }\n    }\n    .in-flight-item-info-desrciption {\n      font-size: 0.75rem;\n      font-weight: normal;\n      line-height: 1.2;\n    }\n  }\n"]);return U=function(){return e},e}function Y(){var e=Object(T.a)([""]);return Y=function(){return e},e}var G=function(e){var t=e.onSave,n=e.onMountAction,l=e.flightService,s=e.fetching,u=e.tourists,v=e.selectedFlightId,p=e.selectedFlightService,h=Object(f.c)(r.b).t;Object(d.useEffect)((function(){n(),t(p)}),[]),Object(d.useEffect)((function(){O((function(e){return Object(a.a)({},e,{selectedGroup:l&&l.length>0?l[0].group:"",selectedGroupItems:l&&l.length>0?l[0].items:[]})}))}),[l]);var b=Object(d.useState)({selectedGroup:l&&l.length>0?l[0].group:"",selectedGroupItems:l&&l.length>0?l[0].items:[],currentIndex:void 0,basket:p}),E=Object(g.a)(b,2),k=E[0],O=E[1],N=function(e,t){var n=k.basket.find((function(n){return n.touristId===e&&n.id===t}));return n?n.count:0},j=Object(d.useMemo)((function(){var e=function(e){var t=u.find((function(t){return t.id===e})),n=u.indexOf(t);return t.firstName?"".concat(t.firstName," ").concat(t.lastName):"".concat(h("Tourist")," ").concat(++n)},t=function(t){return{name:e(t.touristId),count:t.count,currencyCode:t.currencyCode,amount:t.amount,id:t.touristId}};return{totalCost:k.basket.reduce((function(e,t){return e+(t.totalAmount||0)}),0),currencyCode:k.basket&&k.basket[0]&&k.basket[0].currencyCode,recipeItems:k.basket.reduce((function(e,n){var a,r=e.find((function(e){return e.id===n.id}));return r?(r.tourists=r.tourists.concat([t(n)]).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0})),e):e.concat([(a=n,{id:a.id,name:a.name,tourists:[t(a)]})])}),[])}}),[k.basket]);return m.a.createElement(K,null,m.a.createElement(F.a,null,m.a.createElement(S.a,null,m.a.createElement(I.a,{md:12},m.a.createElement(A.b,{segmented:!0},l.map((function(e,t){return m.a.createElement(i.c,{key:t,selected:k.selectedGroup===e.group,color:k.selectedGroup!==e.group?"default":void 0,onClick:(n=e.group,function(){var e=l.find((function(e){return e.group===n}));e&&O((function(t){return Object(a.a)({},t,{selectedGroup:e.group,selectedGroupItems:e.items})}))})},e.isNeedTranslation?h(e.group):e.group);var n}))))),m.a.createElement(S.a,{className:"m-t-15"},m.a.createElement(I.a,{md:8},k.selectedGroupItems.map((function(e){return m.a.createElement(c.a,{key:e.id,className:"dashboard"},m.a.createElement(D.a,{isOpened:k.currentIndex===e.id,triggerBefore:!0,onToggle:(n=e.id,function(){O((function(e){return Object(a.a)({},e,{currentIndex:e.currentIndex===n?void 0:n})}))}),trigger:m.a.createElement(W,null,m.a.createElement("div",{className:"in-flight-item-image"},e.photo?m.a.createElement("img",{src:"".concat(e.photo,"?w=150&h=120&mode=crop"),alt:e.name}):m.a.createElement(M.a,null)),m.a.createElement("div",{className:"in-flight-item-container"},m.a.createElement("div",{className:"in-flight-item-info"},m.a.createElement("div",{className:"in-flight-item-info-title"},e.name),m.a.createElement("div",{className:"in-flight-item-info-desrciption",dangerouslySetInnerHTML:{__html:e.description}})),m.a.createElement("div",{className:"in-flight-item-info-actions"},m.a.createElement("span",{className:"in-flight-item-info-actions-price"},m.a.createElement("span",null,e.amount)," ",m.a.createElement(P.a,{currencyCode:e.currencyCode})),m.a.createElement(i.c,{color:k.currentIndex===e.id?"":"warning"},k.currentIndex===e.id?h("Close"):h("Select")))))},m.a.createElement(X,null,m.a.createElement("div",{className:"in-flight-item-panel"},m.a.createElement("div",{className:"in-flight-item-panel-actions"},m.a.createElement("ul",null,u.map((function(n,r){return m.a.createElement("li",{key:n.id},m.a.createElement("div",{className:"in-flight-item-tourist-name"},n.firstName?"".concat(n.firstName," ").concat(n.lastName):"".concat(h("Tourist")," ").concat(++r)),m.a.createElement("div",{className:"item-panel-number-input"},m.a.createElement(R.a,{min:0,max:e.maxCount||10,value:N(n.id,e.id),onChange:(i=n.id,c=e.id,l=e.name,o=e.currencyCode,s=e.amount,function(e){O((function(n){var r=n.basket.filter((function(e){return!(e.id===c&&e.touristId===i)}));return e>0&&(r=[].concat(Object(y.a)(r),[{flightId:v||"",id:c,touristId:i,name:l,currencyCode:o,amount:s,count:e,totalAmount:e*s}])),t(r),Object(a.a)({},n,{basket:r})}))})})));var i,c,l,o,s}))))))));var n}))),m.a.createElement(I.a,{md:4},m.a.createElement(Z,null,m.a.createElement(c.a,{className:"dashboard"},m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"shop-summary-title"},h("Summary")),j.recipeItems&&j.recipeItems.length>0?j.recipeItems.map((function(e){return m.a.createElement("div",{className:"m-b-10",key:e.id},m.a.createElement(J,null,e.name),m.a.createElement(Q,null,e.tourists.map((function(e){return m.a.createElement("div",{className:"shop-summary-list-item",key:e.id},m.a.createElement("span",null,e.name),m.a.createElement("span",{className:"shop-summary-list-item-price"},"".concat(e.count," x ").concat(e.amount),m.a.createElement(P.a,{currencyCode:e.currencyCode})))}))))})):m.a.createElement("div",{className:"shop-summary-empty"},m.a.createElement("div",null,m.a.createElement(_.a,{icon:"basket"})),m.a.createElement("div",null,m.a.createElement("div",{className:"shop-summary-empty-title"},h("Empty menu")),m.a.createElement("p",{className:"shop-summary-empty-description"},h("Looks like you heven't made your choice yet...")))),j.recipeItems&&j.recipeItems.length>0&&m.a.createElement($,null,m.a.createElement("div",{className:"shop-summary-total-text"},h("Total")),m.a.createElement("div",{className:"shop-summary-total-price"},j.totalCost," ",m.a.createElement(P.a,{currencyCode:j.currencyCode}))))))))),s&&m.a.createElement(o.a,null))},K=w.e.div(Y()),W=w.e.div(U(),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.grey})),X=w.e.div(q(),(function(e){return e.theme.radius}),(function(e){return e.theme.radius})),Z=w.e.div(L(),(function(e){return e.theme.colors.dark}),(function(e){return Object(B.c)(e.theme.colors.dark,.5)}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.grey})),J=w.e.div(H(),(function(e){return e.theme.colors.dark}),(function(e){return Object(B.c)(e.theme.colors.dark,.15)})),Q=w.e.div(z(),(function(e){return Object(B.c)(e.theme.colors.dark,.15)}),(function(e){return e.theme.colors.dark})),$=w.e.div(V(),(function(e){return e.theme.colors.dark})),ee=function(e){var t=e.children,n=e.isOpened,a=e.onCloseCallback,c=e.onSaveCallback,o=Object(f.c)(r.b).t,s=function(){a()};return n?m.a.createElement(l.a,{scrollable:!0,onClose:s,modalTitle:o("Select item"),className:"bg-dashboard",modalFooter:m.a.createElement(F.a,null,m.a.createElement(S.a,null,m.a.createElement(I.a,{lg:12},m.a.createElement("div",{className:"text-right"},m.a.createElement(A.b,{segmented:!0,align:"flex-end",fullwidth:!0},m.a.createElement(i.c,{color:"dark",plain:!0,onClick:s},o("Cancel")),m.a.createElement(i.c,{color:"success",onClick:function(){c(),s()}},o("Save")))))))},t):null},te=function(){var e=Object(h.useDispatch)(),t=Object(h.useSelector)((function(e){return{isOpened:e.basketMeal.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:N(e.basketMeal),fetching:e.basketMeal.fetching,tourists:Object(x.c)(e),selectedFlightId:e.basketMeal.selectedFlightId,selectedFlightService:C(e.basketMeal)}}),h.shallowEqual),n=t.isOpened,a=t.shoppingCartId,r=t.flightService,i=t.fetching,c=t.tourists,l=t.selectedFlightId,o=t.selectedFlightService,s=Object(d.useState)({basket:[]}),u=Object(g.a)(s,2),f=u[0],v=u[1];return m.a.createElement(ee,{isOpened:n,onSaveCallback:function(){e(E.basketMealActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketMealActions.closeExtraShopModal())}},m.a.createElement(G,{onSave:function(e){v({basket:e})},onMountAction:function(){0===r.length&&e(E.basketMealActions.fetchFlightService(a))},flightService:r,fetching:i,tourists:c,selectedFlightId:l,selectedFlightService:o}))},ne=function(){var e=Object(h.useDispatch)(),t=Object(h.useSelector)((function(e){return{isOpened:e.basketFlightExtra.isExtraShopModalOpen,shoppingCartId:e.basketData.shoppingCartId,flightService:N(e.basketFlightExtra),fetching:e.basketFlightExtra.fetching,tourists:Object(x.c)(e),selectedFlightId:e.basketFlightExtra.selectedFlightId,selectedFlightService:C(e.basketFlightExtra)}}),h.shallowEqual),n=t.isOpened,a=t.shoppingCartId,r=t.flightService,i=t.fetching,c=t.tourists,l=t.selectedFlightId,o=t.selectedFlightService,s=Object(d.useState)({basket:[]}),u=Object(g.a)(s,2),f=u[0],v=u[1];return m.a.createElement(ee,{isOpened:n,onSaveCallback:function(){e(E.basketFlightExtraActions.updateFlightService(f.basket))},onCloseCallback:function(){e(E.basketFlightExtraActions.closeExtraShopModal())}},m.a.createElement(G,{onSave:function(e){v({basket:e})},onMountAction:function(){0===r.length&&e(E.basketFlightExtraActions.fetchFlightService(a))},flightService:r,fetching:i,tourists:c,selectedFlightId:l,selectedFlightService:o}))},ae=function(e){return e.basketFlights.directFlights},re=function(e){return e.basketFlights.backFlights},ie=Object(k.a)(ae,re,(function(e,t){return e.map((function(e){var n=e.linkedVariants&&e.linkedVariants.length&&t.find((function(t){return t.id===e.linkedVariants[0].priceId}));return Object(a.a)({},e,{linkedVariants:e.linkedVariants.map((function(e){return Object(a.a)({},e,{linkedFlight:t.find((function(t){return t.id===e.priceId}))})})),cheapestBackFlight:n})})).map((function(e){return Object(a.a)({},e,{_addPrice:ce(e,e.cheapestBackFlight)})}))}));function ce(e,t){var n,a,r=null;return(null===t||void 0===t||null===(n=t.rtVariants)||void 0===n?void 0:n.some((function(t){return t.directId===e.id})))&&(r=t.rtVariants.find((function(t){return t.directId===e.id}))),r?r.addPricePair:(null===e||void 0===e||null===(a=e.linkedVariants)||void 0===a?void 0:a.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))?e.linkedVariants.find((function(e){return e.priceId===t.id})).addPricePair:((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)}function le(e,t,n){var a=Number(u()(n).format("HH"));return Number(e)<=a&&a<=Number(t)}var oe=Object(k.a)(ie,(function(e){return e.basketFlights.filter}),(function(e,t){return e=Object(y.a)(e.filter((function(e){return le(t.directArrivalTime.from,t.directArrivalTime.to,e.arrivalTime)&&le(t.directDepartureTime.from,t.directDepartureTime.to,e.departureTime)})).map((function(e){var n=e.linkedVariants.filter((function(e){return le(t.backArrivalTime.from,t.backArrivalTime.to,e.linkedFlight.arrivalTime)&&le(t.backDepartureTime.from,t.backDepartureTime.to,e.linkedFlight.departureTime)}));return Object(a.a)({},e,{linkedVariants:n,cheapestBackFlight:n.length?n[0].linkedFlight:void 0})}))),t.selectedAirlines.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedAirlines.includes(e.airlineCode)})).map((function(e){var n=e.linkedVariants.filter((function(e){return t.selectedAirlines.includes(e.linkedFlight.airlineCode)}));return Object(a.a)({},e,{linkedVariants:n,cheapestBackFlight:n.length?n[0].linkedFlight:void 0})})))),t.selectedFlightTypes.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e[t]}))})).map((function(e){var n=e.linkedVariants.filter((function(e){return t.selectedFlightTypes.some((function(t){return!0===e.linkedFlight[t]}))}));return Object(a.a)({},e,{linkedVariants:n,cheapestBackFlight:n.length?n[0].linkedFlight:void 0})})))),t.selectedStopovers.length&&(e=Object(y.a)(e.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.isConnected:"isConnected"!==t||!0===e.isConnected}))})).map((function(e){var n=e.linkedVariants.filter((function(e){return t.selectedStopovers.some((function(t){return"isNotConnected"===t?!1===e.linkedFlight.isConnected:"isConnected"!==t||!0===e.linkedFlight.isConnected}))}));return Object(a.a)({},e,{linkedVariants:n,cheapestBackFlight:n.length?n[0].linkedFlight:void 0})})))),t.withLuggage&&!0===t.withLuggage&&(e=Object(y.a)(e.filter((function(e){return e.selectedTariff&&e.selectedTariff.baggageInfo&&"0 PC"!==e.selectedTariff.baggageInfo||e.hasMoreTariffs})).map((function(e){var t=e.linkedVariants.filter((function(e){return e.linkedFlight&&e.linkedFlight.selectedTariff&&e.linkedFlight.selectedTariff.baggageInfo&&"0 PC"!==e.linkedFlight.selectedTariff.baggageInfo||e.linkedFlight&&e.linkedFlight.hasMoreTariffs}));return Object(a.a)({},e,{linkedVariants:t,cheapestBackFlight:t.length?t[0].linkedFlight:void 0})})))),(e=(e=e.filter((function(e){return!!e.cheapestBackFlight}))).map((function(e){return Object(a.a)({},e,{_addPrice:ce(e,e.cheapestBackFlight)})}))).sort((function(e,t){return e._addPrice-t._addPrice})),e})),se=Object(k.a)(re,(function(e){return e})),ue=Object(k.a)(ae,re,(function(e,t){var n=[];return t.map((function(e){return{name:e.airlineName,id:e.airlineCode}})).concat(e.map((function(e){return{name:e.airlineName,id:e.airlineCode}}))).forEach((function(e){n.some((function(t){return t.id===e.id}))||n.push(e)})),n.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}))})),de=(Object(k.a)((function(e){return e.basketFlights.filter}),(function(e){return e.filter.onlyDirectFlights}),se,ie,(function(e,t,n,r){var i=n.some((function(e){return!e.isConnected}));return i=r.some((function(e){return!e.isConnected})),Object(a.a)({},e,{direct:!(!t||!i)})})),Object(k.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return null===e||void 0===e?void 0:e.map((function(t,n){return n%2===0?e.slice(n,n+2):null})).filter((function(e){return e})).map((function(e){var t=Object(g.a)(e,2);return{direct:t[0],back:t[1]}}))}))),me=Object(k.a)((function(e){return e.basketFlights.rules}),(function(e){return e.basketFlights.selectedRuleHash}),(function(e,t){var n=e.find((function(e){return e.hash===t}));return null===n||void 0===n?void 0:n.rules})),fe=Object(k.a)(ie,(function(e){return e.some((function(e){return e.isMouzenidis&&e.linkedVariants&&e.linkedVariants.some((function(e){return e.linkedFlight.isMouzenidis}))}))})),ve=n(42),pe=n(47),he=n(62),be=n(63),ge=n(2230),Ee=n(2235),ye=n(119),ke=n(264);function Oe(){var e=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  .toggle-button-switcher {\n    background-color: ",";\n    border: 1px solid ",";\n    border-radius: 24px;\n    width: 40px;\n    height: 24px;\n    position: relative;\n    transition: all 0.15s ease-out;\n    margin: 0 0.25rem;\n    cursor: pointer;\n    .toggle-button-switch {\n      background: ",";\n      border-radius: 50%;\n      text-align: center;\n      text-decoration: none;\n      height: 24px;\n      width: 24px;\n      position: absolute;\n      top: -1px;\n      left: -1px;\n      transition: all 0.15s ease-out;\n      font-size: 0.75rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #fff;\n      .svg-inline--fa {\n        margin-left: 0.125rem;\n      }\n    }\n    &.active {\n      background-color: ",";\n      border: 1px solid ",";\n      .toggle-button-switch {\n        background: ",";\n        left: 16px;\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}var Ne=function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isToggleOn:e.props.value},e.handleClick=function(t){e.state.isToggleOn!==t&&e.setState({isToggleOn:t},(function(){return e.props.onChange&&e.props.onChange(t)}))},e}return Object(pe.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({isToggleOn:this.props.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.labelOn,a=t.labelOff;return m.a.createElement(ye.a,null,(function(t){return m.a.createElement(je,{className:"toggle-button"},a&&m.a.createElement(ke.a,{onClick:function(){return e.handleClick(!1)}},a||t.off),m.a.createElement("span",{className:"toggle-button-switcher ".concat(e.state.isToggleOn?"active":"").trim(),onClick:function(){return e.handleClick(!e.state.isToggleOn)}},m.a.createElement("span",{className:"toggle-button-switch"},e.state.isToggleOn?m.a.createElement(_.a,{icon:"check"}):m.a.createElement(_.a,{icon:"times"}))),n&&m.a.createElement(ke.a,{onClick:function(){return e.handleClick(!0)}},n||t.on))}))}}]),n}(d.PureComponent),je=w.e.div(Oe(),(function(e){return Object(B.c)(e.theme.colors.danger,.1)}),(function(e){return Object(B.c)(e.theme.colors.danger,0)}),(function(e){return e.theme.colors.danger}),(function(e){return Object(B.c)(e.theme.colors.danger,.1)}),(function(e){return Object(B.c)(e.theme.colors.danger,.2)}),(function(e){return e.theme.colors.success})),Ce=n(2225),xe=n(11),Te=(n(2365),n(2366)),we=n.n(Te),Fe=(n(2318),function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={from:null!==e.props.from&&void 0!==e.props.from?e.props.from:0,to:null!==e.props.to&&void 0!==e.props.to?e.props.to:23},e.onChange=function(t){e.setState({from:t[0],to:t[1]})},e.onAfterChange=function(){e.props.onChange({from:e.state.from,to:e.state.to})},e}return Object(pe.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.label,a=t.min,r=t.max,i=t.step,c=t.inline,l=this.state,o=l.from,s=l.to;return m.a.createElement("div",{className:"timepicker"},n&&m.a.createElement(ke.a,null,n),c?m.a.createElement(we.a,{defaultValue:[o,s],min:a,max:r,step:i,marks:(e={},Object(xe.a)(e,o,o),Object(xe.a)(e,s,s),e),onChange:this.onChange,onAfterChange:this.onAfterChange}):m.a.createElement(Ee.a,{className:"timepicker-dropdown",label:n||"Time",trigger:m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"timepicker-trigger"},m.a.createElement("div",{className:"icon"},m.a.createElement(_.a,{icon:"clock"})),m.a.createElement("div",{className:"timepicker-value"},"".concat(o<10?"0"+o:o,":00 - ").concat(s,":00"))))},m.a.createElement(we.a,{defaultValue:[o,s],min:a,max:r,step:i,onChange:this.onChange,onAfterChange:this.onAfterChange})))}}]),n}(d.Component));Fe.defaultProps={min:0,max:23,step:1};var Se=Fe,Ie=n(340);function Ae(){var e=Object(T.a)(["\n  padding: 0.375rem 0.5rem;\n  margin-bottom: 0.5rem;\n  border-radius: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  .flight-item-actions {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ae=function(){return e},e}function De(){var e=Object(T.a)(["\n  margin: 0;\n  padding: 0.5rem;\n  list-style: none;\n  border: 1px solid #eee;\n  border-radius: ",";\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.375rem;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 0.25rem;\n    &:last-child {\n      border: none;\n      margin-bottom: 0;\n      padding-bottom: 0;\n    }\n    .item-list-title {\n      flex: 0 0 50%;\n    }\n    .item-list-actions {\n      .item-list-actions-text {\n        cursor: pointer;\n        font-size: 0.75rem;\n        color: #333;\n        border-bottom: 1px dotted;\n        margin-right: 1rem;\n        &:hover {\n          color: ",";\n        }\n      }\n      .icon {\n        margin-left: 0.75rem;\n      }\n      .item-list-actions-edit {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n      .item-list-actions-delete {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n  }\n"]);return De=function(){return e},e}var Me=function(e){var t=e.isReadOnly,n=void 0!==t&&t,a=e.minimalPrice,c=e.items,l=e.onOpenShopCallback,o=e.onDeleteItemCallback,s=e.selectedTitle,u=e.notSelectedTitle,d=e.addButtonTitle,v=Object(f.c)(r.b).t,p=c&&c.length>0||!1;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Re,{isSelected:p},m.a.createElement("div",{className:"".concat(!p&&"text-danger")},p?s:u),m.a.createElement("div",{className:"flight-item-actions"},!p&&a&&!n&&m.a.createElement("span",{className:"m-r-10"},v("from")," ",a.amount,m.a.createElement(P.a,{currencyCode:a.currencyCode})),!n&&m.a.createElement(i.c,{size:"sm",color:"default",onClick:l},d))),c&&c.length>0&&m.a.createElement(Pe,null,c.map((function(e){return m.a.createElement("li",{key:e.id},m.a.createElement("span",{className:"item-list-title"},e.name),m.a.createElement("span",{className:"item-list-actions"},m.a.createElement("span",{className:"item-list-actions-text",onClick:n?void 0:l},"".concat(e.count," x ").concat(e.amount," = ").concat(e.totalAmount),m.a.createElement(P.a,{currencyCode:e.currencyCode})),!n&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"item-list-actions-edit",onClick:l},m.a.createElement(_.a,{icon:"pencil"})),m.a.createElement("span",{className:"item-list-actions-delete",onClick:(t=e.id,function(){o(t)})},m.a.createElement(_.a,{icon:"trash"})))));var t}))))},Pe=w.e.ul(De(),(function(e){return"0 0 ".concat(e.theme.radius," ").concat(e.theme.radius)}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.danger})),Re=w.e.div(Ae(),(function(e){return e.isSelected?"".concat(e.theme.radius," ").concat(e.theme.radius," 0 0}"):e.theme.radius}),(function(e){return e.isSelected?Object(B.c)(e.theme.colors.success,.1):Object(B.c)(e.theme.colors.danger,.1)})),_e=function(e){var t=e.flightId,n=e.isReadOnly,a=void 0!==n&&n,i=Object(f.c)(r.b).t,c=Object(h.useSelector)((function(e){return{selectedFlightService:O(e.basketMeal,t),minimalPrice:j(e.basketMeal,t)}}),h.shallowEqual),l=c.selectedFlightService,o=c.minimalPrice,s=Object(h.useDispatch)();return m.a.createElement(Me,{isReadOnly:a,minimalPrice:o,items:l,onOpenShopCallback:function(){s(E.basketMealActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=l.find((function(t){return t.id===e}));confirm(i("Do you want to delete meal?"))&&s(E.basketMealActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_meal_title"),notSelectedTitle:i("Meal is not included"),addButtonTitle:i("Add meals")})},Be=function(e){var t=e.flightId,n=e.isReadOnly,a=void 0!==n&&n,i=Object(f.c)(r.b).t,c=Object(h.useSelector)((function(e){return{selectedFlightService:O(e.basketFlightExtra,t),minimalPrice:j(e.basketFlightExtra,t)}}),h.shallowEqual),l=c.selectedFlightService,o=c.minimalPrice,s=Object(h.useDispatch)();return m.a.createElement(Me,{isReadOnly:a,minimalPrice:o,items:l,onOpenShopCallback:function(){s(E.basketFlightExtraActions.openExtraShopModal(t))},onDeleteItemCallback:function(e){var t=l.find((function(t){return t.id===e}));confirm(i("Do you want to delete extra?"))&&s(E.basketFlightExtraActions.deleteFlightService([t]))},selectedTitle:i("selected_flight_extra_title"),notSelectedTitle:i("Extra is not included"),addButtonTitle:i("Add extra")})};function Ve(){var e=Object(T.a)(["\n  display: block;\n  height: 100px;\n  width: 100px;\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    content: url(",");\n  }\n"]);return Ve=function(){return e},e}var ze=function(e){var t=e.src,n=e.alt,a=e.className,r=e.placeholder,i=e.usePlaceholderUsBackground,c=Object(d.useState)(r),l=Object(g.a)(c,2),o=l[0],s=l[1],u=Object(d.useState)(),f=Object(g.a)(u,2),v=f[0],p=f[1];return Object(d.useEffect)((function(){var e,n=!1;return v&&o!==t&&(IntersectionObserver?(e=new IntersectionObserver((function(a){a.forEach((function(a){!n&&(a.intersectionRatio>0||a.isIntersecting)&&(s(t),e.unobserve(v))}))}),{threshold:.01,rootMargin:"75%"})).observe(v):s(t)),function(){var t;n=!0,(null===(t=e)||void 0===t?void 0:t.unobserve)&&e.unobserve(v)}}),[t,o,v]),m.a.createElement(He,{className:a,ref:p,src:o,alt:n,onLoad:function(e){},onError:function(e){i&&(e.target.src="".concat(r)),e.target.classList.add("src-loading-error")}})},He=w.e.img(Ve(),(function(e){return e.placeholder}));ze.defaultProps={placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=",usePlaceholderUsBackground:!1};var Le=ze,qe=n(1034),Ue=n(222),Ye=n(1033),Ge=(n(2276),function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(e){var r;return Object(ve.a)(this,n),(r=t.call(this,e)).tariffTypes=[],r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.actions.showFlightRules("")},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(n){return n.flightHash===e&&n.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.actions.fetchFlightTariffs("")},r.onSelectTariff=function(e,t){return function(){r.setState((function(n){return{selectedTariffs:[].concat(Object(y.a)(n.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(a.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(pe.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?this.props.durationMinutes:(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0),n=Math.floor(t/60),a=t%60,i=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){var r,c;return m.a.createElement("div",{className:"flight-item-mobile"},m.a.createElement("div",{className:"flight-item-mobile-top"},m.a.createElement("div",{className:"flight-item-mobile-left"},m.a.createElement("div",{className:"date"},u()(e.props.departureTime).format(null===(r=e.context)||void 0===r?void 0:r.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode)),m.a.createElement("div",{className:"flight-item-mobile-center"},m.a.createElement("div",{className:"flight-details-duration"},n>0&&"".concat(n," ").concat(t("hours_short"),".")," ",a>0&&a+" ".concat(t("minutes_short"),".")),m.a.createElement("div",{className:"flight-details-icon"},i&&"Bus"!==i?m.a.createElement(_.a,{icon:"plane-departure"}):m.a.createElement(_.a,{icon:"bus"})),m.a.createElement("div",{className:"flight-details-stops"},e.props.isConnected?m.a.createElement("div",null,e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",null,m.a.createElement("span",null,t("Direct flight"))))),m.a.createElement("div",{className:"flight-item-mobile-right"},m.a.createElement("div",{className:"date"},u()(e.props.arrivalTime).format(null===(c=e.context)||void 0===c?void 0:c.shortDateFormat)),m.a.createElement("div",{className:"time"},u()(e.props.arrivalTime).format("HH:mm")),m.a.createElement("div",{className:"airport"},e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode))),m.a.createElement("div",{className:"flight-item-mobile-bottom"},m.a.createElement("div",{className:"flight-item-mobile-bottom-number"},m.a.createElement("span",{className:"m-r-5"}," ",e.props.airlineName),m.a.createElement("span",{className:"grey"},"(",e.props.flightNumber,")"))))}))}}]),n}(d.PureComponent));Ge.contextType=Ue.a;var Ke=Object(h.connect)((function(e){return{tariffs:e.basketFlights.tariffs}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(Ge),We=(n(2316),function(e){var t=Math.floor(e.durationMinutes/60),n=e.durationMinutes%60,a=Math.floor(e.stopDurationMinutes/60),i=e.stopDurationMinutes%60,c=Object(f.c)(r.b).t;return m.a.createElement("div",{className:"flight-result-details-item"},m.a.createElement("div",{className:"flight-result-details-item-logo"},m.a.createElement("img",{src:e.airline&&e.airline.code?"".concat(Ye.c,"/userfiles/iata-air-logos/").concat(e.airline.code,".png"):"".concat(Ye.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.airline&&e.airline.name||"nologo"})),m.a.createElement("div",{className:"flight-result-details-item-info"},m.a.createElement("div",{className:"details-item-info-airline"},m.a.createElement("div",{className:"details-item-info-airline-title"},e.airline&&e.airline.name),m.a.createElement("div",{className:"details-item-info-class"},e.tariff&&e.tariff.name),m.a.createElement("div",{className:"details-item-info-airline-type"},"(",e.flightNumber,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline"},m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.departureTime).format("HH:mm")),m.a.createElement("span",null,e.departureCity&&e.departureCity.name,", "),m.a.createElement("span",null,"(",e.departureAirport&&e.departureAirport.code,")")),m.a.createElement("div",{className:"flight-result-details-item-timeline-duration"},m.a.createElement("span",null,"".concat(t," ").concat(c("hours_short"),".")," ",n>0&&n+" ".concat(c("minutes_short"),"."))),m.a.createElement("div",{className:"flight-result-details-item-timeline-airport"},m.a.createElement("span",null,u()(e.arrivalTime).format("HH:mm")),m.a.createElement("span",null,e.arrivalCity&&e.arrivalCity.name,", "),m.a.createElement("span",null,"(",e.arrivalAirport&&e.arrivalAirport.code,")"))),e.stopDurationMinutes&&m.a.createElement("div",{className:"flight-result-details-item-connections"},m.a.createElement(_.a,{icon:"clock",className:"icon"}),m.a.createElement("span",null,"".concat(a," ").concat(c("hours_short"),".")," ",i>0&&i+" ".concat(c("minutes_short"),".")," "),m.a.createElement("span",null,c("Connect in")," ",e.arrivalCity&&e.arrivalCity.name," (",e.arrivalAirport&&e.arrivalAirport.code,")"))))}),Xe=function(e){var t=e.segments;return m.a.createElement(m.a.Fragment,null," ",t.map((function(e,t){return m.a.createElement(We,Object.assign({key:t},e))})))},Ze=function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(e){var r;return Object(ve.a)(this,n),(r=t.call(this,e)).tariffTypes={ow:"\u0422\u0443\u0434\u0430",owBack:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e",rt:"\u0422\u0443\u0434\u0430 \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e"},r.getTariffAlert=function(e){return(null===e||void 0===e?void 0:e.some((function(e){return"ow"===e.type})))&&!e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.owBack,text:"Return fares are not available",type:"owBack"}:e&&!e.some((function(e){return"ow"===e.type}))&&e.some((function(e){return"owBack"===e.type}))?{title:r.tariffTypes.ow,text:"Direct flight fares are not available.",type:"ow"}:null},r.showDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.closeDetails=function(){r.setState({showDetails:!r.state.showDetails})},r.showFlightRules=function(){r.props.showFlightRules()},r.isSelectedTariff=function(e,t){return r.state.selectedTariffs.some((function(n){return n.flightHash===e&&n.name===t}))},r.fetchFlightTariffs=function(){r.setState({toggled:!0}),r.props.fetchFlightTariffs()},r.onSelectTariff=function(e,t){return function(){r.setState((function(n){return{selectedTariffs:[].concat(Object(y.a)(n.selectedTariffs.filter((function(t){return t.flightHash!==e}))),[Object(a.a)({flightHash:e},t)])}}))}},r.onCancelSelecting=function(){r.setState({selectedTariffs:r.props.selectedTariffs,toggled:!1})},r.onConfrimSelecting=function(){r.props.onSelectTariffs(r.state.selectedTariffs),r.setState({toggled:!1})},r.fareChangeClick=function(){r.setState({fareChangeShow:!r.state.fareChangeShow})},r.state={showDetails:!1,selectedTariffs:e.selectedTariffs,tariffAlert:r.getTariffAlert(e.tariffs),toggled:!1,fareChangeShow:!1},r}return Object(pe.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.selectedTariffs!==e.selectedTariffs&&this.setState({selectedTariffs:this.props.selectedTariffs}),this.props.tariffs!==e.tariffs&&this.setState({tariffAlert:this.getTariffAlert(this.props.tariffs)})}},{key:"render",value:function(){var e=this,t=this.props.isConnected?(this.props.stopDurationMinutes&&this.props.stopDurationMinutes.reduce((function(e,t){return e+t}),0)||0)+(this.props.segments&&this.props.segments.reduce((function(e,t){return e+t.durationMinutes}),0)||0):this.props.durationMinutes,n=Math.floor(t/60),c=t%60,o=this.props.transport;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(p.a,{query:"(max-width: 991px)"},(function(r){var s,f;return r?m.a.createElement(Ke,e.props):m.a.createElement("div",{className:"flight-item"},m.a.createElement("div",{className:"flight-header"},m.a.createElement("div",{className:"flight-header-left"},m.a.createElement("div",{className:"flight-header"},o&&"Bus"!==o?m.a.createElement(Le,{className:"airline-image",usePlaceholderUsBackground:!0,placeholder:"".concat(Ye.c,"/userfiles/iata-air-logos/000.png"),src:e.props.airlineCode?"".concat(Ye.c,"/userfiles/iata-air-logos/").concat(e.props.airlineCode,".png"):"".concat(Ye.c,"/userfiles/iata-air-logos/nologo.png"),alt:e.props.airlineName}):m.a.createElement(Le,{className:"airline-image",src:"".concat(Ye.c,"/userfiles/iata-air-logos/00.png"),alt:e.props.airlineName}),o&&"Bus"!==o?m.a.createElement("span",null,m.a.createElement("span",{className:"airline-name"},e.props.airlineName),m.a.createElement("span",{className:"header-info-block"},e.props.flightNumber)):t("Bus"),(e.props.isMouzenidis||e.props.isCharter)&&m.a.createElement("span",{className:"header-info-block"},e.props.isMouzenidis&&!e.props.isCharter&&t("Mouzenidis flight"),e.props.isCharter&&t("Charter")," "))),m.a.createElement("div",{className:"flight-header-right"},m.a.createElement("div",{className:"fare-type"},e.props.selectedTariff&&e.props.selectedTariff.name,o&&"Bus"!==o&&e.props.rules&&m.a.createElement(qe.a,{title:t("Tariff rules")},m.a.createElement(_.a,{onClick:e.showFlightRules,icon:"info-circle",className:"m-l-5 primary icon"}))),!e.props.disableSelectionTariffs&&m.a.createElement(i.c,{type:"button",size:"sm",color:"default",onClick:e.fetchFlightTariffs,loading:e.props.tariffsFetching},t("Change tariff")),e.state.toggled&&m.a.createElement(l.a,{onClose:e.onCancelSelecting,modalTitle:t("Flight fare"),onToggle:e.fetchFlightTariffs,modalFooter:m.a.createElement("div",{className:"fare-type-footer"},m.a.createElement(i.c,{size:"sm",color:"dark",plain:!0,onClick:e.onCancelSelecting},t("Cancel")),m.a.createElement(i.c,{size:"sm",color:"success",onClick:e.onConfrimSelecting},t("Confirm"))," ")},m.a.createElement("div",{className:"fare-type-change"},m.a.createElement("div",{className:"fare-type-container"},e.props.tariffsFetching?m.a.createElement(ge.a,{style:{minWidth:360},description:t("Search all available rates")}):m.a.createElement(d.Fragment,null,e.props.tariffs.map((function(n){return m.a.createElement(d.Fragment,{key:n.type},e.state.tariffAlert&&"ow"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement(_.a,{icon:"lock",className:"m-r-5 primary icon"})),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))),m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing"},e.tariffTypes[n.type]),m.a.createElement("ul",{className:"nostyles"},n.tariffs.map((function(a,r){return m.a.createElement("li",{key:r,className:e.isSelectedTariff(n.flightHash,a.name)?"selected":"",onClick:e.onSelectTariff(n.flightHash,a)},m.a.createElement("div",{className:"fare-type-name"},a.name),m.a.createElement("div",{className:"fare-type-baggage"},m.a.createElement(_.a,{icon:"baggage",className:"icon"}),a.baggageInfo?a.baggageInfo:t("No")),m.a.createElement("div",{className:"fare-type-pricing"},0!==a.addPrice?m.a.createElement(d.Fragment,null,"+ ".concat(Object(Ie.b)(a.addPrice)," ")," ",m.a.createElement(P.a,{currencyCode:e.props.currencyCode})):t("No surcharge"),m.a.createElement(qe.a,{title:m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement(_.a,{icon:"baggage",className:"icon"})," ",m.a.createElement("span",null,t("baggage"))," ",a.baggageInfo?a.baggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"hand-baggage",className:"icon"})," ",m.a.createElement("span",null,t("hand luggage"))," ",a.handBaggageInfo?a.handBaggageInfo:t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"return-arrow",className:"icon"})," ",m.a.createElement("span",null,t("refund"))," ",a.canReturn?t("Yes"):t("No")),m.a.createElement("div",null,m.a.createElement(_.a,{icon:"change-arrows",className:"icon"})," ",m.a.createElement("span",null,t("exchange"))," ",a.canExchange?t("Yes"):t("No")))},m.a.createElement("span",null,m.a.createElement(_.a,{icon:"info-circle",className:"icon link small"})))))})))),e.state.tariffAlert&&"owBack"===e.state.tariffAlert.type&&m.a.createElement("div",{className:"fare-type-container-item"},m.a.createElement("div",{className:"fare-type-headeing m-b-5"},m.a.createElement(qe.a,{title:t("Tariffs are not available")},m.a.createElement("div",null,m.a.createElement(_.a,{icon:"lock",className:"m-r-5 primary icon"}))),e.state.tariffAlert.title),m.a.createElement("div",{className:"fare-type-headeing-black m-b-5"},t(e.state.tariffAlert.text))))})))))))),m.a.createElement("div",{className:"flight-body"},m.a.createElement("div",{className:"flight-left"},m.a.createElement("div",{className:"flight-info-row"},o&&"Bus"!==o&&m.a.createElement("div",{className:"flight-airport-code link"},m.a.createElement(qe.a,{title:e.props.departureAirportName},m.a.createElement("div",null,e.props.departureCityName,","," ",e.props.departureAirportTerminal?"".concat(e.props.departureAirportCode,"-").concat(e.props.departureAirportTerminal):e.props.departureAirportCode))),m.a.createElement("div",{className:"flight-duration"},t("Duration")," ",n>0&&"".concat(n," ").concat(t("hours_short"),".")," ",c>0&&c+" ".concat(t("minutes_short"),".")),o&&"Bus"!==o&&m.a.createElement("div",{className:"flight-airport-code link text-right"},m.a.createElement(qe.a,{title:e.props.arrivalAirportName},m.a.createElement("div",null,e.props.arrivalCityName,","," ",e.props.arrivalAirportTerminal?"".concat(e.props.arrivalAirportCode,"-").concat(e.props.arrivalAirportTerminal):e.props.arrivalAirportCode)))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-time"},u()(e.props.departureTime).format("HH:mm")),m.a.createElement("div",{className:"flight-line"},e.props.isConnected&&m.a.createElement("span",null)),m.a.createElement("div",{className:"flight-time  text-right"},u()(e.props.arrivalTime).format("HH:mm"))),m.a.createElement("div",{className:"flight-info-row"},m.a.createElement("div",{className:"flight-info"},m.a.createElement("div",{className:"flight-date"},u()(e.props.departureTime).format(null===(s=e.context)||void 0===s?void 0:s.localeDateFormat))),e.props.isConnected?m.a.createElement("div",{className:"flight-layover"},e.props.segments.length-1," ",t("stops")," (",m.a.createElement("span",{className:"link",onClick:e.showDetails},e.props.segments[0].arrivalCity.code),")"):m.a.createElement("div",{className:"flight-layover"},m.a.createElement("span",{className:"green small"},t("Direct flight"))),m.a.createElement("div",{className:"flight-info text-right"},m.a.createElement("div",{className:"flight-date"},u()(e.props.arrivalTime).format(null===(f=e.context)||void 0===f?void 0:f.localeDateFormat))))),m.a.createElement("div",{className:"flight-right"},e.props.selectedTariff&&m.a.createElement(nt,e.props.selectedTariff))),e.state.showDetails&&e.props.segments&&m.a.createElement(l.a,{className:"flights-details-info",onClose:e.closeDetails,modalTitle:t("Flight details")},m.a.createElement(Xe,{segments:e.props.segments.map((function(t,n){return Object(a.a)({},t,{stopDurationMinutes:e.props.stopDurationMinutes&&e.props.stopDurationMinutes[n]})}))})))}))}))}}]),n}(d.PureComponent);Ze.contextType=Ue.a;var Je=n(2326),Qe=n(2221),$e=function(){var e=Object(f.c)(r.b).t;return m.a.createElement(Qe.a,{themes:Qe.b.mouzenidis},m.a.createElement(Je.a,{color:"warning",small:!0},"".concat(e("According to the terms of booking charter flights")," ").concat(e("the time and airport of departure can be changed"),". ").concat(e("We will inform you about this in advance"),".")))},et=function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(e){var r;Object(ve.a)(this,n),(r=t.call(this,e)).getDefaultSelectedTariffs=function(e){var t=[];return(null===e||void 0===e?void 0:e.tariff)?(t.push(Object(a.a)({},e.tariff,{name:e.tariff.name,flightHash:e.hash})),t):(r.props.direct&&r.props.direct.selectedTariff&&r.props.direct.selectedTariff.name&&t.push(Object(a.a)({},r.props.direct.selectedTariff,{flightHash:r.props.direct.hash})),r.props.back&&r.props.back.selectedTariff&&r.props.back.selectedTariff.name&&t.push(Object(a.a)({},r.props.back.selectedTariff,{flightHash:r.props.back.hash})),t)},r.getTariffs=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.tariffs;return a?n?a.filter((function(e){return e.flightHash===n.hash})):a.filter((function(n){return n.flightHash===e||n.flightHash===t})):[]},r.getRtVariant=function(e,t){var n;return(null===t||void 0===t||null===(n=t.rtVariants)||void 0===n?void 0:n.some((function(t){return t.directId===e.id})))?t.rtVariants.find((function(t){return t.directId===e.id})):null},r.calculateAddPrice=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.state.selectedTariffs,i=r.calculateCleanAddPrice(e,t,n);return n?i+r.getAdditionalTariffPrice(n.hash,a):i+r.getAdditionalTariffPrice(null===e||void 0===e?void 0:e.hash,a)+r.getAdditionalTariffPrice(e&&t&&t.hash,a)},r.calculateCleanAddPrice=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props.correctionPrice||0;if(n)return n.addPricePair-i;if((null===e||void 0===e||null===(a=e.linkedVariants)||void 0===a?void 0:a.length)&&e.linkedVariants.some((function(e){return e.priceId===t.id}))){var c=e.linkedVariants.find((function(e){return e.priceId===t.id}));return c.addPricePair-i}return((null===e||void 0===e?void 0:e.addPrice)||0)+((null===t||void 0===t?void 0:t.addPrice)||0)-i},r.getAdditionalTariffPrice=function(e,t){var n=t.find((function(t){return t.flightHash===e}));return(null===n||void 0===n?void 0:n.addPrice)||0},r.changeReturnFlightShow=function(){r.setState({changeReturnFlight:!0})},r.changeReturnFlightClose=function(){r.setState({changeReturnFlight:!1})},r.changeFlights=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(){var i=null,c=null;if(n){var l=r.state.selectedTariffs.find((function(e){return e.flightHash===n.hash}));c=(null===l||void 0===l?void 0:l.hash)||n.hash,i=(null===l||void 0===l?void 0:l.hash)||e.hash}else{var o=r.state.selectedTariffs.find((function(t){return t.flightHash===(null===e||void 0===e?void 0:e.hash)})),s=r.state.selectedTariffs.find((function(e){return e.flightHash===(null===t||void 0===t?void 0:t.hash)}));i=(null===o||void 0===o?void 0:o.hash)||(null===e||void 0===e?void 0:e.hash),c=(null===s||void 0===s?void 0:s.hash)||(null===t||void 0===t?void 0:t.hash)}r.props.selectFlights&&r.props.selectFlights({directHash:i,backHash:c,correctionPrice:a+r.props.correctionPrice}),r.changeReturnFlightClose()}},r.showFlightRules=function(e){return function(){return r.props.actions.showFlightRules(e)}},r.fetchFlightTariffs=function(e,t,n){return function(){var i=null;n&&!r.props.tariffs.some((function(e){return e.flightHash===n.hash}))?i={rtHash:n.hash}:n||r.props.tariffs.some((function(t){return t.flightHash===e}))&&r.props.tariffs.some((function(e){return e.flightHash===t}))||(i={owHash:e,owBackHash:t}),i&&Object.keys(i)&&r.props.actions.fetchFlightTariffs(Object(a.a)({shoppingCartId:r.props.shoppingCartId},i))}},r.onSelectTariffs=function(e){r.setState((function(t){var n=[].concat(Object(y.a)(t.selectedTariffs.filter((function(t){return!e.some((function(e){return e.flightHash===t.flightHash}))}))),Object(y.a)(e));return{selectedTariffs:n,addPrice:r.calculateAddPrice(r.props.direct,r.props.back,r.state.rtVariant,n)}}),(function(){r.props.promo&&r.changeFlights(r.props.direct,r.props.back,r.state.rtVariant,r.state.addPrice)()}))},r.getSelectedTariff=function(e,t){return t?r.state.selectedTariffs.find((function(e){return e.flightHash===t.hash}))||(null===e||void 0===e?void 0:e.selectedTariff):r.state.selectedTariffs.find((function(t){return t.flightHash&&t.flightHash===(null===e||void 0===e?void 0:e.hash)}))||(null===e||void 0===e?void 0:e.selectedTariff)};var i=r.getRtVariant(e.direct,e.back);return r.state={changeReturnFlight:!1,addPrice:r.calculateAddPrice(e.direct,e.back,i,[]),rtVariant:i,selectedTariffs:r.getDefaultSelectedTariffs(i)},r}return Object(pe.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;(e.direct!==this.props.direct||e.back!==this.props.back)&&this.props.back&&this.props.direct&&this.setState((function(e){var n=t.getRtVariant(t.props.direct,t.props.back);return{rtVariant:n,addPrice:t.calculateAddPrice(t.props.direct,t.props.back,n),selectedTariffs:e.selectedTariffs.length?e.selectedTariffs:t.getDefaultSelectedTariffs(n)}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.direct,a=t.back,c=t.promo,o=t.tariffsFetching,s=t.transport,u=t.currencyCode,v=t.booking,p=t.prePayment;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"flight"},n&&m.a.createElement(d.Fragment,null,((null===a||void 0===a?void 0:a.isCharter)||n.isCharter||!n.isGds||!(null===a||void 0===a?void 0:a.isGds))&&m.a.createElement($e,null),m.a.createElement(Ze,Object.assign({},n,{selectedTariff:e.getSelectedTariff(n,e.state.rtVariant),showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:n.hash),fetchFlightTariffs:e.fetchFlightTariffs(n.hasMoreTariffs&&n.hash||void 0,null===a||void 0===a?void 0:a.hash,e.state.rtVariant),tariffsFetching:o,tariffs:e.getTariffs(n.hash,null===a||void 0===a?void 0:a.hash,e.state.rtVariant),selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,transport:s,disableSelectionTariffs:!v||(e.state.rtVariant?!e.state.rtVariant.hasMoreTariffs:!(null===a||void 0===a?void 0:a.hasMoreTariffs)&&!n.hasMoreTariffs),hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:n.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&n.showMeals&&m.a.createElement(_e,{flightId:n.serviceId,isReadOnly:!n.enableMeals}),e.props.hasExtra&&n.showExtras&&m.a.createElement(Be,{flightId:n.serviceId,isReadOnly:!n.enableExtras})),a&&m.a.createElement(d.Fragment,null,m.a.createElement(Ze,Object.assign({},a,{disableSelectionTariffs:!0,selectedTariff:e.getSelectedTariff(a,e.state.rtVariant),hash:e.state.rtVariant?e.state.rtVariant.hash:a.hash,showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:a.hash),transport:s,hasMoreTariffs:e.state.rtVariant?e.state.rtVariant.hasMoreTariffs:a.hasMoreTariffs,currencyCode:u})),e.props.hasMeal&&a.showMeals&&m.a.createElement("div",null,m.a.createElement(_e,{flightId:a.serviceId,isReadOnly:!a.enableMeals})),e.props.hasExtra&&n.showExtras&&m.a.createElement(Be,{flightId:a.serviceId,isReadOnly:!a.enableExtras})),n&&!c?m.a.createElement("div",{className:"flight-footer"},n.linkedVariants&&n.linkedVariants.length>1&&m.a.createElement("div",{className:"footer-flight-left"},m.a.createElement(i.c,{color:"primary",onClick:e.changeReturnFlightShow},"".concat(t("More")," ").concat(n.linkedVariants.length-1," ").concat(t("returned flights")))),m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(at,{timeLimit:(null===n||void 0===n?void 0:n.timeLimit)?n.timeLimit:null===a||void 0===a?void 0:a.timeLimit,prePayment:null===p||void 0===p?void 0:p.prePaymentDate}),m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:e.changeFlights(n,a,e.state.rtVariant,e.state.addPrice)},m.a.createElement("span",null,t("Select")),e.state.addPrice>=0?"+":""," ",Object(Ie.b)(e.state.addPrice)," ",m.a.createElement(P.a,{currencyCode:u}))))):(null===n||void 0===n?void 0:n.timeLimit)||(null===a||void 0===a?void 0:a.timeLimit)?m.a.createElement("div",{className:"flight-footer"},m.a.createElement("div",{className:"footer-flight-right"},m.a.createElement(at,{timeLimit:(null===n||void 0===n?void 0:n.timeLimit)?n.timeLimit:a.timeLimit,prePayment:null===p||void 0===p?void 0:p.prePaymentDate}))):null,e.state.changeReturnFlight&&m.a.createElement(l.a,{scrollable:!0,modalTitle:t("Flight back options"),onClose:e.changeReturnFlightClose},m.a.createElement("div",{className:"change-flight-modal-heading-departure"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(_.a,{icon:"plane-alt",className:"m-r-10"}),t("Outbound flight"))),m.a.createElement(Ze,Object.assign({},n,{showFlightRules:e.showFlightRules(e.state.rtVariant?e.state.rtVariant.hash:n.hash),transport:s,disableSelectionTariffs:!0,currencyCode:u})),m.a.createElement("div",{className:"change-flight-modal-heading-return"},m.a.createElement("div",{className:"change-flight-modal-heading-left"},m.a.createElement(_.a,{icon:"plane-alt",className:"m-r-10"}),t("Flight back options")),m.a.createElement("div",{className:"change-flight-modal-heading-right"},t("Extra charge for outbound + back flight"))),m.a.createElement(tt,{direct:n,getRtVariant:e.getRtVariant,calculateAddPrice:e.calculateAddPrice,getSelectedTariff:e.getSelectedTariff,fetchFlightTariffs:e.fetchFlightTariffs,getTariffs:e.getTariffs,changeFlights:e.changeFlights,translater:t,transport:s,tariffsFetching:o,showFlightRules:e.showFlightRules,selectedTariffs:e.state.selectedTariffs,onSelectTariffs:e.onSelectTariffs,calculateCleanAddPrice:e.calculateCleanAddPrice,currencyCode:u}))))}))}}]),n}(d.PureComponent);et.defaultProps={promo:!1,hasMeal:!1,hasExtra:!1};var tt=function(e){var t=e.direct,n=e.getRtVariant,r=e.calculateAddPrice,i=e.getSelectedTariff,c=e.fetchFlightTariffs,l=e.getTariffs,o=e.changeFlights,s=e.translater,u=e.tariffsFetching,d=e.showFlightRules,f=e.selectedTariffs,v=e.onSelectTariffs,p=e.calculateCleanAddPrice,h=e.currencyCode,b=e.transport,g=t.linkedVariants.map((function(e){var i=n(t,e.linkedFlight),c=r(t,e.linkedFlight,i),l=p(t,e.linkedFlight,i);return Object(a.a)({},e,{_rtVariant:i,_addPrice:c,_cleanPrice:l})}));return g.sort((function(e,t){return e._cleanPrice-t._cleanPrice})),g.map((function(e){return m.a.createElement("div",{key:e.priceId,className:"flight"},e.linkedFlight&&m.a.createElement(Ze,Object.assign({},e.linkedFlight,{selectedTariff:i(e.linkedFlight,e._rtVariant),transport:b,disableSelectionTariffs:e._rtVariant?!e._rtVariant.hasMoreTariffs:(!e.linkedFlight||!e.linkedFlight.hasMoreTariffs)&&!t.hasMoreTariffs,hash:e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash,showFlightRules:d(e._rtVariant?e._rtVariant.hash:e.linkedFlight.hash),fetchFlightTariffs:c((null===t||void 0===t?void 0:t.hasMoreTariffs)&&t.hash||void 0,e.linkedFlight.hash,e._rtVariant),tariffsFetching:u,tariffs:l(null===t||void 0===t?void 0:t.hash,e.linkedFlight&&e.linkedFlight.hash,e._rtVariant),selectedTariffs:f,onSelectTariffs:v,currencyCode:h,hasMoreTariffs:e._rtVariant?e._rtVariant.hasMoreTariffs:e.linkedFlight.hasMoreTariffs})),m.a.createElement("div",{className:"flight-footer-modal"},m.a.createElement("div",{className:"footer-flight-modal-left"},m.a.createElement(at,{timeLimit:e.linkedFlight&&e.linkedFlight.timeLimit})),m.a.createElement("div",{className:"footer-flight-modal-right"},m.a.createElement("div",{className:"flight-pricing"},m.a.createElement("div",{className:"flight-price",onClick:o(t,e.linkedFlight,e._rtVariant,e._addPrice)},m.a.createElement("span",null,s("Select"))," ",e._addPrice>=0?"+":""," ",Object(Ie.b)(e._addPrice)," ",m.a.createElement(P.a,{className:"m-l-5",size:14,currencyCode:h}))))))}))},nt=function(e){return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement("div",{className:"fare-details"},m.a.createElement("ul",{className:"fare-details-list nostyles"},m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("baggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.baggageInfo?e.baggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("hand luggage"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.handBaggageInfo?e.handBaggageInfo:t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("refund"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canReturn?t("Yes"):t("No"))),m.a.createElement("li",{className:"fare-details-list-item"},m.a.createElement("span",{className:"fare-details-list-item-name"},m.a.createElement("span",null,t("exchange"))),m.a.createElement("span",{className:"fare-details-list-item-value"},e.canExchange?t("Yes"):t("No")))))}))},at=function(e){var t=e.timeLimit,n=e.prePayment,a=void 0===n?null:n;return t&&a&&(t=u()(t)>u()(a)?a:t),t?m.a.createElement(f.b,{ns:r.b},(function(e){return m.a.createElement("div",{className:"flight-payment-info"},"".concat(e("Payment before"),": ").concat(u()(t).format("DD MMM YYYY, HH:mm:ss")))})):null},rt=Object(h.connect)((function(e){var t,n,a;return{tariffsFetching:e.basketFlights.tariffsFetching,tariffs:e.basketFlights.tariffs,shoppingCartId:e.basketData.shoppingCartId,currencyCode:null===(t=e.basketData.price)||void 0===t||null===(n=t.priceTotal)||void 0===n||null===(a=n.tour)||void 0===a?void 0:a.currencyCode,correctionPrice:e.basketFlights.flightsCorrectionPrice,prePayment:e.order&&e.order.order&&e.order.order.prePayment}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(et),it=(n(2317),function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(){var e;Object(ve.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onChangeFlight=function(t){e.props.actions.setSelectedFlight(Object(a.a)({shoppingCartId:e.props.shoppingCartId},t)),e.props.actions.showChangeFlightModal(!1)},e.isSelectedAirline=function(t){return e.props.filter.selectedAirlines.includes(t)},e.isSelectedFlightType=function(t){return e.props.filter.selectedFlightTypes.includes(t)},e.isSelectedStopover=function(t){return e.props.filter.selectedStopovers.includes(t)},e.onCheckAirline=function(t){return function(){e.isSelectedAirline(t)?e.props.actions.changeFilter({key:"selectedAirlines",value:e.props.filter.selectedAirlines.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedAirlines",value:[].concat(Object(y.a)(e.props.filter.selectedAirlines),[t])})}},e.onClearSelectedAirlines=function(){e.props.actions.changeFilter({key:"selectedAirlines",value:[]})},e.onCheckFlightType=function(t){return function(){e.isSelectedFlightType(t)?e.props.actions.changeFilter({key:"selectedFlightTypes",value:e.props.filter.selectedFlightTypes.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedFlightTypes",value:[].concat(Object(y.a)(e.props.filter.selectedFlightTypes),[t])})}},e.onClearSelectedFlightTypes=function(){e.props.actions.changeFilter({key:"selectedFlightTypes",value:[]})},e.onCheckStopover=function(t){return function(){e.isSelectedStopover(t)?e.props.actions.changeFilter({key:"selectedStopovers",value:e.props.filter.selectedStopovers.filter((function(e){return e!==t}))}):e.props.actions.changeFilter({key:"selectedStopovers",value:[].concat(Object(y.a)(e.props.filter.selectedStopovers),[t])})}},e.onClearSelectedStopovers=function(){e.props.actions.changeFilter({key:"selectedStopovers",value:[]})},e.onChangeTiming=function(t){return function(n){e.props.actions.changeFilter({key:t,value:n})}},e.onClearTiming=function(){e.props.actions.clearTimings()},e.isTimingChanged=function(e){return 0!==e.from||23!==e.to},e.isTimingsChanged=function(){return e.isTimingChanged(e.props.filter.backDepartureTime)||e.isTimingChanged(e.props.filter.directDepartureTime)||e.isTimingChanged(e.props.filter.backArrivalTime)||e.isTimingChanged(e.props.filter.directArrivalTime)},e.onClearWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!1})},e.onChangeWithLuggage=function(){e.props.actions.changeFilter({key:"withLuggage",value:!e.props.filter.withLuggage})},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.backFlights.length||this.props.directFlights.length||this.props.fetching||this.props.actions.fetchFlights(this.props.shoppingCartId)}},{key:"componentDidUpdate",value:function(){this.props.fetching||this.props.directFlights.length||!this.props.filter.firstStart||(this.props.actions.changeFilter({key:"firstStart",value:!1}),this.onClearSelectedStopovers())}},{key:"render",value:function(){var e=this;return m.a.createElement(f.b,{ns:r.b},(function(t){return m.a.createElement(F.a,null,e.props.fetching?m.a.createElement(ge.a,{description:t("Searching for all available flights")}):m.a.createElement(m.a.Fragment,null,m.a.createElement(S.a,null,m.a.createElement(I.a,{md:12},m.a.createElement("div",{className:"change-flight-filters"},e.props.showOnlyMouzenidis&&m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedFlightTypes.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedFlightTypes.length?m.a.createElement(_.a,{icon:"times",onClick:e.onClearSelectedFlightTypes}):void 0,onClick:e.onCheckFlightType("isMouzenidis")},t("Only MOUZENIDIS"))),m.a.createElement("div",null,m.a.createElement(i.c,{color:e.props.filter.selectedStopovers.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedStopovers.length?m.a.createElement(_.a,{onClick:e.onClearSelectedStopovers,icon:"times"}):void 0,onClick:e.onCheckStopover("isNotConnected")},t("Direct flights"))),m.a.createElement("div",{className:"account-orders-post-filter"},m.a.createElement(Ee.a,{label:t("With luggage"),trigger:m.a.createElement(i.c,{size:"sm",color:e.props.filter.withLuggage?"primary":"default",pluginAfter:e.props.filter.withLuggage?m.a.createElement(_.a,{onClick:e.onClearWithLuggage,icon:"times"}):void 0},t("With luggage"))},m.a.createElement("div",{className:"p1 account-orders-post-filter-dropdown"},m.a.createElement("div",{className:"account-orders-post-filter-visa"},m.a.createElement("div",{className:"account-orders-post-filter-visa-info"},m.a.createElement("div",{className:"bold title"},t("With luggage")),m.a.createElement("p",{className:"desc"},t("Flights with luggage or the ability to select the tariff"))),m.a.createElement(Ne,{labelOn:t("Yes"),labelOff:t("No"),onChange:e.onChangeWithLuggage,value:e.props.filter.withLuggage}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Airlines"),trigger:m.a.createElement(i.c,{color:e.props.filter.selectedAirlines.length?"primary":"default",size:"sm",pluginAfter:e.props.filter.selectedAirlines.length?m.a.createElement(_.a,{onClick:e.onClearSelectedAirlines,icon:"times"}):void 0},t("Airlines"))},m.a.createElement("ul",{className:"nostyles"},e.props.airlines.map((function(t){return m.a.createElement("li",{key:t.id},m.a.createElement(Ce.a,{label:t.name,checked:e.isSelectedAirline(t.id),onChange:e.onCheckAirline(t.id)}))}))))),m.a.createElement("div",null,m.a.createElement(Ee.a,{label:t("Timing"),trigger:m.a.createElement(i.c,{size:"sm",color:e.isTimingsChanged()?"primary":"default",pluginAfter:e.isTimingsChanged()?m.a.createElement(_.a,{onClick:e.onClearTiming,icon:"times"}):void 0},t("Timing"))},m.a.createElement("div",{className:"change-flight-filters-timing"},m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Se,{inline:!0,label:t("Departure time"),from:e.props.filter.directDepartureTime.from,to:e.props.filter.directDepartureTime.to,onChange:e.onChangeTiming("directDepartureTime")}),m.a.createElement(Se,{inline:!0,label:t("Arrival time"),from:e.props.filter.directArrivalTime.from,to:e.props.filter.directArrivalTime.to,onChange:e.onChangeTiming("directArrivalTime")})),m.a.createElement("div",{className:"change-flight-filters-time"},m.a.createElement(Se,{inline:!0,label:t("Departure time Return"),from:e.props.filter.backDepartureTime.from,to:e.props.filter.backDepartureTime.to,onChange:e.onChangeTiming("backDepartureTime")}),m.a.createElement(Se,{inline:!0,label:t("Arrival time Return"),from:e.props.filter.backArrivalTime.from,to:e.props.filter.backArrivalTime.to,onChange:e.onChangeTiming("backArrivalTime")})))))))),m.a.createElement(S.a,null,m.a.createElement(I.a,{md:12},m.a.createElement("div",{className:"change-flight"},e.props.directFlights.map((function(t){return m.a.createElement(c.a,{key:t.id,className:"dashboard"},m.a.createElement(rt,{transport:e.props.transport,direct:t,back:t.cheapestBackFlight,selectFlights:e.onChangeFlight,booking:e.props.booking}))})))))))}))}}]),n}(d.PureComponent)),ct=Object(h.connect)((function(e){return{fetching:e.basketFlights.fetching,shoppingCartId:e.basketData.shoppingCartId,backFlights:se(e),directFlights:oe(e),airlines:ue(e),filter:e.basketFlights.filter,showOnlyMouzenidis:fe(e)}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(it),lt=function(e){Object(be.a)(n,e);var t=Object(he.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).closeModal=function(){e.props.actions.showFlightRules(e.props.selectedHash)},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.rules||this.props.actions.fetchFlightRules(this.props.selectedHash)}},{key:"render",value:function(){return m.a.createElement(l.a,{scrollable:!0,modalTitle:"Fare rules",onClose:this.closeModal},m.a.createElement("div",null,m.a.createElement("pre",null,m.a.createElement("p",null,this.props.rules)),this.props.fetching&&m.a.createElement(o.a,null)))}}]),n}(d.PureComponent),ot=Object(h.connect)((function(e){return{rules:me(e),selectedHash:e.basketFlights.selectedRuleHash,fetching:e.basketFlights.rulesFetching,shoppingCartId:e.basketData.shoppingCartId}}),(function(e){return{actions:Object(b.bindActionCreators)(E.basketFlightsActions,e)}}))(lt);n(2315),t.default=Object(h.connect)((function(e){return{showChangeFlight:e.basketFlights.showChangeFlight,showRules:e.basketFlights.showRules,showIssueTickets:e.basketFlights.showIssueTickets,showIssueError:e.basketFlights.showIssueError,showIssueSuccess:e.basketFlights.showIssueTicketsSuccess,fetching:e.basketFlights.fetching||e.basketActualization.fetching||e.basketMeal.fetching,shoppingCartId:e.basketData.shoppingCartId,allowFlightSelection:e.basketFlights.allowFlightSelection,selectedFlights:de(e),allowMoveToTickets:e.basketPageData.allowMoveToTickets,allowTicketsReservation:e.basketPageData.allowTicketsReservation,autoIssuedDate:e.basketPageData.autoIssuedDate,ordercode:e.order&&e.order.order?e.order.order.code:null,tour:e.basketData}}),(function(e){return{actions:Object(b.bindActionCreators)(Object(a.a)({},E.basketActions,{},E.basketFlightsActions),e)}}))((function(e){var t=e.readOnly,n=e.allowFlightSelection,s=e.allowMoveToTickets,v=e.allowTicketsReservation,h=e.showIssueTickets,b=e.showIssueSuccess,g=e.showIssueError,E=e.showChangeFlight,y=e.showRules,k=e.fetching,O=e.actions,N=e.shoppingCartId,j=e.tour,C=e.ordercode,x=e.selectedFlights,T=e.autoIssuedDate,w=e.booking,F=void 0===w||w,S=function(){O.showChangeFlightModal(!0)},I=function(){O.showIssueTicketsModal(!0)},A=function(){O.showIssueTicketsModal(!1)},D=function(){O.setSelectedTab("documents")},M=function(e){O.setSelectedFlight(Object(a.a)({shoppingCartId:N},e))},P=Object(f.c)(r.b).t;return(null===x||void 0===x?void 0:x.length)?m.a.createElement(d.Fragment,null,m.a.createElement(p.a,{query:"(max-width: 991px)"},(function(e){return e?m.a.createElement("div",{className:"flights-mobile basket-mobile-block"},m.a.createElement("div",{className:"basket-mobile-block-title"},m.a.createElement("div",null,j&&"Bus"===j.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights")),m.a.createElement("div",{className:"basket-mobile-block-title-action"})),m.a.createElement("div",{className:"flight-mobile-item"},m.a.createElement("div",{className:"flight-mobile-item-body"},m.a.createElement("div",{className:"flights"},x.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:j.tour.transportType,direct:e.direct,back:e.back,selectFlights:M,promo:!0,booking:F})}))),!t&&F&&n?j&&"Bus"!==j.tour.transportType&&m.a.createElement("div",{onClick:S},m.a.createElement(i.c,{fullWidth:!0,color:"primary"},P("Select another flight"))):m.a.createElement("div",null,s&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:D},P("Tickets has been issued")),v&&m.a.createElement(i.c,{type:"button",fullWidth:!0,color:"primary",onClick:I},P("Issue the tickets")),T&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(T).format("HH:mm DD MMM"))))))):m.a.createElement("div",{className:"flights-wrapper"},m.a.createElement(c.a,{title:j&&"Bus"===j.tour.transportType?"".concat(P("Flights")," (").concat(P("Bus"),")"):P("Flights"),className:"dashboard",actions:!t&&F&&n?j&&"Bus"!==j.tour.transportType&&m.a.createElement("div",{onClick:S},m.a.createElement(i.c,{type:"button",size:"sm",color:"primary"},P("Select another flight"))):m.a.createElement("div",null,s&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:D},P("Tickets has been issued")),v&&m.a.createElement(i.c,{type:"button",size:"sm",color:"primary",onClick:I},P("Issue the tickets")),T&&m.a.createElement("div",{className:"orange"},"".concat(P("Tickets has been issued at")," ").concat(u()(T).format("HH:mm DD MMM"))))},m.a.createElement("div",{className:"flights"},x.map((function(e,t){return m.a.createElement(rt,{hasMeal:!0,hasExtra:!0,key:"flights_".concat(t),transport:j.tour.transportType,direct:e.direct,back:e.back,selectFlights:M,promo:!0,booking:F})})))))})),m.a.createElement(te,null),m.a.createElement(ne,null),h&&m.a.createElement(l.a,{modalTitle:P(b?"Tickets has been issued successfully":"Issue the tickets?"),onClose:A},b&&P("Tickets has been issued successfully"),k&&P("Tickets are issuing"),g&&m.a.createElement("span",null,P("An error occurred during checkout. Please try again or contact sales office.")),k&&m.a.createElement(o.a,null),m.a.createElement("div",{className:"text-right"},m.a.createElement(i.c,{type:"button",color:"danger",onClick:A},P("Close"))," ",!b&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){O.issueOrderTickets(C)}},P("Confirm"))," ",b&&m.a.createElement(i.c,{type:"button",color:"primary",onClick:function(){O.showIssueTicketsModal(!1),O.setSelectedTab("documents")}},P("Electronic ticket(s)")))),E&&m.a.createElement(l.a,{scrollable:!0,onClose:function(){O.showChangeFlightModal(!1)},modalTitle:P("Change flight")},m.a.createElement(ct,{transport:j.tour.transportType,booking:F})),y&&m.a.createElement(ot,null),k&&m.a.createElement(o.a,null)):null}))},2101:function(e,t,n){"use strict";n.r(t),n.d(t,"ExcursionServices",(function(){return ye}));var a=n(3),r=n(23),i=n(139),c=n(258),l=n(2107),o=n(2232),s=n(2215),u=n(0),d=n.n(u),m=n(17),f=n(39),v=n(75),p=n(8),h=n(1035),b=n(33),g=function(e){return e.basketExtra.extra},E=Object(b.a)(g,(function(e){return e.map((function(e){return e.code}))})),y=Object(b.a)(g,(function(e){return e})),k=Object(b.a)((function(e){return e.basketExtra.selectedExtra}),(function(e){return e})),O=Object(b.a)([g,function(e){return e.basketExtra.filter}],(function(e,t){return t.length?e.filter((function(e){return t.includes(e.code)})):e})),N=function(e){return e.basketExtra.excursions},j={VIP:"https://cms.mouzenidis.com/userfiles/onlinenext/services/vip.jpg",RealEstate:"https://cms.mouzenidis.com/userfiles/onlinenext/services/realestate.jpg",Extra:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg",Dinner:"https://cms.mouzenidis.com/userfiles/onlinenext/services/other.jpg"},C=Object(b.a)([y,N],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];if(t.length){var a,r=t.reduce((function(e,t){var n,a,r;return(null===e||void 0===e||null===(n=e.tour)||void 0===n?void 0:n.sum)>(null===(a=t.minPrice)||void 0===a||null===(r=a.tour)||void 0===r?void 0:r.sum)?t.minPrice:e}),t[0].minPrice);n.push({title:"Excursions",type:"Excursions",logo:"https://cms.mouzenidis.com/userfiles/onlinenext/services/excursions.jpg",minPrice:r,hasDiffrentPrice:0!==(null===r||void 0===r||null===(a=r.tour)||void 0===a?void 0:a.sum)||t.some((function(e){var t,n,a;return((null===(t=e.minPrice)||void 0===t||null===(n=t.tour)||void 0===n?void 0:n.sum)||0)>((null===r||void 0===r||null===(a=r.tour)||void 0===a?void 0:a.sum)||0)}))})}return(null===e||void 0===e?void 0:e.length)&&(n=n.concat(e.map((function(e){var t,n,a=e.services.reduce((function(e,t){var n=t.variants.reduce((function(e,t){var n,a;return e.concat([null===(n=t.price)||void 0===n||null===(a=n.tour)||void 0===a?void 0:a.sum])}),[]);return e.concat(n)}),[]);return{title:e.name,type:"Extra",logo:j[e.code],minPrice:e.minPrice,code:e.code,hasDiffrentPrice:0!==(null===(t=e.minPrice)||void 0===t||null===(n=t.tour)||void 0===n?void 0:n.sum)||a.some((function(t){var n,a;return t<(null===(n=e.minPrice)||void 0===n||null===(a=n.tour)||void 0===a?void 0:a.sum)}))}})))),n})),x=Object(b.a)(N,(function(e){return e})),T=Object(b.a)([function(e){return e.basketExtra.selectedExcursions},k],(function(e,t){var n=e.map((function(e){return Object(a.a)({},e,{type:"Excursion",tourists:e.touristIds||[]})}));return t.map((function(e){return Object(a.a)({},e,{title:e.name,type:"Extra",tourists:e.tourists||[]})})).concat(n)})),w=n(340),F=n(21),S=n(2233),I=n(2222),A=n(2223),D=n(2224),M=n(106),P=n(2225),R=n(2226),_=n(155),B=n(1033),V=(n(2313),[{label:"VIP service",key:"VIP"},{label:"Real Estate",key:"RealEstate"},{label:"Medical services",key:"Medicine"},{label:"Flowers in the room",key:"Flowers"},{label:"Extra",key:"Extra"},{label:"Dinner",key:"Dinner"}]),z=function(e){var t=e.service,n=e.tourists,a=e.onCheck,r=e.isSelected,l=Object(m.c)(c.b).t,o=Object(_.a)((function(e,t){var a=n.find((function(t){return t.id===e}));return a?"".concat(a.lastName?a.lastName:"".concat(l("Tourist")," ").concat(++t)," ").concat(a.firstName?a.firstName:""):"none"}));return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"services-result-item-service-heading"},t.name),d.a.createElement("div",{className:"services-result-item-body"},d.a.createElement("div",{className:"services-result-item-image"},d.a.createElement("img",{src:t.photoUrl?B.c+t.photoUrl+"?w=220&h=80&mode=crop&quality=60":"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"services-result-item-tourists"},t.variants.map((function(e,t){return d.a.createElement(H,{key:t,label:o(e.touristId,t),variant:e,onChange:a,checked:r(e.serviceId)})})))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"services-result-item-details"},d.a.createElement("span",{className:"link"},l("Description of the service")," ",d.a.createElement(i.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"service-details"},d.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.descriptionHtml},className:"service-details-description"}))))},H=function(e){var t=e.variant,n=e.checked,a=e.onChange,r=e.label,i=Object(u.useContext)(h.a),c=i.extractPrice,l=i.activeCurrency,s=c(t.price,"sum");return d.a.createElement("div",{className:"selected-service-tourist"},d.a.createElement("div",{className:"selected-service-tourist-name"},d.a.createElement(P.a,{label:r,checked:n,defaultChecked:n,onChange:function(){a({serviceId:t.serviceId,price:t.price})}})),d.a.createElement("div",{className:"selected-service-name"},t.name),d.a.createElement("div",{className:"selected-service-price"},s>0?"+".concat(Object(w.b)(s)):Object(w.b)(s)," ",d.a.createElement(o.a,{currencyCode:l.code})))},L=Object(f.connect)((function(e){return{fetching:e.basketExtra.fetching,extra:O(e),extraServiceTypes:E(e),filter:e.basketExtra.filter}}),(function(e){return{actions:Object(v.bindActionCreators)(p.basketExtraActions,e)}}))((function(e){var t=e.filter,n=e.actions,i=e.onClose,l=e.fetching,f=e.extra,v=e.extraServiceTypes,p=e.tourists,b=Object(m.c)(c.b).t,g=Object(u.useContext)(h.a),E=g.extractPrice,y=g.activeCurrency,k=Object(u.useState)({selectedExtra:[],totalSum:0}),O=Object(r.a)(k,2),N=O[0],j=O[1],C=function(e){return t.includes(e)},x=function(e){return N.selectedExtra.some((function(t){return t.serviceId===e}))},T=function(e){j((function(t){if(x(e.serviceId)){var n=t.selectedExtra.filter((function(t){return t.serviceId!==e.serviceId}));return Object(a.a)({},t,{selectedExtra:n,totalSum:n.reduce((function(e,t){return e+E(t.price,"sum")}),0)})}var r=[].concat(Object(F.a)(t.selectedExtra),[e]);return Object(a.a)({},t,{selectedExtra:r,totalSum:r.reduce((function(e,t){return e+E(t.price,"sum")}),0)})}))};return d.a.createElement("div",{className:"add-service"},d.a.createElement(S.a,{scrollable:!0,onClose:i,modalTitle:b("Additional services"),modalFooter:d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"extra-common-sum"},d.a.createElement("div",null,"".concat(b("Total amount")," ").concat(N.totalSum),d.a.createElement(o.a,{currencyCode:y.code}))),d.a.createElement(M.c,{color:"dark",plain:!0,onClick:i},b("Cancel"))," ",d.a.createElement(M.c,{color:"success",onClick:function(){N.selectedExtra&&N.selectedExtra.length&&n.updateSelectedExtra(N.selectedExtra.map((function(e){return e.serviceId}))),i()}},b("Save"))))))},d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:3},d.a.createElement("div",{className:"services-filters"},d.a.createElement("div",{className:"services-filter"},d.a.createElement("div",{className:"services-filter-title"},b("Service Categories")),d.a.createElement("div",{className:"services-filter-body"},V.filter((function(e){return v.includes(e.key)})).map((function(e){return d.a.createElement("div",{key:e.key},d.a.createElement(P.a,{label:b(e.label),onChange:(a=e.key,function(){var e=[];e=t.includes(a)?Object(F.a)(t.filter((function(e){return e!==a}))):[].concat(Object(F.a)(t),[a]),n.changeExtraFilter(e)}),checked:C(e.key)}));var a})))))),d.a.createElement(D.a,{lg:9},d.a.createElement("div",{className:"services-results-heading"},b("Additional services")),d.a.createElement("div",{className:"services-results"},f.map((function(e,t){return d.a.createElement("div",{className:"services-result-item",key:t},d.a.createElement("div",{className:"services-result-item-heading"},e.name),e.services.map((function(e,t){return d.a.createElement(z,{key:t,service:e,tourists:p,onCheck:T,isSelected:x})})))})))))),l&&d.a.createElement(s.a,null)))})),q=n(12),U=n.n(q),Y=(n(1042),n(2098)),G=n(2216),K=n(268),W=n(788),X=n(2334),Z=n(140),J=function(e){var t=e.defaultChecked,n=e.defaultDate,i=e.onSelect,c=e.variant,l=e.onDelete,s=e.availableDates,m=e.label,f=Object(Z.e)(),v=Object(u.useRef)(null),b=Object(u.useState)({checked:t,date:t?n:void 0}),g=Object(r.a)(b,2),E=g[0],y=g[1];Object(u.useEffect)((function(){y((function(e){return Object(a.a)({},e,{checked:t})}))}),[t]),Object(u.useEffect)((function(){t&&y((function(e){return Object(a.a)({},e,{date:n})}))}),[n]);var k=function(e){i({serviceId:c.serviceId,date:e,touristId:c.touristId,price:c.price,type:p.EXCURSION_TYPES.GROUP})},O=Object(u.useContext)(h.a),N=O.extractPrice,j=O.activeCurrency;return d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-name"},d.a.createElement(P.a,{label:m,checked:E.checked,onChange:function(){var e=E.date,t=!E.checked;(y((function(e){return Object(a.a)({},e,{checked:t})})),!t||n||e)||v.current.setOpen(!0);t&&e&&k(e),t&&!e&&n?(y((function(e){return Object(a.a)({},e,{date:n})})),k(n)):!t&&e&&l(c.serviceId)}})),d.a.createElement(X.a,{className:"selected-excursion-date",ref:v,format:f.dateFormat,clearable:!1,year:!0,placeholder:f.dateFormat,value:E.date,mask:f.dateFormatMask,onChange:function(e){y((function(t){return Object(a.a)({},t,{date:e})})),E.checked&&k(e)},includeDates:s?s.map((function(e){return U()(e)})):void 0}),d.a.createElement("div",{className:"selected-excursion-price"},"+".concat(Object(w.b)(N(c.price,"sum")))," ",d.a.createElement(o.a,{currencyCode:j.code})))},Q=n(264),$=n(267),ee=n(2105),te=n(72),ne=n(79),ae=n.n(ne),re=n(191),ie=n.n(re),ce=n(119),le=function(e){var t=e.type,n=e.selectedLength,a=e.onClearAll,r=e.onSelectedOptionsOpened,c=e.onSelectedOptionsClosed,l=e.tree,o=Object(u.useContext)(ce.b);return d.a.createElement(u.Fragment,null,t===te.b&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner ".concat(n>0?"active":"grey").trim()},n>0&&d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(i.a,{className:"icon",icon:"times",onClick:a})),n>0?d.a.createElement(ae.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:r,onClose:c,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ie.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},l)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},o.selected," ",n)))})):d.a.createElement("span",{className:"small m-l-5"},o.selectedAll))),t===te.a&&n>1&&d.a.createElement("div",{className:"multiselect-selected-options"},d.a.createElement("div",{className:"multiselect-selected-options__inner active"},d.a.createElement("span",{className:"options__inner_close"},d.a.createElement(i.a,{className:"icon",icon:"times",onClick:a})),d.a.createElement(ae.a,{query:"(max-width: 768px)"},(function(e){return d.a.createElement(ee.a,{onToggle:r,onClose:c,position:e?"bottom":"right",style:{minWidth:300,maxHeight:300,border:"1px solid #ddd"},content:d.a.createElement(ie.a,{autoHeight:!0,autoHeightMax:300,renderTrackVertical:function(e){return d.a.createElement("div",Object.assign({},e,{className:"track-vertical",style:{display:"none"}}))}},l)},d.a.createElement("div",{className:"multiselect-selected-options__inner-handler"},d.a.createElement("span",{className:"link small m-l-5"},o.selected," ",n)))})))))},oe=n(269),se=n(266),ue=n(2229),de=n(2235),me=n(98),fe=(n(1118),function(e){var t=e.type,n=void 0===t?te.a:t,i=e.valueKey,c=void 0===i?"id":i,l=e.labelKey,o=void 0===l?"name":l,s=e.searchable,m=void 0===s||s,f=e.selectable,v=void 0===f||f,p=e.loading,h=void 0!==p&&p,b=e.width,g=void 0===b?Object(W.e)()?"100%":220:b,E=e.height,y=void 0===E?Object(W.e)()?450:202:E,k=e.rowHeight,O=void 0===k?24:k,N=e.clearable,j=void 0===N||N,C=e.options,x=e.selected,T=e.inputLabelRenderer,w=e.label,S=e.className,I=e.subLabel,A=e.placeholderText,D=e.treeClassName,M=e.labelRenderer,P=e.tooltipRenderer,R=e.onSelect,_=Object(ue.b)().translateNode,B=Object(u.useContext)(ce.b),V=Object(se.a)(C),z=Object(u.useState)({filteredOptions:C,selectedOptions:Object(me.d)(x,V,c),searchFocused:!1,inputLabel:Object(me.b)(Object(me.d)(x,V,c),T,o,B),searchTerm:"",selectedNodesOpened:!1,dropdownOpened:!1}),H=Object(r.a)(z,2),L=H[0],q=H[1],U=Object(se.b)(L.selectedOptions,C,c);Object(u.useEffect)((function(){q((function(e){return Object(a.a)({},e,{inputLabel:Object(me.b)(Object(me.d)(x,V,c),T,o,B),selectedOptions:Object(me.d)(x,V,c)})}))}),[x,V]),Object(u.useEffect)((function(){q((function(e){return Object(a.a)({},e,{filteredOptions:Object(me.a)(V,C,e.searchTerm,o,c,_)})}))}),[C]);var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.searchTerm;q((function(t){return Object(a.a)({},t,{filteredOptions:Object(me.a)(V,C,e,o,c,_)})}))},G=function(){q((function(e){return Object(a.a)({},e,{selectedOptions:[],inputLabel:"",searchTerm:""})})),R([])},K=function(e){var t=e.target.value.toLowerCase();q((function(e){return Object(a.a)({},e,{searchTerm:t})})),Y(t)},X=function(e){var t;L.dropdownOpened&&e.stopPropagation(),(null===(t=L.selectedOptions)||void 0===t?void 0:t.length)>0&&G()},Z=function(e){q((function(t){var n=[],r=null;if(e.children&&e.children.length>0&&(r=Object(W.c)(e.children)),t.selectedOptions.some((function(t){return t[c]===e[c]}))){var i=t.selectedOptions.filter((function(t){return t[c]!==e[c]}));r&&(i=i.filter((function(e){return r&&-1===r.findIndex((function(t){return e[c]===t[c]}))}))),n=Object(me.c)(i,V,c);var l=Object(me.c)([e],V,c);return l&&l.length>0&&(i=i.filter((function(e){return l.some((function(t){return t[c]!==e[c]}))}))),i=[].concat(Object(F.a)(i.filter((function(e){return!n.some((function(t){return t[c]===e[c]}))}))),Object(F.a)(n)),R(i.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(a.a)({},t,{selectedOptions:i,inputLabel:Object(me.b)(i,T,o,B)})}n=Object(me.c)([].concat(Object(F.a)(t.selectedOptions),[e]),V,c);var s=t.selectedOptions.concat([Object(a.a)({},e,{_selected:te.e})]);return r&&(s=s.concat(r.map((function(e){return Object(a.a)({},e,{_selected:te.e})})))),s=[].concat(Object(F.a)(s.filter((function(e){return!n.some((function(t){return t[c]===e[c]}))}))),Object(F.a)(n)),R(s.filter((function(e){return e._selected!==te.c&&e._selected!==te.d&&!e.isGroup}))),Object(a.a)({},t,{selectedOptions:s,inputLabel:Object(me.b)(s,T,o,B)})}))};return d.a.createElement("div",{className:"multiselect ".concat(S||"").trim()},n===te.b?d.a.createElement(u.Fragment,null,m&&d.a.createElement($.a,{placeholder:A,searchTerm:L.searchTerm,clearable:!!j&&!!L.inputLabel,onClearInput:X,inputLabel:L.inputLabel,onChange:K,onSearch:Y}),I&&I,v&&d.a.createElement(le,{type:n,selectedLength:L.selectedOptions.length,onClearAll:G,onSelectedOptionsOpened:function(){q((function(e){return Object(a.a)({},e,{selectedNodesOpened:!0})}))},onSelectedOptionsClosed:function(){q((function(e){return Object(a.a)({},e,{selectedNodesOpened:!1})}))},tree:d.a.createElement(oe.a,{options:U,selected:L.selectedOptions,onSelect:Z,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:n,height:y,className:D,labelRenderer:M,tooltipRenderer:P})}),d.a.createElement(oe.a,{options:L.filteredOptions,selected:L.selectedOptions,onSelect:Z,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:n,height:y,className:D,labelRenderer:M,tooltipRenderer:P})):d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"multiselect-label"},w&&d.a.createElement(Q.a,null,w),I&&I),d.a.createElement(de.a,{onClose:function(){q((function(e){return Object(a.a)({},e,{dropdownOpened:!1})}))},onOpen:function(){q((function(e){return Object(a.a)({},e,{dropdownOpened:!0})}))},allowClosing:!L.selectedNodesOpened,label:w&&w,style:{padding:"4px 0 4px 0",width:g},trigger:d.a.createElement($.a,{placeholder:A,searchTerm:L.searchTerm,clearable:!!j&&!!L.inputLabel,onClearInput:X,inputLabel:L.inputLabel,onChange:K,onSearch:Y})},d.a.createElement(oe.a,{options:L.filteredOptions,selected:L.selectedOptions,onSelect:Z,rowHeight:O,loading:h,valueKey:c,labelKey:o,type:n,height:y,className:D,labelRenderer:M,tooltipRenderer:P}))))}),ve=function(e){var t=e.variant,n=e.availableDates,i=e.onDelete,l=e.tourists,s=e.onChange,f=Object(m.c)(c.b).t,v=Object(Z.e)(),b=Object(u.useMemo)((function(){return l.map((function(e,t){return{id:e.id,name:e.firstName||e.lastName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(f("Tourist"))}}))}),[l]),g=Object(u.useState)({selectedTouristIds:[],date:void 0}),E=Object(r.a)(g,2),y=E[0],k=E[1],O=function(e,n){e.length?s&&n&&s({serviceId:t.serviceId,type:p.EXCURSION_TYPES.INDIVIDUAL,price:t.price,date:n,touristIds:e}):i(t.serviceId)},N=Object(u.useContext)(h.a),j=N.extractPrice,C=N.activeCurrency;return d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"selected-excursion-tourist-individual"},d.a.createElement("div",{className:"selected-excursion-price individual"})),d.a.createElement("div",{className:"selected-excursion-tourist-individual-body"},d.a.createElement("div",{className:"selected-excursion-tourist"},d.a.createElement("div",{className:"selected-excursion-tourist-date"},d.a.createElement(X.a,{format:v.dateFormat,clearable:!1,Label:f("Excursion date"),year:!0,placeholder:v.dateFormat,value:y.date,mask:v.dateFormatMask,onChange:function(e){k((function(t){return Object(a.a)({},t,{date:e})})),O(y.selectedTouristIds,e)},includeDates:n?n.map((function(e){return U()(e)})):void 0})),d.a.createElement("div",{className:"selected-excursion-tourist-count"},d.a.createElement(Q.a,null,f("Select tourist")),d.a.createElement(fe,{options:b,selected:b.filter((function(e){return y.selectedTouristIds.includes(e.id)})),selectable:!1,onSelect:function(e){var t=e.map((function(e){return e.id}));k((function(e){return Object(a.a)({},e,{selectedTouristIds:t})})),O(t,y.date)}})),d.a.createElement("div",{className:"selected-excursion-tourist-price"},d.a.createElement(Q.a,{className:"invisible"},"Currency"),d.a.createElement("div",{className:"selected-excursion-tourist-count"},"+".concat(Object(w.b)(j(t.price,"sum")))," ",d.a.createElement(o.a,{currencyCode:C.code}))))))},pe=function(e){var t=e.excursion,n=e.tourists,a=void 0===n?[]:n,l=e.onSelect,o=e.onDelete,s=e.isSelected,f=e.date,v=Object(m.c)(c.b).t,h=Object(u.useState)((function(){var e=null===t||void 0===t?void 0:t.prices,n=Object(r.a)(e,1)[0];return{selectedType:null===n||void 0===n?void 0:n.name,selectedPrice:n}})),b=Object(r.a)(h,2),g=b[0],E=b[1],y=Object(u.useMemo)((function(){var e=(null===t||void 0===t?void 0:t.prices.map((function(e){return{label:e.name,value:e.name}})))||[];if(t.type===p.EXCURSION_TYPES.INDIVIDUAL){var n=a.length;e=e.filter((function(e){return e.variants.some((function(e){return e.minTourists<=n}))}))}return e}),[t,a]),k=Object(_.a)((function(e,t){var n=function(e){return a.find((function(t){return t.id===e}))}(e);return n&&(n.lastName||n.firstName)?"".concat(n.lastName," ").concat(n.firstName):"".concat(++t,". ").concat(v("Tourist"))})),O={history:!1,galleryUID:t.id},N=t.gallery.map((function(e){return{src:B.c+e.url,thumbnail:"".concat(B.c).concat(e.thumbnail,"?&mode=crop"),w:1200,h:900}}));return d.a.createElement("div",{className:"excursions-result-item"},d.a.createElement("div",{className:"excursions-result-item-heading"},"".concat(t.title," ").concat(t.durationCategory?"(".concat(v(Object(W.b)(t.durationCategory)),")"):"")),d.a.createElement("div",{className:"excursions-result-item-body"},d.a.createElement("div",{className:"excursions-result-item-image"},d.a.createElement("img",{src:t.image?B.c+t.image:"http://via.placeholder.com/220x165",alt:""})),d.a.createElement("div",{className:"excursions-result-item-tourists"},d.a.createElement(Y.b,{options:y,value:g.selectedType,onChange:function(e){var n;E({selectedType:e,selectedPrice:null===t||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.find((function(t){return t.name===e}))})},clearable:!1}),g.selectedPrice&&d.a.createElement("div",{className:"selected-excursion-tourists-tab"},g.selectedPrice.priceFor===p.EXCURSION_TYPES.GROUP&&g.selectedPrice.variants.map((function(e,n){return d.a.createElement(J,{key:n,label:k(e.touristId,n),variant:e,onSelect:l,onDelete:o,availableDates:t.availableDates,defaultChecked:s(e.serviceId),defaultDate:f(t.id,e.serviceId)})})),g.selectedPrice.priceFor===p.EXCURSION_TYPES.INDIVIDUAL&&g.selectedPrice.variants.map((function(e,n){return d.a.createElement(ve,{key:n,variant:e,availableDates:t.availableDates,onChange:l,tourists:a,onDelete:o})}))))),d.a.createElement(R.a,{triggerBefore:!0,trigger:d.a.createElement("div",{className:"excursions-result-item-details"},d.a.createElement("span",{className:"link"},v("Description of the excursion")," ",d.a.createElement(i.a,{className:"icon",icon:"chevron-down"})))},d.a.createElement("div",{className:"excursion-details"},d.a.createElement(G.b,{destroyInactive:!0},d.a.createElement(G.a,{title:v("Description of the excursion"),id:"about-excursion"},d.a.createElement("div",{className:"excursion-details-description",dangerouslySetInnerHTML:{__html:t.description}})),d.a.createElement(G.a,{title:v("Photo Gallery"),id:"excursion-gallery"},d.a.createElement("div",{className:"excursion-details-photos"},d.a.createElement("div",{className:"photo-grid"},d.a.createElement(K.PhotoSwipeGallery,{items:N,options:O,thumbnailContent:function(e){return d.a.createElement("img",{src:e.thumbnail,width:120,height:90,alt:""})}}))))))))},he=(n(2312),Object(f.connect)((function(e){return{excursions:x(e)}}))((function(e){var t=e.onClose,n=e.onSave,i=e.tourists,l=e.excursions,s=void 0===l?[]:l,f=Object(m.c)(c.b).t,v=Object(u.useContext)(h.a),b=v.extractPrice,g=v.activeCurrency,E=Object(u.useState)((function(){return{dailyFilter:[],durationFilter:[],excursions:s,selectedExcursions:[]}})),y=Object(r.a)(E,2),k=y[0],O=y[1];Object(u.useEffect)((function(){B()}),[k.dailyFilter,k.durationFilter]);var N=function(e){return k.selectedExcursions.some((function(t){return t.serviceId===e}))},j=Object(u.useMemo)((function(){return k.selectedExcursions.reduce((function(e,t){return e+b(t.price,"sum")}),0)}),[k.selectedExcursions,g]),C=function(e){O((function(t){var n=[];return N(e.serviceId)?(n=t.selectedExcursions.filter((function(t){return t.serviceId!==e.serviceId})),e.type===p.EXCURSION_TYPES.INDIVIDUAL&&e.touristIds.length&&n.push(e)):n=[].concat(Object(F.a)(t.selectedExcursions),[e]),Object(a.a)({},t,{selectedExcursions:n})}))},x=function(e){O((function(t){var n=t.selectedExcursions.filter((function(t){return t.serviceId!==e}));return Object(a.a)({},t,{selectedExcursions:n})}))},T=function(e){return k.dailyFilter.includes(e)},w=function(e){return k.durationFilter.includes(e)},R=function(e){return function(){O((function(t){var n=[];return n=t.durationFilter.includes(e)?t.durationFilter.filter((function(t){return t!==e})):[].concat(Object(F.a)(t.durationFilter),[e]),Object(a.a)({},t,{durationFilter:n})}))}},_=function(e){return function(){O((function(t){var n=[];return n=t.dailyFilter.includes(e)?t.dailyFilter.filter((function(t){return t!==e})):[].concat(Object(F.a)(t.dailyFilter),[e]),Object(a.a)({},t,{dailyFilter:n})}))}},B=function(){var e=k.dailyFilter,t=k.durationFilter,n=s;e.length>0&&(n=n.filter((function(t){return t.availableDates.some((function(t){return e.includes(U()(t).locale("en").format("dddd"))}))}))),t.length>0&&(n=n.filter((function(e){return t.includes(e.durationCategory)}))),O((function(e){return Object(a.a)({},e,{excursions:n})}))},V=function(e,t){return function(e){var t=k.selectedExcursions.find((function(t){return t.serviceId===e}));return null===t||void 0===t?void 0:t.date}(t)||function(e){var t=k.selectedExcursions.find((function(t){return t.excursionId===e&&t.type===p.EXCURSION_TYPES.GROUP}));return null===t||void 0===t?void 0:t.date}(e)};return d.a.createElement(S.a,{scrollable:!0,onClose:t,modalTitle:f("Available excursions"),modalFooter:d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:12},d.a.createElement("div",{className:"text-right"},d.a.createElement("div",{className:"exursions-common-sum"},d.a.createElement("div",null,"".concat(f("Total amount")," ").concat(j," ")," ",d.a.createElement(o.a,{currencyCode:g.code}))),d.a.createElement(M.c,{color:"dark",plain:!0,onClick:t},f("Cancel"))," ",d.a.createElement(M.c,{color:"success",onClick:function(){n(k.selectedExcursions)}},f("Save"))))))},d.a.createElement(I.a,null,d.a.createElement(A.a,null,d.a.createElement(D.a,{lg:3},d.a.createElement("div",{className:"excursions-filters"},d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Days of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Monday"),checked:T("Monday"),onChange:_("Monday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Tuesday"),checked:T("Tuesday"),onChange:_("Tuesday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Wednesday"),checked:T("Wednesday"),onChange:_("Wednesday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Thursday"),checked:T("Thursday"),onChange:_("Thursday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Friday"),checked:T("Friday"),onChange:_("Friday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Saturday"),checked:T("Saturday"),onChange:_("Saturday")})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("Sunday"),checked:T("Sunday"),onChange:_("Sunday")})))),d.a.createElement("div",{className:"excursions-filter"},d.a.createElement("div",{className:"excursions-filter-title"},f("Duration of excursions")),d.a.createElement("div",{className:"excursions-filter-body"},d.a.createElement("div",null,d.a.createElement(P.a,{label:f("less than 4 hours"),checked:w(1),onChange:R(1)})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("from 4 till 8 hours"),checked:w(2),onChange:R(2)})),d.a.createElement("div",null,d.a.createElement(P.a,{label:f("more than 8 hours"),checked:w(3),onChange:R(3)})))))),d.a.createElement(D.a,{lg:9},d.a.createElement("div",{className:"excursions-results-heading"},f("Excursions")),d.a.createElement("div",{className:"excursions-results"},k.excursions.map((function(e){return d.a.createElement(pe,{key:e.id,excursion:e,onSelect:C,onDelete:x,isSelected:N,date:V,tourists:i})})))))))}))),be=n(1034),ge=n(190),Ee=function(e){var t=e.tourists,n=e.onAddTourist,a=e.onDeleteTourist,r=e.id,l=e.onDelete,s=e.readonly,f=e.price,v=e.title,p=e.basketTourists,b=e.touristCount,g=e.date,E=e.type,y=e.attributes,k=Object(m.c)(c.b).t,O=Object(u.useContext)(h.a),N=O.extractPrice,j=O.activeCurrency,C=function(){l(r)},x=function(e){return t.includes(e)};return d.a.createElement("div",{className:"selected-excursions-service"},d.a.createElement("div",{className:"selected-excursions-service-name"},d.a.createElement("div",null,d.a.createElement("div",{className:"grey small"},k("Excursion"===E?"Excursion tour":"Additional service")),d.a.createElement("div",{className:"title"},d.a.createElement("span",{className:"link"},v))),(null===y||void 0===y?void 0:y.isOptional)&&d.a.createElement(ge.a,{query:"(max-width: 991px)"},(function(e){return e&&d.a.createElement(be.a,{title:d.a.createElement("span",null,k("Remove service"))},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(k("Are you sure you want to delete")," ").concat(v,"?"))&&C()}},d.a.createElement(i.a,{icon:"times"}))))}))),d.a.createElement("div",{className:"selected-excursions-service-date"},d.a.createElement("div",{className:"grey small"},k("Date")),d.a.createElement("div",{className:"title"}," ",U()(g).format("DD MMM YYYY"))),d.a.createElement("div",{className:"selected-excursions-service-tourists"},d.a.createElement("div",{className:"grey small"},k("Tourists")),d.a.createElement(de.a,{fullScreenOnMobile:!0,label:k("Select tourist"),trigger:d.a.createElement("div",{className:"title link"},b," ",k("persons"))},d.a.createElement("div",{className:"selected-excursions-service-tourists-dropdown"},d.a.createElement("ul",{className:"nostyles"},p.map((function(e,t){return d.a.createElement("li",{key:e.id},d.a.createElement(P.a,{onChange:(i=e.id,function(e){e.target.checked?n(r,i):a(r,i)}),checked:x(e.id),disabled:s,label:d.a.createElement("div",null,e.lastName||e.firstName?"".concat(e.lastName," ").concat(e.firstName):"".concat(++t,". ").concat(k("Tourist")))}));var i})))))),d.a.createElement("div",{className:"selected-excursions-service-price"},d.a.createElement("div",{className:"grey small"},k("Price")),f?d.a.createElement("div",{className:"title"},N(f,"sum")," ",d.a.createElement(o.a,{currencyCode:j.code})):d.a.createElement("div",{className:"title"},k("Included"))),(null===y||void 0===y?void 0:y.isOptional)&&d.a.createElement(ge.a,{query:"(max-width: 991px)"},(function(e){return!e&&d.a.createElement(be.a,{title:k("Remove service")},d.a.createElement("div",{className:"selected-excursions-service-remove"},d.a.createElement("span",{onClick:function(){window.confirm("".concat(k("Are you sure you want to delete")," ").concat(v,"?"))&&C()}},d.a.createElement(i.a,{icon:"times"}))))})))},ye=(n(2311),function(e){var t=e.readonly,n=e.selectedServices,f=e.slides,v=e.actions,p=e.tourists,b=e.fetching,g=e.title,E=e.subTitle,y=Object(m.c)(c.b).t,k=Object(u.useState)({showExcursionsModal:!1,showExtraModal:!1}),O=Object(r.a)(k,2),N=O[0],j=O[1],C=Object(u.useContext)(h.a),x=C.extractPrice,T=C.activeCurrency,F=Object(u.useMemo)((function(){return t?(null===n||void 0===n?void 0:n.length)||!1:(null===f||void 0===f?void 0:f.length)||(null===n||void 0===n?void 0:n.length)||!1}),[n,f]),S=function(){j((function(e){return Object(a.a)({},e,{showExcursionsModal:!e.showExcursionsModal})}))},I=function(e){v.deleteSelectedExcursions([e])},A=function(e,t){v.deleteSelectedExcursionTourist([{touristId:t,serviceId:e}])},D=function(e,t){v.addSelectedExcursionTourist([{serviceId:e,touristId:t}])},M=function(e,t){v.deleteExtraTourist([{touristId:t,serviceId:e}])},P=function(e,t){v.addExtraTourist([{touristId:t,serviceId:e}])},R=function(e){v.updateSelectedExcursions(e)},_=function(e){v.deleteSelectedExtra([e])};return F?d.a.createElement(l.a,{className:"dashboard",title:n.length?y(g||"Extra services"):y("Add service")},E&&d.a.createElement("div",{className:"grey m-b-10"},y(E)),d.a.createElement("div",{className:"excursions-services"},n&&n.length>0&&d.a.createElement("div",{className:"selected-excursions-services"},n.map((function(e){return d.a.createElement(Ee,Object.assign({readonly:t,key:e.id},e,{basketTourists:p,onDelete:"Excursion"===e.type?I:_,onDeleteTourist:"Excursion"===e.type?A:M,onAddTourist:"Excursion"===e.type?D:P}))}))),!t&&d.a.createElement("div",{className:"excursions-services-items"},f.map((function(e,t){return d.a.createElement("div",{key:t,className:"excursions-services-item"},d.a.createElement("div",{className:"excursions-services-item-container"},d.a.createElement("div",{className:"excursions-services-item-container-image",style:{backgroundImage:'url("'.concat(e.logo?e.logo:"http://via.placeholder.com/220x165",'")')}}),d.a.createElement("div",{className:"title"},d.a.createElement("div",null,y(e.title))," ",d.a.createElement("div",{className:"price"},e.minPrice&&e.hasDiffrentPrice?d.a.createElement(u.Fragment,null,"".concat(y("from")," ").concat(Object(w.b)(x(e.minPrice,"sum"))," "),d.a.createElement(o.a,{currencyCode:null===T||void 0===T?void 0:T.code,size:14})):y("Free"))),d.a.createElement("div",{className:"item-action",onClick:"Excursions"===e.type?S:(n=e.code,function(){v.changeExtraFilter([n]),j((function(e){return Object(a.a)({},e,{showExtraModal:!e.showExtraModal})}))})},d.a.createElement(i.a,{icon:"plus"}))));var n})))),N.showExcursionsModal&&d.a.createElement(he,{onSave:function(e){j((function(e){return Object(a.a)({},e,{showExcursionsModal:!1})})),R(e)},onClose:S,tourists:p}),N.showExtraModal&&d.a.createElement(L,{tourists:p,onClose:function(){j((function(e){return Object(a.a)({},e,{showExtraModal:!e.showExtraModal})}))}}),b&&d.a.createElement(s.a,null)):null});t.default=Object(f.connect)((function(e){return{slides:C(e),selectedServices:T(e),fetching:e.basketExtra.fetching}}),(function(e){return{actions:Object(v.bindActionCreators)(Object(a.a)({},p.basketExtraActions),e)}}))(ye)},2102:function(e,t,n){"use strict";n.r(t),n.d(t,"Hotels",(function(){return te}));var a=n(3),r=n(8),i=n(2262),c=n(258),l=n(2107),o=n(106),s=n(0),u=n.n(s),d=n(17),m=n(79),f=n.n(m),v=n(2213),p=n(2214),h=n(23),b=n(1033),g=n(139),E=n(2364),y=n(2227),k=n(1034),O=n(2232),N=n(12),j=n.n(N),C=n(796),x=n(2233),T=function(e){var t=e.cancel,n=e.info,a=e.policies,r=Object(d.c)(c.b).t;return u.a.createElement(x.a,{size:"sm",modalTitle:r("Cancellation conditions"),onClose:t},a&&u.a.createElement("ul",{className:"bullets"},a.map((function(e,t){return u.a.createElement("li",{key:"policy_".concat(t)},"".concat(r("date_from")," ").concat(j()(e.dateFrom).format("HH:mm DD MMM")," = "),0===e.amount&&""!==e.comment&&u.a.createElement("span",null,e.comment),e.amount>0&&u.a.createElement("span",null,e.amount,u.a.createElement(O.a,{currencyCode:e.currencyCode}),e.comment&&u.a.createElement("div",null,e.comment)))}))),null===n||void 0===n?void 0:n.map((function(e,t){return u.a.createElement("div",{key:t,className:"m-b-20"},u.a.createElement("pre",{style:{width:"100%",whiteSpace:"pre-wrap"}},e.description))})))},w=n(2211),F=function(e,t){var n=Object(d.c)(c.b).t;return Object(s.useMemo)((function(){if(!e)return(null===t||void 0===t?void 0:t.name)||"";if(null===t||void 0===t?void 0:t.hasFewPlaces)return 0===(null===t||void 0===t?void 0:t.restPlaces)?n("There are few places"):n("Rooms left ".concat(t.restPlaces));switch(null===t||void 0===t?void 0:t.visualStatus){case 0:return n("AvailableStatus");case 1:return n("RequestStatus");case 2:return n("NotAvailableStatus");default:return n("Undefined")}}),[e,t])},S=function(e){return Object(s.useMemo)((function(){if(null===e||void 0===e?void 0:e.hasFewPlaces)return"red";switch(null===e||void 0===e?void 0:e.visualStatus){case 0:return"green";case 1:return"yellow";case 2:return"orange";default:return"green"}}),[e])},I=function(e,t){return Object(s.useMemo)((function(){return Object(w.d)({dateFrom:j()(e.dateBegin).toDate(),dateTo:j()(e.dateBegin).toDate(),searchType:"None"!==t?r.filterConstants.SEARCH_TYPE.TOURS:r.filterConstants.SEARCH_TYPE.HOTELS})}),[e,t])},A=n(140),D=(n(2275),function(e){var t,n,r,i,l,m,f,v,p,N,x,w,D,M,P,R,_,B,V,z,H,L,q,U,Y,G,K,W=e.hotel,X=e.isBooking,Z=void 0===X||X,J=e.getHotelRoomInfo,Q=e.cancellationInfo,$=e.cancellationPolicies,ee=e.hasLinks,te=e.transportType,ne=e.onRemove,ae=Object(d.c)(c.b).t,re=Object(A.e)(),ie=Object(s.useState)({showCancellation:!1,isRoomModalOpened:!1}),ce=Object(h.a)(ie,2),le=ce[0],oe=ce[1],se=F(Z,W.status),ue=S(W.status),de=I(W,te);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"basket-hotel"},u.a.createElement("div",{className:"basket-hotel-image"},ee?u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/hotel/".concat(null===(t=W.subService)||void 0===t||null===(n=t.hotel)||void 0===n?void 0:n.url).concat(de)},W.subService.hotel.photo?u.a.createElement("img",{src:"".concat(b.c).concat(W.subService.hotel.photo,"?w=180&h=140&mode=crop"),alt:""}):u.a.createElement(E.a,null)):W.subService.hotel.photo?u.a.createElement("img",{src:"".concat(b.c).concat(W.subService.hotel.photo,"?w=180&h=140&mode=crop"),alt:""}):u.a.createElement(E.a,null)),u.a.createElement("div",{className:"basket-hotel-info"},u.a.createElement("div",{className:"basket-hotel-info-title"},ee?u.a.createElement("a",{href:"/hotel/".concat(null===(r=W.subService)||void 0===r||null===(i=r.hotel)||void 0===i?void 0:i.url).concat(de),target:"_blank",rel:"noopener noreferrer",className:"title"},u.a.createElement("span",{className:"m-r-5"},null===(l=W.subService)||void 0===l||null===(m=l.hotel)||void 0===m?void 0:m.name)):u.a.createElement("span",{className:"m-r-5"},null===(f=W.subService)||void 0===f||null===(v=f.hotel)||void 0===v?void 0:v.name),u.a.createElement(y.a,{rating:null===W||void 0===W||null===(p=W.subService)||void 0===p||null===(N=p.hotel)||void 0===N||null===(x=N.stars)||void 0===x?void 0:x.code,size:12}),W.subService.hotel&&u.a.createElement("div",{className:"basket-hotel-info-city"},u.a.createElement(k.a,{title:u.a.createElement("div",null,"".concat(null===(w=W.subService)||void 0===w||null===(D=w.hotel)||void 0===D||null===(M=D.city)||void 0===M?void 0:M.name," ").concat((null===(P=W.subService)||void 0===P||null===(R=P.hotel)||void 0===R?void 0:R.town)||""," ").concat((null===(_=W.subService)||void 0===_||null===(B=_.hotel)||void 0===B||null===(V=B.town)||void 0===V?void 0:V.name)||""))},u.a.createElement("span",null,W.subService.hotel.town?W.subService.hotel.town.name:null===(z=W.subService)||void 0===z||null===(H=z.hotel)||void 0===H||null===(L=H.city)||void 0===L?void 0:L.name)))),u.a.createElement("div",{className:"basket-hotel-info-additionally"},u.a.createElement("span",{className:"basket-hotel-info-room"},u.a.createElement("span",{className:"small ".concat((null===W||void 0===W||null===(q=W.subService)||void 0===q||null===(U=q.hotel)||void 0===U?void 0:U.hasFullDescription)&&"link").trim(),onClick:function(){var e,t,n,r,i;(null===W||void 0===W||null===(e=W.subService)||void 0===e||null===(t=e.hotel)||void 0===t?void 0:t.hasFullDescription)&&(null===J||void 0===J||J(null===W||void 0===W||null===(n=W.subService)||void 0===n||null===(r=n.hotel)||void 0===r?void 0:r.id,null===(i=W.subService1)||void 0===i?void 0:i.id),oe((function(e){return Object(a.a)({},e,{isRoomModalOpened:!0})})))}},null===W||void 0===W||null===(Y=W.subService1)||void 0===Y?void 0:Y.name)),u.a.createElement("div",{className:"basket-hotel-info-meals"},u.a.createElement("span",{className:"small"},null===W||void 0===W||null===(G=W.subService2)||void 0===G?void 0:G.name)))),u.a.createElement("div",{className:"basket-hotel-tour-info"},u.a.createElement("div",{className:"text-right m-b-5"},(null===(K=W.attributes)||void 0===K?void 0:K.isOptional)&&u.a.createElement(k.a,{title:ae("Remove hotel")},u.a.createElement(o.c,{color:"danger",size:"sm",plain:!0,onClick:function(){null===ne||void 0===ne||ne(W.id)}},u.a.createElement("span",null,ae("Remove")),u.a.createElement("span",{className:"m-l-5"},u.a.createElement(g.a,{icon:"times"}))))),u.a.createElement("div",{className:"basket-hotel-tour-info-item small"},u.a.createElement("div",null,"".concat(j()(W.dateBegin).format(re.localeDateFormat)," - ").concat(j()(W.dateEnd).format(re.localeDateFormat)," (").concat(ae("night_count",{count:W.duration}),")"))),u.a.createElement("div",{className:"basket-hotel-tour-info-item small"},u.a.createElement("div",null,u.a.createElement("span",null,ae("Number of guests"))," ",W.touristCount),u.a.createElement("span",{className:ue},se))),u.a.createElement("div",{className:"basket-hotel-cancellation"},le.showCancellation&&u.a.createElement(T,{info:Q,policies:$,cancel:function(){oe((function(e){return Object(a.a)({},e,{showCancellation:!1})}))}})),(null===W||void 0===W?void 0:W.tariffInfo)&&u.a.createElement("div",{className:"tariff-info"},u.a.createElement("div",{className:"m-t-10"},W.tariffInfo.rateComment),W.tariffInfo.taxes&&W.tariffInfo.taxes.length>0&&u.a.createElement("div",{className:"m-t-10"},u.a.createElement("span",null,ae("Taxes")),u.a.createElement("ul",null,W.tariffInfo.taxes.map((function(e){return u.a.createElement("li",{key:e.currencyCode},e.amount," ",u.a.createElement(O.a,{currencyCode:e.currencyCode}),e.included?"(".concat(ae("included"),")"):"(".concat(ae("not included"),")"))})))))),le.isRoomModalOpened&&u.a.createElement(C.a,{onClose:function(){oe((function(e){return Object(a.a)({},e,{isRoomModalOpened:!1})}))}}))}),M=(n(2273),function(e){var t,n,a,r,i,l,s,m,f,v,p,h,E=e.hotel,O=e.transportType,N=e.onRemove,C=Object(d.c)(c.b).t,x=I(E,O);return u.a.createElement("div",{className:"basket-mobile-block-image"},u.a.createElement("div",{className:"basket-mobile-block-title"},C("Hotel")),u.a.createElement("div",{className:"basket-mobile-block-image",style:{backgroundImage:"url(".concat(E.subService&&"".concat(b.c).concat(E.subService.hotel.photo,"?w=180&h=140&mode=crop")||"/userfiles/images/site-adaptive/noimage.png","?w=200&h=273&mode=crop)")}}),u.a.createElement("div",{className:"basket-mobile-block-info"},(null===(t=E.attributes)||void 0===t?void 0:t.isOptional)&&u.a.createElement(k.a,{title:C("Remove hotel")},u.a.createElement(o.c,{color:"danger",plain:!0,onClick:function(){null===N||void 0===N||N(E.id)}},u.a.createElement(g.a,{icon:"times"}))),u.a.createElement("div",null,u.a.createElement(y.a,{rating:null===E||void 0===E||null===(n=E.subService)||void 0===n||null===(a=n.hotel)||void 0===a||null===(r=a.stars)||void 0===r?void 0:r.code,size:12})),u.a.createElement("div",{className:"basket-mobile-block-info-title"},u.a.createElement("a",{href:"/hotel/".concat(null===(i=E.subService)||void 0===i||null===(l=i.hotel)||void 0===l?void 0:l.url).concat(x),target:"_blank",rel:"noopener noreferrer",className:"title"},null===(s=E.subService)||void 0===s||null===(m=s.hotel)||void 0===m?void 0:m.name," ")),u.a.createElement("div",{className:"basket-mobile-block-info-city"},E.subService.hotel.town?E.subService.hotel.town.name:null===(f=E.subService)||void 0===f||null===(v=f.hotel)||void 0===v||null===(p=v.city)||void 0===p?void 0:p.name)),u.a.createElement("div",{className:"basket-data-list-container"},u.a.createElement("ul",{className:"basket-data-list"},u.a.createElement("li",null,u.a.createElement("span",{className:"name"},C("Dates")),u.a.createElement("span",{className:"value"},"".concat(j()(E.dateBegin).format("DD.MM.YYYY")," - ").concat(j()(E.dateEnd).format("DD.MM.YYYY")))),u.a.createElement("li",null,u.a.createElement("span",{className:"name"},C("Nights")),u.a.createElement("span",{className:"value"},C("night_count",{count:E.duration}))),(null===E||void 0===E?void 0:E.subService1)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},C("Room")),u.a.createElement("span",{className:"value"},E.subService1.name)),(null===E||void 0===E?void 0:E.subService2)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},C("Meal")),u.a.createElement("span",{className:"value"},E.subService2.name)),(null===E||void 0===E||null===(h=E.tariffInfo)||void 0===h?void 0:h.isNonRefundable)&&u.a.createElement("li",null,u.a.createElement("span",{className:"name"},C("Tariff")),u.a.createElement("span",{className:"value"},C("Tariff is non refundable"))))))}),P=n(10),R=n(2334),_=n(264),B=n(21),V=n(36),z=n(2235),H=n(2237),L=n(2098),q=n(797),U=(n(2314),function(e){var t=e.showMessage,n=e.adults,r=e.children,i=e.maxAdultsCount,l=e.maxChildrenCount,m=e.pluginBefore,f=e.pluginAfter,v=e.label,p=e.minAdultsCount,b=e.onChange,g=e.childrenAges,E=e.message,y=Object(d.c)(c.f).t,k=u.a.useRef(),O=Object(s.useState)({open:!1,showMessage:null!==t&&void 0!==t&&t,adults:0,children:[]}),N=Object(h.a)(O,2),j=N[0],C=N[1];Object(s.useEffect)((function(){C((function(e){return Object(a.a)({},e,{adults:n,children:r})}))}),[r,n]);var x=Object(q.a)(r,i,l,n);Object(s.useEffect)((function(){C((function(e){return Object(a.a)({},e,{adults:x.adults,children:x.children})})),b({adults:x.adults,children:x.children})}),[x]),Object(s.useEffect)((function(){var e,n,r;t&&(C((function(e){return Object(a.a)({},e,{showMessage:t})})),null===k||void 0===k||null===(e=k.current)||void 0===e||null===(n=e.triggerRef)||void 0===n||null===(r=n.current)||void 0===r||r.click())}),[t]);var T="undefined"!==typeof i?i:16,w="undefined"!==typeof l?l:7,F="undefined"!==typeof p?p:0;return u.a.createElement(z.a,{label:v||y("Tourists"),ref:k,className:"rooms-dropdown",onClose:function(){C((function(e){return b({children:e.children,adults:e.adults}),Object(a.a)({},e,{open:!1,showMessage:!1})}))},onOpen:function(){C((function(e){return Object(a.a)({},e,{open:!0})}))},trigger:u.a.createElement("div",{className:"tourists-value"},m&&u.a.createElement("span",{className:"rooms-plugin plugin-before"},m),u.a.createElement("span",null,u.a.createElement("span",null,"".concat(y("adultWithCount",{count:j.adults}),"  ").concat(j.children.length>0?", "+y("childWithCount",{count:j.children.length}):"").trim())),f&&u.a.createElement("span",{className:"rooms-plugin plugin-after"},f)),footer:function(e){var t=e.close;return u.a.createElement(o.c,{color:"success",onClick:t},y("Select"))}},u.a.createElement("div",{className:"tours-search-filter-tourists"},j.showMessage&&u.a.createElement("span",{className:"red"},E),u.a.createElement(Y,{children:j.children,childrenAges:g,adults:j.adults,maxAdults:T,maxChildren:w,minAdults:F,onAdultsChange:function(e){C((function(t){return Object(a.a)({},t,{adults:e})}))},onChildrenChange:function(e){var t=Object(B.a)(j.children);if(t.length>e)t=Object(V.f)(t);else if(t.length<e){var n=g||[0],r=Object(h.a)(n,1)[0];t.push(r)}C((function(e){return Object(a.a)({},e,{children:t})}))},onChildAgeChanged:function(e){return function(t){C((function(n){return Object(a.a)({},n,{children:n.children.map((function(n,a){return a===e?t:n}))})}))}}})))}),Y=function(e){var t=e.onAdultsChange,n=e.onChildrenChange,a=e.onChildAgeChanged,r=e.adults,i=e.children,l=e.maxAdults,o=e.maxChildren,s=e.childrenAges,m=e.minAdults,f=Object(d.c)(c.f).t,v=(null===s||void 0===s?void 0:s.map((function(e){return{label:f("childWithCountAges",{count:e}),value:e}})))||[];return u.a.createElement("div",{className:"tours-search-filter-room"},u.a.createElement("div",{className:"filter-room-item"},u.a.createElement("span",null,f("Adults")),u.a.createElement(H.a,{min:m,max:l,value:r,onChange:t})),u.a.createElement("div",{className:"filter-room-item"},u.a.createElement("span",null,f("Children")),u.a.createElement(H.a,{min:0,max:o,value:i.length,onChange:n})),i&&i.length>0&&i.map((function(e,t){return u.a.createElement("div",{className:"filter-room-item",key:e+"-"+t},u.a.createElement("span",null,f("Child age",{age:t+1})),u.a.createElement(L.b,{clearable:!1,options:v,labelKey:"label",valueKey:"value",onChange:a(t),value:e}))})))},G=n(2230),K=n(340),W=n(1035),X=n(39),Z=n(9);function J(){var e=Object(P.a)(["\n  .styled-accommodation-search {\n    display: flex;\n    align-items: center;\n    background-color: #f0f0f7;\n    padding: 1rem;\n    .styled-accommodation-search-item {\n      padding-right: 1rem;\n      &:last-child {\n        padding-right: 0;\n      }\n      .tourists-value {\n        width: 100%;\n        padding: 0 0.75rem;\n        border: 1px solid #e1e1e1;\n        border-radius: 4px;\n        outline: 0;\n        line-height: 38px;\n        height: 38px;\n        transition: border-color 150ms, box-shadow 150ms;\n        background: #ffffff;\n        &:hover {\n          border-color: rgba(0, 184, 199, 0.5);\n        }\n      }\n    }\n  }\n  .styled-accommodation-results {\n    position: relative;\n    .styled-accommodation-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0.5rem;\n      border-bottom: 1px solid #eee;\n      margin-bottom: 0.25rem;\n      &:last-child {\n        border-bottom: 0;\n      }\n    }\n    .styled-accommodation-item-header {\n      position: sticky;\n      top: 0;\n      background-color: #ffffff;\n      margin-bottom: 0;\n      margin: 1.5rem 0 0.5rem 0;\n      z-index: 1;\n    }\n    .styled-accommodation-item-room {\n      flex: 0 0 30%;\n      padding-right: 0.5rem;\n    }\n    .styled-accommodation-item-code {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-pansion {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-status {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-surcharge {\n      flex: 0 0 15%;\n    }\n    .styled-accommodation-item-add {\n      flex: 0 0 10%;\n      text-align: right;\n    }\n    "," {\n      padding-left: 0;\n      margin-bottom: 0.125rem;\n    }\n  }\n"]);return J=function(){return e},e}var Q=function(e){var t=e.isBooking,n=Object(d.c)(c.b).t,a=Object(s.useContext)(W.a),i=a.activeCurrency,l=a.extractPrice,m=Object(X.useDispatch)(),f=Object(X.useSelector)((function(e){return{showModal:e.basketAccommodation.showModal,accommodation:e.basketAccommodation.accommodation,filter:e.basketAccommodation.filter,tour:e.basketData.tour,fetching:e.basketAccommodation.fetching}}),X.shallowEqual),v=f.showModal,p=f.accommodation,h=f.filter,b=f.tour,g=f.fetching,E=function(){m(r.basketAccommodationActions.closeAccommodationModal())},y=function(e){return function(){m(r.basketAccommodationActions.addAccommodation(e.guid)),E()}};return v?u.a.createElement(x.a,{modalTitle:n("Add accommodation"),scrollable:!0,onClose:E},u.a.createElement(ee,null,u.a.createElement("div",{className:"styled-accommodation-search"},u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(R.a,{label:n("Date from"),onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({dateFrom:j()(e).format("YYYY-MM-DD")}))},minDate:new Date(null===b||void 0===b?void 0:b.dateBegin),maxDate:new Date(null===b||void 0===b?void 0:b.dateEnd),format:"dd.MM.yyyy",value:h.dateFrom})),u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(R.a,{label:n("Date to"),onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({dateTo:j()(e).format("YYYY-MM-DD")}))},minDate:new Date(null===b||void 0===b?void 0:b.dateBegin),maxDate:new Date(null===b||void 0===b?void 0:b.dateEnd),format:"dd.MM.yyyy",value:h.dateTo})),u.a.createElement("div",{className:"styled-accommodation-search-item"},u.a.createElement(_.a,null,n("tourists_count")),u.a.createElement(U,{showMessage:!1,childrenAges:[0,1,2,3,4,5],onChange:function(e){m(r.basketAccommodationActions.changeAccommodationFilter({adults:e.adults,children:e.children}))},maxAdultsCount:h.maxAdultCount,maxChildrenCount:5,adults:h.adults||0,children:h.children,minAdultsCount:1})),u.a.createElement("div",{className:"styled-accommodation-search-item m-t-25"},u.a.createElement(o.c,{onClick:function(){m(r.basketAccommodationActions.fetchAccommodation())}},n("Search")))),u.a.createElement("div",{className:"styled-accommodation-results"},p&&p.length>0&&u.a.createElement("div",{className:"styled-accommodation-item styled-accommodation-item-header"},u.a.createElement("div",{className:"styled-accommodation-item-room"},u.a.createElement(_.a,null,n("Room"))),u.a.createElement("div",{className:"styled-accommodation-item-code"},u.a.createElement(_.a,null,n("Number of guests"))),u.a.createElement("div",{className:"styled-accommodation-item-pansion"},u.a.createElement(_.a,null,n("Pansion"))),u.a.createElement("div",{className:"styled-accommodation-item-status"},u.a.createElement(_.a,null,n("Availability"))),u.a.createElement("div",{className:"styled-accommodation-item-surcharge"},u.a.createElement(_.a,null,n("Surcharge"))),u.a.createElement("div",{className:"styled-accommodation-item-add"},u.a.createElement(_.a,{visible:!1},n("Select")))),null===p||void 0===p?void 0:p.map((function(e){var a,r,c,s,d,m,f;return u.a.createElement("div",{className:"styled-accommodation-item",key:e.guid},u.a.createElement("div",{className:"styled-accommodation-item-room bold"},"".concat(null===(a=e.room)||void 0===a||null===(r=a.roomType)||void 0===r?void 0:r.name," ").concat(null===(c=e.room)||void 0===c||null===(s=c.roomCategory)||void 0===s?void 0:s.name)),u.a.createElement("div",{className:"styled-accommodation-item-code"},null===(d=e.room)||void 0===d||null===(m=d.roomAccomodation)||void 0===m?void 0:m.name),u.a.createElement("div",{className:"styled-accommodation-item-pansion"},null===(f=e.meal)||void 0===f?void 0:f.name),u.a.createElement("div",{className:"styled-accommodation-item-status"},u.a.createElement($,{isBooking:t,accommodation:e})),u.a.createElement("div",{className:"styled-accommodation-item-surcharge"},u.a.createElement("span",{className:"bold"},Object(K.b)(l(e.addPrice,"sum"))," ",u.a.createElement(O.a,{currencyCode:null===i||void 0===i?void 0:i.code}))),u.a.createElement("div",{className:"styled-accommodation-item-add"},u.a.createElement(o.c,{size:"sm",color:"success",onClick:y(e)},n("Select room"))))})),g&&u.a.createElement(G.a,{style:{minWidth:360},description:n("Searching all available rooms")})))):null},$=function(e){var t=e.accommodation,n=e.isBooking,a=F(!!n,t.status),r=S(t.status);return u.a.createElement("span",{className:r},a)},ee=Z.e.div(J(),_.a),te=function(e){var t=e.isBooking,n=void 0===t||t,s=Object(v.a)(Object(a.a)({},r.basketAccommodationActions,{},r.hotelsActions)).actions,m=Object(p.a)((function(e){return{hotels:Object(i.l)(e),cancellationInfo:e.basketCancellation.data,tour:e.basketData.tour,shoppingCart:e.basketData.shoppingCart,accommodation:e.basketAccommodation.accommodation}})),h=m.hotels,b=m.cancellationInfo,g=m.tour,E=m.shoppingCart,y=m.accommodation,k=Object(d.c)(c.b).t,O=function(){s.showAccommodationModal(),(null===y||void 0===y?void 0:y.length)||s.fetchAccommodation()},N=function(e){s.removeAccommodation(e)};return h.length?u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{query:"(max-width: 991px)"},(function(e){var t;return e?h.map((function(e,t){var a;return u.a.createElement(M,{hasLinks:!0,cancellationInfo:null===b||void 0===b||null===(a=b.items)||void 0===a?void 0:a.filter((function(t){return t.serviceId===e.id})),cancellationPolicies:null===b||void 0===b?void 0:b.cancellationPolicies,key:t,hotel:e,isBooking:n,transportType:null===g||void 0===g?void 0:g.transportType,getHotelRoomInfo:s.getHotelRoomInfo,onRemove:N})})):u.a.createElement(l.a,{className:"dashboard",title:k("Accommodation"),actions:(null===E||void 0===E||null===(t=E.allowedActions)||void 0===t?void 0:t.editHotels)&&u.a.createElement(o.c,{size:"sm",color:"primary",onClick:O},k("Add accommodation"))},h.map((function(e,t){var a;return u.a.createElement(D,{cancellationInfo:null===b||void 0===b||null===(a=b.items)||void 0===a?void 0:a.filter((function(t){return t.serviceId===e.id})),key:t,hotel:e,isBooking:n,transportType:null===g||void 0===g?void 0:g.transportType,getHotelRoomInfo:s.getHotelRoomInfo,onRemove:N})})))})),u.a.createElement(Q,{isBooking:n})):null}},2103:function(e,t,n){"use strict";n.r(t),n.d(t,"Tour",(function(){return S}));var a=n(139),r=n(258),i=n(2107),c=n(1034),l=n(10),o=n(57),s=n(14),u=n(0),d=n.n(u),m=n(9),f=n(32);function v(){var e=Object(l.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-transform: none;\n  letter-spacing: normal;\n"]);return v=function(){return e},e}function p(){var e=Object(l.a)(["\n  margin-right: 0.5rem;\n"]);return p=function(){return e},e}function h(){var e=Object(l.a)(["\n  margin-left: 0.5rem;\n"]);return h=function(){return e},e}function b(){var e=Object(l.a)(["\n      justify-content: center;\n      width: 100%;\n    "]);return b=function(){return e},e}function g(){var e=Object(l.a)(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  ",";\n  max-width: 100%;\n  color: ",";\n  font-size: 0.75rem;\n  border-radius: ",";\n  margin: 0;\n  padding: 0.25rem;\n  line-height: 1;\n  background: ",";\n  outline: none;\n  text-align: center;\n  text-decoration: none;\n  vertical-align: middle;\n  white-space: nowrap;\n  pointer-events: ",";\n  user-select: none;\n  transition: ",";\n  &:hover,\n  &:focus {\n    outline: none;\n    color: ",";\n    background: ",";\n  }\n  &:active {\n    outline: none;\n    color: ",";\n    background: ",";\n  }\n"]);return g=function(){return e},e}var E=m.e.div(g(),(function(e){return e.fullWidth&&Object(m.d)(b())}),(function(e){var t=Object(f.b)(e);return e.outline&&e.selected?Object(f.c)(t):e.outline||e.plain?t:Object(f.c)(t)}),(function(e){return e.pill?Object(f.d)({size:e.size,theme:e.theme}):e.theme.radius}),(function(e){return e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):e.plain||e.outline?"transparent":Object(f.b)(e)}),(function(e){return e.disabled?"none":""}),(function(e){return e.disabled?"none":"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)"}),(function(e){var t=Object(f.b)(e);return e.plain?Object(s.a)(.1,t):Object(f.c)(t)}),(function(e){return e.outline?Object(f.b)(e):e.plain?"transparent":e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):"default"===e.color||"light"===e.color?Object(s.a)(.02,Object(f.b)(e)):Object(s.a)(.05,Object(f.b)(e))}),(function(e){var t=Object(f.b)(e);return e.outline&&e.selected?Object(f.c)(t):e.outline||e.plain?t:Object(f.c)(t)}),(function(e){return e.disabled?Object(s.c)(Object(f.b)(e),.5):e.selected?Object(s.a)(.05,Object(f.b)(e)):e.plain||e.outline?"transparent":Object(f.b)(e)})),y=Object(m.e)("span")(h()),k=Object(m.e)("span")(p()),O=Object(m.e)("span")(v()),N=function(e){var t=e.tag,n=e.pluginAfter,a=e.pluginBefore,r=e.href,i=e.target,c=e.onClick,l=e.className,s=e.onMouseLeave,u=e.onMouseEnter,m=e.onMouseDown,f=e.onMouseUp,v=e.id,p=Object(o.a)(e,["tag","pluginAfter","pluginBefore","href","target","onClick","className","onMouseLeave","onMouseEnter","onMouseDown","onMouseUp","id"]);return d.a.createElement(E,Object.assign({id:v,className:l,as:t,target:i,href:r,onClick:c,onMouseEnter:function(e){null===u||void 0===u||u(e)},onMouseLeave:function(e){null===s||void 0===s||s(e)},onMouseDown:function(e){e.preventDefault(),null===m||void 0===m||m(e)},onMouseUp:function(e){null===f||void 0===f||f(e)},"data-component":"badge"},p),a&&d.a.createElement(k,null,a),d.a.createElement(O,null,p.children),n&&d.a.createElement(y,null,n))},j=n(12),C=n.n(j),x=n(17),T=n(190),w=n(2214),F=n(140),S=(n(2310),function(){var e=Object(w.a)((function(e){return e.basketData.tour})),t=Object(x.c)(r.b).t,n=Object(F.e)();if(!e)return null;var l=e.adultCount&&t("adult_count",{count:e.adultCount}),o=e.childCount&&t("child_count",{count:e.childCount}),s=e.infantCount&&t("infant_count",{count:e.infantCount});return d.a.createElement(T.a,{query:"(max-width: 991px)"},(function(r){return r?d.a.createElement("div",{className:"basket-mobile-block"},d.a.createElement("div",{className:"basket-mobile-block-title"},t("Tour")),d.a.createElement("ul",{className:"basket-data-list"},d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Destination")),d.a.createElement("span",{className:"value"},e.departureCity&&e.departureCity.name," -"," ",e.country&&e.country.name)),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Date")),d.a.createElement("span",{className:"value"},C()(e.dateBegin).format(n.localeDateFormat),e.dateBegin!==e.dateEnd&&" - ".concat(C()(e.dateEnd).format(n.localeDateFormat)))),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Nights")),d.a.createElement("span",{className:"value"},t("night_count",{count:e.nights}))),d.a.createElement("li",null,d.a.createElement("span",{className:"name"},t("Tourists")),d.a.createElement("span",{className:"value"},l||o||s?d.a.createElement("span",null,"".concat(l||""," ").concat(o?", "+o:""," ").concat(s?", "+s:"").trim()):null)))):d.a.createElement(i.a,{className:"dashboard"},d.a.createElement("div",{className:"basket-tour-data"},d.a.createElement("div",null,e.departureCity&&d.a.createElement("span",{className:"m-r-10"},e.departureCity.name),d.a.createElement(a.a,{className:"m-r-10 small grey",icon:"chevron-right"}),e.country&&d.a.createElement("span",{className:"m-r-5"},e.country.name),d.a.createElement("span",{className:"m-r-5"},"/"),d.a.createElement("span",{className:"m-r-5"},C()(e.dateBegin).format(n.localeDateFormat),e.dateBegin!==e.dateEnd&&" - ".concat(C()(e.dateEnd).format(n.localeDateFormat)," (").concat(t("night_count",{count:e.nights}),")")),l||o||s?d.a.createElement(u.Fragment,null,d.a.createElement("span",{className:"m-r-5"},"/"),d.a.createElement("span",null,"".concat(l||""," ").concat(o?", "+o:""," ").concat(s?", "+s:"").trim())):null),d.a.createElement(c.a,{title:e.name},d.a.createElement("span",null,d.a.createElement(N,{color:"grey",size:"sm"},e.tourType&&e.tourType.name)))))}))})},2192:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(39),c=n(8),l=n(1036),o=n(1040),s=n(10),u=n(57),d=n(2222),m=n(2223),f=n(2224),v=n(2279),p=n(2216),h=n(2215),b=n(788),g=n(12),E=n.n(g),y=n(79),k=n.n(y),O=n(2246),N=n(258),j=n(17),C=n(1037),x=n(2382),T=n(2325),w=n(2376),F=n(2107),S=n(2226),I=(n(2278),function(e){var t=e.status,n=Object(j.c)(N.a).t;return r.a.createElement(F.a,{className:"dashboard"},r.a.createElement("div",{className:"summary-agency"},r.a.createElement(S.a,{triggerBefore:!0,isOpened:!0,trigger:r.a.createElement("div",{className:"summary-agency-title"},n("Payment"))},r.a.createElement("div",{className:"summary-agency-list"},r.a.createElement("div",{className:"summary-agency-item"},r.a.createElement("div",{className:"summary-agency-item-title"},n("Payment status")),r.a.createElement("div",{className:"summary-orders-item-sum text-orange"},n(t)))))))}),A=n(9);function D(){var e=Object(s.a)(["\n  position: sticky;\n  top: 0;\n"]);return D=function(){return e},e}function M(){var e=Object(s.a)(["\n  display: inline-flex;\n  @media (min-width: 768px) {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return M=function(){return e},e}function P(){var e=Object(s.a)(["\n  position: relative;\n"]);return P=function(){return e},e}var R=Object(C.a)((function(e){var t,n,a,i,c,l,o=e.order,s=e.fetching,g=e.defaultTab,y=e.onTabChange,C=e.fetchDocuments,F=e.sendToEmail,S=e.downloadDocument,A=e.uploadDocument,D=Object(u.a)(e,["order","fetching","defaultTab","onTabChange","fetchDocuments","sendToEmail","downloadDocument","uploadDocument"]),M=Object(j.c)(N.a).t;return r.a.createElement(_,null,r.a.createElement(O.d,null,r.a.createElement(d.a,null,r.a.createElement(m.a,null,r.a.createElement(f.a,{md:9},r.a.createElement(v.a,{tag:"h2",color:"dark",size:"xl",bordered:!0},r.a.createElement(B,null,r.a.createElement("div",null,r.a.createElement("span",{className:"m-r-10"},r.a.createElement("span",{className:"grey text-normal"},(null===o||void 0===o?void 0:o.isPreeBooking)?M("Preorder No"):M("Order No"))," ",null===o||void 0===o?void 0:o.code,r.a.createElement("span",{className:"small grey"},(null===o||void 0===o?void 0:o.dateCreated)&&" ".concat(E()(o.dateCreated).format("DD.MM.YYYY hh:mm:ss")," ")))),r.a.createElement("span",{className:"status-".concat(Object(b.g)(null===o||void 0===o||null===(t=o.status)||void 0===t?void 0:t.visualStatus))},null===o||void 0===o?void 0:o.status.name))),r.a.createElement("div",{className:"order-page-content"},r.a.createElement(p.b,{destroyInactive:!0,variant:"button-group-segmented",size:"lg",segmented:!0,activeTab:g,changeTab:y,panelPadding:!1,panelGutter:!0},r.a.createElement(p.a,{id:"details",title:M("Details")},o&&r.a.createElement(x.a,Object.assign({},D,{order:o}))),r.a.createElement(p.a,{id:"documents",title:M("Documents")},r.a.createElement(T.a,{orderId:null===o||void 0===o?void 0:o.code,fetchDocuments:C,sendToEmail:F,downloadDocument:S,uploadDocument:A}))),s&&r.a.createElement(h.a,null))),r.a.createElement(f.a,{md:3},(null===o||void 0===o||null===(n=o.metaData)||void 0===n||null===(a=n.services)||void 0===a?void 0:a.showPrices)&&r.a.createElement(k.a,{query:"(max-width: 991px)"},(function(e){return e?r.a.createElement(w.a,{fetching:s}):r.a.createElement(V,null,r.a.createElement(w.a,{fetching:s}))})),(null===o||void 0===o||null===(i=o.metaData)||void 0===i||null===(c=i.services)||void 0===c?void 0:c.showPaymentStatus)&&(null===o||void 0===o||null===(l=o.payment)||void 0===l?void 0:l.status)&&r.a.createElement(I,{status:o.payment.status}))))))})),_=A.e.div(P()),B=A.e.div(M()),V=A.e.div(D()),z=n(2378),H=n(1035);t.default=Object(H.b)(Object(z.a)((function(e){var t=Object(i.useSelector)((function(e){return{order:e.order.order,fetching:e.order.fetching,defaultTab:e.basketData.defaultTab}}),i.shallowEqual),n=Object(i.useDispatch)(),s=Object(a.useMemo)((function(){return Object(o.a)(e.initialValues)}),[e.initialValues]);return r.a.createElement(l.b,{value:s},r.a.createElement(R,Object.assign({},e,t,{onTabChange:function(e){n(c.basketActions.setSelectedTab(e))}})))})))},2257:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(10),r=n(14);function i(){var e=Object(a.a)(["\n  position: relative;\n  .react-datepicker {\n    font-family: ",";\n    font-size: 0.875rem;\n    background-color: #fff;\n    color: #000;\n    border: ",";\n    border-radius: ",";\n    display: inline-block;\n    position: relative;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    padding: 0;\n    background: #fff;\n    z-index: 1000;\n    border-radius: ",";\n    box-shadow: 1px 1px 12px rgba(0, 0, 0, 0.15),\n      inset 0px 0px 0px 1px ",";\n    .react-datepicker__triangle {\n      display: none;\n    }\n    .react-datepicker__header {\n      background-color: #ffffff;\n      border: none;\n      .react-datepicker__current-month--hasMonthDropdown {\n        padding: 0.375rem 0;\n      }\n      .react-datepicker__current-month,\n      .react-datepicker-time__header,\n      .react-datepicker-year-header {\n        font-size: 0.75rem;\n        text-align: center;\n        font-weight: 500;\n        text-transform: uppercase;\n        color: ",";\n        margin-bottom: 0.5rem;\n      }\n    }\n    .react-datepicker__day-names {\n      .react-datepicker__day-name {\n        text-transform: capitalize;\n        font-size: 0.75rem;\n        color: #8b9898;\n        width: 36px;\n      }\n    }\n    .react-datepicker__day,\n    .react-datepicker__month-text,\n    .react-datepicker__quarter-text {\n      font-size: 0.875rem;\n      line-height: 36px;\n      width: 36px;\n      height: 36px;\n\n      &.react-datepicker__day--outside-month {\n        color: ",";\n      }\n\n      &:hover {\n        &:not(.react-datepicker__day--keyboard-selected),\n        &:not(.react-datepicker__day--today) {\n          border-radius: ",";\n          background: ",";\n        }\n      }\n\n      &.react-datepicker__day--keyboard-selected {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      &.react-datepicker__day--today {\n        color: #ffffff;\n        border-radius: ",";\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n    }\n  }\n\n  .react-datepicker-popper {\n    margin-top: 0 !important;\n    z-index: 10;\n  }\n  .react-datepicker__input-container {\n    width: 100%;\n    & > input {\n      width: 100%;\n      padding: 0 0.75rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      outline: 0;\n      line-height: 38px;\n      height: 38px;\n      transition: border-color 150ms, box-shadow 150ms;\n      background: #ffffff;\n      &:disabled {\n        border-color: ",";\n        box-shadow: none;\n        background: ",";\n      }\n      &:hover {\n        border-color: ",";\n      }\n      &:focus {\n        border-color: ",";\n        box-shadow: 0 0 3px ",";\n      }\n    }\n  }\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker__navigation {\n    outline: none;\n    .react-datepicker__navigation--previous {\n      outline: none;\n    }\n    .react-datepicker__navigation--next {\n      outline: none;\n    }\n  }\n  .react-datepicker__header__dropdown--select {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 0.75rem;\n    .react-datepicker__month-dropdown-container--select {\n      flex: 1;\n    }\n    .react-datepicker__year-select {\n      flex: 0 0 30%;\n    }\n    .react-datepicker__month-select,\n    .react-datepicker__year-select {\n      width: 100%;\n      padding: 0.375rem 0.5rem;\n      border: 1px solid ",";\n      border-radius: ",";\n      transition: border-color 150ms, box-shadow 150ms;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  }\n  .react-datepicker__close-icon {\n      &:after {\n        background: transparent;\n        bottom: 5px;\n        font-size: 20px;\n        color: ",";\n      }\n    }\n"]);return i=function(){return e},e}var c=n(9).e.div(i(),(function(e){return e.theme.font}),(function(e){return Object(r.c)(e.theme.colors.dark,.1)}),(function(e){return e.theme.border}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.grey}),(function(e){return Object(r.c)(e.theme.colors.grey,.5)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.secondary,.1)}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.radius}),(function(e){return e.theme.colors.warning}),(function(e){return e.theme.colors.warning}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return Object(r.a)(.05,e.theme.colors.white)}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return Object(r.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(r.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.danger}))},2260:function(e,t,n){},2262:function(e,t,n){"use strict";n.d(t,"h",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return v})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return g})),n.d(t,"e",(function(){return E})),n.d(t,"i",(function(){return y})),n.d(t,"f",(function(){return j})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return F}));var a=n(21),r=n(3),i=n(2261),c=n(33),l=function(e){return e.basketData.shoppingCart},o=function(e){return e.basketVisas.visaCenters},s=function(e){return e.basketTransfers.transfers},u=function(e){return e.basketTransfers.transferServices},d=Object(c.a)(o,(function(e){return e})),m=Object(c.a)((function(e){return e.basketVisas.mobileBiometrics}),(function(e){return e})),f=function(e){return e.basketData.fields},v=Object(c.a)(l,(function(e){return(null===e||void 0===e?void 0:e.services)?e.services.filter((function(e){return"Hotel"===e.type})).sort((function(e,t){return new Date(e.dateBegin).valueOf()-new Date(t.dateBegin).valueOf()})):[]})),p=Object(c.a)((function(e){return e.basketFlights.selectedFlights}),(function(e){return e.map((function(e){return Object(r.a)({},e)}))})),h=Object(c.a)([function(e){var t,n;return(null===(t=e.basketData)||void 0===t||null===(n=t.shoppingCart)||void 0===n?void 0:n.tourists)||[]},o,l],(function(e,t,n){return e.map((function(e){var a,i,c,l=t.find((function(t){return t.touristId===e.id}));return Object(r.a)({id:e.id,gender:"m",firstName:"",lastName:"",birthdate:"",citizenshipId:null,passport:"",pasportExpiration:"",pasportExpirationMin:new Date,visaCenter:l?null===(a=l.variants)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.id:null,biometry:null,visa:!1,isBiometry:!1,attributeIds:[],documentType:null,birthDateMax:e.birthDateMax,birthDateMin:e.birthDateMin,isTaxNumber:!!(null===(c=e.extraFields)||void 0===c?void 0:c.taxNumber),taxNumber:e.taxNumber||""},null===n||void 0===n?void 0:n.allowedActions,{roomGroup:e.roomGroup,order:e.order,age:e.age,ageType:e.ageType,editable:!0})})).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),b=Object(c.a)(u,s,(function(e,t){var n=e.map((function(e){var n=null===t||void 0===t?void 0:t.find((function(t){return t.serviceId===e.id}));return Object(r.a)({},e,{transfers:(null===n||void 0===n?void 0:n.variants)||[]})}));return n.some((function(e){return e.isFake}))&&n.some((function(e){return!e.transfers.length}))?[]:n})),g=Object(c.a)((function(e){return e.basketTransfers.selectedTransfers}),u,s,(function(e,t,n){return(null===e||void 0===e?void 0:e.length)?e:(null===t||void 0===t?void 0:t.length)&&n&&n.length?t.reduce((function(e,t){var r,i=n.find((function(e){return e.serviceId===t.id})),c=null;if(null===i||void 0===i||null===(r=i.variants)||void 0===r?void 0:r.length){var l=t.isFake?i.variants[0]:i.variants.find((function(e){return e.selected}));c=l?{serviceId:t.id,variantId:l.id}:null}return c?[].concat(Object(a.a)(e),[c]):e}),[]):[]})),E=Object(c.a)(l,(function(e){return e})),y=Object(c.a)([function(e){return e.basketPageData.offices}],(function(e){return e&&1===e.length?e[0].id:""})),k="context",O="tour",N="local",j=Object(c.a)([function(e){return e.basketData.price}],(function(e){var t,n,a,r,i,c;if(!e)return[];var l=null===(t=e.priceTotal)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.currencyCode,o=null===(a=e.priceTotal)||void 0===a||null===(r=a.tour)||void 0===r?void 0:r.currencyCode,s=null===(i=e.priceTotal)||void 0===i||null===(c=i.local)||void 0===c?void 0:c.currencyCode;return l===o&&[{type:k,code:l},{type:N,code:s}],l!==s&&s!==o||[{type:k,code:l},{type:O,code:o}],[{type:k,code:l},{type:N,code:s},{type:O,code:o}].reduce((function(e,t){return e.some((function(e){return e.code===t.code}))?e:e.concat([t])}),[])})),C=Object(c.a)((function(e){var t;return(null===(t=e.basketData.formValues)||void 0===t?void 0:t.tourists)||[]}),(function(e){return Object(a.a)(e).sort((function(e,t){return t.id<e.id?-1:t.id>e.id?1:0}))})),x=function(e,t,n){var a={id:i.string().required(""),visaCenter:i.string().when("visa",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()}),visa:i.boolean(),isBiometry:i.boolean(),biomentry:i.string(),mobileBiometric:i.string().nullable(),attributeIds:i.array(),isTaxNumber:i.boolean(),taxNumber:i.string().when("isTaxNumber",{is:!0,then:i.string().nullable().required(e("required")),otherwise:i.string().nullable()})};return n.forEach((function(t){a[t.code]=t.required?i[t.type]().nullable().required(e("required")):i[t.type]().nullable()})),i.array().of(i.object().shape(a))},T=function(e,t){return t},w=Object(c.a)([T,f],(function(e,t){return function(e,t,n){return i.object().shape({tourists:x(e,0,n),officeId:i.string().nullable().required(e("required")),agree:i.boolean().oneOf([!0],e("required")),userAgreement:i.boolean().oneOf([!0],e("required")),emergencyPhone:i.string().nullable().required(e("required")),comment:i.string().nullable(),isPrebooking:i.bool(),officeDisabled:i.bool()})}(e.t,e.theme,t)})),F=Object(c.a)([T,f],(function(e,t){return x(e.t,e.theme,t)}))},2266:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o}));n(4),n(115),n(3),n(23);var a=n(0),r=n.n(a),i=(n(2212),n(340),{user:{isAuthenticated:!1,isAgency:!1,roles:[],username:null},onSetUser:function(){},onResetUser:function(){},onLogin:function(){return Promise.resolve()},onLogout:function(){return Promise.resolve()}}),c=r.a.createContext(i),l=c.Consumer,o=function(){return Object(a.useContext)(c)}},2273:function(e,t,n){},2274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyContainer=t.Sticky=void 0;var a=i(n(2321)),r=i(n(2322));function i(e){return e&&e.__esModule?e:{default:e}}t.Sticky=a.default,t.StickyContainer=r.default,t.default=a.default},2275:function(e,t,n){},2276:function(e,t,n){},2277:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a),i=n(2214),c=n(79),l=n.n(c),o=n(2274),s=n(1038),u=function(){return!Object(i.a)((function(e){return e.basketActualization.error}))},d=function(e){var t=e.onSubmit,n=e.timer,i=e.book,c=u();return r.a.createElement(l.a,{query:"(max-width: 991px)"},(function(e){return e?r.a.createElement(a.Fragment,null,r.a.createElement(s.a,{submitAllowed:c,isValid:!0,submitForm:t,timer:n,book:i})):r.a.createElement(o.Sticky,{bottomOffset:24,topOffset:50},(function(e){var a=e.style;return r.a.createElement("div",{style:a},r.a.createElement(s.a,{submitAllowed:c,isValid:!0,submitForm:t,timer:n,book:i}))}))}))},m=function(){var e=u();return r.a.createElement(l.a,{query:"(max-width: 991px)"},(function(t){return t?r.a.createElement(a.Fragment,null,r.a.createElement(s.a,{submitAllowed:e,isValid:!0})):r.a.createElement(o.Sticky,{bottomOffset:24,topOffset:50},(function(t){var n=t.style;return r.a.createElement("div",{style:n},r.a.createElement(s.a,{submitAllowed:e,isValid:!0}))}))}))}},2278:function(e,t,n){},2279:function(e,t,n){"use strict";var a=n(57),r=n(10),i=n(14),c=n(0),l=n.n(c),o=n(9),s=n(32);function u(){var e=Object(r.a)(["\n  color: ",";\n  font-size: ",";\n  margin: 0;\n  margin-bottom: ",";\n  font-weight: ",";\n  padding: 0;\n  padding-bottom: ",";\n  border-bottom: ",";\n  text-transform: ",";\n"]);return u=function(){return e},e}var d=Object(o.e)((function(e){var t=e.tag,n=void 0===t?"h2":t,r=(e.bold,e.children),i=(e.uppercase,e.capitalize,e.color,e.bordered,e.className,Object(a.a)(e,["tag","bold","children","uppercase","capitalize","color","bordered","className"]));return l.a.createElement(n,i,r)}))(u(),s.b,s.d,(function(e){return e.bordered?"0.75rem":"0"}),(function(e){return e.bold?"500":"400"}),(function(e){return e.bordered?".75rem":"0"}),(function(e){return e.bordered?"1px solid "+Object(i.c)(Object(s.b)(e),.1):"none"}),(function(e){return e.capitalize?"capitalize":e.uppercase?"uppercase":"none"}));d.defaultProps={color:"dark",bordered:!0};t.a=function(e){var t=Object.create(null),n=function(n){var a=n.tag;return"string"===typeof a&&o.e.hasOwnProperty(a)?(void 0===t[a]&&(t[a]=e.withComponent(a)),Object(c.createElement)(t[a],n)):Object(c.createElement)(e,n)};return(e.displayName||e.constructor.name)&&(n.displayName="Heading"),n}(d)},2280:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var a=n(21),r=n(258),i=n(2230),c=n(2107),l=n(2215),o=n(0),s=n.n(o),u=n(17),d=n(79),m=n.n(d),f=n(2213),v=n(2214),p=n(8),h=n(2262),b=n(10),g=n(2232),E=n(2220),y=n(2098),k=n(9),O=n(340),N=n(1035);n(2293);function j(){var e=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  background-color: #f0f0f7;\n  padding: 0.5rem 0.75rem;\n  border-radius: 4px;\n  "," {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  @media (max-width: 768px) {\n    display: block;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n  .transfer-info {\n    flex: 1;\n    padding-right: 1rem;\n    @media (max-width: 768px) {\n      margin-bottom: 0.5rem;\n    }\n    .transfer-info-name {\n      font-weight: 500;\n    }\n    .transfer-info-date {\n      font-size: 0.75rem;\n    }\n  }\n  .transfer-selecting {\n    flex: 0 0 35%;\n  }\n"]);return j=function(){return e},e}function C(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  .selected-transfere-price {\n    margin: 0 1rem;\n  }\n"]);return C=function(){return e},e}var x=function(e){var t=e.transfer,n=void 0===t?null:t,a=e.selectedValues,i=void 0===a?[]:a,c=e.readOnly,l=void 0!==c&&c,d=e.onChange,m=Object(o.useContext)(N.a),f=m.activeCurrency,v=m.extractPrice,p=Object(u.c)(r.b).t,h=Object(o.useMemo)((function(){return i.find((function(e){return e.serviceId===n.id}))}),[n,i]),b=Object(o.useMemo)((function(){return function(e){var t;return(null===e||void 0===e||null===(t=e.transfers)||void 0===t?void 0:t.length)?e.transfers.map((function(t){var n=v(t.price,"sum");return{label:s.a.createElement(T,null,s.a.createElement("span",null,"#NO_TRANSFER"===t.name?p("Service not selected"):t.name),n>0?s.a.createElement("span",{className:"selected-transfere-price"},"".concat(n>0?"+":"").concat(Object(O.b)(n))," ",s.a.createElement(g.a,{size:12,currencyCode:null===f||void 0===f?void 0:f.code})):s.a.createElement("span",{className:"selected-transfere-price"})),value:{serviceId:e.id,variantId:t.id},serviceId:e.id,variantId:t.id,name:t.name,price:t.addPrice}})):[]}(n)}),[n,f]),k=Object(E.b)(n.dateBegin);return s.a.createElement(w,null,s.a.createElement("div",{className:"transfer-info"},s.a.createElement("div",{className:"transfer-info-name"},n.subService&&n.subService.name),s.a.createElement("div",{className:"transfer-info-date"},k," "," / ","".concat(n.touristCount," ").concat(p("people"),"."))),b&&b.length>0&&s.a.createElement("div",{className:"transfer-selecting"},s.a.createElement(y.b,{disabled:l,clearable:!1,valueKey:"variantId",value:null===h||void 0===h?void 0:h.variantId,onChange:function(e){var t=b.find((function(t){return t.variantId===e}));t&&(null===d||void 0===d||d(t.value))},options:b})))},T=k.e.div(C()),w=k.e.div(j(),T),F=function(e){var t=e.readOnly,n=void 0!==t&&t,o=Object(f.a)(p.basketTransfersActions).actions,d=Object(v.a)((function(e){return{transfers:Object(h.m)(e),fetching:e.basketTransfers.fetching,selectedTransfers:Object(h.k)(e),shoppingCartId:e.basketData.shoppingCartId}})),b=d.transfers,g=d.fetching,E=d.selectedTransfers,y=d.shoppingCartId,k=Object(u.c)(r.b).t,O=function(e){var t=[].concat(Object(a.a)(E.filter((function(t){return t.serviceId!==e.serviceId}))),[e]);o.setTransfers({shoppingCartId:y,selectedVariants:t})};return s.a.createElement(m.a,{query:"(max-width: 991px)"},(function(e){return e?b.length>0&&!g?s.a.createElement("div",{className:"transfer-mobile basket-mobile-block"},s.a.createElement("div",{className:"basket-mobile-block-title"},k("Transfers")),b.map((function(e){return s.a.createElement(x,{key:e.id,transfer:e,selectedValues:E,onChange:O,readOnly:n})}))):g&&s.a.createElement(i.a,{description:k("Please wait. Loading order information")}):s.a.createElement("div",{className:"transfer-container"},b.length>0&&s.a.createElement(c.a,{className:"dashboard",title:s.a.createElement("div",null,k("Transfers"))},b.map((function(e){return s.a.createElement(x,{key:e.id,transfer:e,selectedValues:E,onChange:O,readOnly:n})}))),g&&s.a.createElement(l.a,null))}))}},2293:function(e,t,n){},2294:function(e,t,n){},2304:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(793),c=n(106),l=function(e){var t=e.value,n=e.label,a=e.active,i=e.color,l=e.onClick,o=e.disabled;return r.a.createElement(c.c,{outline:!0,selected:t===a,size:"md",onClick:function(){null===l||void 0===l||l(t)},color:i,disabled:o},n)};t.a=function(e){var t=e.color,n=void 0===t?"primary":t,a=e.field,c=e.form,o=e.options,s=e.active,u=e.disabled,d=function(e){c.setFieldValue(a.name,e)};return r.a.createElement(i.a,null,null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement(l,{key:e.value,active:s,color:n,value:e.value,label:e.label,onClick:d,disabled:u})})))}},2305:function(e,t,n){"use strict";var a=n(57),r=n(2246),i=n(0),c=n.n(i),l=n(349),o=n.n(l),s=n(189),u=n(264),d=n(2327),m=c.a.forwardRef((function(e,t){var n=e.label,l=e.placeholder,m=e.type,f=e.disabled,v=e.field,p=e.form,h=e.mask,b=e.selectAllOnFocus,g=e.forwardFocusRef,E=Object(a.a)(e,["label","placeholder","type","disabled","field","form","mask","selectAllOnFocus","forwardFocusRef"]),y=Object(i.useRef)(null),k=function(e){var t,n;null===y||void 0===y||null===(t=y.current)||void 0===t||null===(n=t.setFocused)||void 0===n||n.call(t,!0),b&&e.target.select(),E.onFocus&&E.onFocus(e)},O=function(e){var t,n;null===y||void 0===y||null===(t=y.current)||void 0===t||null===(n=t.setFocused)||void 0===n||n.call(t,!1),E.onBlur&&E.onBlur(e),(null===p||void 0===p?void 0:p.handleBlur)&&p.handleBlur(e)},N=Object(r.f)(p.errors,v.name),j=Object(r.f)(p.touched,v.name);return c.a.createElement(s.a,null,n&&c.a.createElement(u.a,null,n),c.a.createElement("div",{className:"input-container"},h?c.a.createElement(o.a,Object.assign({},E,v,{mask:h,value:v.value,placeholder:l,disabled:f,type:m||"text",ref:t,render:function(e,t){return c.a.createElement("input",Object.assign({ref:function(t){var n;(n=t)&&(null===g||void 0===g||g(v.name,n.focus)),null===e||void 0===e||e(t)}},t,{className:j&&N&&"tourist-input-error"}))},onFocus:k,onBlur:O})):c.a.createElement("input",Object.assign({},E,v,{className:j&&N&&"tourist-input-error",value:v.value,placeholder:l,disabled:f,type:m||"text",ref:function(e){var n;(n=e)&&(null===g||void 0===g||g(v.name,n.focus.bind?n.focus.bind(n):n.focus)),null===t||void 0===t||t(e)},onFocus:k,onBlur:O}))),c.a.createElement(d.a,{error:N,touched:j,ref:y}))}));t.a=m},2306:function(e,t,n){"use strict";var a=n(3),r=n(57),i=n(2246),c=n(0),l=n.n(c),o=n(2265),s=n.n(o),u=n(264),d=(n(2264),n(349)),m=n.n(d),f=n(2257),v=n(2327),p=l.a.forwardRef((function(e,t){var n=e.placeholder,o=void 0===n?"":n,d=e.disabled,p=void 0!==d&&d,h=(e.format,e.clearable),b=void 0!==h&&h,g=e.year,E=void 0!==g&&g,y=e.field,k=e.mask,O=void 0===k?null:k,N=e.label,j=e.form,C=e.forwardFocusRef,x=e.minDate,T=e.maxDate,w=e.locale,F=Object(r.a)(e,["placeholder","disabled","format","clearable","year","field","mask","label","form","forwardFocusRef","minDate","maxDate","locale"]),S=Object(c.useRef)(null);Object(c.useImperativeHandle)(t,(function(){return Object(a.a)({},S.current||{})}));var I=function(e){e&&(null===C||void 0===C||C(y.name,e.focus.bind(e)))},A=Object(i.f)(j.errors,y.name),D=Object(i.f)(j.touched,y.name);return l.a.createElement(f.a,null,N&&l.a.createElement(u.a,{className:D&&A&&"tourist-error"},N),l.a.createElement(s.a,Object.assign({},F,{locale:w,onKeyDown:function(e){var t,n;"Tab"===e.key&&(null===(t=S.current)||void 0===t||null===(n=t.setOpen)||void 0===n||n.call(t,!1))},minDate:x,maxDate:T,placeholderText:o,isClearable:b,disabled:p,dateFormat:"dd.MM.yyyy",selected:y.value?new Date(y.value):void 0,onChange:function(e){var t;j.setFieldValue(y.name,e),null===(t=F.onChange)||void 0===t||t.call(F,e)},peekNextMonth:E,showMonthDropdown:E,showYearDropdown:E,dropdownMode:E?"select":void 0,ref:S,customInput:O?l.a.createElement(m.a,{mask:O,render:function(e,t){return l.a.createElement("input",Object.assign({ref:function(t){null===e||void 0===e||e(t),null===I||void 0===I||I(t)}},t,{className:D&&A&&"tourist-input-error"}))}}):void 0})),l.a.createElement(v.a,{error:A,touched:D}))}));t.a=p},2309:function(e,t,n){"use strict";var a=n(2246),r=n(0),i=n.n(r),c=n(56),l=n(789),o=n(264),s=n(254),u=n(2098),d=n(2327),m=i.a.forwardRef((function(e,t){var n=e.label,m=e.pluginBefore,f=e.pluginAfter,v=e.field,p=e.form,h=e.loading,b=e.className,g=e.forwardFocusRef,E=e.style,y=e.placeholder,k=e.valueKey,O=void 0===k?"value":k,N=e.labelKey,j=void 0===N?"label":N,C=e.tabIndex,x=e.clearable,T=e.onChange,w=e.disabled,F=e.optionRenderer,S=e.options,I=Object(r.useRef)(null),A=function(e){e&&(null===g||void 0===g||g(v.name,e.focus.bind(e)))},D=Object(r.useMemo)((function(){return Array.isArray(S)?S.find((function(e){return e[O]===v.value})):void 0}),[v.value,S]),M=Object(a.f)(p.errors,v.name),P=Object(a.f)(p.touched,v.name);return i.a.createElement(u.a,{className:"select-formik ".concat(b||"").trim(),style:E},n&&i.a.createElement(o.a,null,n),i.a.createElement("div",{className:"select-container ".concat(P&&M?"tourist-input-error":"").trim()},m&&m,i.a.createElement(l.a,{onFocus:function(){var e,t;null===(e=I.current)||void 0===e||null===(t=e.setFocused)||void 0===t||t.call(e,!0)},onBlur:function(e){var t,n,a;null===(t=I.current)||void 0===t||null===(n=t.setFocused)||void 0===n||n.call(t,!1),null===p||void 0===p||null===(a=p.setFieldTouched)||void 0===a||a.call(p,null===v||void 0===v?void 0:v.name,!0)},options:S,placeholder:y,onChange:function(e){p.setFieldValue(v.name,e[O]),null===T||void 0===T||T(e[O])},id:v.name,isLoading:h,value:D,getOptionValue:function(e){return e[O]},getOptionLabel:function(e){return e[j]},tabIndex:C,isClearable:x,isDisabled:w,components:{Option:function(e){return i.a.createElement(c.z.Option,e,F?F(e):e.children)},LoadingIndicator:function(){return i.a.createElement(s.a,{style:{marginRight:"0.5rem"},size:16})}},ref:function(e){null===t||void 0===t||t(e),null===A||void 0===A||A(e)}}),f&&f),i.a.createElement(d.a,{touched:P,error:M,ref:I}))}));t.a=m},2310:function(e,t,n){},2311:function(e,t,n){},2312:function(e,t,n){},2313:function(e,t,n){},2314:function(e,t,n){},2315:function(e,t,n){},2316:function(e,t,n){},2317:function(e,t,n){},2318:function(e,t,n){},2321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=o(r),c=o(n(67)),l=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=function(e){function t(){var e,n,a;s(this,t);for(var r=arguments.length,i=Array(r),c=0;c<r;c++)i[c]=arguments[c];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={isSticky:!1,wasSticky:!1,style:{}},a.handleContainerEvent=function(e){var t=e.distanceFromTop,n=e.distanceFromBottom,r=e.eventSource,i=a.context.getParent(),c=!1;a.props.relative&&(c=r!==i,t=-(r.scrollTop+r.offsetTop)+a.placeholder.offsetTop);var l=a.placeholder.getBoundingClientRect(),o=a.content.getBoundingClientRect().height,s=n-a.props.bottomOffset-o,u=!!a.state.isSticky,d=c?u:t<=-a.props.topOffset&&n>-a.props.bottomOffset;n=(a.props.relative?i.scrollHeight-i.scrollTop:n)-o;var m=d?{position:"fixed",top:s>0?a.props.relative?i.offsetTop-i.offsetParent.scrollTop:0:s,left:l.left,width:l.width}:{};a.props.disableHardwareAcceleration||(m.transform="translateZ(0)"),a.setState({isSticky:d,wasSticky:u,distanceFromTop:t,distanceFromBottom:n,calculatedHeight:o,style:m})},u(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){if(!this.context.subscribe)throw new TypeError("Expected Sticky to be mounted within StickyContainer");this.context.subscribe(this.handleContainerEvent)}},{key:"componentWillUnmount",value:function(){this.context.unsubscribe(this.handleContainerEvent)}},{key:"componentDidUpdate",value:function(){this.placeholder.style.paddingBottom=this.props.disableCompensation?0:(this.state.isSticky?this.state.calculatedHeight:0)+"px"}},{key:"render",value:function(){var e=this,t=i.default.cloneElement(this.props.children({isSticky:this.state.isSticky,wasSticky:this.state.wasSticky,distanceFromTop:this.state.distanceFromTop,distanceFromBottom:this.state.distanceFromBottom,calculatedHeight:this.state.calculatedHeight,style:this.state.style}),{ref:function(t){e.content=c.default.findDOMNode(t)}});return i.default.createElement("div",null,i.default.createElement("div",{ref:function(t){return e.placeholder=t}}),t)}}]),t}(r.Component);d.propTypes={topOffset:l.default.number,bottomOffset:l.default.number,relative:l.default.bool,children:l.default.func.isRequired},d.defaultProps={relative:!1,topOffset:0,bottomOffset:0,disableCompensation:!1,disableHardwareAcceleration:!1},d.contextTypes={subscribe:l.default.func,unsubscribe:l.default.func,getParent:l.default.func},t.default=d},2322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),c=s(i),l=s(n(1)),o=s(n(149));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(e){function t(){var e,n,a;u(this,t);for(var r=arguments.length,i=Array(r),c=0;c<r;c++)i[c]=arguments[c];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.events=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],a.subscribers=[],a.rafHandle=null,a.subscribe=function(e){a.subscribers=a.subscribers.concat(e)},a.unsubscribe=function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e}))},a.notifySubscribers=function(e){if(!a.framePending){var t=e.currentTarget;a.rafHandle=(0,o.default)((function(){a.framePending=!1;var e=a.node.getBoundingClientRect(),n=e.top,r=e.bottom;a.subscribers.forEach((function(e){return e({distanceFromTop:n,distanceFromBottom:r,eventSource:t===window?document.body:a.node})}))})),a.framePending=!0}},a.getParent=function(){return a.node},d(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getChildContext",value:function(){return{subscribe:this.subscribe,unsubscribe:this.unsubscribe,getParent:this.getParent}}},{key:"componentDidMount",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.notifySubscribers)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.rafHandle&&(o.default.cancel(this.rafHandle),this.rafHandle=null),this.events.forEach((function(t){return window.removeEventListener(t,e.notifySubscribers)}))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",a({},this.props,{ref:function(t){return e.node=t},onScroll:this.notifySubscribers,onTouchStart:this.notifySubscribers,onTouchMove:this.notifySubscribers,onTouchEnd:this.notifySubscribers}))}}]),t}(i.PureComponent);m.childContextTypes={subscribe:l.default.func,unsubscribe:l.default.func,getParent:l.default.func},t.default=m},2323:function(e,t,n){},2325:function(e,t,n){"use strict";var a=n(21),r=n(3),i=n(23),c=n(258),l=n(2107),o=n(2279),s=n(2225),u=n(106),d=n(0),m=n.n(d),f=n(17),v=n(39),p=n(75),h=n(8),b=n(2233),g=n(2223),E=n(2224),y=n(2092),k=function(e){var t=e.onClose,n=void 0===t?function(){}:t,a=e.onSendToEmail,r=void 0===a?function(){}:a,l=Object(d.useState)(""),o=Object(i.a)(l,2),v=o[0],p=o[1],h=Object(d.useState)(!1),k=Object(i.a)(h,2),O=k[0],N=k[1],j=Object(f.c)(c.a).t;return m.a.createElement(b.a,{size:"sm",onClose:function(){n("showEmailModal")},modalTitle:j("Sending documents")},m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:12},m.a.createElement(y.a,{className:"inline",label:j("Email"),onChange:function(e){p(e.target.value)}}))),m.a.createElement(g.a,{className:"m-t-10"},m.a.createElement(E.a,{md:12},m.a.createElement(s.a,{label:j("ZIP archive"),checked:O,onChange:function(e){N(e.target.checked)}}))),m.a.createElement(g.a,{className:"m-t-10"},m.a.createElement(E.a,{lg:12,className:"text-right"},m.a.createElement(u.c,{onClick:function(){r(v,O)},disabled:!v},j("Send to email")))))},O=n(2098),N=n(57),j=m.a.forwardRef((function(e,t){e.label;var n=e.name,a=e.type,r=e.placeholder,i=(e.className,e.disabled),c=e.readonly,l=e.autoFocus,o=(e.pluginBefore,e.pluginAfter,e.accept),s=(e.mask,e.onFocus),u=e.onKeyUp,d=e.onClick,f=e.onBlur,v=e.onKeyDown,p=(e.onClear,e.clearable,e.loading,e.value),h=Object(N.a)(e,["label","name","type","placeholder","className","disabled","readonly","autoFocus","pluginBefore","pluginAfter","accept","mask","onFocus","onKeyUp","onClick","onBlur","onKeyDown","onClear","clearable","loading","value"]);return m.a.createElement("input",Object.assign({},h,{value:p,placeholder:r||"",disabled:i,readOnly:c||!1,type:a||"text",name:n||void 0,autoFocus:l,ref:t,accept:o||void 0,onChange:function(e){h.onChange&&h.onChange(e)},onFocus:s&&s,onKeyUp:u&&u,onClick:d&&d,onBlur:f&&f,onKeyDown:v&&v}))})),C=function(e){var t=e.fileTypes,n=e.onClose,a=e.onUploadFile,l=Object(d.useRef)(),o=Object(f.c)(c.a).t,s=Object(d.useState)((function(){return{fileType:(null===t||void 0===t?void 0:t[0])?t[0].code:"",showOther:!1,file:null,isImage:!1}})),v=Object(i.a)(s,2),p=v[0],h=v[1];return m.a.createElement(b.a,{size:"md",onClose:function(){n()},modalTitle:o("Attaching documents to the order")},m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:6},m.a.createElement(O.b,{style:{width:"100%"},label:o("File type"),labelKey:"name",valueKey:"code",className:"inline",clearable:!1,value:p.fileType,options:t,onChange:function(e){h("Other"===e?function(e){return Object(r.a)({},e,{showOther:!0,fileType:""})}:function(t){return Object(r.a)({},t,{showOther:!1,fileType:e})})}})),p.showOther&&m.a.createElement(E.a,{lg:6},m.a.createElement(y.a,{className:"inline",label:o("Other type"),onChange:function(e){h((function(t){return Object(r.a)({},t,{fileType:e.target.value})}))}})," ")),m.a.createElement(g.a,null,m.a.createElement(E.a,{lg:12},m.a.createElement("div",{className:"m-t-20 documents-upload-input"},m.a.createElement(j,{type:"file",name:"file",ref:l,accept:".png, .jpg, .jpeg, .bmp, .tiff, .tif, .gif, .pdf",onChange:function(e){h((function(t){return Object(r.a)({},t,{file:e.target.files[0],isImage:!!~e.target.files[0].type.indexOf("image")})}))}})))),m.a.createElement(g.a,null,m.a.createElement(E.a,{md:12},m.a.createElement("div",{className:"m-t-20 text-right"},m.a.createElement(u.c,{onClick:function(){p.file&&(a(p.file,p.fileType),l.current&&(l.current.value=""))},disabled:!p.file},o("Upload file"))))))};n(2323),t.a=Object(v.connect)((function(e){var t=e.order;return{documentList:t.documentList,fileTypes:t.fileTypes,fetching:t.fetching}}),(function(e){return{actions:Object(p.bindActionCreators)(h.ordersActions,e)}}))((function(e){var t=e.orderId,n=e.documentList,v=e.fetchDocuments,p=e.sendToEmail,h=e.downloadDocument,b=e.uploadDocument,g=Object(f.c)(c.a).t,E=Object(d.useState)({selectedFiles:[],selectedBlanks:[],showFilesModal:!1,showEmailModal:!1}),y=Object(i.a)(E,2),O=y[0],N=y[1];Object(d.useEffect)((function(){n||v(t)}),[]);var j=function(e){return O.selectedBlanks.includes(e)},x=Object(d.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.blanks)||void 0===e?void 0:e.every((function(e){return O.selectedBlanks.includes(e.id)}))}),[null===n||void 0===n?void 0:n.blanks,O.selectedBlanks]),T=Object(d.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.fileGroups)||void 0===e?void 0:e.every((function(e){return e.files.every((function(e){return O.selectedFiles.includes(e.id)}))}))}),[n,O.selectedFiles]),w=function(e){return O.selectedFiles.includes(e)},F=function(e){return function(){var a=e||(O.selectedBlanks.length>1||O.selectedFiles.length>1),r={orderId:t,selectedFiles:O.selectedFiles,selectedBlanks:O.selectedBlanks,zip:a};if(a||O.selectedFiles.length+O.selectedBlanks.length>1)r.fileName="Archive.zip";else{if(1===O.selectedBlanks.length){var i=n.blanks.find((function(e){return e.id===O.selectedBlanks[0]}));r.fileName="".concat(i.name,".").concat(i.format)}if(1===O.selectedFiles.length){var c=n.fileGroups.find((function(e){return e.files.some((function(e){return e.id===O.selectedFiles[0]}))}));if(c){var l=c.files.find((function(e){return e.id===O.selectedFiles[0]}));r.fileName="".concat(l.name,".").concat(l.format)}}}h(r)}},S=function(e,n){return function(){var a={orderId:t,zip:!1,fileName:"".concat(e.name,".").concat(e.format)};"file"===n&&(a=Object(r.a)({},a,{selectedFiles:[e.id],selectedBlanks:[]})),"blank"===n&&(a=Object(r.a)({},a,{selectedFiles:[],selectedBlanks:[e.id]})),h(a)}},I=function(){N((function(e){return Object(r.a)({},e,{showFilesModal:!1})}))},A=function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!1})}))},D=Object(d.useMemo)((function(){return!(O.selectedBlanks.length>0)&&!(O.selectedFiles.length>0)}),[O.selectedBlanks,O.selectedFiles]);return m.a.createElement(d.Fragment,null,(null===n||void 0===n?void 0:n.links)&&n.links.length>0&&m.a.createElement(l.a,{className:"dashboard"},m.a.createElement("div",{className:"documents-links"},m.a.createElement(o.a,{color:"dark",tag:"h4",bordered:!0},g("Useful links")),m.a.createElement("ul",{className:"documents-links-list"},n.links.map((function(e,t){return m.a.createElement("li",{key:t,className:"documents-list-link"},m.a.createElement("a",{href:e.url,className:"link-secondary",target:"_blank",rel:"noopener noreferrer"},e.name))}))))),m.a.createElement("div",{className:"order-documents"},m.a.createElement(l.a,{className:"dashboard"},n&&n.blanks.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(s.a,{onChange:function(e){N((function(t){var a;return Object(r.a)({},t,{selectedBlanks:(null===(a=e.target)||void 0===a?void 0:a.checked)?n.blanks.map((function(e){return e.id})):[]})}))},checked:x,className:"documents-list-title",label:m.a.createElement("div",null,m.a.createElement("span",null,g("Select all forms")))}),m.a.createElement("ul",{className:"documents-list"},n.blanks.map((function(e){return m.a.createElement("li",{key:e.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(t=e.id,function(){N((function(e){return Object(r.a)({},e,{selectedBlanks:j(t)?e.selectedBlanks.filter((function(e){return e!==t})):[].concat(Object(a.a)(e.selectedBlanks),[t])})}))}),checked:j(e.id)}),m.a.createElement("span",{className:"link-secondary",onClick:S(e,"blank")},e.name));var t})))),n&&n.fileGroups.length>0&&m.a.createElement(d.Fragment,null,m.a.createElement(o.a,{color:"dark",tag:"h4",bordered:!0},m.a.createElement(s.a,{onChange:function(e){var t=[];e.target.checked&&n.fileGroups.forEach((function(e){e.files.forEach((function(e){return t.push(e.id)}))})),N((function(e){return Object(r.a)({},e,{selectedFiles:t})}))},checked:T,label:m.a.createElement("div",null,m.a.createElement("span",null,g("Files")))})),m.a.createElement("ul",{className:"documents-list"},n.fileGroups.map((function(e){return e.files.map((function(t){return m.a.createElement("li",{key:t.id,className:"documents-list-item"},m.a.createElement(s.a,{onChange:(n=t.id,function(){N((function(e){return Object(r.a)({},e,{selectedFiles:w(n)?e.selectedFiles.filter((function(e){return e!==n})):[].concat(Object(a.a)(e.selectedFiles),[n])})}))}),checked:w(t.id)}),m.a.createElement("span",{className:"link-secondary",onClick:S(t,"file")},"".concat(e.name," ").concat(t.name)));var n}))})))),O.showFilesModal&&m.a.createElement(C,{onClose:I,onUploadFile:function(e,n){var a=new FormData;a.append("file",e),b({orderId:t,data:a,type:n}),I()},fileTypes:n.fileTypes}),O.showEmailModal&&m.a.createElement(k,{onClose:A,onSendToEmail:function(e,n){p({orderId:t,data:{blankIds:O.selectedBlanks,fileIds:O.selectedFiles,zip:n,email:e}}),A()}}),m.a.createElement("div",{className:"order-documents-actions"},m.a.createElement(u.c,{color:"success",disabled:D,onClick:F(!1)},g("Download")),m.a.createElement(u.c,{color:"success",disabled:D,onClick:F(!0)},g("Download as archive")),m.a.createElement(u.c,{onClick:function(e){N((function(e){return Object(r.a)({},e,{showFilesModal:!0})}))}},g("Upload documents")),m.a.createElement(u.c,{disabled:D,onClick:function(){N((function(e){return Object(r.a)({},e,{showEmailModal:!0})}))}},g("Send to email"))))))}))},2326:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(139),c=n(10),l=n(14),o=n(9),s=n(32);function u(){var e=Object(c.a)(["\n  position: relative;\n  font-size: 0.875rem;\n  padding: 0.5rem 1.5rem 0.5rem 0.75rem;\n  border: 1px solid;\n  margin-bottom: 1rem;\n  border-radius: ",";\n  background-color: ",";\n  border-color: ",";\n  color: ",";\n  &.small {\n    font-size: 0.75rem;\n    padding: 0.375rem 1rem 0.375rem 0.5rem;\n  }\n  .icon-close {\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    cursor: pointer;\n    border-radius: 100%;\n    padding: 0;\n  }\n"]);return u=function(){return e},e}var d=o.e.div(u(),(function(e){return e.theme.radius}),(function(e){return e.color?Object(l.b)(.35,Object(s.b)(e)):Object(l.c)(e.theme.colors.light,1)}),(function(e){return e.color?Object(l.b)(.3,Object(s.b)(e)):Object(l.a)(.05,e.theme.colors.light)}),(function(e){return Object(l.a)(.1,Object(s.b)(e))})),m=function(e){var t=e.color,n=e.children,a=e.dismissable,c=e.onClose,l=e.small,o=e.className;return r.a.createElement(d,{color:t,"data-component":"alert",className:"alert ".concat(o||""," ").concat(l?"small":"").trim()},n,a&&r.a.createElement("span",{className:"icon-close",onClick:c},r.a.createElement(i.a,{icon:"times-circle"})))};m.defaultProps={color:"warning"};t.a=m},2327:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(23),r=n(0),i=n.n(r),c=n(10);function l(){var e=Object(c.a)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  margin-top: 5px;\n  padding: 0.125rem 0.25rem;\n  background: ",";\n  color: #fff;\n  border: 1px solid ",';\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n  z-index: 1;\n  line-height: 1;\n  &:before {\n    position: absolute;\n    left: 5px;\n    top: -5px;\n    width: 0;\n    height: 0;\n    content: "";\n    z-index: 2;\n    border-bottom: 5px solid ',";\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n  }\n"]);return l=function(){return e},e}var o=n(9).e.span(l(),(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.danger})),s=i.a.forwardRef((function(e,t){var n=e.error,c=e.touched,l=Object(r.useState)(!1),s=Object(a.a)(l,2),u=s[0],d=s[1],m=function(e){return function(){d(e)}};return Object(r.useImperativeHandle)(t,(function(){return{setFocused:d}})),c&&n&&!u?i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(o,{onMouseLeave:m(!1),onMouseEnter:m(!0)},n)):null}))},2332:function(e,t,n){"use strict";var a=n(139),r=n(2246),i=n(0),c=n.n(i),l=n(794),o=c.a.forwardRef((function(e,t){var n=e.className,o=void 0===n?"":n,s=e.label,u=void 0===s?"":s,d=e.disabled,m=e.field,f=e.onChange,v=e.checkIcon,p=void 0===v?"check-square":v,h=e.uncheckIcon,b=void 0===h?"square":h,g=e.tabIndex;return c.a.createElement(i.Fragment,null,c.a.createElement(l.a,{tabIndex:g,className:"checkbox ".concat(o||""," ").concat(m.value?"checked":"").trim()},c.a.createElement("input",Object.assign({ref:t,type:"checkbox",disabled:d,checked:m.value,onClick:f},m)),c.a.createElement(a.a,{className:"checkbox-icon",icon:m.value?p:b}),u&&c.a.createElement("span",{className:"checkbox-label"},u)),c.a.createElement(r.a,{name:m.name},(function(e){return c.a.createElement("div",{className:"small red"},e)})))}));t.a=o},2334:function(e,t,n){"use strict";var a=n(57),r=n(0),i=n.n(r),c=n(2265),l=n.n(c),o=(n(2264),n(349)),s=n.n(o),u=n(264),d=n(2257),m=i.a.forwardRef((function(e,t){var n=e.placeholder,r=void 0===n?"":n,c=(e.format,e.clearable),o=void 0!==c&&c,m=e.year,f=void 0!==m&&m,v=e.mask,p=void 0===v?null:v,h=e.value,b=e.label,g=e.disabled,E=void 0!==g&&g,y=e.minDate,k=e.maxDate,O=Object(a.a)(e,["placeholder","format","clearable","year","mask","value","label","disabled","minDate","maxDate"]);return i.a.createElement(d.a,null,b&&i.a.createElement(u.a,null,b),i.a.createElement(l.a,Object.assign({},O,{minDate:y,maxDate:k,disabled:E,placeholderText:r,isClearable:o,dateFormat:"dd.MM.yyyy",selected:h?new Date(h):void 0,onChange:function(e){O.onChange(e)},peekNextMonth:f,showMonthDropdown:f,showYearDropdown:f,dropdownMode:f?"select":void 0,customInput:p?i.a.createElement(s.a,{mask:p}):void 0,ref:t})))}));t.a=m},2337:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(23),r=n(0),i=n.n(r),c=n(795),l=n(2228),o=function(e){var t=e.defaultValue,n=e.onChange,o=e.options,s=e.className,u=e.disabled,d=e.valueKey,m=void 0===d?"value":d,f=e.labelKey,v=void 0===f?"label":f,p=Object(r.useState)({selected:t||null}),h=Object(a.a)(p,2),b=h[0],g=h[1],E=function(e){g({selected:e}),null===n||void 0===n||n(e)};return i.a.createElement(c.b,{className:"".concat(s||"")},o.map((function(e,t){return i.a.createElement(l.a,{disabled:u,key:t,className:e.className||"",label:e[v],value:e[m],checked:e[m]===b.selected,onChange:E})})))}},2364:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(1033);t.a=function(e){return r.a.createElement("img",{src:"".concat(i.c).concat(e.srcpath?e.srcpath:"/userfiles/images/site-adaptive/noimage.png","?w=").concat(e.width?e.width:300,"&h=").concat(e.height?e.height:300,"&mode=crop"),alt:"No photo"})}},2368:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),i=n(2266),c=function(e){var t=e.allowedRoles,n=e.unallowedRoles,a=e.children,c=e.notAllowed,l=void 0===c?null:c;return r.a.createElement(i.a,null,(function(e){var r=e.user;if(!r.isAuthenticated&&t)return l;if(!r.isAuthenticated&&!t)return a;if(t&&t.length>0){var i=!1;if(t.forEach((function(e){r.roles&&r.roles.length>0&&r.roles.includes(e)&&(i=!0)})),(null===n||void 0===n?void 0:n.length)&&n.forEach((function(e){r.roles&&r.roles.length>0&&r.roles.includes(e)&&(i=!1)})),!i)return l}return a}))}},2370:function(e,t,n){"use strict";var a=n(10),r=n(57),i=n(14),c=n(0),l=n.n(c),o=n(9),s=n(264);function u(){var e=Object(a.a)(["\n  textarea {\n    position: relative;\n    display: flex;\n    width: 100%;\n    padding: 0.5rem 0.75rem;\n    border: 1px solid ",";\n    border-radius: ",";\n    outline: 0;\n    transition: border-color 150ms, box-shadow 150ms;\n    justify-content: space-between;\n    align-items: center;\n    background: #ffffff;\n    &:hover {\n      border-color: ",";\n    }\n    &:focus {\n      border-color: ",";\n      box-shadow: 0 0 3px ",";\n    }\n  }\n"]);return u=function(){return e},e}var d=o.e.div(u(),(function(e){return Object(i.b)(.75,e.theme.colors.dark)}),(function(e){return e.theme.radius}),(function(e){return Object(i.c)(e.theme.colors.primary,.5)}),(function(e){return e.theme.colors.primary}),(function(e){return Object(i.c)(e.theme.colors.primary,.5)}));t.a=function(e){var t=e.className,n=e.label,a=e.onChange,i=e.value,c=e.name,o=e.rows,u=e.tabIndex,m=e.required,f=e.placeholder,v=Object(r.a)(e,["className","label","onChange","value","name","rows","tabIndex","required","placeholder"]);return l.a.createElement(d,{className:"".concat(t||"").trim()},n&&l.a.createElement(s.a,null,n),l.a.createElement("textarea",Object.assign({},v,{placeholder:f||"",tabIndex:u,rows:o||3,name:c,required:m,className:"textarea",value:i,onChange:function(e){var t;null===e||void 0===e||null===(t=e.persist)||void 0===t||t.call(e),null===a||void 0===a||a(e)}})))}},2375:function(e,t,n){},2376:function(e,t,n){"use strict";var a=n(3),r=n(258),i=n(106),c=n(0),l=n.n(c),o=n(17),s=n(2277);n(2377);t.a=function(e){var t=e.style,n=e.hasChanges,c=e.updateOrder,u=e.fetching,d=Object(o.c)(r.a).t;return l.a.createElement("div",{className:"order-sidebar account-order-sidebar",style:Object(a.a)({},t)},l.a.createElement(s.b,{style:Object(a.a)({},t),timer:!1,book:!1}),n&&l.a.createElement(i.c,{fullWidth:!0,onClick:c,disabled:u},d("Save")))}},2377:function(e,t,n){},2378:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2246),r=n(2261),i=n(17),c=n(258),l=function(e){return Object(i.d)(c.a)(Object(a.g)({enableReinitialize:!0,mapPropsToValues:function(e){return{tourists:e.initialValues,firstName:"",lastName:"",phone:"",email:"",officeId:"",agree:!1,touristsFill:!1,comment:""}},validationSchema:function(e){var t=e.t;return r.object().shape({tourists:r.array().of(r.object().shape({id:r.string().required(""),firstName:r.string().required(t("required")),lastName:r.string().required(t("required")),birthdate:r.string().nullable().required(t("required")),citizenshipId:r.string().nullable().required(t("required")),passport:r.string().required(t("required")),pasportExpiration:r.string().nullable().required(t("required")),visaCenter:r.string().when("visa",{is:!0,then:r.string().nullable().required(t("required")),otherwise:r.string().nullable(),isTaxNumber:r.boolean(),taxNumber:r.string().when("isTaxNumber",{is:!0,then:r.string().nullable().required(t("required")),otherwise:r.string().nullable()})}),visa:r.boolean(),isBiometry:r.boolean(),biomentry:r.string(),mobileBiometric:r.string().nullable(),attributeIds:r.array(),documentType:r.number().nullable().required()})),comment:r.string().nullable()})},handleSubmit:function(e,t){var n,a;null===(n=(a=t.props).onSubmit)||void 0===n||n.call(a,e)}})(e))}},2382:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(57),r=n(258),i=n(2107),c=n(1034),l=n(0),o=n.n(l),s=n(17),u=n(39),d=n(2103),m=n(2102),f=n(2101),v=n(2368),p=n(2384),h=n(2262),b=n(2100),g=Object(u.connect)((function(e){return{selectedFlight:Object(h.j)(e)}}))((function(e){var t=e.selectedFlight,n=e.readOnly;return(null===t||void 0===t?void 0:t.length)?o.a.createElement(b.default,{readOnly:n,booking:!1}):null})),E=n(2505),y=n(2095),k=Object(u.connect)((function(e){return{attributes:Object(E.b)(e)}}))((function(e){var t=Object.assign({},e);return o.a.createElement(y.default,Object.assign({},t,{collapsible:!0,booking:!1}))})),O=n(2280),N=Object(u.connect)((function(e){var t=e.basketTransfers;return{transfers:t.transfers,transferServices:t.transferServices}}))((function(e){var t=e.transferServices,n=e.readOnly;return(null===t||void 0===t?void 0:t.length)?o.a.createElement(O.a,{collapsible:!0,isBooking:!1,readOnly:n}):null})),j=(n(2375),Object(u.connect)((function(e){var t,n,a,r,i=e.order;return{user:e.auth.user,order:i.order,canceled:-1===(null===(t=i.order)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.visualStatus),editTransfers:null===(a=i.order)||void 0===a||null===(r=a.allowedActions)||void 0===r?void 0:r.editTransfers}}))((function(e){var t,n=e.order,l=void 0===n?null:n,u=e.user,h=e.canceled,b=e.editTransfers,E=Object(a.a)(e,["order","user","canceled","editTransfers"]),y=Object(s.c)(r.a).t;return o.a.createElement("div",{className:"order-details"},l.allowedActions.viewHeading&&o.a.createElement(i.a,{className:"dashboard"},o.a.createElement("div",{className:"order-details-info"},o.a.createElement("div",{className:"list-cols cols-3 small"},o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Customer")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.partner.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.partner.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Branch office")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.branch.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.branch.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Phone number")),o.a.createElement("div",null,l.manager.phone)),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Creator")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,null===u||void 0===u?void 0:u.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},null===u||void 0===u?void 0:u.name)))),o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Lead manager")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.manager.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.manager.name)))),o.a.createElement(v.a,{allowedRoles:[p.a.AGENCY]},o.a.createElement("div",{className:"list-col m-b-10"},o.a.createElement("div",{className:"grey"},y("Contract number")),o.a.createElement("div",null,o.a.createElement(c.a,{title:o.a.createElement("span",null,l.agreement.name)},o.a.createElement("span",{className:"fade-out-text white-fade text-ellipsis-200"},l.agreement.name)))))))),o.a.createElement(d.Tour,null),o.a.createElement(k,E),o.a.createElement(m.Hotels,{isBooking:!1}),o.a.createElement(g,{readOnly:h}),o.a.createElement(N,{readOnly:!b||h}),o.a.createElement(f.default,{tourists:null===E||void 0===E||null===(t=E.values)||void 0===t?void 0:t.tourists,readonly:!l.allowedActions.editExtraServices||h}))})))},2384:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={};n.r(a),n.d(a,"TOURIST",(function(){return r})),n.d(a,"AGENCY",(function(){return i})),n.d(a,"EMPLOYEE",(function(){return c})),n.d(a,"READONLY",(function(){return l})),n.d(a,"DIRECT_PARTNER",(function(){return o})),n.d(a,"ALL",(function(){return s}));var r="Tourist",i="Agent",c="Employee",l="ReadOnly",o="DirectPartner",s=[r,i,c,l,o]},2505:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var a=n(3),r=n(33),i=n(2262),c=function(e){return e.order.order},l=Object(r.a)(c,(function(e){return e?e.tourists.reduce((function(e,t){var n;return e.concat((null===(n=t.attributes)||void 0===n?void 0:n.attributes)?t.attributes.attributes.filter((function(t){return!e.some((function(e){return e.id===t.id}))})):[])}),[]):[]})),o=Object(r.a)([function(e){return e.orderManagerEvaluation.departments},function(e){return e.orderManagerEvaluation.selectedDepartment}],(function(e,t){var n=e.find((function(e){return e.id===t}));return(null===n||void 0===n?void 0:n.managers.map((function(e){return Object(a.a)({},e,{name:e.department&&0!==e.department.id?"".concat(e.name," (").concat(e.department.name,")"):e.name})})))||[]})),s=Object(r.a)([o,function(e){return e.orderManagerEvaluation.selectedManager}],(function(e,t){return e.find((function(e){return e.id===t}))})),u=Object(r.a)([c,i.d,i.h],(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return[];var r=e.tourists.map((function(r){var i,c=n.find((function(e){return e.touristId===r.id})),l=null,o=null;if(c){var s=c.variants.find((function(e){return e.selected}));l=s?s.id:null}var u=t.find((function(e){return e.touristId===r.id}));if(u){var d=u.variants.find((function(e){return e.selected}));o=d?d.id:null}return Object(a.a)({id:r.id,gender:0===r.gender?"m":"f",firstName:r.firstName,lastName:r.lastName,birthdate:new Date(r.birthDate),citizenshipId:r.citizenshipId,passport:"".concat(r.document.series," ").concat(r.document.number),pasportExpiration:new Date(r.document.dateEnd),visaCenter:l||(null===c||void 0===c?void 0:c.variants.length)&&c.variants[0].id||null,biometry:o,visa:!!l,isBiometry:!!o,additional:[],status:r.status,attributeIds:r.attributeIds,documentType:r.document.type,isTaxNumber:!!r.isTaxNumber,taxNumber:r.taxNumber||""},e.allowedActions,{order:r.order,age:r.age,ageType:r.ageType,birthDateMax:r.birthDateMax,birthDateMin:r.birthDateMin,editable:null===(i=r.attributes)||void 0===i?void 0:i.isEditable})}));return r=r.sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))})),d=Object(r.a)([function(e){return e.order.unreadCount}],(function(e){return e}))}}]);